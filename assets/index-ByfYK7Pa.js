(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function o(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(d){if(d.ep)return;d.ep=!0;const f=o(d);fetch(d.href,f)}})();function vg(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var Eo={exports:{}},Kn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df;function Sg(){if(Df)return Kn;Df=1;var x=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(c,d,f){var g=null;if(f!==void 0&&(g=""+f),d.key!==void 0&&(g=""+d.key),"key"in d){f={};for(var h in d)h!=="key"&&(f[h]=d[h])}else f=d;return d=f.ref,{$$typeof:x,type:c,key:g,ref:d!==void 0?d:null,props:f}}return Kn.Fragment=i,Kn.jsx=o,Kn.jsxs=o,Kn}var Hf;function jg(){return Hf||(Hf=1,Eo.exports=Sg()),Eo.exports}var s=jg(),Co={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf;function kg(){if(Lf)return fe;Lf=1;var x=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),g=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),z=Symbol.iterator;function G(v){return v===null||typeof v!="object"?null:(v=z&&v[z]||v["@@iterator"],typeof v=="function"?v:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,I={};function re(v,O,Q){this.props=v,this.context=O,this.refs=I,this.updater=Q||B}re.prototype.isReactComponent={},re.prototype.setState=function(v,O){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,O,"setState")},re.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function ie(){}ie.prototype=re.prototype;function K(v,O,Q){this.props=v,this.context=O,this.refs=I,this.updater=Q||B}var Z=K.prototype=new ie;Z.constructor=K,Y(Z,re.prototype),Z.isPureReactComponent=!0;var Se=Array.isArray;function xe(){}var q={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function U(v,O,Q){var J=Q.ref;return{$$typeof:x,type:v,key:O,ref:J!==void 0?J:null,props:Q}}function V(v,O){return U(v.type,O,v.props)}function se(v){return typeof v=="object"&&v!==null&&v.$$typeof===x}function ae(v){var O={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(Q){return O[Q]})}var qe=/\/+/g;function F(v,O){return typeof v=="object"&&v!==null&&v.key!=null?ae(""+v.key):O.toString(36)}function ve(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(xe,xe):(v.status="pending",v.then(function(O){v.status==="pending"&&(v.status="fulfilled",v.value=O)},function(O){v.status==="pending"&&(v.status="rejected",v.reason=O)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function E(v,O,Q,J,oe){var me=typeof v;(me==="undefined"||me==="boolean")&&(v=null);var Ee=!1;if(v===null)Ee=!0;else switch(me){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(v.$$typeof){case x:case i:Ee=!0;break;case j:return Ee=v._init,E(Ee(v._payload),O,Q,J,oe)}}if(Ee)return oe=oe(v),Ee=J===""?"."+F(v,0):J,Se(oe)?(Q="",Ee!=null&&(Q=Ee.replace(qe,"$&/")+"/"),E(oe,O,Q,"",function(Za){return Za})):oe!=null&&(se(oe)&&(oe=V(oe,Q+(oe.key==null||v&&v.key===oe.key?"":(""+oe.key).replace(qe,"$&/")+"/")+Ee)),O.push(oe)),1;Ee=0;var at=J===""?".":J+":";if(Se(v))for(var Ve=0;Ve<v.length;Ve++)J=v[Ve],me=at+F(J,Ve),Ee+=E(J,O,Q,me,oe);else if(Ve=G(v),typeof Ve=="function")for(v=Ve.call(v),Ve=0;!(J=v.next()).done;)J=J.value,me=at+F(J,Ve++),Ee+=E(J,O,Q,me,oe);else if(me==="object"){if(typeof v.then=="function")return E(ve(v),O,Q,J,oe);throw O=String(v),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function L(v,O,Q){if(v==null)return v;var J=[],oe=0;return E(v,J,"","",function(me){return O.call(Q,me,oe++)}),J}function X(v){if(v._status===-1){var O=v._result;O=O(),O.then(function(Q){(v._status===0||v._status===-1)&&(v._status=1,v._result=Q)},function(Q){(v._status===0||v._status===-1)&&(v._status=2,v._result=Q)}),v._status===-1&&(v._status=0,v._result=O)}if(v._status===1)return v._result.default;throw v._result}var le=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},de={map:L,forEach:function(v,O,Q){L(v,function(){O.apply(this,arguments)},Q)},count:function(v){var O=0;return L(v,function(){O++}),O},toArray:function(v){return L(v,function(O){return O})||[]},only:function(v){if(!se(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return fe.Activity=T,fe.Children=de,fe.Component=re,fe.Fragment=o,fe.Profiler=d,fe.PureComponent=K,fe.StrictMode=c,fe.Suspense=p,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,fe.__COMPILER_RUNTIME={__proto__:null,c:function(v){return q.H.useMemoCache(v)}},fe.cache=function(v){return function(){return v.apply(null,arguments)}},fe.cacheSignal=function(){return null},fe.cloneElement=function(v,O,Q){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var J=Y({},v.props),oe=v.key;if(O!=null)for(me in O.key!==void 0&&(oe=""+O.key),O)!M.call(O,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&O.ref===void 0||(J[me]=O[me]);var me=arguments.length-2;if(me===1)J.children=Q;else if(1<me){for(var Ee=Array(me),at=0;at<me;at++)Ee[at]=arguments[at+2];J.children=Ee}return U(v.type,oe,J)},fe.createContext=function(v){return v={$$typeof:g,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:f,_context:v},v},fe.createElement=function(v,O,Q){var J,oe={},me=null;if(O!=null)for(J in O.key!==void 0&&(me=""+O.key),O)M.call(O,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(oe[J]=O[J]);var Ee=arguments.length-2;if(Ee===1)oe.children=Q;else if(1<Ee){for(var at=Array(Ee),Ve=0;Ve<Ee;Ve++)at[Ve]=arguments[Ve+2];oe.children=at}if(v&&v.defaultProps)for(J in Ee=v.defaultProps,Ee)oe[J]===void 0&&(oe[J]=Ee[J]);return U(v,me,oe)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(v){return{$$typeof:h,render:v}},fe.isValidElement=se,fe.lazy=function(v){return{$$typeof:j,_payload:{_status:-1,_result:v},_init:X}},fe.memo=function(v,O){return{$$typeof:y,type:v,compare:O===void 0?null:O}},fe.startTransition=function(v){var O=q.T,Q={};q.T=Q;try{var J=v(),oe=q.S;oe!==null&&oe(Q,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(xe,le)}catch(me){le(me)}finally{O!==null&&Q.types!==null&&(O.types=Q.types),q.T=O}},fe.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},fe.use=function(v){return q.H.use(v)},fe.useActionState=function(v,O,Q){return q.H.useActionState(v,O,Q)},fe.useCallback=function(v,O){return q.H.useCallback(v,O)},fe.useContext=function(v){return q.H.useContext(v)},fe.useDebugValue=function(){},fe.useDeferredValue=function(v,O){return q.H.useDeferredValue(v,O)},fe.useEffect=function(v,O){return q.H.useEffect(v,O)},fe.useEffectEvent=function(v){return q.H.useEffectEvent(v)},fe.useId=function(){return q.H.useId()},fe.useImperativeHandle=function(v,O,Q){return q.H.useImperativeHandle(v,O,Q)},fe.useInsertionEffect=function(v,O){return q.H.useInsertionEffect(v,O)},fe.useLayoutEffect=function(v,O){return q.H.useLayoutEffect(v,O)},fe.useMemo=function(v,O){return q.H.useMemo(v,O)},fe.useOptimistic=function(v,O){return q.H.useOptimistic(v,O)},fe.useReducer=function(v,O,Q){return q.H.useReducer(v,O,Q)},fe.useRef=function(v){return q.H.useRef(v)},fe.useState=function(v){return q.H.useState(v)},fe.useSyncExternalStore=function(v,O,Q){return q.H.useSyncExternalStore(v,O,Q)},fe.useTransition=function(){return q.H.useTransition()},fe.version="19.2.0",fe}var Gf;function Uo(){return Gf||(Gf=1,Co.exports=kg()),Co.exports}var R=Uo();const Ng=vg(R);var Mo={exports:{}},Qn={},Ro={exports:{}},Oo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf;function wg(){return Bf||(Bf=1,(function(x){function i(E,L){var X=E.length;E.push(L);e:for(;0<X;){var le=X-1>>>1,de=E[le];if(0<d(de,L))E[le]=L,E[X]=de,X=le;else break e}}function o(E){return E.length===0?null:E[0]}function c(E){if(E.length===0)return null;var L=E[0],X=E.pop();if(X!==L){E[0]=X;e:for(var le=0,de=E.length,v=de>>>1;le<v;){var O=2*(le+1)-1,Q=E[O],J=O+1,oe=E[J];if(0>d(Q,X))J<de&&0>d(oe,Q)?(E[le]=oe,E[J]=X,le=J):(E[le]=Q,E[O]=X,le=O);else if(J<de&&0>d(oe,X))E[le]=oe,E[J]=X,le=J;else break e}}return L}function d(E,L){var X=E.sortIndex-L.sortIndex;return X!==0?X:E.id-L.id}if(x.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;x.unstable_now=function(){return f.now()}}else{var g=Date,h=g.now();x.unstable_now=function(){return g.now()-h}}var p=[],y=[],j=1,T=null,z=3,G=!1,B=!1,Y=!1,I=!1,re=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function Z(E){for(var L=o(y);L!==null;){if(L.callback===null)c(y);else if(L.startTime<=E)c(y),L.sortIndex=L.expirationTime,i(p,L);else break;L=o(y)}}function Se(E){if(Y=!1,Z(E),!B)if(o(p)!==null)B=!0,xe||(xe=!0,ae());else{var L=o(y);L!==null&&ve(Se,L.startTime-E)}}var xe=!1,q=-1,M=5,U=-1;function V(){return I?!0:!(x.unstable_now()-U<M)}function se(){if(I=!1,xe){var E=x.unstable_now();U=E;var L=!0;try{e:{B=!1,Y&&(Y=!1,ie(q),q=-1),G=!0;var X=z;try{t:{for(Z(E),T=o(p);T!==null&&!(T.expirationTime>E&&V());){var le=T.callback;if(typeof le=="function"){T.callback=null,z=T.priorityLevel;var de=le(T.expirationTime<=E);if(E=x.unstable_now(),typeof de=="function"){T.callback=de,Z(E),L=!0;break t}T===o(p)&&c(p),Z(E)}else c(p);T=o(p)}if(T!==null)L=!0;else{var v=o(y);v!==null&&ve(Se,v.startTime-E),L=!1}}break e}finally{T=null,z=X,G=!1}L=void 0}}finally{L?ae():xe=!1}}}var ae;if(typeof K=="function")ae=function(){K(se)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,F=qe.port2;qe.port1.onmessage=se,ae=function(){F.postMessage(null)}}else ae=function(){re(se,0)};function ve(E,L){q=re(function(){E(x.unstable_now())},L)}x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(E){E.callback=null},x.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<E?Math.floor(1e3/E):5},x.unstable_getCurrentPriorityLevel=function(){return z},x.unstable_next=function(E){switch(z){case 1:case 2:case 3:var L=3;break;default:L=z}var X=z;z=L;try{return E()}finally{z=X}},x.unstable_requestPaint=function(){I=!0},x.unstable_runWithPriority=function(E,L){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var X=z;z=E;try{return L()}finally{z=X}},x.unstable_scheduleCallback=function(E,L,X){var le=x.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,E){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=X+de,E={id:j++,callback:L,priorityLevel:E,startTime:X,expirationTime:de,sortIndex:-1},X>le?(E.sortIndex=X,i(y,E),o(p)===null&&E===o(y)&&(Y?(ie(q),q=-1):Y=!0,ve(Se,X-le))):(E.sortIndex=de,i(p,E),B||G||(B=!0,xe||(xe=!0,ae()))),E},x.unstable_shouldYield=V,x.unstable_wrapCallback=function(E){var L=z;return function(){var X=z;z=L;try{return E.apply(this,arguments)}finally{z=X}}}})(Oo)),Oo}var Yf;function Ag(){return Yf||(Yf=1,Ro.exports=wg()),Ro.exports}var zo={exports:{}},ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf;function Tg(){if(qf)return ot;qf=1;var x=Uo();function i(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)y+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var c={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(p,y,j){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:T==null?null:""+T,children:p,containerInfo:y,implementation:j}}var g=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,ot.createPortal=function(p,y){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(i(299));return f(p,y,null,j)},ot.flushSync=function(p){var y=g.T,j=c.p;try{if(g.T=null,c.p=2,p)return p()}finally{g.T=y,c.p=j,c.d.f()}},ot.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,c.d.C(p,y))},ot.prefetchDNS=function(p){typeof p=="string"&&c.d.D(p)},ot.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var j=y.as,T=h(j,y.crossOrigin),z=typeof y.integrity=="string"?y.integrity:void 0,G=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;j==="style"?c.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:z,fetchPriority:G}):j==="script"&&c.d.X(p,{crossOrigin:T,integrity:z,fetchPriority:G,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},ot.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var j=h(y.as,y.crossOrigin);c.d.M(p,{crossOrigin:j,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&c.d.M(p)},ot.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var j=y.as,T=h(j,y.crossOrigin);c.d.L(p,j,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},ot.preloadModule=function(p,y){if(typeof p=="string")if(y){var j=h(y.as,y.crossOrigin);c.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:j,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else c.d.m(p)},ot.requestFormReset=function(p){c.d.r(p)},ot.unstable_batchedUpdates=function(p,y){return p(y)},ot.useFormState=function(p,y,j){return g.H.useFormState(p,y,j)},ot.useFormStatus=function(){return g.H.useHostTransitionStatus()},ot.version="19.2.0",ot}var Vf;function Eg(){if(Vf)return zo.exports;Vf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(i){console.error(i)}}return x(),zo.exports=Tg(),zo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function Cg(){if(Xf)return Qn;Xf=1;var x=Ag(),i=Uo(),o=Eg();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,l=t;;){var n=a.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){a=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===a)return p(n),e;if(r===l)return p(n),t;r=r.sibling}throw Error(c(188))}if(a.return!==l.return)a=n,l=r;else{for(var u=!1,m=n.child;m;){if(m===a){u=!0,a=n,l=r;break}if(m===l){u=!0,l=n,a=r;break}m=m.sibling}if(!u){for(m=r.child;m;){if(m===a){u=!0,a=r,l=n;break}if(m===l){u=!0,l=r,a=n;break}m=m.sibling}if(!u)throw Error(c(189))}}if(a.alternate!==l)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function j(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=j(e),t!==null)return t;e=e.sibling}return null}var T=Object.assign,z=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=se&&e[se]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Symbol.for("react.client.reference");function F(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case re:return"Profiler";case I:return"StrictMode";case Se:return"Suspense";case xe:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case K:return e.displayName||"Context";case ie:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q:return t=e.displayName||null,t!==null?t:F(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return F(e(t))}catch{}}return null}var ve=Array.isArray,E=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},le=[],de=-1;function v(e){return{current:e}}function O(e){0>de||(e.current=le[de],le[de]=null,de--)}function Q(e,t){de++,le[de]=e.current,e.current=t}var J=v(null),oe=v(null),me=v(null),Ee=v(null);function at(e,t){switch(Q(me,t),Q(oe,e),Q(J,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?nf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=nf(t),e=rf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}O(J),Q(J,e)}function Ve(){O(J),O(oe),O(me)}function Za(e){e.memoizedState!==null&&Q(Ee,e);var t=J.current,a=rf(t,e.type);t!==a&&(Q(oe,e),Q(J,a))}function te(e){oe.current===e&&(O(J),O(oe)),Ee.current===e&&(O(Ee),Yn._currentValue=X)}var ue,ge;function pe(e){if(ue===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ue=t&&t[1]||"",ge=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+e+ge}var ce=!1;function he(e,t){if(!e||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(C){var A=C}Reflect.construct(e,[],H)}else{try{H.call()}catch(C){A=C}e.call(H.prototype)}}else{try{throw Error()}catch(C){A=C}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(C){if(C&&A&&typeof C.stack=="string")return[C.stack,A.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),u=r[0],m=r[1];if(u&&m){var b=u.split(`
`),w=m.split(`
`);for(n=l=0;l<b.length&&!b[l].includes("DetermineComponentFrameRoot");)l++;for(;n<w.length&&!w[n].includes("DetermineComponentFrameRoot");)n++;if(l===b.length||n===w.length)for(l=b.length-1,n=w.length-1;1<=l&&0<=n&&b[l]!==w[n];)n--;for(;1<=l&&0<=n;l--,n--)if(b[l]!==w[n]){if(l!==1||n!==1)do if(l--,n--,0>n||b[l]!==w[n]){var _=`
`+b[l].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=l&&0<=n);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?pe(a):""}function Le(e,t){switch(e.tag){case 26:case 27:case 5:return pe(e.type);case 16:return pe("Lazy");case 13:return e.child!==t&&t!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return he(e.type,!1);case 11:return he(e.type.render,!1);case 1:return he(e.type,!0);case 31:return pe("Activity");default:return""}}function Xe(e){try{var t="",a=null;do t+=Le(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Rt=Object.prototype.hasOwnProperty,pt=x.unstable_scheduleCallback,gs=x.unstable_cancelCallback,Ff=x.unstable_shouldYield,Pf=x.unstable_requestPaint,bt=x.unstable_now,e0=x.unstable_getCurrentPriorityLevel,Do=x.unstable_ImmediatePriority,Ho=x.unstable_UserBlockingPriority,Zn=x.unstable_NormalPriority,t0=x.unstable_LowPriority,Lo=x.unstable_IdlePriority,a0=x.log,l0=x.unstable_setDisableYieldValue,Fl=null,vt=null;function Sa(e){if(typeof a0=="function"&&l0(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Fl,e)}catch{}}var St=Math.clz32?Math.clz32:s0,n0=Math.log,r0=Math.LN2;function s0(e){return e>>>=0,e===0?32:31-(n0(e)/r0|0)|0}var Jn=256,$n=262144,Wn=4194304;function Ja(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fn(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var n=0,r=e.suspendedLanes,u=e.pingedLanes;e=e.warmLanes;var m=l&134217727;return m!==0?(l=m&~r,l!==0?n=Ja(l):(u&=m,u!==0?n=Ja(u):a||(a=m&~e,a!==0&&(n=Ja(a))))):(m=l&~r,m!==0?n=Ja(m):u!==0?n=Ja(u):a||(a=l&~e,a!==0&&(n=Ja(a)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,a=t&-t,r>=a||r===32&&(a&4194048)!==0)?t:n}function Pl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function i0(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Go(){var e=Wn;return Wn<<=1,(Wn&62914560)===0&&(Wn=4194304),e}function hs(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function en(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function o0(e,t,a,l,n,r){var u=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,b=e.expirationTimes,w=e.hiddenUpdates;for(a=u&~a;0<a;){var _=31-St(a),H=1<<_;m[_]=0,b[_]=-1;var A=w[_];if(A!==null)for(w[_]=null,_=0;_<A.length;_++){var C=A[_];C!==null&&(C.lane&=-536870913)}a&=~H}l!==0&&Bo(e,l,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(u&~t))}function Bo(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-St(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Yo(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-St(a),n=1<<l;n&t|e[l]&t&&(e[l]|=t),a&=~n}}function qo(e,t){var a=t&-t;return a=(a&42)!==0?1:ys(a),(a&(e.suspendedLanes|t))!==0?0:a}function ys(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Vo(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:Cf(e.type))}function Xo(e,t){var a=L.p;try{return L.p=e,t()}finally{L.p=a}}var ja=Math.random().toString(36).slice(2),lt="__reactFiber$"+ja,dt="__reactProps$"+ja,gl="__reactContainer$"+ja,ps="__reactEvents$"+ja,c0="__reactListeners$"+ja,u0="__reactHandles$"+ja,Ko="__reactResources$"+ja,tn="__reactMarker$"+ja;function bs(e){delete e[lt],delete e[dt],delete e[ps],delete e[c0],delete e[u0]}function hl(e){var t=e[lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[gl]||a[lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=mf(e);e!==null;){if(a=e[lt])return a;e=mf(e)}return t}e=a,a=e.parentNode}return null}function yl(e){if(e=e[lt]||e[gl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function an(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function xl(e){var t=e[Ko];return t||(t=e[Ko]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[tn]=!0}var Qo=new Set,Io={};function $a(e,t){pl(e,t),pl(e+"Capture",t)}function pl(e,t){for(Io[e]=t,e=0;e<t.length;e++)Qo.add(t[e])}var d0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zo={},Jo={};function f0(e){return Rt.call(Jo,e)?!0:Rt.call(Zo,e)?!1:d0.test(e)?Jo[e]=!0:(Zo[e]=!0,!1)}function Pn(e,t,a){if(f0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function er(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Pt(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $o(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function m0(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var n=l.get,r=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(u){a=""+u,r.call(this,u)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(u){a=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vs(e){if(!e._valueTracker){var t=$o(e)?"checked":"value";e._valueTracker=m0(e,t,""+e[t])}}function Wo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=$o(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function tr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var g0=/[\n"\\]/g;function zt(e){return e.replace(g0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ss(e,t,a,l,n,r,u,m){e.name="",u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.type=u:e.removeAttribute("type"),t!=null?u==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ot(t)):e.value!==""+Ot(t)&&(e.value=""+Ot(t)):u!=="submit"&&u!=="reset"||e.removeAttribute("value"),t!=null?js(e,u,Ot(t)):a!=null?js(e,u,Ot(a)):l!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Ot(m):e.removeAttribute("name")}function Fo(e,t,a,l,n,r,u,m){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||a!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){vs(e);return}a=a!=null?""+Ot(a):"",t=t!=null?""+Ot(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=m?e.checked:!!l,e.defaultChecked=!!l,u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.name=u),vs(e)}function js(e,t,a){t==="number"&&tr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function bl(e,t,a,l){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ot(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Po(e,t,a){if(t!=null&&(t=""+Ot(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ot(a):""}function ec(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(c(92));if(ve(l)){if(1<l.length)throw Error(c(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Ot(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),vs(e)}function vl(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var h0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tc(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||h0.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ac(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&a[n]!==l&&tc(e,n,l)}else for(var r in t)t.hasOwnProperty(r)&&tc(e,r,t[r])}function ks(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),x0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(e){return x0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ea(){}var Ns=null;function ws(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sl=null,jl=null;function lc(e){var t=yl(e);if(t&&(e=t.stateNode)){var a=e[dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ss(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var n=l[dt]||null;if(!n)throw Error(c(90));Ss(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Wo(l)}break e;case"textarea":Po(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&bl(e,!!a.multiple,t,!1)}}}var As=!1;function nc(e,t,a){if(As)return e(t,a);As=!0;try{var l=e(t);return l}finally{if(As=!1,(Sl!==null||jl!==null)&&(Vr(),Sl&&(t=Sl,e=jl,jl=Sl=null,lc(t),e)))for(t=0;t<e.length;t++)lc(e[t])}}function ln(e,t){var a=e.stateNode;if(a===null)return null;var l=a[dt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ts=!1;if(ta)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{Ts=!1}var ka=null,Es=null,lr=null;function rc(){if(lr)return lr;var e,t=Es,a=t.length,l,n="value"in ka?ka.value:ka.textContent,r=n.length;for(e=0;e<a&&t[e]===n[e];e++);var u=a-e;for(l=1;l<=u&&t[a-l]===n[r-l];l++);return lr=n.slice(e,1<l?1-l:void 0)}function nr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rr(){return!0}function sc(){return!1}function ft(e){function t(a,l,n,r,u){this._reactName=a,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=u,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(r):r[m]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?rr:sc,this.isPropagationStopped=sc,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=ft(Wa),rn=T({},Wa,{view:0,detail:0}),p0=ft(rn),Cs,Ms,sn,ir=T({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&e.type==="mousemove"?(Cs=e.screenX-sn.screenX,Ms=e.screenY-sn.screenY):Ms=Cs=0,sn=e),Cs)},movementY:function(e){return"movementY"in e?e.movementY:Ms}}),ic=ft(ir),b0=T({},ir,{dataTransfer:0}),v0=ft(b0),S0=T({},rn,{relatedTarget:0}),Rs=ft(S0),j0=T({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),k0=ft(j0),N0=T({},Wa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),w0=ft(N0),A0=T({},Wa,{data:0}),oc=ft(A0),T0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=C0[e])?!!t[e]:!1}function Os(){return M0}var R0=T({},rn,{key:function(e){if(e.key){var t=T0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?E0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(e){return e.type==="keypress"?nr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),O0=ft(R0),z0=T({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=ft(z0),_0=T({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),U0=ft(_0),D0=T({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),H0=ft(D0),L0=T({},ir,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=ft(L0),B0=T({},Wa,{newState:0,oldState:0}),Y0=ft(B0),q0=[9,13,27,32],zs=ta&&"CompositionEvent"in window,on=null;ta&&"documentMode"in document&&(on=document.documentMode);var V0=ta&&"TextEvent"in window&&!on,uc=ta&&(!zs||on&&8<on&&11>=on),dc=" ",fc=!1;function mc(e,t){switch(e){case"keyup":return q0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kl=!1;function X0(e,t){switch(e){case"compositionend":return gc(t);case"keypress":return t.which!==32?null:(fc=!0,dc);case"textInput":return e=t.data,e===dc&&fc?null:e;default:return null}}function K0(e,t){if(kl)return e==="compositionend"||!zs&&mc(e,t)?(e=rc(),lr=Es=ka=null,kl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uc&&t.locale!=="ko"?null:t.data;default:return null}}var Q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Q0[e.type]:t==="textarea"}function yc(e,t,a,l){Sl?jl?jl.push(l):jl=[l]:Sl=l,t=$r(t,"onChange"),0<t.length&&(a=new sr("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var cn=null,un=null;function I0(e){Fd(e,0)}function or(e){var t=an(e);if(Wo(t))return e}function xc(e,t){if(e==="change")return t}var pc=!1;if(ta){var _s;if(ta){var Us="oninput"in document;if(!Us){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),Us=typeof bc.oninput=="function"}_s=Us}else _s=!1;pc=_s&&(!document.documentMode||9<document.documentMode)}function vc(){cn&&(cn.detachEvent("onpropertychange",Sc),un=cn=null)}function Sc(e){if(e.propertyName==="value"&&or(un)){var t=[];yc(t,un,e,ws(e)),nc(I0,t)}}function Z0(e,t,a){e==="focusin"?(vc(),cn=t,un=a,cn.attachEvent("onpropertychange",Sc)):e==="focusout"&&vc()}function J0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return or(un)}function $0(e,t){if(e==="click")return or(t)}function W0(e,t){if(e==="input"||e==="change")return or(t)}function F0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:F0;function dn(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var n=a[l];if(!Rt.call(t,n)||!jt(e[n],t[n]))return!1}return!0}function jc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kc(e,t){var a=jc(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jc(a)}}function Nc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=tr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=tr(e.document)}return t}function Ds(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var P0=ta&&"documentMode"in document&&11>=document.documentMode,Nl=null,Hs=null,fn=null,Ls=!1;function Ac(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ls||Nl==null||Nl!==tr(l)||(l=Nl,"selectionStart"in l&&Ds(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fn&&dn(fn,l)||(fn=l,l=$r(Hs,"onSelect"),0<l.length&&(t=new sr("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Nl)))}function Fa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var wl={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},Gs={},Tc={};ta&&(Tc=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function Pa(e){if(Gs[e])return Gs[e];if(!wl[e])return e;var t=wl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Tc)return Gs[e]=t[a];return e}var Ec=Pa("animationend"),Cc=Pa("animationiteration"),Mc=Pa("animationstart"),em=Pa("transitionrun"),tm=Pa("transitionstart"),am=Pa("transitioncancel"),Rc=Pa("transitionend"),Oc=new Map,Bs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bs.push("scrollEnd");function qt(e,t){Oc.set(e,t),$a(t,[e])}var cr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},_t=[],Al=0,Ys=0;function ur(){for(var e=Al,t=Ys=Al=0;t<e;){var a=_t[t];_t[t++]=null;var l=_t[t];_t[t++]=null;var n=_t[t];_t[t++]=null;var r=_t[t];if(_t[t++]=null,l!==null&&n!==null){var u=l.pending;u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n}r!==0&&zc(a,n,r)}}function dr(e,t,a,l){_t[Al++]=e,_t[Al++]=t,_t[Al++]=a,_t[Al++]=l,Ys|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function qs(e,t,a,l){return dr(e,t,a,l),fr(e)}function el(e,t){return dr(e,null,null,t),fr(e)}function zc(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var n=!1,r=e.return;r!==null;)r.childLanes|=a,l=r.alternate,l!==null&&(l.childLanes|=a),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-St(a),e=r.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=a|536870912),r):null}function fr(e){if(50<_n)throw _n=0,Wi=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Tl={};function lm(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,a,l){return new lm(e,t,a,l)}function Vs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function aa(e,t){var a=e.alternate;return a===null?(a=kt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function _c(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function mr(e,t,a,l,n,r){var u=0;if(l=e,typeof e=="function")Vs(e)&&(u=1);else if(typeof e=="string")u=og(e,a,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=kt(31,a,t,n),e.elementType=U,e.lanes=r,e;case Y:return tl(a.children,n,r,t);case I:u=8,n|=24;break;case re:return e=kt(12,a,t,n|2),e.elementType=re,e.lanes=r,e;case Se:return e=kt(13,a,t,n),e.elementType=Se,e.lanes=r,e;case xe:return e=kt(19,a,t,n),e.elementType=xe,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:u=10;break e;case ie:u=9;break e;case Z:u=11;break e;case q:u=14;break e;case M:u=16,l=null;break e}u=29,a=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=kt(u,a,t,n),t.elementType=e,t.type=l,t.lanes=r,t}function tl(e,t,a,l){return e=kt(7,e,l,t),e.lanes=a,e}function Xs(e,t,a){return e=kt(6,e,null,t),e.lanes=a,e}function Uc(e){var t=kt(18,null,null,0);return t.stateNode=e,t}function Ks(e,t,a){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Dc=new WeakMap;function Ut(e,t){if(typeof e=="object"&&e!==null){var a=Dc.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Xe(t)},Dc.set(e,t),t)}return{value:e,source:t,stack:Xe(t)}}var El=[],Cl=0,gr=null,mn=0,Dt=[],Ht=0,Na=null,Kt=1,Qt="";function la(e,t){El[Cl++]=mn,El[Cl++]=gr,gr=e,mn=t}function Hc(e,t,a){Dt[Ht++]=Kt,Dt[Ht++]=Qt,Dt[Ht++]=Na,Na=e;var l=Kt;e=Qt;var n=32-St(l)-1;l&=~(1<<n),a+=1;var r=32-St(t)+n;if(30<r){var u=n-n%5;r=(l&(1<<u)-1).toString(32),l>>=u,n-=u,Kt=1<<32-St(t)+n|a<<n|l,Qt=r+e}else Kt=1<<r|a<<n|l,Qt=e}function Qs(e){e.return!==null&&(la(e,1),Hc(e,1,0))}function Is(e){for(;e===gr;)gr=El[--Cl],El[Cl]=null,mn=El[--Cl],El[Cl]=null;for(;e===Na;)Na=Dt[--Ht],Dt[Ht]=null,Qt=Dt[--Ht],Dt[Ht]=null,Kt=Dt[--Ht],Dt[Ht]=null}function Lc(e,t){Dt[Ht++]=Kt,Dt[Ht++]=Qt,Dt[Ht++]=Na,Kt=t.id,Qt=t.overflow,Na=e}var nt=null,Ge=null,Te=!1,wa=null,Lt=!1,Zs=Error(c(519));function Aa(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gn(Ut(t,e)),Zs}function Gc(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[lt]=e,t[dt]=l,a){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(a=0;a<Dn.length;a++)ke(Dn[a],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),Fo(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),ec(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||af(t.textContent,a)?(l.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),l.onScroll!=null&&ke("scroll",t),l.onScrollEnd!=null&&ke("scrollend",t),l.onClick!=null&&(t.onclick=ea),t=!0):t=!1,t||Aa(e,!0)}function Bc(e){for(nt=e.return;nt;)switch(nt.tag){case 5:case 31:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:nt=nt.return}}function Ml(e){if(e!==nt)return!1;if(!Te)return Bc(e),Te=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||mo(e.type,e.memoizedProps)),a=!a),a&&Ge&&Aa(e),Bc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ge=ff(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ge=ff(e)}else t===27?(t=Ge,Ba(e.type)?(e=po,po=null,Ge=e):Ge=t):Ge=nt?Bt(e.stateNode.nextSibling):null;return!0}function al(){Ge=nt=null,Te=!1}function Js(){var e=wa;return e!==null&&(yt===null?yt=e:yt.push.apply(yt,e),wa=null),e}function gn(e){wa===null?wa=[e]:wa.push(e)}var $s=v(null),ll=null,na=null;function Ta(e,t,a){Q($s,t._currentValue),t._currentValue=a}function ra(e){e._currentValue=$s.current,O($s)}function Ws(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Fs(e,t,a,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var u=n.child;r=r.firstContext;e:for(;r!==null;){var m=r;r=n;for(var b=0;b<t.length;b++)if(m.context===t[b]){r.lanes|=a,m=r.alternate,m!==null&&(m.lanes|=a),Ws(r.return,a,e),l||(u=null);break e}r=m.next}}else if(n.tag===18){if(u=n.return,u===null)throw Error(c(341));u.lanes|=a,r=u.alternate,r!==null&&(r.lanes|=a),Ws(u,a,e),u=null}else u=n.child;if(u!==null)u.return=n;else for(u=n;u!==null;){if(u===e){u=null;break}if(n=u.sibling,n!==null){n.return=u.return,u=n;break}u=u.return}n=u}}function Rl(e,t,a,l){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var u=n.alternate;if(u===null)throw Error(c(387));if(u=u.memoizedProps,u!==null){var m=n.type;jt(n.pendingProps.value,u.value)||(e!==null?e.push(m):e=[m])}}else if(n===Ee.current){if(u=n.alternate,u===null)throw Error(c(387));u.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Yn):e=[Yn])}n=n.return}e!==null&&Fs(t,e,a,l),t.flags|=262144}function hr(e){for(e=e.firstContext;e!==null;){if(!jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function nl(e){ll=e,na=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return Yc(ll,e)}function yr(e,t){return ll===null&&nl(e),Yc(e,t)}function Yc(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},na===null){if(e===null)throw Error(c(308));na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else na=na.next=t;return a}var nm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},rm=x.unstable_scheduleCallback,sm=x.unstable_NormalPriority,Je={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ps(){return{controller:new nm,data:new Map,refCount:0}}function hn(e){e.refCount--,e.refCount===0&&rm(sm,function(){e.controller.abort()})}var yn=null,ei=0,Ol=0,zl=null;function im(e,t){if(yn===null){var a=yn=[];ei=0,Ol=lo(),zl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ei++,t.then(qc,qc),t}function qc(){if(--ei===0&&yn!==null){zl!==null&&(zl.status="fulfilled");var e=yn;yn=null,Ol=0,zl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function om(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),l}var Vc=E.S;E.S=function(e,t){Ad=bt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&im(e,t),Vc!==null&&Vc(e,t)};var rl=v(null);function ti(){var e=rl.current;return e!==null?e:He.pooledCache}function xr(e,t){t===null?Q(rl,rl.current):Q(rl,t.pool)}function Xc(){var e=ti();return e===null?null:{parent:Je._currentValue,pool:e}}var _l=Error(c(460)),ai=Error(c(474)),pr=Error(c(542)),br={then:function(){}};function Kc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qc(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ea,ea),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zc(e),e;default:if(typeof t.status=="string")t.then(ea,ea);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zc(e),e}throw il=t,_l}}function sl(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(il=a,_l):a}}var il=null;function Ic(){if(il===null)throw Error(c(459));var e=il;return il=null,e}function Zc(e){if(e===_l||e===pr)throw Error(c(483))}var Ul=null,xn=0;function vr(e){var t=xn;return xn+=1,Ul===null&&(Ul=[]),Qc(Ul,e,t)}function pn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Sr(e,t){throw t.$$typeof===z?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Jc(e){function t(k,S){if(e){var N=k.deletions;N===null?(k.deletions=[S],k.flags|=16):N.push(S)}}function a(k,S){if(!e)return null;for(;S!==null;)t(k,S),S=S.sibling;return null}function l(k){for(var S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function n(k,S){return k=aa(k,S),k.index=0,k.sibling=null,k}function r(k,S,N){return k.index=N,e?(N=k.alternate,N!==null?(N=N.index,N<S?(k.flags|=67108866,S):N):(k.flags|=67108866,S)):(k.flags|=1048576,S)}function u(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function m(k,S,N,D){return S===null||S.tag!==6?(S=Xs(N,k.mode,D),S.return=k,S):(S=n(S,N),S.return=k,S)}function b(k,S,N,D){var ee=N.type;return ee===Y?_(k,S,N.props.children,D,N.key):S!==null&&(S.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===M&&sl(ee)===S.type)?(S=n(S,N.props),pn(S,N),S.return=k,S):(S=mr(N.type,N.key,N.props,null,k.mode,D),pn(S,N),S.return=k,S)}function w(k,S,N,D){return S===null||S.tag!==4||S.stateNode.containerInfo!==N.containerInfo||S.stateNode.implementation!==N.implementation?(S=Ks(N,k.mode,D),S.return=k,S):(S=n(S,N.children||[]),S.return=k,S)}function _(k,S,N,D,ee){return S===null||S.tag!==7?(S=tl(N,k.mode,D,ee),S.return=k,S):(S=n(S,N),S.return=k,S)}function H(k,S,N){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=Xs(""+S,k.mode,N),S.return=k,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case G:return N=mr(S.type,S.key,S.props,null,k.mode,N),pn(N,S),N.return=k,N;case B:return S=Ks(S,k.mode,N),S.return=k,S;case M:return S=sl(S),H(k,S,N)}if(ve(S)||ae(S))return S=tl(S,k.mode,N,null),S.return=k,S;if(typeof S.then=="function")return H(k,vr(S),N);if(S.$$typeof===K)return H(k,yr(k,S),N);Sr(k,S)}return null}function A(k,S,N,D){var ee=S!==null?S.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return ee!==null?null:m(k,S,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case G:return N.key===ee?b(k,S,N,D):null;case B:return N.key===ee?w(k,S,N,D):null;case M:return N=sl(N),A(k,S,N,D)}if(ve(N)||ae(N))return ee!==null?null:_(k,S,N,D,null);if(typeof N.then=="function")return A(k,S,vr(N),D);if(N.$$typeof===K)return A(k,S,yr(k,N),D);Sr(k,N)}return null}function C(k,S,N,D,ee){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return k=k.get(N)||null,m(S,k,""+D,ee);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case G:return k=k.get(D.key===null?N:D.key)||null,b(S,k,D,ee);case B:return k=k.get(D.key===null?N:D.key)||null,w(S,k,D,ee);case M:return D=sl(D),C(k,S,N,D,ee)}if(ve(D)||ae(D))return k=k.get(N)||null,_(S,k,D,ee,null);if(typeof D.then=="function")return C(k,S,N,vr(D),ee);if(D.$$typeof===K)return C(k,S,N,yr(S,D),ee);Sr(S,D)}return null}function $(k,S,N,D){for(var ee=null,Ce=null,W=S,be=S=0,Ae=null;W!==null&&be<N.length;be++){W.index>be?(Ae=W,W=null):Ae=W.sibling;var Me=A(k,W,N[be],D);if(Me===null){W===null&&(W=Ae);break}e&&W&&Me.alternate===null&&t(k,W),S=r(Me,S,be),Ce===null?ee=Me:Ce.sibling=Me,Ce=Me,W=Ae}if(be===N.length)return a(k,W),Te&&la(k,be),ee;if(W===null){for(;be<N.length;be++)W=H(k,N[be],D),W!==null&&(S=r(W,S,be),Ce===null?ee=W:Ce.sibling=W,Ce=W);return Te&&la(k,be),ee}for(W=l(W);be<N.length;be++)Ae=C(W,k,be,N[be],D),Ae!==null&&(e&&Ae.alternate!==null&&W.delete(Ae.key===null?be:Ae.key),S=r(Ae,S,be),Ce===null?ee=Ae:Ce.sibling=Ae,Ce=Ae);return e&&W.forEach(function(Ka){return t(k,Ka)}),Te&&la(k,be),ee}function ne(k,S,N,D){if(N==null)throw Error(c(151));for(var ee=null,Ce=null,W=S,be=S=0,Ae=null,Me=N.next();W!==null&&!Me.done;be++,Me=N.next()){W.index>be?(Ae=W,W=null):Ae=W.sibling;var Ka=A(k,W,Me.value,D);if(Ka===null){W===null&&(W=Ae);break}e&&W&&Ka.alternate===null&&t(k,W),S=r(Ka,S,be),Ce===null?ee=Ka:Ce.sibling=Ka,Ce=Ka,W=Ae}if(Me.done)return a(k,W),Te&&la(k,be),ee;if(W===null){for(;!Me.done;be++,Me=N.next())Me=H(k,Me.value,D),Me!==null&&(S=r(Me,S,be),Ce===null?ee=Me:Ce.sibling=Me,Ce=Me);return Te&&la(k,be),ee}for(W=l(W);!Me.done;be++,Me=N.next())Me=C(W,k,be,Me.value,D),Me!==null&&(e&&Me.alternate!==null&&W.delete(Me.key===null?be:Me.key),S=r(Me,S,be),Ce===null?ee=Me:Ce.sibling=Me,Ce=Me);return e&&W.forEach(function(bg){return t(k,bg)}),Te&&la(k,be),ee}function De(k,S,N,D){if(typeof N=="object"&&N!==null&&N.type===Y&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case G:e:{for(var ee=N.key;S!==null;){if(S.key===ee){if(ee=N.type,ee===Y){if(S.tag===7){a(k,S.sibling),D=n(S,N.props.children),D.return=k,k=D;break e}}else if(S.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===M&&sl(ee)===S.type){a(k,S.sibling),D=n(S,N.props),pn(D,N),D.return=k,k=D;break e}a(k,S);break}else t(k,S);S=S.sibling}N.type===Y?(D=tl(N.props.children,k.mode,D,N.key),D.return=k,k=D):(D=mr(N.type,N.key,N.props,null,k.mode,D),pn(D,N),D.return=k,k=D)}return u(k);case B:e:{for(ee=N.key;S!==null;){if(S.key===ee)if(S.tag===4&&S.stateNode.containerInfo===N.containerInfo&&S.stateNode.implementation===N.implementation){a(k,S.sibling),D=n(S,N.children||[]),D.return=k,k=D;break e}else{a(k,S);break}else t(k,S);S=S.sibling}D=Ks(N,k.mode,D),D.return=k,k=D}return u(k);case M:return N=sl(N),De(k,S,N,D)}if(ve(N))return $(k,S,N,D);if(ae(N)){if(ee=ae(N),typeof ee!="function")throw Error(c(150));return N=ee.call(N),ne(k,S,N,D)}if(typeof N.then=="function")return De(k,S,vr(N),D);if(N.$$typeof===K)return De(k,S,yr(k,N),D);Sr(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,S!==null&&S.tag===6?(a(k,S.sibling),D=n(S,N),D.return=k,k=D):(a(k,S),D=Xs(N,k.mode,D),D.return=k,k=D),u(k)):a(k,S)}return function(k,S,N,D){try{xn=0;var ee=De(k,S,N,D);return Ul=null,ee}catch(W){if(W===_l||W===pr)throw W;var Ce=kt(29,W,null,k.mode);return Ce.lanes=D,Ce.return=k,Ce}finally{}}}var ol=Jc(!0),$c=Jc(!1),Ea=!1;function li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ni(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Re&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=fr(e),zc(e,null,a),t}return dr(e,l,t,a),fr(e)}function bn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Yo(e,a)}}function ri(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var n=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var u={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?n=r=u:r=r.next=u,a=a.next}while(a!==null);r===null?n=r=t:r=r.next=t}else n=r=t;a={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var si=!1;function vn(){if(si){var e=zl;if(e!==null)throw e}}function Sn(e,t,a,l){si=!1;var n=e.updateQueue;Ea=!1;var r=n.firstBaseUpdate,u=n.lastBaseUpdate,m=n.shared.pending;if(m!==null){n.shared.pending=null;var b=m,w=b.next;b.next=null,u===null?r=w:u.next=w,u=b;var _=e.alternate;_!==null&&(_=_.updateQueue,m=_.lastBaseUpdate,m!==u&&(m===null?_.firstBaseUpdate=w:m.next=w,_.lastBaseUpdate=b))}if(r!==null){var H=n.baseState;u=0,_=w=b=null,m=r;do{var A=m.lane&-536870913,C=A!==m.lane;if(C?(we&A)===A:(l&A)===A){A!==0&&A===Ol&&(si=!0),_!==null&&(_=_.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var $=e,ne=m;A=t;var De=a;switch(ne.tag){case 1:if($=ne.payload,typeof $=="function"){H=$.call(De,H,A);break e}H=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=ne.payload,A=typeof $=="function"?$.call(De,H,A):$,A==null)break e;H=T({},H,A);break e;case 2:Ea=!0}}A=m.callback,A!==null&&(e.flags|=64,C&&(e.flags|=8192),C=n.callbacks,C===null?n.callbacks=[A]:C.push(A))}else C={lane:A,tag:m.tag,payload:m.payload,callback:m.callback,next:null},_===null?(w=_=C,b=H):_=_.next=C,u|=A;if(m=m.next,m===null){if(m=n.shared.pending,m===null)break;C=m,m=C.next,C.next=null,n.lastBaseUpdate=C,n.shared.pending=null}}while(!0);_===null&&(b=H),n.baseState=b,n.firstBaseUpdate=w,n.lastBaseUpdate=_,r===null&&(n.shared.lanes=0),Ua|=u,e.lanes=u,e.memoizedState=H}}function Wc(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Fc(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Wc(a[e],t)}var Dl=v(null),jr=v(0);function Pc(e,t){e=ga,Q(jr,e),Q(Dl,t),ga=e|t.baseLanes}function ii(){Q(jr,ga),Q(Dl,Dl.current)}function oi(){ga=jr.current,O(Dl),O(jr)}var Nt=v(null),Gt=null;function Ra(e){var t=e.alternate;Q(Ie,Ie.current&1),Q(Nt,e),Gt===null&&(t===null||Dl.current!==null||t.memoizedState!==null)&&(Gt=e)}function ci(e){Q(Ie,Ie.current),Q(Nt,e),Gt===null&&(Gt=e)}function eu(e){e.tag===22?(Q(Ie,Ie.current),Q(Nt,e),Gt===null&&(Gt=e)):Oa()}function Oa(){Q(Ie,Ie.current),Q(Nt,Nt.current)}function wt(e){O(Nt),Gt===e&&(Gt=null),O(Ie)}var Ie=v(0);function kr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||yo(a)||xo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=0,ye=null,_e=null,$e=null,Nr=!1,Hl=!1,cl=!1,wr=0,jn=0,Ll=null,cm=0;function Ke(){throw Error(c(321))}function ui(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!jt(e[a],t[a]))return!1;return!0}function di(e,t,a,l,n,r){return sa=r,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?Hu:Ai,cl=!1,r=a(l,n),cl=!1,Hl&&(r=au(t,a,l,n)),tu(e),r}function tu(e){E.H=wn;var t=_e!==null&&_e.next!==null;if(sa=0,$e=_e=ye=null,Nr=!1,jn=0,Ll=null,t)throw Error(c(300));e===null||We||(e=e.dependencies,e!==null&&hr(e)&&(We=!0))}function au(e,t,a,l){ye=e;var n=0;do{if(Hl&&(Ll=null),jn=0,Hl=!1,25<=n)throw Error(c(301));if(n+=1,$e=_e=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}E.H=Lu,r=t(a,l)}while(Hl);return r}function um(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?kn(t):t,e=e.useState()[0],(_e!==null?_e.memoizedState:null)!==e&&(ye.flags|=1024),t}function fi(){var e=wr!==0;return wr=0,e}function mi(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function gi(e){if(Nr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Nr=!1}sa=0,$e=_e=ye=null,Hl=!1,jn=wr=0,Ll=null}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ye.memoizedState=$e=e:$e=$e.next=e,$e}function Ze(){if(_e===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=$e===null?ye.memoizedState:$e.next;if(t!==null)$e=t,_e=e;else{if(e===null)throw ye.alternate===null?Error(c(467)):Error(c(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},$e===null?ye.memoizedState=$e=e:$e=$e.next=e}return $e}function Ar(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kn(e){var t=jn;return jn+=1,Ll===null&&(Ll=[]),e=Qc(Ll,e,t),t=ye,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?Hu:Ai),e}function Tr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return kn(e);if(e.$$typeof===K)return rt(e)}throw Error(c(438,String(e)))}function hi(e){var t=null,a=ye.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=ye.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Ar(),ye.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=V;return t.index++,a}function ia(e,t){return typeof t=="function"?t(e):t}function Er(e){var t=Ze();return yi(t,_e,e)}function yi(e,t,a){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=a;var n=e.baseQueue,r=l.pending;if(r!==null){if(n!==null){var u=n.next;n.next=r.next,r.next=u}t.baseQueue=n=r,l.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var m=u=null,b=null,w=t,_=!1;do{var H=w.lane&-536870913;if(H!==w.lane?(we&H)===H:(sa&H)===H){var A=w.revertLane;if(A===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),H===Ol&&(_=!0);else if((sa&A)===A){w=w.next,A===Ol&&(_=!0);continue}else H={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},b===null?(m=b=H,u=r):b=b.next=H,ye.lanes|=A,Ua|=A;H=w.action,cl&&a(r,H),r=w.hasEagerState?w.eagerState:a(r,H)}else A={lane:H,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},b===null?(m=b=A,u=r):b=b.next=A,ye.lanes|=H,Ua|=H;w=w.next}while(w!==null&&w!==t);if(b===null?u=r:b.next=m,!jt(r,e.memoizedState)&&(We=!0,_&&(a=zl,a!==null)))throw a;e.memoizedState=r,e.baseState=u,e.baseQueue=b,l.lastRenderedState=r}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function xi(e){var t=Ze(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var l=a.dispatch,n=a.pending,r=t.memoizedState;if(n!==null){a.pending=null;var u=n=n.next;do r=e(r,u.action),u=u.next;while(u!==n);jt(r,t.memoizedState)||(We=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),a.lastRenderedState=r}return[r,l]}function lu(e,t,a){var l=ye,n=Ze(),r=Te;if(r){if(a===void 0)throw Error(c(407));a=a()}else a=t();var u=!jt((_e||n).memoizedState,a);if(u&&(n.memoizedState=a,We=!0),n=n.queue,vi(su.bind(null,l,n,e),[e]),n.getSnapshot!==t||u||$e!==null&&$e.memoizedState.tag&1){if(l.flags|=2048,Gl(9,{destroy:void 0},ru.bind(null,l,n,a,t),null),He===null)throw Error(c(349));r||(sa&127)!==0||nu(l,t,a)}return a}function nu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ye.updateQueue,t===null?(t=Ar(),ye.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function ru(e,t,a,l){t.value=a,t.getSnapshot=l,iu(t)&&ou(e)}function su(e,t,a){return a(function(){iu(t)&&ou(e)})}function iu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!jt(e,a)}catch{return!0}}function ou(e){var t=el(e,2);t!==null&&xt(t,e,2)}function pi(e){var t=ut();if(typeof e=="function"){var a=e;if(e=a(),cl){Sa(!0);try{a()}finally{Sa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e},t}function cu(e,t,a,l){return e.baseState=a,yi(e,_e,typeof l=="function"?l:ia)}function dm(e,t,a,l,n){if(Rr(e))throw Error(c(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(u){r.listeners.push(u)}};E.T!==null?a(!0):r.isTransition=!1,l(r),a=t.pending,a===null?(r.next=t.pending=r,uu(t,r)):(r.next=a.next,t.pending=a.next=r)}}function uu(e,t){var a=t.action,l=t.payload,n=e.state;if(t.isTransition){var r=E.T,u={};E.T=u;try{var m=a(n,l),b=E.S;b!==null&&b(u,m),du(e,t,m)}catch(w){bi(e,t,w)}finally{r!==null&&u.types!==null&&(r.types=u.types),E.T=r}}else try{r=a(n,l),du(e,t,r)}catch(w){bi(e,t,w)}}function du(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){fu(e,t,l)},function(l){return bi(e,t,l)}):fu(e,t,a)}function fu(e,t,a){t.status="fulfilled",t.value=a,mu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,uu(e,a)))}function bi(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,mu(t),t=t.next;while(t!==l)}e.action=null}function mu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gu(e,t){return t}function hu(e,t){if(Te){var a=He.formState;if(a!==null){e:{var l=ye;if(Te){if(Ge){t:{for(var n=Ge,r=Lt;n.nodeType!==8;){if(!r){n=null;break t}if(n=Bt(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Ge=Bt(n.nextSibling),l=n.data==="F!";break e}}Aa(l)}l=!1}l&&(t=a[0])}}return a=ut(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:t},a.queue=l,a=_u.bind(null,ye,l),l.dispatch=a,l=pi(!1),r=wi.bind(null,ye,!1,l.queue),l=ut(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,a=dm.bind(null,ye,n,r,a),n.dispatch=a,l.memoizedState=e,[t,a,!1]}function yu(e){var t=Ze();return xu(t,_e,e)}function xu(e,t,a){if(t=yi(e,t,gu)[0],e=Er(ia)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=kn(t)}catch(u){throw u===_l?pr:u}else l=t;t=Ze();var n=t.queue,r=n.dispatch;return a!==t.memoizedState&&(ye.flags|=2048,Gl(9,{destroy:void 0},fm.bind(null,n,a),null)),[l,r,e]}function fm(e,t){e.action=t}function pu(e){var t=Ze(),a=_e;if(a!==null)return xu(t,a,e);Ze(),t=t.memoizedState,a=Ze();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Gl(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=ye.updateQueue,t===null&&(t=Ar(),ye.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function bu(){return Ze().memoizedState}function Cr(e,t,a,l){var n=ut();ye.flags|=e,n.memoizedState=Gl(1|t,{destroy:void 0},a,l===void 0?null:l)}function Mr(e,t,a,l){var n=Ze();l=l===void 0?null:l;var r=n.memoizedState.inst;_e!==null&&l!==null&&ui(l,_e.memoizedState.deps)?n.memoizedState=Gl(t,r,a,l):(ye.flags|=e,n.memoizedState=Gl(1|t,r,a,l))}function vu(e,t){Cr(8390656,8,e,t)}function vi(e,t){Mr(2048,8,e,t)}function mm(e){ye.flags|=4;var t=ye.updateQueue;if(t===null)t=Ar(),ye.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Su(e){var t=Ze().memoizedState;return mm({ref:t,nextImpl:e}),function(){if((Re&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function ju(e,t){return Mr(4,2,e,t)}function ku(e,t){return Mr(4,4,e,t)}function Nu(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wu(e,t,a){a=a!=null?a.concat([e]):null,Mr(4,4,Nu.bind(null,t,e),a)}function Si(){}function Au(e,t){var a=Ze();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&ui(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Tu(e,t){var a=Ze();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&ui(t,l[1]))return l[0];if(l=e(),cl){Sa(!0);try{e()}finally{Sa(!1)}}return a.memoizedState=[l,t],l}function ji(e,t,a){return a===void 0||(sa&1073741824)!==0&&(we&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Ed(),ye.lanes|=e,Ua|=e,a)}function Eu(e,t,a,l){return jt(a,t)?a:Dl.current!==null?(e=ji(e,a,l),jt(e,t)||(We=!0),e):(sa&42)===0||(sa&1073741824)!==0&&(we&261930)===0?(We=!0,e.memoizedState=a):(e=Ed(),ye.lanes|=e,Ua|=e,t)}function Cu(e,t,a,l,n){var r=L.p;L.p=r!==0&&8>r?r:8;var u=E.T,m={};E.T=m,wi(e,!1,t,a);try{var b=n(),w=E.S;if(w!==null&&w(m,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var _=om(b,l);Nn(e,t,_,Et(e))}else Nn(e,t,l,Et(e))}catch(H){Nn(e,t,{then:function(){},status:"rejected",reason:H},Et())}finally{L.p=r,u!==null&&m.types!==null&&(u.types=m.types),E.T=u}}function gm(){}function ki(e,t,a,l){if(e.tag!==5)throw Error(c(476));var n=Mu(e).queue;Cu(e,n,t,X,a===null?gm:function(){return Ru(e),a(l)})}function Mu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:X},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ru(e){var t=Mu(e);t.next===null&&(t=e.alternate.memoizedState),Nn(e,t.next.queue,{},Et())}function Ni(){return rt(Yn)}function Ou(){return Ze().memoizedState}function zu(){return Ze().memoizedState}function hm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Et();e=Ca(a);var l=Ma(t,e,a);l!==null&&(xt(l,t,a),bn(l,t,a)),t={cache:Ps()},e.payload=t;return}t=t.return}}function ym(e,t,a){var l=Et();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Rr(e)?Uu(t,a):(a=qs(e,t,a,l),a!==null&&(xt(a,e,l),Du(a,t,l)))}function _u(e,t,a){var l=Et();Nn(e,t,a,l)}function Nn(e,t,a,l){var n={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rr(e))Uu(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var u=t.lastRenderedState,m=r(u,a);if(n.hasEagerState=!0,n.eagerState=m,jt(m,u))return dr(e,t,n,0),He===null&&ur(),!1}catch{}finally{}if(a=qs(e,t,n,l),a!==null)return xt(a,e,l),Du(a,t,l),!0}return!1}function wi(e,t,a,l){if(l={lane:2,revertLane:lo(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Rr(e)){if(t)throw Error(c(479))}else t=qs(e,a,l,2),t!==null&&xt(t,e,2)}function Rr(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function Uu(e,t){Hl=Nr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Du(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Yo(e,a)}}var wn={readContext:rt,use:Tr,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};wn.useEffectEvent=Ke;var Hu={readContext:rt,use:Tr,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:vu,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Cr(4194308,4,Nu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Cr(4194308,4,e,t)},useInsertionEffect:function(e,t){Cr(4,2,e,t)},useMemo:function(e,t){var a=ut();t=t===void 0?null:t;var l=e();if(cl){Sa(!0);try{e()}finally{Sa(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=ut();if(a!==void 0){var n=a(t);if(cl){Sa(!0);try{a(t)}finally{Sa(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=ym.bind(null,ye,e),[l.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:function(e){e=pi(e);var t=e.queue,a=_u.bind(null,ye,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Si,useDeferredValue:function(e,t){var a=ut();return ji(a,e,t)},useTransition:function(){var e=pi(!1);return e=Cu.bind(null,ye,e.queue,!0,!1),ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=ye,n=ut();if(Te){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),He===null)throw Error(c(349));(we&127)!==0||nu(l,t,a)}n.memoizedState=a;var r={value:a,getSnapshot:t};return n.queue=r,vu(su.bind(null,l,r,e),[e]),l.flags|=2048,Gl(9,{destroy:void 0},ru.bind(null,l,r,a,t),null),a},useId:function(){var e=ut(),t=He.identifierPrefix;if(Te){var a=Qt,l=Kt;a=(l&~(1<<32-St(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=wr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=cm++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ni,useFormState:hu,useActionState:hu,useOptimistic:function(e){var t=ut();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=wi.bind(null,ye,!0,a),a.dispatch=t,[e,t]},useMemoCache:hi,useCacheRefresh:function(){return ut().memoizedState=hm.bind(null,ye)},useEffectEvent:function(e){var t=ut(),a={impl:e};return t.memoizedState=a,function(){if((Re&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},Ai={readContext:rt,use:Tr,useCallback:Au,useContext:rt,useEffect:vi,useImperativeHandle:wu,useInsertionEffect:ju,useLayoutEffect:ku,useMemo:Tu,useReducer:Er,useRef:bu,useState:function(){return Er(ia)},useDebugValue:Si,useDeferredValue:function(e,t){var a=Ze();return Eu(a,_e.memoizedState,e,t)},useTransition:function(){var e=Er(ia)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:kn(e),t]},useSyncExternalStore:lu,useId:Ou,useHostTransitionStatus:Ni,useFormState:yu,useActionState:yu,useOptimistic:function(e,t){var a=Ze();return cu(a,_e,e,t)},useMemoCache:hi,useCacheRefresh:zu};Ai.useEffectEvent=Su;var Lu={readContext:rt,use:Tr,useCallback:Au,useContext:rt,useEffect:vi,useImperativeHandle:wu,useInsertionEffect:ju,useLayoutEffect:ku,useMemo:Tu,useReducer:xi,useRef:bu,useState:function(){return xi(ia)},useDebugValue:Si,useDeferredValue:function(e,t){var a=Ze();return _e===null?ji(a,e,t):Eu(a,_e.memoizedState,e,t)},useTransition:function(){var e=xi(ia)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:kn(e),t]},useSyncExternalStore:lu,useId:Ou,useHostTransitionStatus:Ni,useFormState:pu,useActionState:pu,useOptimistic:function(e,t){var a=Ze();return _e!==null?cu(a,_e,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:hi,useCacheRefresh:zu};Lu.useEffectEvent=Su;function Ti(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:T({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ei={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Et(),n=Ca(l);n.payload=t,a!=null&&(n.callback=a),t=Ma(e,n,l),t!==null&&(xt(t,e,l),bn(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Et(),n=Ca(l);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=Ma(e,n,l),t!==null&&(xt(t,e,l),bn(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Et(),l=Ca(a);l.tag=2,t!=null&&(l.callback=t),t=Ma(e,l,a),t!==null&&(xt(t,e,a),bn(t,e,a))}};function Gu(e,t,a,l,n,r,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,r,u):t.prototype&&t.prototype.isPureReactComponent?!dn(a,l)||!dn(n,r):!0}function Bu(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Ei.enqueueReplaceState(t,t.state,null)}function ul(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=T({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}function Yu(e){cr(e)}function qu(e){console.error(e)}function Vu(e){cr(e)}function Or(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Xu(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Ci(e,t,a){return a=Ca(a),a.tag=3,a.payload={element:null},a.callback=function(){Or(e,t)},a}function Ku(e){return e=Ca(e),e.tag=3,e}function Qu(e,t,a,l){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;e.payload=function(){return n(r)},e.callback=function(){Xu(t,a,l)}}var u=a.stateNode;u!==null&&typeof u.componentDidCatch=="function"&&(e.callback=function(){Xu(t,a,l),typeof n!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function xm(e,t,a,l,n){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&Rl(t,a,n,!0),a=Nt.current,a!==null){switch(a.tag){case 31:case 13:return Gt===null?Xr():a.alternate===null&&Qe===0&&(Qe=3),a.flags&=-257,a.flags|=65536,a.lanes=n,l===br?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),eo(e,l,n)),!1;case 22:return a.flags|=65536,l===br?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),eo(e,l,n)),!1}throw Error(c(435,a.tag))}return eo(e,l,n),Xr(),!1}if(Te)return t=Nt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==Zs&&(e=Error(c(422),{cause:l}),gn(Ut(e,a)))):(l!==Zs&&(t=Error(c(423),{cause:l}),gn(Ut(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=Ut(l,a),n=Ci(e.stateNode,l,n),ri(e,n),Qe!==4&&(Qe=2)),!1;var r=Error(c(520),{cause:l});if(r=Ut(r,a),zn===null?zn=[r]:zn.push(r),Qe!==4&&(Qe=2),t===null)return!0;l=Ut(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=Ci(a.stateNode,l,e),ri(a,e),!1;case 1:if(t=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Da===null||!Da.has(r))))return a.flags|=65536,n&=-n,a.lanes|=n,n=Ku(n),Qu(n,e,a,l),ri(a,n),!1}a=a.return}while(a!==null);return!1}var Mi=Error(c(461)),We=!1;function st(e,t,a,l){t.child=e===null?$c(t,null,a,l):ol(t,e.child,a,l)}function Iu(e,t,a,l,n){a=a.render;var r=t.ref;if("ref"in l){var u={};for(var m in l)m!=="ref"&&(u[m]=l[m])}else u=l;return nl(t),l=di(e,t,a,u,r,n),m=fi(),e!==null&&!We?(mi(e,t,n),oa(e,t,n)):(Te&&m&&Qs(t),t.flags|=1,st(e,t,l,n),t.child)}function Zu(e,t,a,l,n){if(e===null){var r=a.type;return typeof r=="function"&&!Vs(r)&&r.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=r,Ju(e,t,r,l,n)):(e=mr(a.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Li(e,n)){var u=r.memoizedProps;if(a=a.compare,a=a!==null?a:dn,a(u,l)&&e.ref===t.ref)return oa(e,t,n)}return t.flags|=1,e=aa(r,l),e.ref=t.ref,e.return=t,t.child=e}function Ju(e,t,a,l,n){if(e!==null){var r=e.memoizedProps;if(dn(r,l)&&e.ref===t.ref)if(We=!1,t.pendingProps=l=r,Li(e,n))(e.flags&131072)!==0&&(We=!0);else return t.lanes=e.lanes,oa(e,t,n)}return Ri(e,t,a,l,n)}function $u(e,t,a,l){var n=l.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|a:a,e!==null){for(l=t.child=e.child,n=0;l!==null;)n=n|l.lanes|l.childLanes,l=l.sibling;l=n&~r}else l=0,t.child=null;return Wu(e,t,r,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&xr(t,r!==null?r.cachePool:null),r!==null?Pc(t,r):ii(),eu(t);else return l=t.lanes=536870912,Wu(e,t,r!==null?r.baseLanes|a:a,a,l)}else r!==null?(xr(t,r.cachePool),Pc(t,r),Oa(),t.memoizedState=null):(e!==null&&xr(t,null),ii(),Oa());return st(e,t,n,a),t.child}function An(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Wu(e,t,a,l,n){var r=ti();return r=r===null?null:{parent:Je._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},e!==null&&xr(t,null),ii(),eu(t),e!==null&&Rl(e,t,l,!0),t.childLanes=n,null}function zr(e,t){return t=Ur({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Fu(e,t,a){return ol(t,e.child,null,a),e=zr(t,t.pendingProps),e.flags|=2,wt(t),t.memoizedState=null,e}function pm(e,t,a){var l=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Te){if(l.mode==="hidden")return e=zr(t,l),t.lanes=536870912,An(null,e);if(ci(t),(e=Ge)?(e=df(e,Lt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:Kt,overflow:Qt}:null,retryLane:536870912,hydrationErrors:null},a=Uc(e),a.return=t,t.child=a,nt=t,Ge=null)):e=null,e===null)throw Aa(t);return t.lanes=536870912,null}return zr(t,l)}var r=e.memoizedState;if(r!==null){var u=r.dehydrated;if(ci(t),n)if(t.flags&256)t.flags&=-257,t=Fu(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(We||Rl(e,t,a,!1),n=(a&e.childLanes)!==0,We||n){if(l=He,l!==null&&(u=qo(l,a),u!==0&&u!==r.retryLane))throw r.retryLane=u,el(e,u),xt(l,e,u),Mi;Xr(),t=Fu(e,t,a)}else e=r.treeContext,Ge=Bt(u.nextSibling),nt=t,Te=!0,wa=null,Lt=!1,e!==null&&Lc(t,e),t=zr(t,l),t.flags|=4096;return t}return e=aa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _r(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Ri(e,t,a,l,n){return nl(t),a=di(e,t,a,l,void 0,n),l=fi(),e!==null&&!We?(mi(e,t,n),oa(e,t,n)):(Te&&l&&Qs(t),t.flags|=1,st(e,t,a,n),t.child)}function Pu(e,t,a,l,n,r){return nl(t),t.updateQueue=null,a=au(t,l,a,n),tu(e),l=fi(),e!==null&&!We?(mi(e,t,r),oa(e,t,r)):(Te&&l&&Qs(t),t.flags|=1,st(e,t,a,r),t.child)}function ed(e,t,a,l,n){if(nl(t),t.stateNode===null){var r=Tl,u=a.contextType;typeof u=="object"&&u!==null&&(r=rt(u)),r=new a(l,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ei,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=l,r.state=t.memoizedState,r.refs={},li(t),u=a.contextType,r.context=typeof u=="object"&&u!==null?rt(u):Tl,r.state=t.memoizedState,u=a.getDerivedStateFromProps,typeof u=="function"&&(Ti(t,a,u,l),r.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(u=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),u!==r.state&&Ei.enqueueReplaceState(r,r.state,null),Sn(t,l,r,n),vn(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){r=t.stateNode;var m=t.memoizedProps,b=ul(a,m);r.props=b;var w=r.context,_=a.contextType;u=Tl,typeof _=="object"&&_!==null&&(u=rt(_));var H=a.getDerivedStateFromProps;_=typeof H=="function"||typeof r.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,_||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(m||w!==u)&&Bu(t,r,l,u),Ea=!1;var A=t.memoizedState;r.state=A,Sn(t,l,r,n),vn(),w=t.memoizedState,m||A!==w||Ea?(typeof H=="function"&&(Ti(t,a,H,l),w=t.memoizedState),(b=Ea||Gu(t,a,b,l,A,w,u))?(_||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=w),r.props=l,r.state=w,r.context=u,l=b):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{r=t.stateNode,ni(e,t),u=t.memoizedProps,_=ul(a,u),r.props=_,H=t.pendingProps,A=r.context,w=a.contextType,b=Tl,typeof w=="object"&&w!==null&&(b=rt(w)),m=a.getDerivedStateFromProps,(w=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(u!==H||A!==b)&&Bu(t,r,l,b),Ea=!1,A=t.memoizedState,r.state=A,Sn(t,l,r,n),vn();var C=t.memoizedState;u!==H||A!==C||Ea||e!==null&&e.dependencies!==null&&hr(e.dependencies)?(typeof m=="function"&&(Ti(t,a,m,l),C=t.memoizedState),(_=Ea||Gu(t,a,_,l,A,C,b)||e!==null&&e.dependencies!==null&&hr(e.dependencies))?(w||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,C,b),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,C,b)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=C),r.props=l,r.state=C,r.context=b,l=_):(typeof r.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),l=!1)}return r=l,_r(e,t),l=(t.flags&128)!==0,r||l?(r=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&l?(t.child=ol(t,e.child,null,n),t.child=ol(t,null,a,n)):st(e,t,a,n),t.memoizedState=r.state,e=t.child):e=oa(e,t,n),e}function td(e,t,a,l){return al(),t.flags|=256,st(e,t,a,l),t.child}var Oi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zi(e){return{baseLanes:e,cachePool:Xc()}}function _i(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Tt),e}function ad(e,t,a){var l=t.pendingProps,n=!1,r=(t.flags&128)!==0,u;if((u=r)||(u=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),u&&(n=!0,t.flags&=-129),u=(t.flags&32)!==0,t.flags&=-33,e===null){if(Te){if(n?Ra(t):Oa(),(e=Ge)?(e=df(e,Lt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Na!==null?{id:Kt,overflow:Qt}:null,retryLane:536870912,hydrationErrors:null},a=Uc(e),a.return=t,t.child=a,nt=t,Ge=null)):e=null,e===null)throw Aa(t);return xo(e)?t.lanes=32:t.lanes=536870912,null}var m=l.children;return l=l.fallback,n?(Oa(),n=t.mode,m=Ur({mode:"hidden",children:m},n),l=tl(l,n,a,null),m.return=t,l.return=t,m.sibling=l,t.child=m,l=t.child,l.memoizedState=zi(a),l.childLanes=_i(e,u,a),t.memoizedState=Oi,An(null,l)):(Ra(t),Ui(t,m))}var b=e.memoizedState;if(b!==null&&(m=b.dehydrated,m!==null)){if(r)t.flags&256?(Ra(t),t.flags&=-257,t=Di(e,t,a)):t.memoizedState!==null?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),m=l.fallback,n=t.mode,l=Ur({mode:"visible",children:l.children},n),m=tl(m,n,a,null),m.flags|=2,l.return=t,m.return=t,l.sibling=m,t.child=l,ol(t,e.child,null,a),l=t.child,l.memoizedState=zi(a),l.childLanes=_i(e,u,a),t.memoizedState=Oi,t=An(null,l));else if(Ra(t),xo(m)){if(u=m.nextSibling&&m.nextSibling.dataset,u)var w=u.dgst;u=w,l=Error(c(419)),l.stack="",l.digest=u,gn({value:l,source:null,stack:null}),t=Di(e,t,a)}else if(We||Rl(e,t,a,!1),u=(a&e.childLanes)!==0,We||u){if(u=He,u!==null&&(l=qo(u,a),l!==0&&l!==b.retryLane))throw b.retryLane=l,el(e,l),xt(u,e,l),Mi;yo(m)||Xr(),t=Di(e,t,a)}else yo(m)?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,Ge=Bt(m.nextSibling),nt=t,Te=!0,wa=null,Lt=!1,e!==null&&Lc(t,e),t=Ui(t,l.children),t.flags|=4096);return t}return n?(Oa(),m=l.fallback,n=t.mode,b=e.child,w=b.sibling,l=aa(b,{mode:"hidden",children:l.children}),l.subtreeFlags=b.subtreeFlags&65011712,w!==null?m=aa(w,m):(m=tl(m,n,a,null),m.flags|=2),m.return=t,l.return=t,l.sibling=m,t.child=l,An(null,l),l=t.child,m=e.child.memoizedState,m===null?m=zi(a):(n=m.cachePool,n!==null?(b=Je._currentValue,n=n.parent!==b?{parent:b,pool:b}:n):n=Xc(),m={baseLanes:m.baseLanes|a,cachePool:n}),l.memoizedState=m,l.childLanes=_i(e,u,a),t.memoizedState=Oi,An(e.child,l)):(Ra(t),a=e.child,e=a.sibling,a=aa(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(u=t.deletions,u===null?(t.deletions=[e],t.flags|=16):u.push(e)),t.child=a,t.memoizedState=null,a)}function Ui(e,t){return t=Ur({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ur(e,t){return e=kt(22,e,null,t),e.lanes=0,e}function Di(e,t,a){return ol(t,e.child,null,a),e=Ui(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ld(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ws(e.return,t,a)}function Hi(e,t,a,l,n,r){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:n,treeForkCount:r}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=l,u.tail=a,u.tailMode=n,u.treeForkCount=r)}function nd(e,t,a){var l=t.pendingProps,n=l.revealOrder,r=l.tail;l=l.children;var u=Ie.current,m=(u&2)!==0;if(m?(u=u&1|2,t.flags|=128):u&=1,Q(Ie,u),st(e,t,l,a),l=Te?mn:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ld(e,a,t);else if(e.tag===19)ld(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&kr(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Hi(t,!1,n,a,r,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&kr(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Hi(t,!0,a,null,r,l);break;case"together":Hi(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function oa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ua|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Rl(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=aa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=aa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Li(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&hr(e)))}function bm(e,t,a){switch(t.tag){case 3:at(t,t.stateNode.containerInfo),Ta(t,Je,e.memoizedState.cache),al();break;case 27:case 5:Za(t);break;case 4:at(t,t.stateNode.containerInfo);break;case 10:Ta(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ci(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Ra(t),t.flags|=128,null):(a&t.child.childLanes)!==0?ad(e,t,a):(Ra(t),e=oa(e,t,a),e!==null?e.sibling:null);Ra(t);break;case 19:var n=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(Rl(e,t,a,!1),l=(a&t.childLanes)!==0),n){if(l)return nd(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Q(Ie,Ie.current),l)break;return null;case 22:return t.lanes=0,$u(e,t,a,t.pendingProps);case 24:Ta(t,Je,e.memoizedState.cache)}return oa(e,t,a)}function rd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)We=!0;else{if(!Li(e,a)&&(t.flags&128)===0)return We=!1,bm(e,t,a);We=(e.flags&131072)!==0}else We=!1,Te&&(t.flags&1048576)!==0&&Hc(t,mn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=sl(t.elementType),t.type=e,typeof e=="function")Vs(e)?(l=ul(e,l),t.tag=1,t=ed(null,t,e,l,a)):(t.tag=0,t=Ri(null,t,e,l,a));else{if(e!=null){var n=e.$$typeof;if(n===Z){t.tag=11,t=Iu(null,t,e,l,a);break e}else if(n===q){t.tag=14,t=Zu(null,t,e,l,a);break e}}throw t=F(e)||e,Error(c(306,t,""))}}return t;case 0:return Ri(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,n=ul(l,t.pendingProps),ed(e,t,l,n,a);case 3:e:{if(at(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var r=t.memoizedState;n=r.element,ni(e,t),Sn(t,l,null,a);var u=t.memoizedState;if(l=u.cache,Ta(t,Je,l),l!==r.cache&&Fs(t,[Je],a,!0),vn(),l=u.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:u.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=td(e,t,l,a);break e}else if(l!==n){n=Ut(Error(c(424)),t),gn(n),t=td(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ge=Bt(e.firstChild),nt=t,Te=!0,wa=null,Lt=!0,a=$c(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(al(),l===n){t=oa(e,t,a);break e}st(e,t,l,a)}t=t.child}return t;case 26:return _r(e,t),e===null?(a=xf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Te||(a=t.type,e=t.pendingProps,l=Wr(me.current).createElement(a),l[lt]=t,l[dt]=e,it(l,a,e),et(l),t.stateNode=l):t.memoizedState=xf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Za(t),e===null&&Te&&(l=t.stateNode=gf(t.type,t.pendingProps,me.current),nt=t,Lt=!0,n=Ge,Ba(t.type)?(po=n,Ge=Bt(l.firstChild)):Ge=n),st(e,t,t.pendingProps.children,a),_r(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Te&&((n=l=Ge)&&(l=Jm(l,t.type,t.pendingProps,Lt),l!==null?(t.stateNode=l,nt=t,Ge=Bt(l.firstChild),Lt=!1,n=!0):n=!1),n||Aa(t)),Za(t),n=t.type,r=t.pendingProps,u=e!==null?e.memoizedProps:null,l=r.children,mo(n,r)?l=null:u!==null&&mo(n,u)&&(t.flags|=32),t.memoizedState!==null&&(n=di(e,t,um,null,null,a),Yn._currentValue=n),_r(e,t),st(e,t,l,a),t.child;case 6:return e===null&&Te&&((e=a=Ge)&&(a=$m(a,t.pendingProps,Lt),a!==null?(t.stateNode=a,nt=t,Ge=null,e=!0):e=!1),e||Aa(t)),null;case 13:return ad(e,t,a);case 4:return at(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ol(t,null,l,a):st(e,t,l,a),t.child;case 11:return Iu(e,t,t.type,t.pendingProps,a);case 7:return st(e,t,t.pendingProps,a),t.child;case 8:return st(e,t,t.pendingProps.children,a),t.child;case 12:return st(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Ta(t,t.type,l.value),st(e,t,l.children,a),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,nl(t),n=rt(n),l=l(n),t.flags|=1,st(e,t,l,a),t.child;case 14:return Zu(e,t,t.type,t.pendingProps,a);case 15:return Ju(e,t,t.type,t.pendingProps,a);case 19:return nd(e,t,a);case 31:return pm(e,t,a);case 22:return $u(e,t,a,t.pendingProps);case 24:return nl(t),l=rt(Je),e===null?(n=ti(),n===null&&(n=He,r=Ps(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=a),n=r),t.memoizedState={parent:l,cache:n},li(t),Ta(t,Je,n)):((e.lanes&a)!==0&&(ni(e,t),Sn(t,null,null,a),vn()),n=e.memoizedState,r=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Ta(t,Je,l)):(l=r.cache,Ta(t,Je,l),l!==n.cache&&Fs(t,[Je],a,!0))),st(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function ca(e){e.flags|=4}function Gi(e,t,a,l,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(Od())e.flags|=8192;else throw il=br,ai}else e.flags&=-16777217}function sd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jf(t))if(Od())e.flags|=8192;else throw il=br,ai}function Dr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Go():536870912,e.lanes|=t,Vl|=t)}function Tn(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function vm(e,t,a){var l=t.pendingProps;switch(Is(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return Be(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ra(Je),Ve(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ml(t)?ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Js())),Be(t),null;case 26:var n=t.type,r=t.memoizedState;return e===null?(ca(t),r!==null?(Be(t),sd(t,r)):(Be(t),Gi(t,n,null,l,a))):r?r!==e.memoizedState?(ca(t),Be(t),sd(t,r)):(Be(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ca(t),Be(t),Gi(t,n,e,l,a)),null;case 27:if(te(t),a=me.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ca(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Be(t),null}e=J.current,Ml(t)?Gc(t):(e=gf(n,l,a),t.stateNode=e,ca(t))}return Be(t),null;case 5:if(te(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ca(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Be(t),null}if(r=J.current,Ml(t))Gc(t);else{var u=Wr(me.current);switch(r){case 1:r=u.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=u.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=u.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=u.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=u.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?u.createElement("select",{is:l.is}):u.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?u.createElement(n,{is:l.is}):u.createElement(n)}}r[lt]=t,r[dt]=l;e:for(u=t.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}t.stateNode=r;e:switch(it(r,n,l),n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ca(t)}}return Be(t),Gi(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ca(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=me.current,Ml(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,n=nt,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[lt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||af(e.nodeValue,a)),e||Aa(t,!0)}else e=Wr(e).createTextNode(l),e[lt]=t,t.stateNode=e}return Be(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ml(t),a!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[lt]=t}else al(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Be(t),e=!1}else a=Js(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(wt(t),t):(wt(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Be(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Ml(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(c(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(c(317));n[lt]=t}else al(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Be(t),n=!1}else n=Js(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(wt(t),t):(wt(t),null)}return wt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Dr(t,t.updateQueue),Be(t),null);case 4:return Ve(),e===null&&io(t.stateNode.containerInfo),Be(t),null;case 10:return ra(t.type),Be(t),null;case 19:if(O(Ie),l=t.memoizedState,l===null)return Be(t),null;if(n=(t.flags&128)!==0,r=l.rendering,r===null)if(n)Tn(l,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=kr(e),r!==null){for(t.flags|=128,Tn(l,!1),e=r.updateQueue,t.updateQueue=e,Dr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)_c(a,e),a=a.sibling;return Q(Ie,Ie.current&1|2),Te&&la(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&bt()>Yr&&(t.flags|=128,n=!0,Tn(l,!1),t.lanes=4194304)}else{if(!n)if(e=kr(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Dr(t,e),Tn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!Te)return Be(t),null}else 2*bt()-l.renderingStartTime>Yr&&a!==536870912&&(t.flags|=128,n=!0,Tn(l,!1),t.lanes=4194304);l.isBackwards?(r.sibling=t.child,t.child=r):(e=l.last,e!==null?e.sibling=r:t.child=r,l.last=r)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=bt(),e.sibling=null,a=Ie.current,Q(Ie,n?a&1|2:a&1),Te&&la(t,l.treeForkCount),e):(Be(t),null);case 22:case 23:return wt(t),oi(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),a=t.updateQueue,a!==null&&Dr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&O(rl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ra(Je),Be(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Sm(e,t){switch(Is(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(Je),Ve(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return te(t),null;case 31:if(t.memoizedState!==null){if(wt(t),t.alternate===null)throw Error(c(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return O(Ie),null;case 4:return Ve(),null;case 10:return ra(t.type),null;case 22:case 23:return wt(t),oi(),e!==null&&O(rl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ra(Je),null;case 25:return null;default:return null}}function id(e,t){switch(Is(t),t.tag){case 3:ra(Je),Ve();break;case 26:case 27:case 5:te(t);break;case 4:Ve();break;case 31:t.memoizedState!==null&&wt(t);break;case 13:wt(t);break;case 19:O(Ie);break;case 10:ra(t.type);break;case 22:case 23:wt(t),oi(),e!==null&&O(rl);break;case 24:ra(Je)}}function En(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var n=l.next;a=n;do{if((a.tag&e)===e){l=void 0;var r=a.create,u=a.inst;l=r(),u.destroy=l}a=a.next}while(a!==n)}}catch(m){ze(t,t.return,m)}}function za(e,t,a){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&e)===e){var u=l.inst,m=u.destroy;if(m!==void 0){u.destroy=void 0,n=t;var b=a,w=m;try{w()}catch(_){ze(n,b,_)}}}l=l.next}while(l!==r)}}catch(_){ze(t,t.return,_)}}function od(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Fc(t,a)}catch(l){ze(e,e.return,l)}}}function cd(e,t,a){a.props=ul(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ze(e,t,l)}}function Cn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(n){ze(e,t,n)}}function It(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(n){ze(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){ze(e,t,n)}else a.current=null}function ud(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(n){ze(e,e.return,n)}}function Bi(e,t,a){try{var l=e.stateNode;Vm(l,e.type,a,t),l[dt]=t}catch(n){ze(e,e.return,n)}}function dd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ba(e.type)||e.tag===4}function Yi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qi(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ea));else if(l!==4&&(l===27&&Ba(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(qi(e,t,a),e=e.sibling;e!==null;)qi(e,t,a),e=e.sibling}function Hr(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&Ba(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Hr(e,t,a),e=e.sibling;e!==null;)Hr(e,t,a),e=e.sibling}function fd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);it(t,l,a),t[lt]=e,t[dt]=a}catch(r){ze(e,e.return,r)}}var ua=!1,Fe=!1,Vi=!1,md=typeof WeakSet=="function"?WeakSet:Set,tt=null;function jm(e,t){if(e=e.containerInfo,uo=ns,e=wc(e),Ds(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var u=0,m=-1,b=-1,w=0,_=0,H=e,A=null;t:for(;;){for(var C;H!==a||n!==0&&H.nodeType!==3||(m=u+n),H!==r||l!==0&&H.nodeType!==3||(b=u+l),H.nodeType===3&&(u+=H.nodeValue.length),(C=H.firstChild)!==null;)A=H,H=C;for(;;){if(H===e)break t;if(A===a&&++w===n&&(m=u),A===r&&++_===l&&(b=u),(C=H.nextSibling)!==null)break;H=A,A=H.parentNode}H=C}a=m===-1||b===-1?null:{start:m,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(fo={focusedElem:e,selectionRange:a},ns=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){switch(t=tt,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)n=e[a],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,a=t,n=r.memoizedProps,r=r.memoizedState,l=a.stateNode;try{var $=ul(a.type,n);e=l.getSnapshotBeforeUpdate($,r),l.__reactInternalSnapshotBeforeUpdate=e}catch(ne){ze(a,a.return,ne)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)ho(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ho(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}}function gd(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:fa(e,a),l&4&&En(5,a);break;case 1:if(fa(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(u){ze(a,a.return,u)}else{var n=ul(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(u){ze(a,a.return,u)}}l&64&&od(a),l&512&&Cn(a,a.return);break;case 3:if(fa(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Fc(e,t)}catch(u){ze(a,a.return,u)}}break;case 27:t===null&&l&4&&fd(a);case 26:case 5:fa(e,a),t===null&&l&4&&ud(a),l&512&&Cn(a,a.return);break;case 12:fa(e,a);break;case 31:fa(e,a),l&4&&xd(e,a);break;case 13:fa(e,a),l&4&&pd(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Rm.bind(null,a),Wm(e,a))));break;case 22:if(l=a.memoizedState!==null||ua,!l){t=t!==null&&t.memoizedState!==null||Fe,n=ua;var r=Fe;ua=l,(Fe=t)&&!r?ma(e,a,(a.subtreeFlags&8772)!==0):fa(e,a),ua=n,Fe=r}break;case 30:break;default:fa(e,a)}}function hd(e){var t=e.alternate;t!==null&&(e.alternate=null,hd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&bs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,mt=!1;function da(e,t,a){for(a=a.child;a!==null;)yd(e,t,a),a=a.sibling}function yd(e,t,a){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Fl,a)}catch{}switch(a.tag){case 26:Fe||It(a,t),da(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Fe||It(a,t);var l=Ye,n=mt;Ba(a.type)&&(Ye=a.stateNode,mt=!1),da(e,t,a),Ln(a.stateNode),Ye=l,mt=n;break;case 5:Fe||It(a,t);case 6:if(l=Ye,n=mt,Ye=null,da(e,t,a),Ye=l,mt=n,Ye!==null)if(mt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(a.stateNode)}catch(r){ze(a,t,r)}else try{Ye.removeChild(a.stateNode)}catch(r){ze(a,t,r)}break;case 18:Ye!==null&&(mt?(e=Ye,cf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Wl(e)):cf(Ye,a.stateNode));break;case 4:l=Ye,n=mt,Ye=a.stateNode.containerInfo,mt=!0,da(e,t,a),Ye=l,mt=n;break;case 0:case 11:case 14:case 15:za(2,a,t),Fe||za(4,a,t),da(e,t,a);break;case 1:Fe||(It(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&cd(a,t,l)),da(e,t,a);break;case 21:da(e,t,a);break;case 22:Fe=(l=Fe)||a.memoizedState!==null,da(e,t,a),Fe=l;break;default:da(e,t,a)}}function xd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wl(e)}catch(a){ze(t,t.return,a)}}}function pd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wl(e)}catch(a){ze(t,t.return,a)}}function km(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new md),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new md),t;default:throw Error(c(435,e.tag))}}function Lr(e,t){var a=km(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var n=Om.bind(null,e,l);l.then(n,n)}})}function gt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var n=a[l],r=e,u=t,m=u;e:for(;m!==null;){switch(m.tag){case 27:if(Ba(m.type)){Ye=m.stateNode,mt=!1;break e}break;case 5:Ye=m.stateNode,mt=!1;break e;case 3:case 4:Ye=m.stateNode.containerInfo,mt=!0;break e}m=m.return}if(Ye===null)throw Error(c(160));yd(r,u,n),Ye=null,mt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)bd(t,e),t=t.sibling}var Vt=null;function bd(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gt(t,e),ht(e),l&4&&(za(3,e,e.return),En(3,e),za(5,e,e.return));break;case 1:gt(t,e),ht(e),l&512&&(Fe||a===null||It(a,a.return)),l&64&&ua&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var n=Vt;if(gt(t,e),ht(e),l&512&&(Fe||a===null||It(a,a.return)),l&4){var r=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[tn]||r[lt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),it(r,l,a),r[lt]=e,et(r),l=r;break e;case"link":var u=vf("link","href",n).get(l+(a.href||""));if(u){for(var m=0;m<u.length;m++)if(r=u[m],r.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&r.getAttribute("rel")===(a.rel==null?null:a.rel)&&r.getAttribute("title")===(a.title==null?null:a.title)&&r.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){u.splice(m,1);break t}}r=n.createElement(l),it(r,l,a),n.head.appendChild(r);break;case"meta":if(u=vf("meta","content",n).get(l+(a.content||""))){for(m=0;m<u.length;m++)if(r=u[m],r.getAttribute("content")===(a.content==null?null:""+a.content)&&r.getAttribute("name")===(a.name==null?null:a.name)&&r.getAttribute("property")===(a.property==null?null:a.property)&&r.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&r.getAttribute("charset")===(a.charSet==null?null:a.charSet)){u.splice(m,1);break t}}r=n.createElement(l),it(r,l,a),n.head.appendChild(r);break;default:throw Error(c(468,l))}r[lt]=e,et(r),l=r}e.stateNode=l}else Sf(n,e.type,e.stateNode);else e.stateNode=bf(n,l,e.memoizedProps);else r!==l?(r===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):r.count--,l===null?Sf(n,e.type,e.stateNode):bf(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Bi(e,e.memoizedProps,a.memoizedProps)}break;case 27:gt(t,e),ht(e),l&512&&(Fe||a===null||It(a,a.return)),a!==null&&l&4&&Bi(e,e.memoizedProps,a.memoizedProps);break;case 5:if(gt(t,e),ht(e),l&512&&(Fe||a===null||It(a,a.return)),e.flags&32){n=e.stateNode;try{vl(n,"")}catch($){ze(e,e.return,$)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,Bi(e,n,a!==null?a.memoizedProps:n)),l&1024&&(Vi=!0);break;case 6:if(gt(t,e),ht(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch($){ze(e,e.return,$)}}break;case 3:if(es=null,n=Vt,Vt=Fr(t.containerInfo),gt(t,e),Vt=n,ht(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(t.containerInfo)}catch($){ze(e,e.return,$)}Vi&&(Vi=!1,vd(e));break;case 4:l=Vt,Vt=Fr(e.stateNode.containerInfo),gt(t,e),ht(e),Vt=l;break;case 12:gt(t,e),ht(e);break;case 31:gt(t,e),ht(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lr(e,l)));break;case 13:gt(t,e),ht(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Br=bt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lr(e,l)));break;case 22:n=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,w=ua,_=Fe;if(ua=w||n,Fe=_||b,gt(t,e),Fe=_,ua=w,ht(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||b||ua||Fe||dl(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){b=a=t;try{if(r=b.stateNode,n)u=r.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{m=b.stateNode;var H=b.memoizedProps.style,A=H!=null&&H.hasOwnProperty("display")?H.display:null;m.style.display=A==null||typeof A=="boolean"?"":(""+A).trim()}}catch($){ze(b,b.return,$)}}}else if(t.tag===6){if(a===null){b=t;try{b.stateNode.nodeValue=n?"":b.memoizedProps}catch($){ze(b,b.return,$)}}}else if(t.tag===18){if(a===null){b=t;try{var C=b.stateNode;n?uf(C,!0):uf(b.stateNode,!1)}catch($){ze(b,b.return,$)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Lr(e,a))));break;case 19:gt(t,e),ht(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lr(e,l)));break;case 30:break;case 21:break;default:gt(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(dd(l)){a=l;break}l=l.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var n=a.stateNode,r=Yi(e);Hr(e,r,n);break;case 5:var u=a.stateNode;a.flags&32&&(vl(u,""),a.flags&=-33);var m=Yi(e);Hr(e,m,u);break;case 3:case 4:var b=a.stateNode.containerInfo,w=Yi(e);qi(e,w,b);break;default:throw Error(c(161))}}catch(_){ze(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)gd(e,t.alternate,t),t=t.sibling}function dl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:za(4,t,t.return),dl(t);break;case 1:It(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&cd(t,t.return,a),dl(t);break;case 27:Ln(t.stateNode);case 26:case 5:It(t,t.return),dl(t);break;case 22:t.memoizedState===null&&dl(t);break;case 30:dl(t);break;default:dl(t)}e=e.sibling}}function ma(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,r=t,u=r.flags;switch(r.tag){case 0:case 11:case 15:ma(n,r,a),En(4,r);break;case 1:if(ma(n,r,a),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(w){ze(l,l.return,w)}if(l=r,n=l.updateQueue,n!==null){var m=l.stateNode;try{var b=n.shared.hiddenCallbacks;if(b!==null)for(n.shared.hiddenCallbacks=null,n=0;n<b.length;n++)Wc(b[n],m)}catch(w){ze(l,l.return,w)}}a&&u&64&&od(r),Cn(r,r.return);break;case 27:fd(r);case 26:case 5:ma(n,r,a),a&&l===null&&u&4&&ud(r),Cn(r,r.return);break;case 12:ma(n,r,a);break;case 31:ma(n,r,a),a&&u&4&&xd(n,r);break;case 13:ma(n,r,a),a&&u&4&&pd(n,r);break;case 22:r.memoizedState===null&&ma(n,r,a),Cn(r,r.return);break;case 30:break;default:ma(n,r,a)}t=t.sibling}}function Xi(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hn(a))}function Ki(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hn(e))}function Xt(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sd(e,t,a,l),t=t.sibling}function Sd(e,t,a,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Xt(e,t,a,l),n&2048&&En(9,t);break;case 1:Xt(e,t,a,l);break;case 3:Xt(e,t,a,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hn(e)));break;case 12:if(n&2048){Xt(e,t,a,l),e=t.stateNode;try{var r=t.memoizedProps,u=r.id,m=r.onPostCommit;typeof m=="function"&&m(u,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){ze(t,t.return,b)}}else Xt(e,t,a,l);break;case 31:Xt(e,t,a,l);break;case 13:Xt(e,t,a,l);break;case 23:break;case 22:r=t.stateNode,u=t.alternate,t.memoizedState!==null?r._visibility&2?Xt(e,t,a,l):Mn(e,t):r._visibility&2?Xt(e,t,a,l):(r._visibility|=2,Bl(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),n&2048&&Xi(u,t);break;case 24:Xt(e,t,a,l),n&2048&&Ki(t.alternate,t);break;default:Xt(e,t,a,l)}}function Bl(e,t,a,l,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,u=t,m=a,b=l,w=u.flags;switch(u.tag){case 0:case 11:case 15:Bl(r,u,m,b,n),En(8,u);break;case 23:break;case 22:var _=u.stateNode;u.memoizedState!==null?_._visibility&2?Bl(r,u,m,b,n):Mn(r,u):(_._visibility|=2,Bl(r,u,m,b,n)),n&&w&2048&&Xi(u.alternate,u);break;case 24:Bl(r,u,m,b,n),n&&w&2048&&Ki(u.alternate,u);break;default:Bl(r,u,m,b,n)}t=t.sibling}}function Mn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,n=l.flags;switch(l.tag){case 22:Mn(a,l),n&2048&&Xi(l.alternate,l);break;case 24:Mn(a,l),n&2048&&Ki(l.alternate,l);break;default:Mn(a,l)}t=t.sibling}}var Rn=8192;function Yl(e,t,a){if(e.subtreeFlags&Rn)for(e=e.child;e!==null;)jd(e,t,a),e=e.sibling}function jd(e,t,a){switch(e.tag){case 26:Yl(e,t,a),e.flags&Rn&&e.memoizedState!==null&&cg(a,Vt,e.memoizedState,e.memoizedProps);break;case 5:Yl(e,t,a);break;case 3:case 4:var l=Vt;Vt=Fr(e.stateNode.containerInfo),Yl(e,t,a),Vt=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Rn,Rn=16777216,Yl(e,t,a),Rn=l):Yl(e,t,a));break;default:Yl(e,t,a)}}function kd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function On(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];tt=l,wd(l,e)}kd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nd(e),e=e.sibling}function Nd(e){switch(e.tag){case 0:case 11:case 15:On(e),e.flags&2048&&za(9,e,e.return);break;case 3:On(e);break;case 12:On(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Gr(e)):On(e);break;default:On(e)}}function Gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];tt=l,wd(l,e)}kd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:za(8,t,t.return),Gr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Gr(t));break;default:Gr(t)}e=e.sibling}}function wd(e,t){for(;tt!==null;){var a=tt;switch(a.tag){case 0:case 11:case 15:za(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hn(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,tt=l;else e:for(a=e;tt!==null;){l=tt;var n=l.sibling,r=l.return;if(hd(l),l===a){tt=null;break e}if(n!==null){n.return=r,tt=n;break e}tt=r}}}var Nm={getCacheForType:function(e){var t=rt(Je),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return rt(Je).controller.signal}},wm=typeof WeakMap=="function"?WeakMap:Map,Re=0,He=null,je=null,we=0,Oe=0,At=null,_a=!1,ql=!1,Qi=!1,ga=0,Qe=0,Ua=0,fl=0,Ii=0,Tt=0,Vl=0,zn=null,yt=null,Zi=!1,Br=0,Ad=0,Yr=1/0,qr=null,Da=null,Pe=0,Ha=null,Xl=null,ha=0,Ji=0,$i=null,Td=null,_n=0,Wi=null;function Et(){return(Re&2)!==0&&we!==0?we&-we:E.T!==null?lo():Vo()}function Ed(){if(Tt===0)if((we&536870912)===0||Te){var e=$n;$n<<=1,($n&3932160)===0&&($n=262144),Tt=e}else Tt=536870912;return e=Nt.current,e!==null&&(e.flags|=32),Tt}function xt(e,t,a){(e===He&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&(Kl(e,0),La(e,we,Tt,!1)),en(e,a),((Re&2)===0||e!==He)&&(e===He&&((Re&2)===0&&(fl|=a),Qe===4&&La(e,we,Tt,!1)),Zt(e))}function Cd(e,t,a){if((Re&6)!==0)throw Error(c(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Pl(e,t),n=l?Em(e,t):Pi(e,t,!0),r=l;do{if(n===0){ql&&!l&&La(e,t,0,!1);break}else{if(a=e.current.alternate,r&&!Am(a)){n=Pi(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var u=0;else u=e.pendingLanes&-536870913,u=u!==0?u:u&536870912?536870912:0;if(u!==0){t=u;e:{var m=e;n=zn;var b=m.current.memoizedState.isDehydrated;if(b&&(Kl(m,u).flags|=256),u=Pi(m,u,!1),u!==2){if(Qi&&!b){m.errorRecoveryDisabledLanes|=r,fl|=r,n=4;break e}r=yt,yt=n,r!==null&&(yt===null?yt=r:yt.push.apply(yt,r))}n=u}if(r=!1,n!==2)continue}}if(n===1){Kl(e,0),La(e,t,0,!0);break}e:{switch(l=e,r=n,r){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:La(l,t,Tt,!_a);break e;case 2:yt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(n=Br+300-bt(),10<n)){if(La(l,t,Tt,!_a),Fn(l,0,!0)!==0)break e;ha=t,l.timeoutHandle=sf(Md.bind(null,l,a,yt,qr,Zi,t,Tt,fl,Vl,_a,r,"Throttled",-0,0),n);break e}Md(l,a,yt,qr,Zi,t,Tt,fl,Vl,_a,r,null,-0,0)}}break}while(!0);Zt(e)}function Md(e,t,a,l,n,r,u,m,b,w,_,H,A,C){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ea},jd(t,r,H);var $=(r&62914560)===r?Br-bt():(r&4194048)===r?Ad-bt():0;if($=ug(H,$),$!==null){ha=r,e.cancelPendingCommit=$(Ld.bind(null,e,t,r,a,l,n,u,m,b,_,H,null,A,C)),La(e,r,u,!w);return}}Ld(e,t,r,a,l,n,u,m,b)}function Am(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var n=a[l],r=n.getSnapshot;n=n.value;try{if(!jt(r(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t,a,l){t&=~Ii,t&=~fl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var r=31-St(n),u=1<<r;l[r]=-1,n&=~u}a!==0&&Bo(e,a,t)}function Vr(){return(Re&6)===0?(Un(0),!1):!0}function Fi(){if(je!==null){if(Oe===0)var e=je.return;else e=je,na=ll=null,gi(e),Ul=null,xn=0,e=je;for(;e!==null;)id(e.alternate,e),e=e.return;je=null}}function Kl(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Qm(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ha=0,Fi(),He=e,je=a=aa(e.current,null),we=t,Oe=0,At=null,_a=!1,ql=Pl(e,t),Qi=!1,Vl=Tt=Ii=fl=Ua=Qe=0,yt=zn=null,Zi=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-St(l),r=1<<n;t|=e[n],l&=~r}return ga=t,ur(),a}function Rd(e,t){ye=null,E.H=wn,t===_l||t===pr?(t=Ic(),Oe=3):t===ai?(t=Ic(),Oe=4):Oe=t===Mi?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,At=t,je===null&&(Qe=1,Or(e,Ut(t,e.current)))}function Od(){var e=Nt.current;return e===null?!0:(we&4194048)===we?Gt===null:(we&62914560)===we||(we&536870912)!==0?e===Gt:!1}function zd(){var e=E.H;return E.H=wn,e===null?wn:e}function _d(){var e=E.A;return E.A=Nm,e}function Xr(){Qe=4,_a||(we&4194048)!==we&&Nt.current!==null||(ql=!0),(Ua&134217727)===0&&(fl&134217727)===0||He===null||La(He,we,Tt,!1)}function Pi(e,t,a){var l=Re;Re|=2;var n=zd(),r=_d();(He!==e||we!==t)&&(qr=null,Kl(e,t)),t=!1;var u=Qe;e:do try{if(Oe!==0&&je!==null){var m=je,b=At;switch(Oe){case 8:Fi(),u=6;break e;case 3:case 2:case 9:case 6:Nt.current===null&&(t=!0);var w=Oe;if(Oe=0,At=null,Ql(e,m,b,w),a&&ql){u=0;break e}break;default:w=Oe,Oe=0,At=null,Ql(e,m,b,w)}}Tm(),u=Qe;break}catch(_){Rd(e,_)}while(!0);return t&&e.shellSuspendCounter++,na=ll=null,Re=l,E.H=n,E.A=r,je===null&&(He=null,we=0,ur()),u}function Tm(){for(;je!==null;)Ud(je)}function Em(e,t){var a=Re;Re|=2;var l=zd(),n=_d();He!==e||we!==t?(qr=null,Yr=bt()+500,Kl(e,t)):ql=Pl(e,t);e:do try{if(Oe!==0&&je!==null){t=je;var r=At;t:switch(Oe){case 1:Oe=0,At=null,Ql(e,t,r,1);break;case 2:case 9:if(Kc(r)){Oe=0,At=null,Dd(t);break}t=function(){Oe!==2&&Oe!==9||He!==e||(Oe=7),Zt(e)},r.then(t,t);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:Kc(r)?(Oe=0,At=null,Dd(t)):(Oe=0,At=null,Ql(e,t,r,7));break;case 5:var u=null;switch(je.tag){case 26:u=je.memoizedState;case 5:case 27:var m=je;if(u?jf(u):m.stateNode.complete){Oe=0,At=null;var b=m.sibling;if(b!==null)je=b;else{var w=m.return;w!==null?(je=w,Kr(w)):je=null}break t}}Oe=0,At=null,Ql(e,t,r,5);break;case 6:Oe=0,At=null,Ql(e,t,r,6);break;case 8:Fi(),Qe=6;break e;default:throw Error(c(462))}}Cm();break}catch(_){Rd(e,_)}while(!0);return na=ll=null,E.H=l,E.A=n,Re=a,je!==null?0:(He=null,we=0,ur(),Qe)}function Cm(){for(;je!==null&&!Ff();)Ud(je)}function Ud(e){var t=rd(e.alternate,e,ga);e.memoizedProps=e.pendingProps,t===null?Kr(e):je=t}function Dd(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Pu(a,t,t.pendingProps,t.type,void 0,we);break;case 11:t=Pu(a,t,t.pendingProps,t.type.render,t.ref,we);break;case 5:gi(t);default:id(a,t),t=je=_c(t,ga),t=rd(a,t,ga)}e.memoizedProps=e.pendingProps,t===null?Kr(e):je=t}function Ql(e,t,a,l){na=ll=null,gi(t),Ul=null,xn=0;var n=t.return;try{if(xm(e,n,t,a,we)){Qe=1,Or(e,Ut(a,e.current)),je=null;return}}catch(r){if(n!==null)throw je=n,r;Qe=1,Or(e,Ut(a,e.current)),je=null;return}t.flags&32768?(Te||l===1?e=!0:ql||(we&536870912)!==0?e=!1:(_a=e=!0,(l===2||l===9||l===3||l===6)&&(l=Nt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hd(t,e)):Kr(t)}function Kr(e){var t=e;do{if((t.flags&32768)!==0){Hd(t,_a);return}e=t.return;var a=vm(t.alternate,t,ga);if(a!==null){je=a;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Qe===0&&(Qe=5)}function Hd(e,t){do{var a=Sm(e.alternate,e);if(a!==null){a.flags&=32767,je=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=a}while(e!==null);Qe=6,je=null}function Ld(e,t,a,l,n,r,u,m,b){e.cancelPendingCommit=null;do Qr();while(Pe!==0);if((Re&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(r=t.lanes|t.childLanes,r|=Ys,o0(e,a,r,u,m,b),e===He&&(je=He=null,we=0),Xl=t,Ha=e,ha=a,Ji=r,$i=n,Td=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,zm(Zn,function(){return Vd(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=E.T,E.T=null,n=L.p,L.p=2,u=Re,Re|=4;try{jm(e,t,a)}finally{Re=u,L.p=n,E.T=l}}Pe=1,Gd(),Bd(),Yd()}}function Gd(){if(Pe===1){Pe=0;var e=Ha,t=Xl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var l=L.p;L.p=2;var n=Re;Re|=4;try{bd(t,e);var r=fo,u=wc(e.containerInfo),m=r.focusedElem,b=r.selectionRange;if(u!==m&&m&&m.ownerDocument&&Nc(m.ownerDocument.documentElement,m)){if(b!==null&&Ds(m)){var w=b.start,_=b.end;if(_===void 0&&(_=w),"selectionStart"in m)m.selectionStart=w,m.selectionEnd=Math.min(_,m.value.length);else{var H=m.ownerDocument||document,A=H&&H.defaultView||window;if(A.getSelection){var C=A.getSelection(),$=m.textContent.length,ne=Math.min(b.start,$),De=b.end===void 0?ne:Math.min(b.end,$);!C.extend&&ne>De&&(u=De,De=ne,ne=u);var k=kc(m,ne),S=kc(m,De);if(k&&S&&(C.rangeCount!==1||C.anchorNode!==k.node||C.anchorOffset!==k.offset||C.focusNode!==S.node||C.focusOffset!==S.offset)){var N=H.createRange();N.setStart(k.node,k.offset),C.removeAllRanges(),ne>De?(C.addRange(N),C.extend(S.node,S.offset)):(N.setEnd(S.node,S.offset),C.addRange(N))}}}}for(H=[],C=m;C=C.parentNode;)C.nodeType===1&&H.push({element:C,left:C.scrollLeft,top:C.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<H.length;m++){var D=H[m];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}ns=!!uo,fo=uo=null}finally{Re=n,L.p=l,E.T=a}}e.current=t,Pe=2}}function Bd(){if(Pe===2){Pe=0;var e=Ha,t=Xl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var l=L.p;L.p=2;var n=Re;Re|=4;try{gd(e,t.alternate,t)}finally{Re=n,L.p=l,E.T=a}}Pe=3}}function Yd(){if(Pe===4||Pe===3){Pe=0,Pf();var e=Ha,t=Xl,a=ha,l=Td;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pe=5:(Pe=0,Xl=Ha=null,qd(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Da=null),xs(a),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Fl,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=E.T,n=L.p,L.p=2,E.T=null;try{for(var r=e.onRecoverableError,u=0;u<l.length;u++){var m=l[u];r(m.value,{componentStack:m.stack})}}finally{E.T=t,L.p=n}}(ha&3)!==0&&Qr(),Zt(e),n=e.pendingLanes,(a&261930)!==0&&(n&42)!==0?e===Wi?_n++:(_n=0,Wi=e):_n=0,Un(0)}}function qd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hn(t)))}function Qr(){return Gd(),Bd(),Yd(),Vd()}function Vd(){if(Pe!==5)return!1;var e=Ha,t=Ji;Ji=0;var a=xs(ha),l=E.T,n=L.p;try{L.p=32>a?32:a,E.T=null,a=$i,$i=null;var r=Ha,u=ha;if(Pe=0,Xl=Ha=null,ha=0,(Re&6)!==0)throw Error(c(331));var m=Re;if(Re|=4,Nd(r.current),Sd(r,r.current,u,a),Re=m,Un(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Fl,r)}catch{}return!0}finally{L.p=n,E.T=l,qd(e,t)}}function Xd(e,t,a){t=Ut(a,t),t=Ci(e.stateNode,t,2),e=Ma(e,t,2),e!==null&&(en(e,2),Zt(e))}function ze(e,t,a){if(e.tag===3)Xd(e,e,a);else for(;t!==null;){if(t.tag===3){Xd(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Da===null||!Da.has(l))){e=Ut(a,e),a=Ku(2),l=Ma(t,a,2),l!==null&&(Qu(a,l,t,e),en(l,2),Zt(l));break}}t=t.return}}function eo(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new wm;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(a)||(Qi=!0,n.add(a),e=Mm.bind(null,e,t,a),t.then(e,e))}function Mm(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,He===e&&(we&a)===a&&(Qe===4||Qe===3&&(we&62914560)===we&&300>bt()-Br?(Re&2)===0&&Kl(e,0):Ii|=a,Vl===we&&(Vl=0)),Zt(e)}function Kd(e,t){t===0&&(t=Go()),e=el(e,t),e!==null&&(en(e,t),Zt(e))}function Rm(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Kd(e,a)}function Om(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),Kd(e,a)}function zm(e,t){return pt(e,t)}var Ir=null,Il=null,to=!1,Zr=!1,ao=!1,Ga=0;function Zt(e){e!==Il&&e.next===null&&(Il===null?Ir=Il=e:Il=Il.next=e),Zr=!0,to||(to=!0,Um())}function Un(e,t){if(!ao&&Zr){ao=!0;do for(var a=!1,l=Ir;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var u=l.suspendedLanes,m=l.pingedLanes;r=(1<<31-St(42|e)+1)-1,r&=n&~(u&~m),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(a=!0,Jd(l,r))}else r=we,r=Fn(l,l===He?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||Pl(l,r)||(a=!0,Jd(l,r));l=l.next}while(a);ao=!1}}function _m(){Qd()}function Qd(){Zr=to=!1;var e=0;Ga!==0&&Km()&&(e=Ga);for(var t=bt(),a=null,l=Ir;l!==null;){var n=l.next,r=Id(l,t);r===0?(l.next=null,a===null?Ir=n:a.next=n,n===null&&(Il=a)):(a=l,(e!==0||(r&3)!==0)&&(Zr=!0)),l=n}Pe!==0&&Pe!==5||Un(e),Ga!==0&&(Ga=0)}function Id(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var u=31-St(r),m=1<<u,b=n[u];b===-1?((m&a)===0||(m&l)!==0)&&(n[u]=i0(m,t)):b<=t&&(e.expiredLanes|=m),r&=~m}if(t=He,a=we,a=Fn(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&gs(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Pl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&gs(l),xs(a)){case 2:case 8:a=Ho;break;case 32:a=Zn;break;case 268435456:a=Lo;break;default:a=Zn}return l=Zd.bind(null,e),a=pt(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&gs(l),e.callbackPriority=2,e.callbackNode=null,2}function Zd(e,t){if(Pe!==0&&Pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Qr()&&e.callbackNode!==a)return null;var l=we;return l=Fn(e,e===He?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Cd(e,l,t),Id(e,bt()),e.callbackNode!=null&&e.callbackNode===a?Zd.bind(null,e):null)}function Jd(e,t){if(Qr())return null;Cd(e,t,!0)}function Um(){Im(function(){(Re&6)!==0?pt(Do,_m):Qd()})}function lo(){if(Ga===0){var e=Ol;e===0&&(e=Jn,Jn<<=1,(Jn&261888)===0&&(Jn=256)),Ga=e}return Ga}function $d(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ar(""+e)}function Wd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Dm(e,t,a,l,n){if(t==="submit"&&a&&a.stateNode===n){var r=$d((n[dt]||null).action),u=l.submitter;u&&(t=(t=u[dt]||null)?$d(t.formAction):u.getAttribute("formAction"),t!==null&&(r=t,u=null));var m=new sr("action","action",null,l,n);e.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ga!==0){var b=u?Wd(n,u):new FormData(n);ki(a,{pending:!0,data:b,method:n.method,action:r},null,b)}}else typeof r=="function"&&(m.preventDefault(),b=u?Wd(n,u):new FormData(n),ki(a,{pending:!0,data:b,method:n.method,action:r},r,b))},currentTarget:n}]})}}for(var no=0;no<Bs.length;no++){var ro=Bs[no],Hm=ro.toLowerCase(),Lm=ro[0].toUpperCase()+ro.slice(1);qt(Hm,"on"+Lm)}qt(Ec,"onAnimationEnd"),qt(Cc,"onAnimationIteration"),qt(Mc,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(em,"onTransitionRun"),qt(tm,"onTransitionStart"),qt(am,"onTransitionCancel"),qt(Rc,"onTransitionEnd"),pl("onMouseEnter",["mouseout","mouseover"]),pl("onMouseLeave",["mouseout","mouseover"]),pl("onPointerEnter",["pointerout","pointerover"]),pl("onPointerLeave",["pointerout","pointerover"]),$a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$a("onBeforeInput",["compositionend","keypress","textInput","paste"]),$a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dn));function Fd(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],n=l.event;l=l.listeners;e:{var r=void 0;if(t)for(var u=l.length-1;0<=u;u--){var m=l[u],b=m.instance,w=m.currentTarget;if(m=m.listener,b!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=w;try{r(n)}catch(_){cr(_)}n.currentTarget=null,r=b}else for(u=0;u<l.length;u++){if(m=l[u],b=m.instance,w=m.currentTarget,m=m.listener,b!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=w;try{r(n)}catch(_){cr(_)}n.currentTarget=null,r=b}}}}function ke(e,t){var a=t[ps];a===void 0&&(a=t[ps]=new Set);var l=e+"__bubble";a.has(l)||(Pd(t,e,2,!1),a.add(l))}function so(e,t,a){var l=0;t&&(l|=4),Pd(a,e,l,t)}var Jr="_reactListening"+Math.random().toString(36).slice(2);function io(e){if(!e[Jr]){e[Jr]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(Gm.has(a)||so(a,!1,e),so(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jr]||(t[Jr]=!0,so("selectionchange",!1,t))}}function Pd(e,t,a,l){switch(Cf(t)){case 2:var n=mg;break;case 8:n=gg;break;default:n=ko}a=n.bind(null,t,a,e),n=void 0,!Ts||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function oo(e,t,a,l,n){var r=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var u=l.tag;if(u===3||u===4){var m=l.stateNode.containerInfo;if(m===n)break;if(u===4)for(u=l.return;u!==null;){var b=u.tag;if((b===3||b===4)&&u.stateNode.containerInfo===n)return;u=u.return}for(;m!==null;){if(u=hl(m),u===null)return;if(b=u.tag,b===5||b===6||b===26||b===27){l=r=u;continue e}m=m.parentNode}}l=l.return}nc(function(){var w=r,_=ws(a),H=[];e:{var A=Oc.get(e);if(A!==void 0){var C=sr,$=e;switch(e){case"keypress":if(nr(a)===0)break e;case"keydown":case"keyup":C=O0;break;case"focusin":$="focus",C=Rs;break;case"focusout":$="blur",C=Rs;break;case"beforeblur":case"afterblur":C=Rs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=v0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=U0;break;case Ec:case Cc:case Mc:C=k0;break;case Rc:C=H0;break;case"scroll":case"scrollend":C=p0;break;case"wheel":C=G0;break;case"copy":case"cut":case"paste":C=w0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=cc;break;case"toggle":case"beforetoggle":C=Y0}var ne=(t&4)!==0,De=!ne&&(e==="scroll"||e==="scrollend"),k=ne?A!==null?A+"Capture":null:A;ne=[];for(var S=w,N;S!==null;){var D=S;if(N=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||N===null||k===null||(D=ln(S,k),D!=null&&ne.push(Hn(S,D,N))),De)break;S=S.return}0<ne.length&&(A=new C(A,$,null,a,_),H.push({event:A,listeners:ne}))}}if((t&7)===0){e:{if(A=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",A&&a!==Ns&&($=a.relatedTarget||a.fromElement)&&(hl($)||$[gl]))break e;if((C||A)&&(A=_.window===_?_:(A=_.ownerDocument)?A.defaultView||A.parentWindow:window,C?($=a.relatedTarget||a.toElement,C=w,$=$?hl($):null,$!==null&&(De=f($),ne=$.tag,$!==De||ne!==5&&ne!==27&&ne!==6)&&($=null)):(C=null,$=w),C!==$)){if(ne=ic,D="onMouseLeave",k="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(ne=cc,D="onPointerLeave",k="onPointerEnter",S="pointer"),De=C==null?A:an(C),N=$==null?A:an($),A=new ne(D,S+"leave",C,a,_),A.target=De,A.relatedTarget=N,D=null,hl(_)===w&&(ne=new ne(k,S+"enter",$,a,_),ne.target=N,ne.relatedTarget=De,D=ne),De=D,C&&$)t:{for(ne=Bm,k=C,S=$,N=0,D=k;D;D=ne(D))N++;D=0;for(var ee=S;ee;ee=ne(ee))D++;for(;0<N-D;)k=ne(k),N--;for(;0<D-N;)S=ne(S),D--;for(;N--;){if(k===S||S!==null&&k===S.alternate){ne=k;break t}k=ne(k),S=ne(S)}ne=null}else ne=null;C!==null&&ef(H,A,C,ne,!1),$!==null&&De!==null&&ef(H,De,$,ne,!0)}}e:{if(A=w?an(w):window,C=A.nodeName&&A.nodeName.toLowerCase(),C==="select"||C==="input"&&A.type==="file")var Ce=xc;else if(hc(A))if(pc)Ce=W0;else{Ce=J0;var W=Z0}else C=A.nodeName,!C||C.toLowerCase()!=="input"||A.type!=="checkbox"&&A.type!=="radio"?w&&ks(w.elementType)&&(Ce=xc):Ce=$0;if(Ce&&(Ce=Ce(e,w))){yc(H,Ce,a,_);break e}W&&W(e,A,w),e==="focusout"&&w&&A.type==="number"&&w.memoizedProps.value!=null&&js(A,"number",A.value)}switch(W=w?an(w):window,e){case"focusin":(hc(W)||W.contentEditable==="true")&&(Nl=W,Hs=w,fn=null);break;case"focusout":fn=Hs=Nl=null;break;case"mousedown":Ls=!0;break;case"contextmenu":case"mouseup":case"dragend":Ls=!1,Ac(H,a,_);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":Ac(H,a,_)}var be;if(zs)e:{switch(e){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else kl?mc(e,a)&&(Ae="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(uc&&a.locale!=="ko"&&(kl||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&kl&&(be=rc()):(ka=_,Es="value"in ka?ka.value:ka.textContent,kl=!0)),W=$r(w,Ae),0<W.length&&(Ae=new oc(Ae,e,null,a,_),H.push({event:Ae,listeners:W}),be?Ae.data=be:(be=gc(a),be!==null&&(Ae.data=be)))),(be=V0?X0(e,a):K0(e,a))&&(Ae=$r(w,"onBeforeInput"),0<Ae.length&&(W=new oc("onBeforeInput","beforeinput",null,a,_),H.push({event:W,listeners:Ae}),W.data=be)),Dm(H,e,w,a,_)}Fd(H,t)})}function Hn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function $r(e,t){for(var a=t+"Capture",l=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=ln(e,a),n!=null&&l.unshift(Hn(e,n,r)),n=ln(e,t),n!=null&&l.push(Hn(e,n,r))),e.tag===3)return l;e=e.return}return[]}function Bm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ef(e,t,a,l,n){for(var r=t._reactName,u=[];a!==null&&a!==l;){var m=a,b=m.alternate,w=m.stateNode;if(m=m.tag,b!==null&&b===l)break;m!==5&&m!==26&&m!==27||w===null||(b=w,n?(w=ln(a,r),w!=null&&u.unshift(Hn(a,w,b))):n||(w=ln(a,r),w!=null&&u.push(Hn(a,w,b)))),a=a.return}u.length!==0&&e.push({event:t,listeners:u})}var Ym=/\r\n?/g,qm=/\u0000|\uFFFD/g;function tf(e){return(typeof e=="string"?e:""+e).replace(Ym,`
`).replace(qm,"")}function af(e,t){return t=tf(t),tf(e)===t}function Ue(e,t,a,l,n,r){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||vl(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&vl(e,""+l);break;case"className":er(e,"class",l);break;case"tabIndex":er(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":er(e,a,l);break;case"style":ac(e,l,r);break;case"data":if(t!=="object"){er(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ar(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(a==="formAction"?(t!=="input"&&Ue(e,t,"name",n.name,n,null),Ue(e,t,"formEncType",n.formEncType,n,null),Ue(e,t,"formMethod",n.formMethod,n,null),Ue(e,t,"formTarget",n.formTarget,n,null)):(Ue(e,t,"encType",n.encType,n,null),Ue(e,t,"method",n.method,n,null),Ue(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ar(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=ea);break;case"onScroll":l!=null&&ke("scroll",e);break;case"onScrollEnd":l!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ar(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ke("beforetoggle",e),ke("toggle",e),Pn(e,"popover",l);break;case"xlinkActuate":Pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=y0.get(a)||a,Pn(e,a,l))}}function co(e,t,a,l,n,r){switch(a){case"style":ac(e,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof l=="string"?vl(e,l):(typeof l=="number"||typeof l=="bigint")&&vl(e,""+l);break;case"onScroll":l!=null&&ke("scroll",e);break;case"onScrollEnd":l!=null&&ke("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),r=e[dt]||null,r=r!=null?r[a]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,n);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Pn(e,a,l)}}}function it(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var l=!1,n=!1,r;for(r in a)if(a.hasOwnProperty(r)){var u=a[r];if(u!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ue(e,t,r,u,a,null)}}n&&Ue(e,t,"srcSet",a.srcSet,a,null),l&&Ue(e,t,"src",a.src,a,null);return;case"input":ke("invalid",e);var m=r=u=n=null,b=null,w=null;for(l in a)if(a.hasOwnProperty(l)){var _=a[l];if(_!=null)switch(l){case"name":n=_;break;case"type":u=_;break;case"checked":b=_;break;case"defaultChecked":w=_;break;case"value":r=_;break;case"defaultValue":m=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(c(137,t));break;default:Ue(e,t,l,_,a,null)}}Fo(e,r,m,b,w,u,n,!1);return;case"select":ke("invalid",e),l=u=r=null;for(n in a)if(a.hasOwnProperty(n)&&(m=a[n],m!=null))switch(n){case"value":r=m;break;case"defaultValue":u=m;break;case"multiple":l=m;default:Ue(e,t,n,m,a,null)}t=r,a=u,e.multiple=!!l,t!=null?bl(e,!!l,t,!1):a!=null&&bl(e,!!l,a,!0);return;case"textarea":ke("invalid",e),r=n=l=null;for(u in a)if(a.hasOwnProperty(u)&&(m=a[u],m!=null))switch(u){case"value":l=m;break;case"defaultValue":n=m;break;case"children":r=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(c(91));break;default:Ue(e,t,u,m,a,null)}ec(e,l,n,r);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(l=a[b],l!=null))switch(b){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ue(e,t,b,l,a,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(l=0;l<Dn.length;l++)ke(Dn[l],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in a)if(a.hasOwnProperty(w)&&(l=a[w],l!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ue(e,t,w,l,a,null)}return;default:if(ks(t)){for(_ in a)a.hasOwnProperty(_)&&(l=a[_],l!==void 0&&co(e,t,_,l,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(l=a[m],l!=null&&Ue(e,t,m,l,a,null))}function Vm(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,u=null,m=null,b=null,w=null,_=null;for(C in a){var H=a[C];if(a.hasOwnProperty(C)&&H!=null)switch(C){case"checked":break;case"value":break;case"defaultValue":b=H;default:l.hasOwnProperty(C)||Ue(e,t,C,null,l,H)}}for(var A in l){var C=l[A];if(H=a[A],l.hasOwnProperty(A)&&(C!=null||H!=null))switch(A){case"type":r=C;break;case"name":n=C;break;case"checked":w=C;break;case"defaultChecked":_=C;break;case"value":u=C;break;case"defaultValue":m=C;break;case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(c(137,t));break;default:C!==H&&Ue(e,t,A,C,l,H)}}Ss(e,u,m,b,w,_,r,n);return;case"select":C=u=m=A=null;for(r in a)if(b=a[r],a.hasOwnProperty(r)&&b!=null)switch(r){case"value":break;case"multiple":C=b;default:l.hasOwnProperty(r)||Ue(e,t,r,null,l,b)}for(n in l)if(r=l[n],b=a[n],l.hasOwnProperty(n)&&(r!=null||b!=null))switch(n){case"value":A=r;break;case"defaultValue":m=r;break;case"multiple":u=r;default:r!==b&&Ue(e,t,n,r,l,b)}t=m,a=u,l=C,A!=null?bl(e,!!a,A,!1):!!l!=!!a&&(t!=null?bl(e,!!a,t,!0):bl(e,!!a,a?[]:"",!1));return;case"textarea":C=A=null;for(m in a)if(n=a[m],a.hasOwnProperty(m)&&n!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:Ue(e,t,m,null,l,n)}for(u in l)if(n=l[u],r=a[u],l.hasOwnProperty(u)&&(n!=null||r!=null))switch(u){case"value":A=n;break;case"defaultValue":C=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(c(91));break;default:n!==r&&Ue(e,t,u,n,l,r)}Po(e,A,C);return;case"option":for(var $ in a)if(A=a[$],a.hasOwnProperty($)&&A!=null&&!l.hasOwnProperty($))switch($){case"selected":e.selected=!1;break;default:Ue(e,t,$,null,l,A)}for(b in l)if(A=l[b],C=a[b],l.hasOwnProperty(b)&&A!==C&&(A!=null||C!=null))switch(b){case"selected":e.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Ue(e,t,b,A,l,C)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in a)A=a[ne],a.hasOwnProperty(ne)&&A!=null&&!l.hasOwnProperty(ne)&&Ue(e,t,ne,null,l,A);for(w in l)if(A=l[w],C=a[w],l.hasOwnProperty(w)&&A!==C&&(A!=null||C!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(c(137,t));break;default:Ue(e,t,w,A,l,C)}return;default:if(ks(t)){for(var De in a)A=a[De],a.hasOwnProperty(De)&&A!==void 0&&!l.hasOwnProperty(De)&&co(e,t,De,void 0,l,A);for(_ in l)A=l[_],C=a[_],!l.hasOwnProperty(_)||A===C||A===void 0&&C===void 0||co(e,t,_,A,l,C);return}}for(var k in a)A=a[k],a.hasOwnProperty(k)&&A!=null&&!l.hasOwnProperty(k)&&Ue(e,t,k,null,l,A);for(H in l)A=l[H],C=a[H],!l.hasOwnProperty(H)||A===C||A==null&&C==null||Ue(e,t,H,A,l,C)}function lf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var n=a[l],r=n.transferSize,u=n.initiatorType,m=n.duration;if(r&&m&&lf(u)){for(u=0,m=n.responseEnd,l+=1;l<a.length;l++){var b=a[l],w=b.startTime;if(w>m)break;var _=b.transferSize,H=b.initiatorType;_&&lf(H)&&(b=b.responseEnd,u+=_*(b<m?1:(m-w)/(b-w)))}if(--l,t+=8*(r+u)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var uo=null,fo=null;function Wr(e){return e.nodeType===9?e:e.ownerDocument}function nf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function mo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var go=null;function Km(){var e=window.event;return e&&e.type==="popstate"?e===go?!1:(go=e,!0):(go=null,!1)}var sf=typeof setTimeout=="function"?setTimeout:void 0,Qm=typeof clearTimeout=="function"?clearTimeout:void 0,of=typeof Promise=="function"?Promise:void 0,Im=typeof queueMicrotask=="function"?queueMicrotask:typeof of<"u"?function(e){return of.resolve(null).then(e).catch(Zm)}:sf;function Zm(e){setTimeout(function(){throw e})}function Ba(e){return e==="head"}function cf(e,t){var a=t,l=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(n),Wl(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ln(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ln(a);for(var r=a.firstChild;r;){var u=r.nextSibling,m=r.nodeName;r[tn]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=u}}else a==="body"&&Ln(e.ownerDocument.body);a=n}while(a);Wl(t)}function uf(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function ho(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ho(a),bs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Jm(e,t,a,l){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[tn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Bt(e.nextSibling),e===null)break}return null}function $m(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bt(e.nextSibling),e===null))return null;return e}function df(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bt(e.nextSibling),e===null))return null;return e}function yo(e){return e.data==="$?"||e.data==="$~"}function xo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Wm(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var po=null;function ff(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Bt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function mf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function gf(e,t,a){switch(t=Wr(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Ln(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);bs(e)}var Yt=new Map,hf=new Set;function Fr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ya=L.d;L.d={f:Fm,r:Pm,D:eg,C:tg,L:ag,m:lg,X:rg,S:ng,M:sg};function Fm(){var e=ya.f(),t=Vr();return e||t}function Pm(e){var t=yl(e);t!==null&&t.tag===5&&t.type==="form"?Ru(t):ya.r(e)}var Zl=typeof document>"u"?null:document;function yf(e,t,a){var l=Zl;if(l&&typeof t=="string"&&t){var n=zt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),hf.has(n)||(hf.add(n),e={rel:e,crossOrigin:a,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),it(t,"link",e),et(t),l.head.appendChild(t)))}}function eg(e){ya.D(e),yf("dns-prefetch",e,null)}function tg(e,t){ya.C(e,t),yf("preconnect",e,t)}function ag(e,t,a){ya.L(e,t,a);var l=Zl;if(l&&e&&t){var n='link[rel="preload"][as="'+zt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+zt(a.imageSizes)+'"]')):n+='[href="'+zt(e)+'"]';var r=n;switch(t){case"style":r=Jl(e);break;case"script":r=$l(e)}Yt.has(r)||(e=T({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Yt.set(r,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(Gn(r))||t==="script"&&l.querySelector(Bn(r))||(t=l.createElement("link"),it(t,"link",e),et(t),l.head.appendChild(t)))}}function lg(e,t){ya.m(e,t);var a=Zl;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+zt(l)+'"][href="'+zt(e)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=$l(e)}if(!Yt.has(r)&&(e=T({rel:"modulepreload",href:e},t),Yt.set(r,e),a.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bn(r)))return}l=a.createElement("link"),it(l,"link",e),et(l),a.head.appendChild(l)}}}function ng(e,t,a){ya.S(e,t,a);var l=Zl;if(l&&e){var n=xl(l).hoistableStyles,r=Jl(e);t=t||"default";var u=n.get(r);if(!u){var m={loading:0,preload:null};if(u=l.querySelector(Gn(r)))m.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Yt.get(r))&&bo(e,a);var b=u=l.createElement("link");et(b),it(b,"link",e),b._p=new Promise(function(w,_){b.onload=w,b.onerror=_}),b.addEventListener("load",function(){m.loading|=1}),b.addEventListener("error",function(){m.loading|=2}),m.loading|=4,Pr(u,t,l)}u={type:"stylesheet",instance:u,count:1,state:m},n.set(r,u)}}}function rg(e,t){ya.X(e,t);var a=Zl;if(a&&e){var l=xl(a).hoistableScripts,n=$l(e),r=l.get(n);r||(r=a.querySelector(Bn(n)),r||(e=T({src:e,async:!0},t),(t=Yt.get(n))&&vo(e,t),r=a.createElement("script"),et(r),it(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function sg(e,t){ya.M(e,t);var a=Zl;if(a&&e){var l=xl(a).hoistableScripts,n=$l(e),r=l.get(n);r||(r=a.querySelector(Bn(n)),r||(e=T({src:e,async:!0,type:"module"},t),(t=Yt.get(n))&&vo(e,t),r=a.createElement("script"),et(r),it(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function xf(e,t,a,l){var n=(n=me.current)?Fr(n):null;if(!n)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Jl(a.href),a=xl(n).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Jl(a.href);var r=xl(n).hoistableStyles,u=r.get(e);if(u||(n=n.ownerDocument||n,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,u),(r=n.querySelector(Gn(e)))&&!r._p&&(u.instance=r,u.state.loading=5),Yt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yt.set(e,a),r||ig(n,e,a,u.state))),t&&l===null)throw Error(c(528,""));return u}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$l(a),a=xl(n).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Jl(e){return'href="'+zt(e)+'"'}function Gn(e){return'link[rel="stylesheet"]['+e+"]"}function pf(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function ig(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),it(t,"link",a),et(t),e.head.appendChild(t))}function $l(e){return'[src="'+zt(e)+'"]'}function Bn(e){return"script[async]"+e}function bf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+zt(a.href)+'"]');if(l)return t.instance=l,et(l),l;var n=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),et(l),it(l,"style",n),Pr(l,a.precedence,e),t.instance=l;case"stylesheet":n=Jl(a.href);var r=e.querySelector(Gn(n));if(r)return t.state.loading|=4,t.instance=r,et(r),r;l=pf(a),(n=Yt.get(n))&&bo(l,n),r=(e.ownerDocument||e).createElement("link"),et(r);var u=r;return u._p=new Promise(function(m,b){u.onload=m,u.onerror=b}),it(r,"link",l),t.state.loading|=4,Pr(r,a.precedence,e),t.instance=r;case"script":return r=$l(a.src),(n=e.querySelector(Bn(r)))?(t.instance=n,et(n),n):(l=a,(n=Yt.get(r))&&(l=T({},a),vo(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),et(n),it(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Pr(l,a.precedence,e));return t.instance}function Pr(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,u=0;u<l.length;u++){var m=l[u];if(m.dataset.precedence===t)r=m;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function bo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function vo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var es=null;function vf(e,t,a){if(es===null){var l=new Map,n=es=new Map;n.set(a,l)}else n=es,l=n.get(a),l||(l=new Map,n.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var r=a[n];if(!(r[tn]||r[lt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var u=r.getAttribute(t)||"";u=e+u;var m=l.get(u);m?m.push(r):l.set(u,[r])}}return l}function Sf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function og(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function jf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function cg(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=Jl(l.href),r=t.querySelector(Gn(n));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ts.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=r,et(r);return}r=t.ownerDocument||t,l=pf(l),(n=Yt.get(n))&&bo(l,n),r=r.createElement("link"),et(r);var u=r;u._p=new Promise(function(m,b){u.onload=m,u.onerror=b}),it(r,"link",l),a.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ts.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var So=0;function ug(e,t){return e.stylesheets&&e.count===0&&ls(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&ls(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&So===0&&(So=62500*Xm());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ls(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>So?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(n)}}:null}function ts(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ls(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var as=null;function ls(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,as=new Map,t.forEach(dg,e),as=null,ts.call(e))}function dg(e,t){if(!(t.state.loading&4)){var a=as.get(e);if(a)var l=a.get(null);else{a=new Map,as.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var u=n[r];(u.nodeName==="LINK"||u.getAttribute("media")!=="not all")&&(a.set(u.dataset.precedence,u),l=u)}l&&a.set(null,l)}n=t.instance,u=n.getAttribute("data-precedence"),r=a.get(u)||l,r===l&&a.set(null,n),a.set(u,n),this.count++,l=ts.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var Yn={$$typeof:K,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function fg(e,t,a,l,n,r,u,m,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hs(0),this.hiddenUpdates=hs(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=u,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function kf(e,t,a,l,n,r,u,m,b,w,_,H){return e=new fg(e,t,a,u,b,w,_,H,m),t=1,r===!0&&(t|=24),r=kt(3,null,null,t),e.current=r,r.stateNode=e,t=Ps(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:l,isDehydrated:a,cache:t},li(r),e}function Nf(e){return e?(e=Tl,e):Tl}function wf(e,t,a,l,n,r){n=Nf(n),l.context===null?l.context=n:l.pendingContext=n,l=Ca(t),l.payload={element:a},r=r===void 0?null:r,r!==null&&(l.callback=r),a=Ma(e,l,t),a!==null&&(xt(a,e,t),bn(a,e,t))}function Af(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function jo(e,t){Af(e,t),(e=e.alternate)&&Af(e,t)}function Tf(e){if(e.tag===13||e.tag===31){var t=el(e,67108864);t!==null&&xt(t,e,67108864),jo(e,67108864)}}function Ef(e){if(e.tag===13||e.tag===31){var t=Et();t=ys(t);var a=el(e,t);a!==null&&xt(a,e,t),jo(e,t)}}var ns=!0;function mg(e,t,a,l){var n=E.T;E.T=null;var r=L.p;try{L.p=2,ko(e,t,a,l)}finally{L.p=r,E.T=n}}function gg(e,t,a,l){var n=E.T;E.T=null;var r=L.p;try{L.p=8,ko(e,t,a,l)}finally{L.p=r,E.T=n}}function ko(e,t,a,l){if(ns){var n=No(l);if(n===null)oo(e,t,l,rs,a),Mf(e,l);else if(yg(n,e,t,a,l))l.stopPropagation();else if(Mf(e,l),t&4&&-1<hg.indexOf(e)){for(;n!==null;){var r=yl(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var u=Ja(r.pendingLanes);if(u!==0){var m=r;for(m.pendingLanes|=2,m.entangledLanes|=2;u;){var b=1<<31-St(u);m.entanglements[1]|=b,u&=~b}Zt(r),(Re&6)===0&&(Yr=bt()+500,Un(0))}}break;case 31:case 13:m=el(r,2),m!==null&&xt(m,r,2),Vr(),jo(r,2)}if(r=No(l),r===null&&oo(e,t,l,rs,a),r===n)break;n=r}n!==null&&l.stopPropagation()}else oo(e,t,l,null,a)}}function No(e){return e=ws(e),wo(e)}var rs=null;function wo(e){if(rs=null,e=hl(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=g(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rs=e,null}function Cf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(e0()){case Do:return 2;case Ho:return 8;case Zn:case t0:return 32;case Lo:return 268435456;default:return 32}default:return 32}}var Ao=!1,Ya=null,qa=null,Va=null,qn=new Map,Vn=new Map,Xa=[],hg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mf(e,t){switch(e){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":qa=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":qn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(t.pointerId)}}function Xn(e,t,a,l,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},t!==null&&(t=yl(t),t!==null&&Tf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function yg(e,t,a,l,n){switch(t){case"focusin":return Ya=Xn(Ya,e,t,a,l,n),!0;case"dragenter":return qa=Xn(qa,e,t,a,l,n),!0;case"mouseover":return Va=Xn(Va,e,t,a,l,n),!0;case"pointerover":var r=n.pointerId;return qn.set(r,Xn(qn.get(r)||null,e,t,a,l,n)),!0;case"gotpointercapture":return r=n.pointerId,Vn.set(r,Xn(Vn.get(r)||null,e,t,a,l,n)),!0}return!1}function Rf(e){var t=hl(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=g(a),t!==null){e.blockedOn=t,Xo(e.priority,function(){Ef(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,Xo(e.priority,function(){Ef(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ss(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=No(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Ns=l,a.target.dispatchEvent(l),Ns=null}else return t=yl(a),t!==null&&Tf(t),e.blockedOn=a,!1;t.shift()}return!0}function Of(e,t,a){ss(e)&&a.delete(t)}function xg(){Ao=!1,Ya!==null&&ss(Ya)&&(Ya=null),qa!==null&&ss(qa)&&(qa=null),Va!==null&&ss(Va)&&(Va=null),qn.forEach(Of),Vn.forEach(Of)}function is(e,t){e.blockedOn===t&&(e.blockedOn=null,Ao||(Ao=!0,x.unstable_scheduleCallback(x.unstable_NormalPriority,xg)))}var os=null;function zf(e){os!==e&&(os=e,x.unstable_scheduleCallback(x.unstable_NormalPriority,function(){os===e&&(os=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(wo(l||a)===null)continue;break}var r=yl(a);r!==null&&(e.splice(t,3),t-=3,ki(r,{pending:!0,data:n,method:a.method,action:l},l,n))}}))}function Wl(e){function t(b){return is(b,e)}Ya!==null&&is(Ya,e),qa!==null&&is(qa,e),Va!==null&&is(Va,e),qn.forEach(t),Vn.forEach(t);for(var a=0;a<Xa.length;a++){var l=Xa[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Xa.length&&(a=Xa[0],a.blockedOn===null);)Rf(a),a.blockedOn===null&&Xa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var n=a[l],r=a[l+1],u=n[dt]||null;if(typeof r=="function")u||zf(a);else if(u){var m=null;if(r&&r.hasAttribute("formAction")){if(n=r,u=r[dt]||null)m=u.formAction;else if(wo(n)!==null)continue}else m=u.action;typeof m=="function"?a[l+1]=m:(a.splice(l,3),l-=3),zf(a)}}}function _f(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(u){return n=u})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function To(e){this._internalRoot=e}cs.prototype.render=To.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,l=Et();wf(a,l,e,t,null,null)},cs.prototype.unmount=To.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wf(e.current,2,null,e,null,null),Vr(),t[gl]=null}};function cs(e){this._internalRoot=e}cs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vo();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Xa.length&&t!==0&&t<Xa[a].priority;a++);Xa.splice(a,0,e),a===0&&Rf(e)}};var Uf=i.version;if(Uf!=="19.2.0")throw Error(c(527,Uf,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var pg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!us.isDisabled&&us.supportsFiber)try{Fl=us.inject(pg),vt=us}catch{}}return Qn.createRoot=function(e,t){if(!d(e))throw Error(c(299));var a=!1,l="",n=Yu,r=qu,u=Vu;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=kf(e,1,!1,null,null,a,l,null,n,r,u,_f),e[gl]=t.current,io(e),new To(t)},Qn.hydrateRoot=function(e,t,a){if(!d(e))throw Error(c(299));var l=!1,n="",r=Yu,u=qu,m=Vu,b=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(u=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(b=a.formState)),t=kf(e,1,!0,t,a??null,l,n,b,r,u,m,_f),t.context=Nf(null),a=t.current,l=Et(),l=ys(l),n=Ca(l),n.callback=null,Ma(a,n,l),a=l,t.current.lanes=a,en(t,a),Zt(t),e[gl]=t.current,io(e),new cs(t)},Qn.version="19.2.0",Qn}var Kf;function Mg(){if(Kf)return Mo.exports;Kf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(i){console.error(i)}}return x(),Mo.exports=Cg(),Mo.exports}var Rg=Mg();const Og=({imageUrl:x,altText:i,isLoading:o=!1,error:c=null,onRetry:d,className:f="",fallbackImageUrl:g})=>{const[h,p]=R.useState(!1),[y,j]=R.useState(!1),[T,z]=R.useState(null);R.useEffect(()=>{p(!1),j(!1),z(null)},[x]);const G=R.useCallback(()=>{j(!0),p(!1),x&&z(x)},[x]),B=R.useCallback(()=>{p(!0),j(!1)},[]),Y=R.useCallback(()=>{p(!1),j(!1),d&&d()},[d]),I=x||T||g;return o?s.jsx("div",{className:`relative bg-gray-100 rounded-lg overflow-hidden ${f}`,children:s.jsx("div",{className:"aspect-video w-full",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Generating image..."})]})})})}):c&&!I?s.jsx("div",{className:`relative bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg ${f}`,children:s.jsx("div",{className:"aspect-video w-full",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-3",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Image Generation Failed"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3 max-w-xs",children:c}),d&&s.jsxs("button",{onClick:Y,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx("svg",{className:"mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]})]})})})}):I?s.jsxs("div",{className:`relative rounded-lg overflow-hidden shadow-md ${f}`,children:[!y&&!h&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center z-10",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2 mx-auto"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 mx-auto"})]})})}),s.jsx("img",{src:I,alt:i,className:`w-full h-auto transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,onLoad:G,onError:B,loading:"lazy",style:{aspectRatio:"16/9",objectFit:"cover",minHeight:"200px"}}),h&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center p-4",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-10 w-10 rounded-full bg-gray-200 mb-2",children:s.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Failed to load image"}),d&&s.jsx("button",{onClick:Y,className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Try again"})]})}),y&&i&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3",children:s.jsx("div",{className:"text-white text-sm opacity-0 hover:opacity-100 transition-opacity duration-200",children:i})})]}):s.jsx("div",{className:`relative bg-gray-50 border border-gray-200 rounded-lg ${f}`,children:s.jsx("div",{className:"aspect-video w-full",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx("svg",{className:"h-12 w-12 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("div",{className:"text-sm",children:"No image available"})]})})})})},zg={temperature:.7,minP:.05,repetitionPenalty:1.1,enableStreaming:!0},In=({settings:x,onSettingsChange:i,onClose:o})=>{const[c,d]=R.useState(x),f=(p,y)=>{d(j=>({...j,[p]:y}))},g=()=>{i(c),o()},h=()=>{d(zg)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Sampler Settings"}),s.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold","aria-label":"Close",children:"×"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Temperature"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.temperature.toFixed(2)})]}),s.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:c.temperature,onChange:p=>f("temperature",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Controls randomness. Lower = more focused, Higher = more creative"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Min P"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.minP.toFixed(3)})]}),s.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.001",value:c.minP,onChange:p=>f("minP",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum probability threshold for token selection"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Repetition Penalty"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.repetitionPenalty.toFixed(2)})]}),s.jsx("input",{type:"range",min:"1",max:"2",step:"0.01",value:c.repetitionPenalty,onChange:p=>f("repetitionPenalty",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Reduces repetitive text. Higher = less repetition"})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-1",children:"Enable Text Streaming"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Show text as it's generated character by character"})]}),s.jsx("button",{type:"button",role:"switch","aria-checked":c.enableStreaming??!0,onClick:()=>f("enableStreaming",!(c.enableStreaming??!0)),className:`
                  relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent 
                  transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                  ${c.enableStreaming??!0?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}
                `,children:s.jsx("span",{"aria-hidden":"true",className:`
                    pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 
                    transition duration-200 ease-in-out
                    ${c.enableStreaming??!0?"translate-x-5":"translate-x-0"}
                  `})})]})})]}),s.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:"Reset to Defaults"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors",children:"Cancel"}),s.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 rounded-md transition-colors",children:"Save Changes"})]})]})]})})};class Ft{static CHARS_PER_TOKEN=4;static MAX_TOKENS=8192;static RESERVED_TOKENS=1e3;static MAX_CONTEXT_TOKENS=Ft.MAX_TOKENS-Ft.RESERVED_TOKENS;static estimateTokens(i){return Math.ceil(i.length/this.CHARS_PER_TOKEN)}static truncateToTokenLimit(i,o=this.MAX_CONTEXT_TOKENS){if(this.estimateTokens(i)<=o)return i;const d=o*this.CHARS_PER_TOKEN,f=i.substring(0,d),g=f.lastIndexOf(". ");return g>d*.8?f.substring(0,g+1)+" [truncated]":f+" [truncated]"}static buildTruncatedContext(i,o,c=this.MAX_CONTEXT_TOKENS){let d="",f=0,g=0,h=0;const p=[...i].reverse(),y=[...o].reverse();for(let j=0;j<Math.max(p.length,y.length);j++){let T="",z="";if(j<p.length){const Y=p[j],I=Y.text.length>300?Y.text.substring(0,300)+"...":Y.text;T=`Story ${i.length-j}: ${I}
`}if(j<y.length){const Y=y[j];z=`Action ${o.length-j}: ${Y.text}
`}const G=T+z,B=this.estimateTokens(G);if(f+B>c)break;d=G+d,f+=B,T&&g++,z&&h++}return{contextText:d,segmentsIncluded:g,choicesIncluded:h}}static buildEnhancedContext(i,o,c,d=this.MAX_CONTEXT_TOKENS){let f=null,g=null;if(i.length>0){const z=i[i.length-1];f=z.text.length>500?z.text.substring(0,500)+"...":z.text}o.length>0&&(g=o[o.length-1].text);const h=this.estimateTokens(`Previous segment: ${f||""}
Previous action: ${g||""}
Current scene: ${c}`),p=d-h,{contextText:y,segmentsIncluded:j,choicesIncluded:T}=this.buildTruncatedContext(i.slice(0,-1),o.slice(0,-1),p);return{contextText:y,previousSegment:f,previousAction:g,segmentsIncluded:j+(f?1:0),choicesIncluded:T+(g?1:0)}}static validatePromptSize(i){const o=this.estimateTokens(i);return{valid:o<=this.MAX_CONTEXT_TOKENS,estimatedTokens:o,maxTokens:this.MAX_CONTEXT_TOKENS}}static getTokenStats(i){const o=this.estimateTokens(i),c=this.MAX_CONTEXT_TOKENS-o,d=Math.round(o/this.MAX_CONTEXT_TOKENS*100);return{estimatedTokens:o,characters:i.length,maxTokens:this.MAX_CONTEXT_TOKENS,remainingTokens:Math.max(0,c),utilizationPercent:d}}}const If=({thinkingContent:x,className:i="",isStreaming:o=!1})=>{const[c,d]=R.useState(!1),f=R.useRef(null),g=R.useRef(0),[h,p]=R.useState(!1),y=R.useRef(null),j=R.useRef(!1),T=R.useRef(0),z=R.useRef(null),G=R.useRef(0),B=R.useRef(0),Y=R.useRef(null),[I,re]=R.useState(!0),ie=()=>{if(!f.current||!o||j.current)return;const K=f.current,Z=K.scrollTop,Se=Date.now(),xe=K.scrollHeight-K.scrollTop<=K.clientHeight+10,q=Se-B.current,M=Z-T.current;q>0&&(G.current=Math.abs(M)/q),M<-5&&G.current>.1&&!xe?(p(!0),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{f.current&&(f.current.scrollHeight-f.current.scrollTop>f.current.clientHeight+10||p(!1))},3e3)):xe&&!j.current&&(p(!1),y.current&&(clearTimeout(y.current),y.current=null)),T.current=Z,B.current=Se};return R.useEffect(()=>{if(c&&o&&f.current&&!h){const K=x.length;if(K>g.current){const Z=f.current;Z.scrollHeight-Z.scrollTop<=Z.clientHeight+100&&I&&(j.current=!0,requestAnimationFrame(()=>{Z&&!h&&o&&(Z.scrollTop=Z.scrollHeight),setTimeout(()=>{j.current=!1},16)}))}g.current=K}},[x,c,o,h,I]),R.useEffect(()=>{if(c&&o&&f.current&&!h){const K=f.current,Z=K.querySelector("pre");Z&&(Y.current=new MutationObserver(()=>{!h&&o&&K&&K.scrollHeight-K.scrollTop<=K.clientHeight+50&&I&&(j.current=!0,K.scrollTop=K.scrollHeight,setTimeout(()=>{j.current=!1},10))}),Y.current.observe(Z,{childList:!0,subtree:!0,characterData:!0}))}else Y.current&&(Y.current.disconnect(),Y.current=null);return()=>{Y.current&&(Y.current.disconnect(),Y.current=null)}},[c,o,h,I]),R.useEffect(()=>{if(f.current){const K=new IntersectionObserver(([Z])=>{re(Z.isIntersecting)},{threshold:.1});return K.observe(f.current),()=>{K.disconnect()}}},[c]),R.useEffect(()=>{o||(g.current=0,p(!1),j.current=!1,T.current=0,G.current=0,B.current=0,y.current&&(clearTimeout(y.current),y.current=null),z.current&&(clearTimeout(z.current),z.current=null),Y.current&&(Y.current.disconnect(),Y.current=null))},[o]),R.useEffect(()=>()=>{y.current&&clearTimeout(y.current),z.current&&clearTimeout(z.current),Y.current&&Y.current.disconnect()},[]),x.trim()?s.jsxs("div",{className:`bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg ${i}`,children:[s.jsxs("button",{onClick:()=>d(!c),className:"w-full px-4 py-3 text-left flex items-center justify-between text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"h-4 w-4 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-sm font-medium",children:"AI Thinking Process"}),s.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/50 px-2 py-0.5 rounded-full",children:["~",Ft.estimateTokens(x)," tokens"]})]}),s.jsx("svg",{className:`h-4 w-4 transform transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&s.jsxs("div",{className:"px-4 pb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{ref:f,onScroll:ie,className:"bg-white dark:bg-gray-800 rounded border border-blue-200 dark:border-blue-700 p-3 max-h-64 overflow-y-auto scroll-smooth",children:s.jsxs("pre",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono leading-relaxed",children:[x,o&&s.jsx("span",{className:"inline-block w-1 h-3 bg-blue-500 dark:bg-blue-400 ml-1 animate-pulse"})]})}),h&&o&&f.current&&f.current.scrollHeight-f.current.scrollTop>f.current.clientHeight+20&&s.jsxs("button",{onClick:()=>{f.current&&(j.current=!0,f.current.scrollTop=f.current.scrollHeight,p(!1),y.current&&(clearTimeout(y.current),y.current=null),setTimeout(()=>{j.current=!1},50))},className:"absolute bottom-2 right-2 bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded-full shadow-lg transition-colors flex items-center gap-1",title:"Scroll to bottom",children:[s.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),s.jsx("span",{children:"Follow"})]})]}),s.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400 flex items-center justify-between",children:s.jsx("span",{children:"This shows the AI's internal reasoning process before generating the story response."})})]})]}):null},fs=({text:x,className:i=""})=>{const o=f=>{const g=[];let h=0;const p=f.split(`
`);for(let y=0;y<p.length;y++){const j=p[y];if(j.trim()===""){y<p.length-1&&g.push(s.jsx("br",{},`br-${h++}`));continue}const T=c(j,h);g.push(...T.elements),h=T.nextKey,y<p.length-1&&g.push(s.jsx("br",{},`br-${h++}`))}return g},c=(f,g)=>{const h=[];let p=g;const y=f.replace(/[“”]/g,'"'),j=[{regex:/\*\*(.*?)\*\*/g,type:"bold"},{regex:/__(.*?)__/g,type:"bold"},{regex:/\*(.*?)\*/g,type:"italic"},{regex:/_(.*?)_/g,type:"italic"},{regex:/(?:^|[\s.,!?;:])"([^"]*?)"(?=[\s.,!?;:]|$)/g,type:"quote"}],T=[];j.forEach(B=>{let Y;const I=new RegExp(B.regex.source,B.regex.flags);for(;(Y=I.exec(y))!==null;)T.push({start:Y.index,end:Y.index+Y[0].length,content:Y[1],type:B.type,fullMatch:Y[0]})}),T.sort((B,Y)=>B.start-Y.start);const z=[];for(const B of T)z.some(I=>B.start<I.end&&B.end>I.start)||z.push(B);let G=0;for(const B of z){if(B.start>G){const I=y.substring(G,B.start);I&&h.push(s.jsx("span",{children:I},`text-${p++}`))}const Y=B.content;switch(B.type){case"bold":h.push(s.jsx("strong",{className:"font-semibold",children:Y},`bold-${p++}`));break;case"italic":h.push(s.jsx("em",{className:"italic text-gray-600 dark:text-gray-400",children:Y},`italic-${p++}`));break;case"quote":h.push(s.jsxs("span",{className:"text-orange-700 dark:text-orange-400",children:['"',Y,'"']},`quote-${p++}`));break}G=B.end}if(G<y.length){const B=y.substring(G);B&&h.push(s.jsx("span",{children:B},`text-${p++}`))}return h.length===0&&h.push(s.jsx("span",{children:y},`text-${p++}`)),{elements:h,nextKey:p}},d=o(x);return s.jsx("span",{className:i,children:d})},_g=({currentStory:x,storyHistory:i,isLoading:o,error:c,onRetry:d,onRegenerate:f,isGeneratingImage:g=!1,imageError:h=null,onImageRetry:p,samplerSettings:y,onSamplerSettingsChange:j,streamingText:T="",isStreaming:z=!1,enableImageGeneration:G=!0,canRegenerate:B=!1,thinkingContent:Y="",streamingThinking:I=""})=>{const[re,ie]=R.useState(!1),[K,Z]=R.useState(new Set),[Se,xe]=R.useState(!1),q={temperature:.7,minP:.05,repetitionPenalty:1.1};return o&&!z?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),s.jsx("div",{className:"text-center mt-6",children:s.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating story..."]})})]}):c?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Story Generation Failed"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:c}),d&&s.jsxs("button",{onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})}):!x&&!z?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s.jsx("p",{children:"No story to display. Start a new adventure to begin!"})]})}):s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[i.length>0&&s.jsxs("button",{onClick:()=>ie(!re),className:"inline-flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[s.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${re?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),re?"Hide":"Show"," Story History (",i.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[B&&f&&!o&&!z&&s.jsxs("button",{onClick:f,className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-md hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors",title:"Regenerate this story response with different variations",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{className:"hidden sm:inline",children:"Regenerate"})]}),j&&s.jsxs("button",{onClick:()=>xe(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Adjust sampler settings",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),s.jsx("span",{className:"hidden sm:inline",children:"AI Sampler"})]})]})]}),Se&&j&&s.jsx(In,{settings:y||q,onSettingsChange:j,onClose:()=>xe(!1)}),re&&i.length>0&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-96 overflow-y-auto",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Previous Story Segments"}),s.jsx("div",{className:"space-y-4",children:i.map((M,U)=>{const V=K.has(M.id),se=M.text.length>200,ae=V||!se?M.text:`${M.text.substring(0,200)}...`;return s.jsxs("div",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-4",children:[s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:["Segment ",U+1]}),s.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:s.jsx(fs,{text:ae})}),se&&s.jsx("button",{onClick:()=>{Z(qe=>{const F=new Set(qe);return F.has(M.id)?F.delete(M.id):F.add(M.id),F})},className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:V?"Show less":"Show more"})]},M.id)})})]}),(Y&&Y.trim()||I&&I.trim())&&s.jsx(If,{thinkingContent:z?I:x?.thinkingContent||Y,className:"mb-4",isStreaming:z&&!!I}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[z&&!T&&s.jsx("div",{className:"text-center py-8",children:s.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating story..."]})}),(T||x)&&s.jsx("div",{className:"prose prose-sm sm:prose-lg max-w-none",children:s.jsxs("div",{className:"text-gray-800 dark:text-gray-200 leading-relaxed break-words",style:{fontSize:"clamp(0.9rem, 2.5vw, 1.125rem)",lineHeight:"1.75",fontFamily:"Georgia, serif"},children:[s.jsx(fs,{text:z?T:x?.text||""}),z&&T&&s.jsx("span",{className:"inline-block w-2 h-5 bg-blue-500 dark:bg-blue-400 ml-1 animate-pulse"})]})}),x?.sceneDescription&&!z&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:"Scene"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:x.sceneDescription})]}),x&&!z&&G&&s.jsx("div",{className:"mt-6",children:s.jsx(Og,{imageUrl:x.imageUrl,altText:x.sceneDescription||"Story scene",isLoading:g,error:h,onRetry:p,className:"w-full"})})]})]})},Ug=({choices:x,choiceHistory:i,isLoading:o,disabled:c=!1,onChoiceSelect:d})=>{const[f,g]=R.useState(null),[h,p]=R.useState(!1),y=R.useCallback(j=>{c||o||(g(j.id),setTimeout(()=>{d(j),g(null)},150))},[c,o,d]);return!x||x.length===0?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{children:"No choices available at the moment."})]})}):s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.length>0&&s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("button",{onClick:()=>p(!h),className:"inline-flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[s.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${h?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),h?"Hide":"Show"," Choice History (",i.length,")"]})}),h&&i.length>0&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Previous Choices"}),s.jsx("div",{className:"space-y-2",children:i.map((j,T)=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${j.isCustom?"bg-purple-100 dark:bg-purple-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:s.jsx("span",{className:`text-xs font-medium ${j.isCustom?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400"}`,children:T+1})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[j.isCustom&&s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{className:"h-3 w-3 text-purple-600 dark:text-purple-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),s.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:"Custom Action"})]}),s.jsx("div",{className:`text-sm leading-relaxed ${j.isCustom?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`,children:s.jsx(fs,{text:j.text})})]})]},`${j.id}-${T}`))})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"What do you choose?"}),o&&s.jsx("div",{className:"text-center py-4",children:s.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400 text-sm",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing your choice..."]})}),s.jsx("div",{className:"space-y-2 sm:space-y-3",children:x.map((j,T)=>{const z=f===j.id,G=c||o;return s.jsx("button",{onClick:()=>y(j),disabled:G,className:`
                  w-full text-left p-3 sm:p-4 rounded-lg border-2 transition-all duration-200 
                  ${z?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/30 shadow-md transform scale-[0.98]":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"}
                  ${G?"opacity-50 cursor-not-allowed":"hover:shadow-md cursor-pointer"}
                  focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800
                `,children:s.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[s.jsxs("div",{className:`
                    flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-medium text-xs sm:text-sm
                    ${z?"bg-blue-500 dark:bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300"}
                  `,children:[String.fromCharCode(65+T)," "]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:`
                      text-xs sm:text-sm leading-relaxed break-words
                      ${z?"text-blue-900 dark:text-blue-200":"text-gray-800 dark:text-gray-200"}
                    `,children:s.jsx(fs,{text:j.text})})}),z&&s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},j.id)})})]})]})},Dg=({isLoading:x,disabled:i=!1,onActionSubmit:o,choiceHistory:c})=>{const[d,f]=R.useState(""),[g,h]=R.useState(null),[p,y]=R.useState(!1),j=5,T=200,z=R.useCallback(K=>{const Z=K.trim();return Z.length===0?"Please enter an action":Z.length<j?`Action must be at least ${j} characters`:Z.length>T?`Action must not exceed ${T} characters`:null},[]),G=R.useCallback(K=>{const Z=K.target.value;Z.length<=T&&(f(Z),g&&Z.trim().length>0&&h(null))},[g]),B=R.useCallback(K=>{if(K.preventDefault(),i||x)return;const Z=z(d);if(Z){h(Z);return}o(d.trim()),f(""),h(null)},[d,i,x,o,z]),Y=R.useCallback(K=>{if(K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),!i&&!x&&d.trim().length>0)){const Z=z(d);if(Z){h(Z);return}o(d.trim()),f(""),h(null)}},[i,x,d,z,o]),I=d.length,re=I>T*.9,ie=I>T;return s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[c.length>0&&s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("button",{onClick:()=>y(!p),className:"inline-flex items-center text-xs sm:text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 transition-colors",children:[s.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${p?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),p?"Hide":"Show"," Action History (",c.length,")"]})}),p&&c.length>0&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Your Actions"}),s.jsx("div",{className:"space-y-2",children:c.map((K,Z)=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:Z+1})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:K.text}),K.isCustom&&s.jsxs("span",{className:"inline-flex items-center mt-1 text-xs text-purple-600 dark:text-purple-400",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Custom Action"]})]})]},`${K.id}-${Z}`))})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"What do you do?"}),x&&s.jsx("div",{className:"text-center py-4",children:s.jsxs("div",{className:"inline-flex items-center text-purple-600 dark:text-purple-400 text-sm",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-purple-600 dark:text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing your action..."]})}),s.jsxs("form",{onSubmit:B,className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("textarea",{value:d,onChange:G,onKeyDown:Y,disabled:i||x,placeholder:"Type your action here... (e.g., 'I carefully examine the mysterious door' or 'I call out to see if anyone is nearby')",className:`
                w-full px-3 py-3 sm:px-4 sm:py-3 rounded-lg border-2 transition-all duration-200
                text-sm sm:text-base leading-relaxed
                resize-none
                ${g?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-purple-500 dark:focus:ring-purple-400"}
                ${i||x?"bg-gray-100 dark:bg-gray-700 cursor-not-allowed opacity-50":"bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-500"}
                text-gray-900 dark:text-gray-100
                placeholder-gray-400 dark:placeholder-gray-500
                focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800
              `,rows:3,maxLength:T}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("div",{children:g&&s.jsxs("p",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),g]})}),s.jsxs("span",{className:`
                text-xs sm:text-sm font-medium
                ${ie?"text-red-600 dark:text-red-400":re?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"}
              `,children:[I," / ",T]})]})]}),s.jsx("button",{type:"submit",disabled:i||x||d.trim().length===0,className:`
              w-full py-3 px-4 rounded-lg font-medium text-sm sm:text-base
              transition-all duration-200
              ${i||x||d.trim().length===0?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-purple-600 dark:bg-purple-500 text-white hover:bg-purple-700 dark:hover:bg-purple-600 shadow-md hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98]"}
              focus:outline-none focus:ring-2 focus:ring-purple-500 dark:focus:ring-purple-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800
            `,children:x?"Processing...":"Submit Action"})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center flex items-center justify-center",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Tip: Be creative! Describe what your character does, says, or thinks."]}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Press Enter to submit • Shift+Enter for new line"})]})})]})]})};class ml{static parseThinkingResponse(i){const o=/<think>(.*?)<\/think>/is,c=i.match(o);if(c){const g=c[1].trim(),h=i.replace(o,"").trim();return{thinkingContent:g,cleanedResponse:h,hasThinking:!0}}const d=/<think>(.*?)$/is,f=i.match(d);if(f){const g=f[1].trim();let p=i.substring(0,i.indexOf("<think>")).trim();if(!p&&g){const y=this.extractStoryFromThinking(g);y&&(p=y)}return{thinkingContent:g,cleanedResponse:p,hasThinking:!0}}return i.includes("</think>")?{thinkingContent:"",cleanedResponse:i.replace(/<\/think>/gi,"").trim(),hasThinking:!1}:{thinkingContent:"",cleanedResponse:i,hasThinking:!1}}static createStreamingProcessor(){let i="",o="",c=!1,d=!1;return{processChunk:f=>{i+=f;let g="",h="";if(d)g=f;else{if(!c&&i.includes("<think>")){const p=i.indexOf("<think>");p>0&&(g=i.substring(0,p),i=i.substring(p)),c=!0,i=i.replace("<think>","")}if(c)if(i.includes("</think>")){const p=i.indexOf("</think>"),y=i.substring(0,p);o+=y,h=y,i=i.substring(p+8),g=i,i="",c=!1,d=!0}else o+=i,h=i,i="";else g=i,i=""}return{displayChunk:g,thinkingChunk:h,thinkingComplete:d,fullThinkingContent:o}},getState:()=>({thinkingContent:o,isInThinkingBlock:c,thinkingComplete:d}),reset:()=>{i="",o="",c=!1,d=!1}}}static extractStoryFromThinking(i){const o=[/STORY:\s*(.*?)$/is,/(?:^|\n)\s*You\s+(?:are|find|see|hear|feel|walk|run|stand|sit|look)\s+.*$/im,/(?:^|\n)\s*The\s+.*$/im,/(?:^|\n)\s*A\s+.*$/im,/(?:^|\n)\s*As\s+you\s+.*$/im,/(?:^|\n)\s*Your\s+.*$/im];for(const d of o){const f=i.match(d);if(f&&f[1]){const g=f[1].trim();if(g.length>50)return g}else if(f&&f[0]){const g=f[0].trim();if(g.length>50)return g}}const c=i.split(/[.!?]+/).filter(d=>d.trim().length>20);if(c.length>0){const d=c.slice(-2).join(". ").trim();if(d.length>50&&(d.includes("You ")||d.includes("The ")||d.includes("A ")))return d+"."}return""}static validateThinkingTags(i){const o=[],c=(i.match(/<think>/gi)||[]).length,d=(i.match(/<\/think>/gi)||[]).length;c!==d&&o.push(`Mismatched thinking tags: ${c} opening, ${d} closing`);const f=i.match(/<think>.*?<\/think>/gis)||[];for(const g of f)if((g.match(/<think>/gi)||[]).length>1){o.push("Nested thinking tags detected");break}return{isValid:o.length===0,errors:o}}static cleanupMalformedTags(i){let o=i;const c=[...o.matchAll(/<think>/gi)],d=[...o.matchAll(/<\/think>/gi)];if(c.length>d.length){const f=c.length-d.length;for(let g=0;g<f;g++){const h=o.lastIndexOf("<think>");h!==-1&&(o=o.substring(0,h)+o.substring(h+7))}}if(d.length>c.length){const f=d.length-c.length;for(let g=0;g<f;g++){const h=o.indexOf("</think>");h!==-1&&(o=o.substring(0,h)+o.substring(h+8))}}return o}}class P extends Error{code;retryable;statusCode;constructor(i,o,c=!0,d){super(i),this.name="AIServiceError",this.code=o,this.retryable=c,this.statusCode=d}}class Ne{static MAX_RETRIES=3;static isAnthropicAPI(i){return i.includes("api.anthropic.com")}static transformUrlForProxy(i,o){if(this.isAnthropicAPI(i))return`/api/anthropic${o}`;if(i.includes("api.openai.com"))return`/api/openai${o}`;const c=i.endsWith("/")?i.slice(0,-1):i;if(c.endsWith("/v1")&&o.startsWith("/v1/")){const f=o.substring(3);return`${c}${f}`}const d=o.startsWith("/")?o:`/${o}`;return`${c}${d}`}static convertToAnthropicMessages(i){const o=i.find(d=>d.role==="system"),c=i.filter(d=>d.role!=="system");return{system:o?.content,messages:c.map(d=>({role:d.role,content:d.content}))}}static getHeaders(i,o){const c={"Content-Type":"application/json","User-Agent":"AI-CYOA-Game/1.0"};return o.includes("api.anthropic.com")?(c["x-api-key"]=i.apiKey,c["anthropic-version"]="2023-06-01"):c.Authorization=`Bearer ${i.apiKey}`,c}static async chatCompletionStream(i,o,c,d={}){const f=this.isAnthropicAPI(i.baseUrl),g=f?"/v1/messages":"/v1/chat/completions",h=this.transformUrlForProxy(i.baseUrl,g),p=this.getHeaders(i,i.baseUrl);p.Accept="text/event-stream";let y;if(f){const{system:j,messages:T}=this.convertToAnthropicMessages(o);y={model:i.model,messages:T,max_tokens:d.maxTokens??1e3,temperature:d.temperature??.7,stream:!0},j&&(y.system=j)}else y={model:i.model,messages:o,stream:!0,temperature:d.temperature??.7,max_tokens:d.maxTokens??1e3,top_p:1,frequency_penalty:0,presence_penalty:0};try{const j=await fetch(h,{method:"POST",headers:p,body:JSON.stringify(y)});if(!j.ok)throw await this.handleErrorResponse(j);if(!j.body)throw new P("No response body received","API_ERROR");const T=j.body.getReader(),z=new TextDecoder;let G="",B="";const Y=ml.createStreamingProcessor();for(;;){const{done:re,value:ie}=await T.read();if(re)break;B+=z.decode(ie,{stream:!0});const K=B.split(`
`);B=K.pop()||"";for(const Z of K){const Se=Z.trim();if(!(!Se||Se==="data: [DONE]")&&Se.startsWith("data: "))try{const xe=Se.slice(6),q=JSON.parse(xe);let M="";if(f)q.type==="content_block_delta"&&q.delta?.text&&(M=q.delta.text);else{const U=q.choices?.[0]?.delta?.content;U&&(M=U)}if(M){G+=M;const U=Y.processChunk(M);U.thinkingChunk&&d.onThinkingChunk&&d.onThinkingChunk(U.thinkingChunk),U.displayChunk&&c(U.displayChunk)}}catch{}}}const{thinkingContent:I}=Y.getState();return{response:G,thinkingContent:I}}catch(j){if(j instanceof P)throw j;if(j instanceof TypeError&&j.message.includes("fetch"))throw new P("Network error: Unable to connect to AI service","NETWORK_ERROR");const T=j instanceof Error?j.message:"Unknown error";throw new P(`Unexpected error: ${T}`,"API_ERROR")}}static async chatCompletion(i,o,c={}){const d=this.isAnthropicAPI(i.baseUrl),f=d?"/v1/messages":"/v1/chat/completions",g=this.transformUrlForProxy(i.baseUrl,f),h=this.getHeaders(i,i.baseUrl);h.Accept="application/json";let p;if(d){const{system:y,messages:j}=this.convertToAnthropicMessages(o);p={model:i.model,messages:j,max_tokens:c.maxTokens??1e3,temperature:c.temperature??.7},y&&(p.system=y)}else p={model:i.model,messages:o,stream:c.stream??!1,temperature:c.temperature??.7,max_tokens:c.maxTokens??1e3,top_p:1,frequency_penalty:0,presence_penalty:0,cache_control:{enabled:!1,ttl:"5m"}};try{const y=await fetch(g,{method:"POST",headers:h,body:JSON.stringify(p)});if(!y.ok)throw await this.handleErrorResponse(y);const j=await y.json();if(j&&typeof j=="object"&&"error"in j){const G=j.error;let B="API returned an error";if(G&&typeof G=="object"){const Y=["message","detail","description","error"];for(const I of Y)if(I in G&&typeof G[I]=="string"){B=G[I];break}if(B==="API returned an error")try{B=`API error: ${JSON.stringify(G)}`}catch{B="API returned an unreadable error"}}else typeof G=="string"&&(B=G);throw new P(B,"API_ERROR")}const T=this.parseChatCompletionResponse(j,d),{cleanedResponse:z}=ml.parseThinkingResponse(T);return z}catch(y){if(y instanceof P)throw y;if(y instanceof TypeError&&y.message.includes("fetch"))throw new P("Network error: Unable to connect to AI service","NETWORK_ERROR");if(y instanceof Error&&y.name==="AbortError")throw new P("Request timeout: AI service took too long to respond","TIMEOUT_ERROR");const j=y instanceof Error?y.message:"Unknown error";throw new P(`Unexpected error: ${j}`,"API_ERROR")}}static async chatCompletionWithRetry(i,o,c={}){const d=c.maxRetries??this.MAX_RETRIES;let f;for(let g=1;g<=d;g++)try{return await this.chatCompletion(i,o,c)}catch(h){const p=h instanceof Error?h.message:"Unknown error";if(f=h instanceof P?h:new P(`Attempt ${g} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(g===d)break;await this.delay(Math.pow(2,g-1)*1e3)}throw f}static async testConnection(i){try{const o=[{role:"user",content:"Hello"}];return await this.chatCompletion(i,o,{maxTokens:10}),{success:!0}}catch(o){return{success:!1,error:o instanceof P?o.message:"Unknown connection error"}}}static async handleErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 401:c="AUTH_ERROR",d=!1,o="Invalid API key or unauthorized access";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check your API key permissions";break;case 404:c="API_ERROR",d=!1,o="API endpoint not found - check your base URL";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Server error - please try again later";break}return new P(o,c,d,i.status)}static parseChatCompletionResponse(i,o=!1){try{if(o){if(!i||typeof i!="object"||!("content"in i)||!Array.isArray(i.content))throw new Error("Invalid Anthropic response format: expected content array");const h=i.content;if(h.length===0)throw new Error("No content blocks returned from Anthropic");let p="";for(const y of h)y&&typeof y=="object"&&"text"in y&&typeof y.text=="string"&&(p+=y.text);if(!p)throw new Error("No text content found in Anthropic response");return p.trim()}if(!i||typeof i!="object"||!("choices"in i)||!Array.isArray(i.choices)){if(i&&typeof i=="object"&&"content"in i&&typeof i.content=="string")return i.content.trim();if(typeof i=="string")return i.trim();if(i&&typeof i=="object"){const h=this.extractTextFromUnknownFormat(i);if(h)return h.trim()}throw new Error(`Invalid response format: expected choices array. Got: ${typeof i}`)}const c=i.choices;if(c.length===0)throw new Error("No choices returned from AI service");const d=c[0];if(!d||typeof d!="object"||!("message"in d))throw new Error("Invalid choice format: expected message object");const f=d.message;if(!f||typeof f!="object"||!("content"in f))throw new Error("Invalid message format: expected content string");const g=f.content;if(typeof g!="string")throw new Error("Invalid content format: expected string");return g.trim()}catch(c){const d=c instanceof Error?c.message:"Unknown parsing error";throw new P(`Failed to parse AI response: ${d}`,"PARSE_ERROR",!1)}}static extractTextFromUnknownFormat(i){if(!i||typeof i!="object")return null;const o=i,c=["text","content","message","response","output","result"];for(const d of c)if(d in o&&typeof o[d]=="string")return o[d];for(const d of Object.values(o))if(d&&typeof d=="object"){const f=this.extractTextFromUnknownFormat(d);if(f)return f}return null}static delay(i){return new Promise(o=>setTimeout(o,i))}static createSystemMessage(i){return{role:"system",content:i}}static createUserMessage(i){return{role:"user",content:i}}static createAssistantMessage(i){return{role:"assistant",content:i}}}class Jt{static STORY_SYSTEM_PROMPT=`You are a creative storyteller for an interactive Choose Your Own Adventure game. Your role is to:

1. Create engaging, immersive narratives with vivid descriptions
2. Maintain narrative continuity and consistency
3. Keep responses SHORT, CONCISE, but descriptive (2 paragraphs max)
4. Always end with a clear situation that requires a decision
5. NEVER include choices or options in the STORY section

Guidelines:
- Write in second person ("You...")
- Each story segment should advance the plot meaningfully
- The STORY section should contain ONLY narrative text
- The SCENE section should contain ONLY visual scene description
- DO NOT include "Do you:", choices, or options in the STORY section
- Choices will be generated separately in a different step`;static generateInitialStoryPrompt(i=!0){const f=`Create the opening scene for a new Choose Your Own Adventure story. 

Requirements:
- Set up an intriguing premise and setting
- Introduce the main character (the player)
- Create an engaging hook that draws the reader in
- End with a situation that requires a decision${i?`
- Include a brief scene description for potential image generation`:`
- Do NOT include any scene descriptions or SCENE: sections`}

Format your response as:
STORY: [The narrative text - NO choices, NO "Do you:" text, ONLY story narrative]${i?`
SCENE: [Brief visual description of the current scene for image generation]`:""}
CHOICES: [3-4 numbered choices, each on a new line]

IMPORTANT: The STORY section must contain ONLY narrative text. Do not include any choices, options, or "Do you:" prompts in the STORY section. Put all choices in the separate CHOICES section.${i?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide STORY and CHOICES sections.`}`;return Ft.truncateToTokenLimit(f)}static generateContinuationPrompt(i,o,c=!0){const{contextText:d,previousSegment:f,previousAction:g,segmentsIncluded:h,choicesIncluded:p}=Ft.buildEnhancedContext(o.storyHistory,o.choiceHistory,o.currentScene,5500),y=c?`
- Include a scene description for image generation`:`
- Do NOT include any scene descriptions or SCENE: sections`,j=c?`
SCENE: [Brief visual description of the new scene for image generation]`:"",T=c?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide STORY and CHOICES sections.`,z=`Continue the story based on the player's choice: "${i.text}"

IMMEDIATE CONTEXT:
Previous segment: ${f||"None"}
Previous action: ${g||"None"}
Current scene: ${o.currentScene}

STORY HISTORY (${h} segments, ${p} actions included):
${d}

Requirements:
- Show the consequences of the player's choice
- Advance the story meaningfully from the previous segment
- Maintain consistency with previous events and the established narrative
- Create a new situation requiring a decision${y}

Format your response as:
STORY: [The narrative text showing consequences and new developments - NO choices, NO "Do you:" text]${j}
CHOICES: [3-4 numbered choices, each on a new line]

IMPORTANT: The STORY section must contain ONLY narrative text. Do not include any choices, options, or "Do you:" prompts in the STORY section. Put all choices in the separate CHOICES section.${T}`;return Ft.truncateToTokenLimit(z)}static generateChoicesPrompt(i,o){return`Based on the current story situation, generate 3-4 meaningful choices for the player.

Current story: ${i.substring(0,500)}...
Current scene: ${o}

Requirements:
- Each choice should lead to different story outcomes
- Choices should be specific and actionable
- Avoid generic options like "Go left" or "Go right"
- Make choices feel consequential and interesting
- Keep each choice to 1-2 sentences maximum

Format your response as a numbered list:
1. [First choice option]
2. [Second choice option]
3. [Third choice option]
4. [Fourth choice option (if applicable)]`}}class xa{static async generateInitialStoryStream(i,o,c,d){const f=i.enableImageGeneration!==!1,g=[Ne.createSystemMessage(Jt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Jt.generateInitialStoryPrompt(f))];try{const{response:h,thinkingContent:p}=await Ne.chatCompletionStream(i,g,o,{temperature:c?.temperature??.8,maxTokens:2048,onThinkingChunk:d});return{...this.parseStoryResponse(h,f),thinkingContent:p}}catch(h){throw h instanceof P?h:new P(`Failed to generate initial story: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static async generateInitialStory(i,o){const c=i.enableImageGeneration!==!1,d=[Ne.createSystemMessage(Jt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Jt.generateInitialStoryPrompt(c))];try{const f=await Ne.chatCompletionWithRetry(i,d,{temperature:o?.temperature??.8,maxTokens:2048});return this.parseStoryResponse(f,c)}catch(f){throw f instanceof P?f:new P(`Failed to generate initial story: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async continueStoryStream(i,o,c,d,f,g){const h=i.enableImageGeneration!==!1,p=[Ne.createSystemMessage(Jt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Jt.generateContinuationPrompt(o,c,h))];try{const{response:y,thinkingContent:j}=await Ne.chatCompletionStream(i,p,d,{temperature:f?.temperature??.8,maxTokens:2048,onThinkingChunk:g}),T=this.parseStoryResponse(y,h);if(T.choices.length===0){const z=await this.generateChoices(i,T.text,T.sceneDescription,f);T.choices=z}return{...T,thinkingContent:j}}catch(y){throw y instanceof P?y:new P(`Failed to continue story: ${y instanceof Error?y.message:"Unknown error"}`,"API_ERROR")}}static async continueStory(i,o,c,d){const f=i.enableImageGeneration!==!1,g=[Ne.createSystemMessage(Jt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Jt.generateContinuationPrompt(o,c,f))];try{const h=await Ne.chatCompletionWithRetry(i,g,{temperature:d?.temperature??.8,maxTokens:2048}),p=this.parseStoryResponse(h,f);if(p.choices.length===0){const y=await this.generateChoices(i,p.text,p.sceneDescription,d);p.choices=y}return p}catch(h){throw h instanceof P?h:new P(`Failed to continue story: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static async generateChoices(i,o,c,d){const f=[Ne.createSystemMessage(Jt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Jt.generateChoicesPrompt(o,c))];try{const g=await Ne.chatCompletionWithRetry(i,f,{temperature:d?.temperature??.7,maxTokens:400});return this.parseChoicesResponse(g)}catch(g){throw g instanceof P?g:new P(`Failed to generate choices: ${g instanceof Error?g.message:"Unknown error"}`,"API_ERROR")}}static async generateInitialStoryWithRetry(i,o=3,c){let d;for(let f=1;f<=o;f++)try{const g=await this.generateInitialStory(i,c);if(g.choices.length===0){const h=await this.generateChoices(i,g.text,g.sceneDescription,c);g.choices=h}return g}catch(g){const h=g instanceof Error?g.message:"Unknown error";if(d=g instanceof P?g:new P(`Attempt ${f} failed: ${h}`,"API_ERROR"),!d.retryable)throw d;if(f===o)break;await this.delay(Math.pow(2,f-1)*1e3)}throw d}static parseStoryResponse(i,o=!0){try{const{cleanedResponse:c}=ml.parseThinkingResponse(i),d=c.match(/STORY:\s*(.*?)(?=\n\s*\*?\*?SCENE:?|\n\s*\*?\*?CHOICES:?|$)/is),f=c.match(/\*?\*?SCENE:\s*(.*?)(?=\n\s*\*?\*?CHOICES:?|$)/is),g=c.match(/\*?\*?CHOICES:?\*?\*?\s*(.*?)$/is);if(!d||!d[1]){const j=this.tryFallbackParsing(c);if(j)return j;let T="No story content found in response";throw i.includes("<think>")&&!i.includes("</think>")?T="AI response appears to be incomplete (truncated thinking). Try again or check your token limits.":i.length<50?T="AI response too short. The model may not be responding properly.":i.includes("STORY:")||(T="AI response missing expected format. The model may not be following instructions."),new Error(T)}const h=d[1].trim(),p=o&&f?f[1].trim():"A mysterious scene unfolds";if(h.length<50)throw new Error("Story content too short");let y=[];return g&&g[1]&&(y=this.parseChoicesFromText(g[1].trim())),{id:this.generateId(),text:h,sceneDescription:p,choices:y}}catch(c){throw new P(`Failed to parse story response: ${c instanceof Error?c.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static parseChoicesResponse(i){try{const o=[],c=i.split(`
`).filter(d=>d.trim());for(const d of c){const f=d.match(/^\d+\.\s*(.+)$/);if(f&&f[1]){const g=f[1].trim();g.length>10&&o.push({id:this.generateId(),text:g})}}if(o.length<2)throw new Error("Not enough valid choices generated");return o.slice(0,4)}catch(o){throw new P(`Failed to parse choices response: ${o instanceof Error?o.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static generateId(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}static parseChoicesFromText(i){const o=[],c=i.split(`
`).filter(d=>d.trim());for(const d of c){const f=d.trim(),g=f.match(/^\d+[.)]\s*(.+)$/);g&&g[1]?o.push({id:this.generateId(),text:g[1].trim()}):f.length>0&&o.push({id:this.generateId(),text:f})}return o}static tryFallbackParsing(i){try{const o=i.trim();if(o.length<20)return null;if(o.length>50&&!o.includes("STORY:")&&!o.includes("CHOICES:")&&!o.includes("CHOICES")&&!o.includes("**CHOICES"))return{id:this.generateId(),text:o,sceneDescription:"A mysterious scene unfolds",choices:[]};const c=o.split(`
`).filter(g=>g.trim()),d=[];let f=!1;for(const g of c){const h=g.trim();h&&!h.match(/^\d+\./)&&!h.match(/^\*?\*?(STORY|SCENE|CHOICES):?\*?\*?/i)&&!h.match(/^(Do you|What do you|Your options|Choose)/i)&&(d.push(h),f=!0)}if(f&&d.length>0){const g=d.join(" ").trim();if(g.length>50)return{id:this.generateId(),text:g,sceneDescription:"A mysterious scene unfolds",choices:[]}}if(o.length>20){const g=[/You\s+(?:are|find|see|hear|feel|walk|run|stand|sit|look)\s+.*$/im,/The\s+.*$/im,/A\s+.*$/im,/As\s+you\s+.*$/im];for(const h of g){const p=o.match(h);if(p&&p[0]&&p[0].length>50)return{id:this.generateId(),text:p[0].trim(),sceneDescription:"A mysterious scene unfolds",choices:[]}}}return null}catch{return null}}static delay(i){return new Promise(o=>setTimeout(o,i))}static validateStoryContext(i){return i&&Array.isArray(i.storyHistory)&&Array.isArray(i.choiceHistory)&&typeof i.currentScene=="string"&&i.currentScene.length>0}static createStoryContext(i,o,c){return{storyHistory:[...i],choiceHistory:[...o],currentScene:c}}static async regenerateInitialStoryStream(i,o,c,d){const f={temperature:Math.min((c?.temperature??.7)+.1,1),minP:c?.minP??.05,repetitionPenalty:c?.repetitionPenalty??1.1,enableStreaming:c?.enableStreaming};return this.generateInitialStoryStream(i,o,f,d)}static async regenerateInitialStory(i,o){const c={temperature:Math.min((o?.temperature??.7)+.1,1),minP:o?.minP??.05,repetitionPenalty:o?.repetitionPenalty??1.1,enableStreaming:o?.enableStreaming};return this.generateInitialStory(i,c)}static async regenerateStoryStream(i,o,c,d,f,g){const h={temperature:Math.min((f?.temperature??.7)+.1,1),minP:f?.minP??.05,repetitionPenalty:f?.repetitionPenalty??1.1,enableStreaming:f?.enableStreaming};return this.continueStoryStream(i,o,c,d,h,g)}static async regenerateStory(i,o,c,d){const f={temperature:Math.min((d?.temperature??.7)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.continueStory(i,o,c,f)}static async testStoryGeneration(i){try{const o=await this.generateInitialStory(i);return!o.text||o.text.length<50?{success:!1,error:"Generated story too short or empty"}:{success:!0}}catch(o){return{success:!1,error:o instanceof P?o.message:"Unknown story generation error"}}}}class Qa{static CUSTOM_STORY_SYSTEM_PROMPT=`You are a creative storyteller for an interactive Choose Your Own Adventure game in CUSTOM MODE. Your role is to:

1. Continue stories based on user-provided scene descriptions and actions
2. Maintain narrative continuity and consistency
3. Keep responses SHORT, CONCISE, but descriptive (2 paragraphs max)
4. NEVER include choices or options in your response - the user provides their own actions

Guidelines:
- Write in second person ("You...")
- Each story segment should advance the plot meaningfully based on the user's input
- The STORY section should contain ONLY narrative text
- DO NOT include "Do you:", choices, options, or questions in the STORY section
- The user will provide their own custom actions`;static generateCustomInitialStoryPrompt(i,o=!0){const f=`The user has provided this initial setup for their custom adventure:
"${i}"

Begin this interactive story by:
1. Expanding on the user's setup, while avoiding purple prose
2. Creating an engaging opening situation
3. Establishing the tone and setting
4. Drawing the reader into the narrative

IMPORTANT: Do NOT include any choices or options. The user will provide their own actions.

Format your response as:
STORY: [The narrative opening - NO choices, NO "Do you:" text, ONLY story narrative]${o?`
SCENE: [Brief visual description of the current scene for image generation]`:""}${o?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide the STORY section.`}`;return Ft.truncateToTokenLimit(f)}static generateCustomContinuationPrompt(i,o,c=!0){const{contextText:d,previousSegment:f,previousAction:g,segmentsIncluded:h,choicesIncluded:p}=Ft.buildEnhancedContext(o.storyHistory,o.choiceHistory,o.currentScene,6e3),y=c?`
SCENE: [Brief visual description of the new scene for image generation]`:"",j=c?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide the STORY section.`,T=`The user chose to: "${i}"

IMMEDIATE CONTEXT:
Previous segment: ${f||"None"}
Previous action: ${g||"None"}
Current scene: ${o.currentScene}

STORY HISTORY (${h} segments, ${p} actions included):
${d}

Continue the story based on this action by:
1. Showing the immediate consequences of the user's action
2. Advancing the narrative meaningfully from the previous segment
3. Creating a new situation that flows naturally from their choice
4. Maintaining consistency with previous events and the established narrative

IMPORTANT: Do NOT include any choices or options. The user will provide their own next action.

Format your response as:
STORY: [The narrative continuation - NO choices, NO "Do you:" text, ONLY story narrative]${y}${j}`;return Ft.truncateToTokenLimit(T)}}class pa{static async generateCustomInitialStoryStream(i,o,c,d,f){const g=i.enableImageGeneration!==!1,h=[Ne.createSystemMessage(Qa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Qa.generateCustomInitialStoryPrompt(o,g))];try{const{response:p,thinkingContent:y}=await Ne.chatCompletionStream(i,h,c,{temperature:d?.temperature??.8,maxTokens:2048,onThinkingChunk:f});return{...this.parseCustomStoryResponse(p,g),thinkingContent:y}}catch(p){throw p instanceof P?p:new P(`Failed to generate custom initial story: ${p instanceof Error?p.message:"Unknown error"}`,"API_ERROR")}}static async generateCustomInitialStory(i,o,c){const d=i.enableImageGeneration!==!1,f=[Ne.createSystemMessage(Qa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Qa.generateCustomInitialStoryPrompt(o,d))];try{const g=await Ne.chatCompletionWithRetry(i,f,{temperature:c?.temperature??.8,maxTokens:2048});return this.parseCustomStoryResponse(g,d)}catch(g){throw g instanceof P?g:new P(`Failed to generate custom initial story: ${g instanceof Error?g.message:"Unknown error"}`,"API_ERROR")}}static async continueCustomStoryStream(i,o,c,d,f,g){const h=i.enableImageGeneration!==!1,p=[Ne.createSystemMessage(Qa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Qa.generateCustomContinuationPrompt(o,c,h))];try{const{response:y,thinkingContent:j}=await Ne.chatCompletionStream(i,p,d,{temperature:f?.temperature??.8,maxTokens:2048,onThinkingChunk:g});return{...this.parseCustomStoryResponse(y,h),thinkingContent:j}}catch(y){throw y instanceof P?y:new P(`Failed to continue custom story: ${y instanceof Error?y.message:"Unknown error"}`,"API_ERROR")}}static async continueCustomStory(i,o,c,d){const f=i.enableImageGeneration!==!1,g=[Ne.createSystemMessage(Qa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Qa.generateCustomContinuationPrompt(o,c,f))];try{const h=await Ne.chatCompletionWithRetry(i,g,{temperature:d?.temperature??.8,maxTokens:2048});return this.parseCustomStoryResponse(h,f)}catch(h){throw h instanceof P?h:new P(`Failed to continue custom story: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static parseCustomStoryResponse(i,o=!0){try{const{cleanedResponse:c}=ml.parseThinkingResponse(i),d=c.match(/STORY:\s*(.*?)(?=SCENE:|$)/s),f=c.match(/SCENE:\s*(.*?)$/s);if(!d||!d[1]){const p=this.tryFallbackParsing(c);if(p)return p;throw new Error("No story content found in response")}const g=d[1].trim(),h=o&&f?f[1].trim():"A mysterious scene unfolds";if(g.length<50)throw new Error("Story content too short");return{id:this.generateId(),text:g,sceneDescription:h,choices:[]}}catch(c){throw new P(`Failed to parse custom story response: ${c instanceof Error?c.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static generateId(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}static validateStoryContext(i){return i&&Array.isArray(i.storyHistory)&&Array.isArray(i.choiceHistory)&&typeof i.currentScene=="string"&&i.currentScene.length>0}static createStoryContext(i,o,c){return{storyHistory:[...i],choiceHistory:[...o],currentScene:c}}static async regenerateCustomInitialStoryStream(i,o,c,d,f){const g={temperature:Math.min((d?.temperature??.8)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.generateCustomInitialStoryStream(i,o,c,g,f)}static async regenerateCustomInitialStory(i,o,c){const d={temperature:Math.min((c?.temperature??.8)+.1,1),minP:c?.minP??.05,repetitionPenalty:c?.repetitionPenalty??1.1,enableStreaming:c?.enableStreaming};return this.generateCustomInitialStory(i,o,d)}static async regenerateCustomStoryStream(i,o,c,d,f,g){const h={temperature:Math.min((f?.temperature??.8)+.1,1),minP:f?.minP??.05,repetitionPenalty:f?.repetitionPenalty??1.1,enableStreaming:f?.enableStreaming};return this.continueCustomStoryStream(i,o,c,d,h,g)}static async regenerateCustomStory(i,o,c,d){const f={temperature:Math.min((d?.temperature??.8)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.continueCustomStory(i,o,c,f)}static tryFallbackParsing(i){try{const o=i.trim();if(o.length>50&&!o.includes("STORY:")&&!o.includes("SCENE:"))return{id:this.generateId(),text:o,sceneDescription:"A mysterious scene unfolds",choices:[]};const c=o.split(`
`).filter(g=>g.trim()),d=[];let f=!1;for(const g of c){const h=g.trim();h&&(h.match(/^(STORY|SCENE):/i)||(d.push(h),f=!0))}if(f&&d.length>0){const g=d.join(" ").trim();if(g.length>50)return{id:this.generateId(),text:g,sceneDescription:"A mysterious scene unfolds",choices:[]}}return null}catch{return null}}static async testCustomStoryGeneration(i,o="You find yourself in a mysterious forest at twilight"){try{const c=await this.generateCustomInitialStory(i,o);return!c.text||c.text.length<50?{success:!1,error:"Generated story too short or empty"}:c.choices.length!==0?{success:!1,error:"Custom story should not include choices"}:{success:!0}}catch(c){return{success:!1,error:c instanceof P?c.message:"Unknown custom story generation error"}}}}class _o{static IMAGE_SYSTEM_PROMPT=`You are an AI assistant that creates detailed image prompts for DALL-E style image generation. Your role is to:

1. Create vivid, detailed visual descriptions
2. Focus on atmosphere, lighting, and composition
3. Include artistic style and mood descriptors
4. Keep prompts concise but descriptive (under 200 words)
5. Avoid text or writing in images

Guidelines:
- Use descriptive adjectives for mood and atmosphere
- Include lighting conditions (dramatic, soft, golden hour, etc.)
- Specify artistic style when appropriate (realistic, fantasy art, etc.)
- Focus on visual elements that enhance the story mood
- Avoid including people's faces in detail to maintain mystery`;static generateScenePrompt(i,o){let c="";if(o){const d=["Do you:","What do you do?","Your options are:","Choose your action:","You can:","Your choices:","1. **","2. **","3. **","4. **"];let f=o;for(const g of d){const h=f.indexOf(g);if(h!==-1){f=f.substring(0,h).trim();break}}f.length>50&&(c=`

Narrative context: ${f.substring(0,200)}...`)}return`Create a detailed image prompt for this scene: "${i}"${c}

Requirements:
- Focus on the environment, atmosphere, and mood
- Include lighting and weather conditions if relevant
- Specify artistic style (realistic, fantasy, cinematic, etc.)
- Keep the prompt under 200 words
- Make it visually compelling and atmospheric
- DO NOT include any choices, options, or decision text
- Focus purely on the visual scene description

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`}static generateItemPrompt(i,o){const c=o?`

Context: ${o.substring(0,200)}...`:"";return`Create a detailed image prompt for this item or character: "${i}"${c}

Requirements:
- Focus on visual details, textures, and materials
- Include appropriate lighting and background
- Specify artistic style and mood
- Keep the prompt under 150 words
- Make it visually interesting and detailed

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`}}class Hg{static IMAGE_REQUEST_TIMEOUT=6e4;static MAX_RETRIES=2;static async generateSceneImage(i,o,c){try{const d=await this.generateCleanImagePrompt(i,o);return await this.generateImage(i,d)}catch(d){throw d instanceof P?d:new P(`Failed to generate scene image: ${d instanceof Error?d.message:"Unknown error"}`,"API_ERROR")}}static async generateItemImage(i,o,c){try{const d=await this.generateItemImagePrompt(i,o,c);return await this.generateImage(i,d)}catch(d){throw d instanceof P?d:new P(`Failed to generate item image: ${d instanceof Error?d.message:"Unknown error"}`,"API_ERROR")}}static async generateSceneImageWithRetry(i,o,c,d=this.MAX_RETRIES){let f;for(let g=1;g<=d;g++)try{return await this.generateSceneImage(i,o,c)}catch(h){const p=h instanceof Error?h.message:"Unknown error";if(f=h instanceof P?h:new P(`Attempt ${g} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(g===d)break;await this.delay(Math.pow(2,g)*2e3)}throw f}static async generateItemImageWithRetry(i,o,c,d=this.MAX_RETRIES){let f;for(let g=1;g<=d;g++)try{return await this.generateItemImage(i,o,c)}catch(h){const p=h instanceof Error?h.message:"Unknown error";if(f=h instanceof P?h:new P(`Attempt ${g} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(g===d)break;await this.delay(Math.pow(2,g)*2e3)}throw f}static async generateCleanImagePrompt(i,o){const c=`Create a detailed image prompt for this scene: "${o}"

Requirements:
- Focus on the environment, atmosphere, and mood
- Include lighting and weather conditions if relevant
- Specify artistic style (realistic, fantasy, cinematic, etc.)
- Keep the prompt under 200 words
- Make it visually compelling and atmospheric
- DO NOT include any choices, options, or decision text
- Focus purely on the visual scene description

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`,d=[Ne.createSystemMessage(_o.IMAGE_SYSTEM_PROMPT),Ne.createUserMessage(c)];try{return(await Ne.chatCompletionWithRetry(i,d,{temperature:.8,maxTokens:300})).trim()}catch(f){throw f instanceof P?f:new P(`Failed to generate image prompt: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async generateItemImagePrompt(i,o,c){const d=[Ne.createSystemMessage(_o.IMAGE_SYSTEM_PROMPT),Ne.createUserMessage(_o.generateItemPrompt(o,c))];try{return(await Ne.chatCompletionWithRetry(i,d,{temperature:.8,maxTokens:250})).trim()}catch(f){throw f instanceof P?f:new P(`Failed to generate item image prompt: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async generateImage(i,o){const c=i.imageConfig?.apiKey||i.apiKey,d=i.imageConfig?.baseUrl||i.baseUrl,f=i.imageConfig?.provider||"openai",g=i.imageConfig?.model||i.model;let h,p,y;switch(f){case"nano-gpt":{h=`${d}/api/generate-image`,p={prompt:o,model:g,size:"1024x1024"},y={"Content-Type":"application/json","x-api-key":c};break}case"openai":default:{h=`${d}/images/generations`,p={prompt:o,model:g,n:1,size:"1024x1024",response_format:"url"},y={Authorization:`Bearer ${c}`,"Content-Type":"application/json"};break}}try{const j=await this.makeImageRequest(h,{method:"POST",headers:y,body:JSON.stringify(p),signal:AbortSignal.timeout(this.IMAGE_REQUEST_TIMEOUT)});if(!j.ok)throw await this.handleImageErrorResponse(j);const T=await j.json();return this.parseImageResponse(T,f)}catch(j){if(j instanceof P)throw j;if(j instanceof TypeError&&j.message.includes("fetch"))throw new P("Network error: Unable to connect to image generation service","NETWORK_ERROR");if(j instanceof Error&&j.name==="AbortError")throw new P("Request timeout: Image generation took too long","TIMEOUT_ERROR");const T=j instanceof Error?j.message:"Unknown error";throw new P(`Unexpected image generation error: ${T}`,"API_ERROR")}}static async makeImageRequest(i,o){try{return await fetch(i,o)}catch(c){throw c instanceof TypeError?new P("Network error: Check your internet connection and image API endpoint","NETWORK_ERROR"):c}}static async handleImageErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 400:c="API_ERROR",d=!1,o="Invalid image generation request - check prompt content";break;case 401:c="AUTH_ERROR",d=!1,o="Invalid API key for image generation";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check image generation permissions";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded for image generation - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Image generation server error - please try again later";break}return new P(o,c,d,i.status)}static parseImageResponse(i,o="openai"){try{if(!i||typeof i!="object")throw new Error("Invalid response format: expected object");let c;switch(o){case"nano-gpt":{const d=i;if("image"in d&&typeof d.image=="string")c=d.image;else if("imageDataUrl"in d&&typeof d.imageDataUrl=="string")c=d.imageDataUrl;else if("image_url"in d&&typeof d.image_url=="string")c=d.image_url;else if("url"in d&&typeof d.url=="string")c=d.url;else if("data"in d&&Array.isArray(d.data)&&d.data.length>0){const f=d.data[0];if(f&&typeof f=="object"&&f!==null){const g=f;if("url"in g&&typeof g.url=="string")c=g.url;else if("image"in g&&typeof g.image=="string")c=g.image;else if("imageDataUrl"in g&&typeof g.imageDataUrl=="string")c=g.imageDataUrl;else if("image_url"in g&&typeof g.image_url=="string")c=g.image_url;else if("b64_json"in g&&typeof g.b64_json=="string")c=`data:image/jpeg;base64,${g.b64_json}`;else throw new Error(`Invalid nano-gpt data item format: no image URL found. Available fields: ${Object.keys(g).join(", ")}`)}else throw new Error("Invalid nano-gpt response format: no image URL found")}else throw console.error("Available fields in nano-gpt response:",Object.keys(d)),new Error(`Invalid nano-gpt response format: no image URL found. Available fields: ${Object.keys(d).join(", ")}`);break}case"openai":default:{if(!("data"in i)||!Array.isArray(i.data))throw new Error("Invalid OpenAI response format: expected data array");const d=i.data;if(d.length===0)throw new Error("No images returned from OpenAI service");const f=d[0];if(!f||typeof f!="object"||!("url"in f))throw new Error("Invalid OpenAI image format: expected url property");c=f.url;break}}if(typeof c!="string"||!c.startsWith("http")&&!c.startsWith("data:"))throw new Error("Invalid image URL format: expected valid HTTP URL or data URL");return c}catch(c){const d=c instanceof Error?c.message:"Unknown parsing error";throw new P(`Failed to parse ${o} image response: ${d}`,"PARSE_ERROR",!1)}}static async testImageGeneration(i){try{const o=await this.generateImage(i,"A simple test image of a peaceful landscape");return!o||!o.startsWith("http")?{success:!1,error:"Generated image URL is invalid"}:{success:!0}}catch(o){return{success:!1,error:o instanceof P?o.message:"Unknown image generation error"}}}static getEffectiveImageConfig(i){return{apiKey:i.imageConfig?.apiKey||i.apiKey,baseUrl:i.imageConfig?.baseUrl||i.baseUrl,model:i.imageConfig?.model||i.model}}static delay(i){return new Promise(o=>setTimeout(o,i))}static validateImageParams(i){return typeof i=="string"&&i.trim().length>10&&i.length<1e3}static createFallbackImageUrl(i){return`https://via.placeholder.com/512x512/4a5568/ffffff?text=${encodeURIComponent(i.substring(0,50))}`}}const Ct={AI_CONFIG:"cyoa_ai_config",APP_SETTINGS:"cyoa_app_settings",SAVED_GAMES:"cyoa_saved_games"},Zf="1.0.0";class ds{static encode(i){return btoa(i)}static decode(i){try{return atob(i)}catch{return i}}static setItem(i,o){try{localStorage.setItem(i,this.encode(o))}catch(c){throw console.error("Failed to save to localStorage:",c),new Error("Failed to save configuration")}}static getItem(i){try{const o=localStorage.getItem(i);return o?this.decode(o):null}catch(o){return console.error("Failed to read from localStorage:",o),null}}static removeItem(i){try{localStorage.removeItem(i)}catch(o){console.error("Failed to remove from localStorage:",o)}}}class va{static saveConfig(i){try{const o=JSON.stringify(i);ds.setItem(Ct.AI_CONFIG,o)}catch(o){throw console.error("Failed to save AI config:",o),new Error("Failed to save AI configuration")}}static loadConfig(){try{const i=ds.getItem(Ct.AI_CONFIG);return i?JSON.parse(i):null}catch(i){return console.error("Failed to load AI config:",i),null}}static clearConfig(){ds.removeItem(Ct.AI_CONFIG)}static hasConfig(){return ds.getItem(Ct.AI_CONFIG)!==null}}class Lg{static serialize(i){try{const o={...i,createdAt:i.createdAt.toISOString(),lastUpdated:i.lastUpdated.toISOString(),version:Zf};return JSON.stringify(o)}catch(o){throw console.error("Failed to serialize game state:",o),new Error("Failed to serialize game state")}}static deserialize(i){try{const o=JSON.parse(i);if(!this.validateGameState(o))throw new Error("Invalid game state format");return{...o,createdAt:new Date(o.createdAt),lastUpdated:new Date(o.lastUpdated),gameMode:o.gameMode||"standard"}}catch(o){throw console.error("Failed to deserialize game state:",o),new Error("Failed to deserialize game state")}}static validateGameState(i){if(!i||typeof i!="object")return!1;const o=i;if(!o.gameId||typeof o.gameId!="string"||!o.createdAt||!o.lastUpdated||!o.currentStory||typeof o.currentStory!="object"||!Array.isArray(o.storyHistory)||!Array.isArray(o.choiceHistory))return!1;const c=o.currentStory;if(!c.id||!c.text||!c.sceneDescription||!Array.isArray(c.choices))return!1;for(const d of c.choices){const f=d;if(!f.id||!f.text)return!1}return!0}}class Ia{static serialize(i){try{const o={...i,gameState:{...i.gameState,createdAt:i.gameState.createdAt.toISOString(),lastUpdated:i.gameState.lastUpdated.toISOString()},metadata:{...i.metadata,createdAt:i.metadata.createdAt.toISOString(),lastPlayed:i.metadata.lastPlayed.toISOString()},version:Zf};return JSON.stringify(o)}catch(o){throw console.error("Failed to serialize saved game:",o),new Error("Failed to serialize saved game")}}static deserialize(i){try{const o=JSON.parse(i);if(!this.validateSavedGame(o))throw new Error("Invalid saved game format");return{...o,gameState:{...o.gameState,createdAt:new Date(o.gameState.createdAt),lastUpdated:new Date(o.gameState.lastUpdated),gameMode:o.gameState.gameMode||"standard",customScene:o.gameState.customScene},metadata:{...o.metadata,createdAt:new Date(o.metadata.createdAt),lastPlayed:new Date(o.metadata.lastPlayed),gameMode:o.metadata.gameMode||o.gameState.gameMode||"standard"}}}catch(o){throw console.error("Failed to deserialize saved game:",o),new Error("Failed to deserialize saved game")}}static validateSavedGame(i){if(!i||typeof i!="object")return!1;const o=i;if(!o.gameId||typeof o.gameId!="string"||!o.gameState||typeof o.gameState!="object"||!o.metadata||typeof o.metadata!="object")return!1;const c=o.metadata;return!c.title||typeof c.title!="string"||!c.createdAt||!c.lastPlayed||typeof c.choiceCount!="number"?!1:Lg.validateGameState(o.gameState)}}class Mt{static MAX_SAVED_GAMES=10;static MAX_HISTORY_ITEMS=20;static compressGameState(i){return{...i,gameState:{...i.gameState,storyHistory:i.gameState.storyHistory.slice(-this.MAX_HISTORY_ITEMS).map(o=>({...o,imageUrl:void 0})),choiceHistory:i.gameState.choiceHistory.slice(-this.MAX_HISTORY_ITEMS)}}}static saveGame(i){try{const o=this.compressGameState(i),c=Ia.serialize(o);Ia.deserialize(c);const f=this.loadAllGames().filter(p=>p.gameId!==i.gameId);f.push(o),f.sort((p,y)=>new Date(y.metadata.lastPlayed).getTime()-new Date(p.metadata.lastPlayed).getTime());const g=f.slice(0,this.MAX_SAVED_GAMES),h=JSON.stringify(g.map(p=>Ia.serialize(p)));try{localStorage.setItem(Ct.SAVED_GAMES,h)}catch(p){if(p instanceof DOMException&&p.name==="QuotaExceededError"){console.warn("Storage quota exceeded, removing old saves...");for(let y=g.length-1;y>=1;y--)try{const j=g.slice(0,y),T=JSON.stringify(j.map(z=>Ia.serialize(z)));localStorage.setItem(Ct.SAVED_GAMES,T),console.log(`Successfully saved with ${y} games (removed ${g.length-y} old saves)`);return}catch{continue}throw new Error("Storage quota exceeded even after removing old saves")}throw p}}catch(o){throw console.error("Failed to save game:",o),new Error("Failed to save game: "+(o instanceof Error?o.message:"Unknown error"))}}static loadAllGames(){try{const i=localStorage.getItem(Ct.SAVED_GAMES);if(!i)return[];const o=JSON.parse(i),c=[],d=[];for(const f of o)try{const g=Ia.deserialize(f);c.push(g)}catch(g){console.warn("Corrupted game data found, skipping:",g);try{const h=JSON.parse(f);h.gameId&&d.push(h.gameId)}catch{}}return d.length>0&&(console.warn(`Found ${d.length} corrupted games, cleaning up storage`),this.cleanupCorruptedGames(c)),c}catch(i){return console.error("Failed to load saved games:",i),this.clearAllGames(),[]}}static loadGame(i){try{return this.loadAllGames().find(c=>c.gameId===i)||null}catch(o){return console.error("Failed to load game:",o),null}}static deleteGame(i){try{const c=this.loadAllGames().filter(f=>f.gameId!==i),d=JSON.stringify(c.map(f=>Ia.serialize(f)));localStorage.setItem(Ct.SAVED_GAMES,d)}catch(o){throw console.error("Failed to delete game:",o),new Error("Failed to delete game")}}static getMostRecentGame(){const i=this.loadAllGames();return i.length===0?null:i.reduce((o,c)=>new Date(c.metadata.lastPlayed)>new Date(o.metadata.lastPlayed)?c:o)}static hasGame(i){return this.loadAllGames().some(c=>c.gameId===i)}static getGameCount(){return this.loadAllGames().length}static clearAllGames(){try{localStorage.removeItem(Ct.SAVED_GAMES)}catch(i){console.error("Failed to clear saved games:",i)}}static cleanupCorruptedGames(i){try{const o=JSON.stringify(i.map(c=>Ia.serialize(c)));localStorage.setItem(Ct.SAVED_GAMES,o)}catch(o){console.error("Failed to cleanup corrupted games:",o)}}static validateAndRepairStorage(){const i={isValid:!0,repairedCount:0,errors:[]};try{const o=this.loadAllGames(),c=this.getStorageItemCount();return o.length<c&&(i.repairedCount=c-o.length,i.isValid=!1,i.errors.push(`Repaired ${i.repairedCount} corrupted game(s)`)),i}catch(o){return i.isValid=!1,i.errors.push(o instanceof Error?o.message:"Unknown storage error"),i}}static getStorageItemCount(){try{const i=localStorage.getItem(Ct.SAVED_GAMES);return i?JSON.parse(i).length:0}catch{return 0}}static getStorageInfo(){try{const i=localStorage.getItem(Ct.SAVED_GAMES),o=i?new Blob([i]).size:0,c=this.getGameCount();return{gameCount:c,estimatedSize:o,maxGames:this.MAX_SAVED_GAMES,canSaveMore:c<this.MAX_SAVED_GAMES}}catch{return{gameCount:0,estimatedSize:0,maxGames:this.MAX_SAVED_GAMES,canSaveMore:!0}}}static pruneOldGames(i=5){try{const o=this.loadAllGames();if(o.length<=i)return 0;o.sort((g,h)=>new Date(h.metadata.lastPlayed).getTime()-new Date(g.metadata.lastPlayed).getTime());const c=o.slice(0,i),d=o.length-i,f=JSON.stringify(c.map(g=>Ia.serialize(g)));return localStorage.setItem(Ct.SAVED_GAMES,f),d}catch(o){return console.error("Failed to prune old games:",o),0}}}class $t{static saveQueue=new Map;static SAVE_DEBOUNCE_MS=1e3;static MAX_SAVE_ATTEMPTS=3;static scheduleAutoSave(i){const o=i.gameId,c=this.saveQueue.get(o);c&&clearTimeout(c);const d=setTimeout(()=>{this.performAutoSave(i),this.saveQueue.delete(o)},this.SAVE_DEBOUNCE_MS);this.saveQueue.set(o,d)}static async performImmediateSave(i){const o=i.gameId,c=this.saveQueue.get(o);return c&&(clearTimeout(c),this.saveQueue.delete(o)),this.performAutoSave(i)}static async performAutoSave(i,o=1){try{const c=Mt.loadGame(i.gameId);if(c&&this.hasConflict(i,c.gameState)){console.warn("Save conflict detected, resolving...");const d=this.resolveConflict(i,c.gameState);return this.saveGameState(d)}return this.saveGameState(i)}catch(c){if(console.error(`Auto-save attempt ${o} failed:`,c),o<this.MAX_SAVE_ATTEMPTS){const d=Math.pow(2,o)*1e3;return await new Promise(f=>setTimeout(f,d)),this.performAutoSave(i,o+1)}return console.error("Auto-save failed after maximum attempts"),!1}}static saveGameState(i){try{const o={...i,gameMode:i.gameMode||"standard",customScene:i.gameMode==="custom"?i.customScene:void 0},c={gameId:o.gameId,gameState:o,metadata:{title:this.generateGameTitle(o),createdAt:o.createdAt,lastPlayed:new Date,choiceCount:o.choiceHistory.length,gameMode:o.gameMode}};return Mt.saveGame(c),!0}catch(o){return console.error("Failed to save game state:",o),!1}}static hasConflict(i,o){const c=i.lastUpdated.getTime();return o.lastUpdated.getTime()>c+5e3}static resolveConflict(i,o){if(o.choiceHistory.length>i.choiceHistory.length)return console.log("Resolving conflict: keeping existing state (more progress)"),{...o,lastUpdated:new Date};if(o.choiceHistory.length===i.choiceHistory.length){const c=o.lastUpdated>i.lastUpdated;return console.log(`Resolving conflict: using ${c?"existing":"new"} state (same progress, newer timestamp)`),c?o:i}return console.log("Resolving conflict: using new state (more progress)"),i}static generateGameTitle(i){const o=i.choiceHistory.length,c=i.gameId.slice(0,8),d=i.gameMode==="custom"?"Custom":"Adventure";if(i.gameMode==="custom"&&i.customScene){const p=i.customScene.trim().split(" ").filter(y=>y.length>3&&!["the","and","but","for","are","with","they","have","this","that","from","your","you"].includes(y.toLowerCase()));if(p.length>=2)return`${p.slice(0,3).join(" ")}... (${o} actions)`}const g=i.currentStory.text.split(/[.!?]+/).filter(p=>p.trim().length>0);if(g.length>0){const y=g[0].trim().split(" ").filter(j=>j.length>3&&!["the","and","but","for","are","with","they","have","this","that","from","your","you"].includes(j.toLowerCase()));if(y.length>=2){const j=y.slice(0,3).join(" "),T=i.gameMode==="custom"?"actions":"choices";return`${j}... (${o} ${T})`}}const h=i.gameMode==="custom"?"actions":"choices";return`${d} ${c} (${o} ${h})`}static validateGameState(i){const o=[];return i.gameId||o.push("Missing game ID"),i.currentStory||o.push("Missing current story"),i.createdAt||o.push("Missing creation date"),i.lastUpdated||o.push("Missing last updated date"),i.gameMode?i.gameMode!=="standard"&&i.gameMode!=="custom"&&o.push('Invalid game mode (must be "standard" or "custom")'):o.push("Missing game mode"),i.gameMode==="custom"&&(!i.customScene||i.customScene.trim().length===0?o.push("Custom mode game missing custom scene description"):i.customScene.trim().length<20?o.push("Custom scene description too short (minimum 20 characters)"):i.customScene.trim().length>500&&o.push("Custom scene description too long (maximum 500 characters)")),i.currentStory&&(i.currentStory.id||o.push("Missing story ID"),i.currentStory.text||o.push("Missing story text"),i.currentStory.sceneDescription||o.push("Missing scene description"),Array.isArray(i.currentStory.choices)||o.push("Invalid choices array")),Array.isArray(i.storyHistory)||o.push("Invalid story history"),Array.isArray(i.choiceHistory)||o.push("Invalid choice history"),i.choiceHistory.length>0&&i.storyHistory.length!==i.choiceHistory.length&&o.push("Story history and choice history length mismatch"),{isValid:o.length===0,errors:o}}static cleanup(){for(const[,i]of this.saveQueue.entries())clearTimeout(i);this.saveQueue.clear()}static getSaveStats(){return{pendingSaves:this.saveQueue.size,queuedGames:Array.from(this.saveQueue.keys())}}}const Gg=({aiConfig:x,onConfigurationNeeded:i,onBackToLauncher:o,onNewGame:c,gameToResume:d,gameMode:f,customScene:g})=>{const[h,p]=R.useState(null),[y,j]=R.useState(!1),[T,z]=R.useState(null),[G,B]=R.useState(null),[Y,I]=R.useState(!1),[re,ie]=R.useState(!1),[K,Z]=R.useState(null),[Se,xe]=R.useState(!1),[q,M]=R.useState(x?.samplerSettings||{temperature:.7,minP:.05,repetitionPenalty:1.1,enableStreaming:!0}),[U,V]=R.useState(""),[se,ae]=R.useState(!1),[qe,F]=R.useState(""),[ve,E]=R.useState("");R.useEffect(()=>{x?.samplerSettings&&M(x.samplerSettings)},[x]);const L=R.useCallback(te=>{if(M(te),x){const ue={...x,samplerSettings:te};va.saveConfig(ue)}},[x]),X=R.useCallback(te=>{try{p(te.gameState),z(null),j(!1)}catch(ue){const ge=ue instanceof Error?ue.message:"Failed to resume game";z(ge),console.error("Failed to resume game:",ue)}},[]);R.useEffect(()=>{d&&X(d),I(!0)},[d,X]),R.useEffect(()=>{if(!h||!Y)return;const te=$t.validateGameState(h);if(!te.isValid){console.warn("Invalid game state, skipping auto-save:",te.errors);return}return $t.scheduleAutoSave(h),()=>{}},[h,Y]),R.useEffect(()=>()=>{$t.cleanup()},[]);const le=()=>`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,de=R.useCallback(te=>{const ue=[...te.storyHistory,te.currentStory];return xa.createStoryContext(ue,te.choiceHistory,te.currentStory.sceneDescription)},[]),v=R.useCallback(te=>{const ue=["Do you:","What do you do?","Your options are:","Choose your action:","You can:","Your choices:"];for(const ge of ue){const pe=te.indexOf(ge);if(pe!==-1)return te.substring(0,pe).trim()}return te.trim()},[]),O=R.useCallback(async(te,ue)=>{if(!x||x.enableImageGeneration===!1)return null;try{return ie(!0),Z(null),await Hg.generateSceneImageWithRetry(x,te.sceneDescription,ue)}catch(ge){const pe=ge instanceof Error?ge.message:"Failed to generate image";return Z(pe),console.warn("Image generation failed:",pe),null}finally{ie(!1)}},[x]),Q=R.useCallback(async()=>{if(!h||!x)return;const te=h.storyHistory.length>0?v(h.storyHistory[h.storyHistory.length-1].text):void 0,ue=await O(h.currentStory,te);if(ue){const ge={...h.currentStory,imageUrl:ue};p({...h,currentStory:ge,lastUpdated:new Date})}},[h,x,O,v]),J=R.useCallback(async()=>{if(!x){i();return}z(null),B(null),Z(null),V(""),F(""),E("");const te=q.enableStreaming??!0;te?(ae(!0),j(!1)):(j(!0),ae(!1));try{const ue=te?await xa.generateInitialStoryStream(x,pe=>{V(ce=>ce+pe)},q,pe=>{F(ce=>ce+pe)}):await xa.generateInitialStory(x,q);ae(!1),j(!1);const ge={gameId:le(),currentStory:ue,storyHistory:[],choiceHistory:[],createdAt:new Date,lastUpdated:new Date,gameMode:"standard"};p(ge),V(""),E(ue.thinkingContent||""),F(""),$t.performImmediateSave(ge).catch(pe=>{console.warn("Failed to perform immediate save for new game:",pe)}),O(ue).then(pe=>{pe&&p(ce=>{if(!ce||ce.gameId!==ge.gameId)return ce;const he={...ce,currentStory:{...ce.currentStory,imageUrl:pe},lastUpdated:new Date};return $t.scheduleAutoSave(he),he})})}catch(ue){const ge=ue instanceof Error?ue.message:"Failed to start new game";z(ge),B({type:"initial"}),ae(!1),V(""),F(""),j(!1)}},[x,i,O,q]),oe=R.useCallback(async te=>{if(!x){i();return}z(null),B(null),Z(null),V(""),F(""),E("");const ue=q.enableStreaming??!0;ue?(ae(!0),j(!1)):(j(!0),ae(!1));try{const ge=ue?await pa.generateCustomInitialStoryStream(x,te,ce=>{V(he=>he+ce)},q,ce=>{F(he=>he+ce)}):await pa.generateCustomInitialStory(x,te,q);ae(!1),j(!1);const pe={gameId:le(),currentStory:ge,storyHistory:[],choiceHistory:[],createdAt:new Date,lastUpdated:new Date,gameMode:"custom",customScene:te};p(pe),V(""),E(ge.thinkingContent||""),F(""),$t.performImmediateSave(pe).catch(ce=>{console.warn("Failed to perform immediate save for new game:",ce)}),O(ge).then(ce=>{ce&&p(he=>{if(!he||he.gameId!==pe.gameId)return he;const Le={...he,currentStory:{...he.currentStory,imageUrl:ce},lastUpdated:new Date};return $t.scheduleAutoSave(Le),Le})})}catch(ge){const pe=ge instanceof Error?ge.message:"Failed to start custom game";z(pe),B({type:"custom-initial",data:te}),ae(!1),V(""),F(""),j(!1)}},[x,i,O,q]),me=R.useCallback(async te=>{if(!h||!x){i();return}z(null),B(null),Z(null),V(""),F(""),E("");const ue=q.enableStreaming??!0;ue?(ae(!0),j(!1)):(j(!0),ae(!1));try{const ge=de(h),pe=ue?await xa.continueStoryStream(x,te,ge,Le=>{V(Xe=>Xe+Le)},q,Le=>{F(Xe=>Xe+Le)}):await xa.continueStory(x,te,ge,q);ae(!1),j(!1);const ce={...h,currentStory:pe,storyHistory:[...h.storyHistory,h.currentStory],choiceHistory:[...h.choiceHistory,{...te,selected:!0}],lastUpdated:new Date};p(ce),V(""),E(pe.thinkingContent||""),F(""),$t.performImmediateSave(ce).catch(Le=>{console.warn("Failed to perform immediate save after choice:",Le)});const he=v(pe.text);O(pe,he).then(Le=>{Le&&p(Xe=>!Xe||Xe.gameId!==ce.gameId?Xe:{...Xe,currentStory:{...Xe.currentStory,imageUrl:Le},lastUpdated:new Date})})}catch(ge){const pe=ge instanceof Error?ge.message:"Failed to continue story";z(pe),B({type:"choice",data:te}),ae(!1),V(""),F(""),j(!1)}},[h,x,i,de,O,v,q]),Ee=R.useCallback(async te=>{if(!h||!x){i();return}z(null),B(null),Z(null),V(""),F(""),E("");const ue=q.enableStreaming??!0;ue?(ae(!0),j(!1)):(j(!0),ae(!1));try{const ge={id:le(),text:te,selected:!0,isCustom:!0},pe=[...h.storyHistory,h.currentStory],ce=pa.createStoryContext(pe,h.choiceHistory,h.currentStory.sceneDescription),he=ue?await pa.continueCustomStoryStream(x,te,ce,Rt=>{V(pt=>pt+Rt)},q,Rt=>{F(pt=>pt+Rt)}):await pa.continueCustomStory(x,te,ce,q);ae(!1),j(!1);const Le={...h,currentStory:he,storyHistory:[...h.storyHistory,h.currentStory],choiceHistory:[...h.choiceHistory,ge],lastUpdated:new Date};p(Le),V(""),E(he.thinkingContent||""),F(""),$t.performImmediateSave(Le).catch(Rt=>{console.warn("Failed to perform immediate save after custom action:",Rt)});const Xe=v(he.text);O(he,Xe).then(Rt=>{Rt&&p(pt=>!pt||pt.gameId!==Le.gameId?pt:{...pt,currentStory:{...pt.currentStory,imageUrl:Rt},lastUpdated:new Date})})}catch(ge){const pe=ge instanceof Error?ge.message:"Failed to continue custom story";z(pe),B({type:"custom-action",data:te}),ae(!1),V(""),F(""),j(!1)}},[h,x,i,O,v,q]),at=R.useCallback(()=>{if(G)switch(G.type){case"initial":J();break;case"custom-initial":typeof G.data=="string"&&oe(G.data);break;case"choice":G.data&&typeof G.data=="object"&&me(G.data);break;case"custom-action":typeof G.data=="string"&&Ee(G.data);break}else if(h){const te=h.choiceHistory[h.choiceHistory.length-1];te?me(te):h.gameMode==="custom"&&h.customScene?oe(h.customScene):J()}else f==="custom"&&g?oe(g):J()},[G,h,me,J,oe,Ee,f,g]),Ve=R.useCallback(async()=>{if(!h||!x){i();return}z(null),Z(null),V(""),F(""),E("");const te=q.enableStreaming??!0;te?(ae(!0),j(!1)):(j(!0),ae(!1));try{let ue;if(h.choiceHistory.length===0)h.gameMode==="custom"&&h.customScene?ue=te?await pa.regenerateCustomInitialStoryStream(x,h.customScene,ce=>{V(he=>he+ce)},q,ce=>{F(he=>he+ce)}):await pa.regenerateCustomInitialStory(x,h.customScene,q):ue=te?await xa.regenerateInitialStoryStream(x,ce=>{V(he=>he+ce)},q,ce=>{F(he=>he+ce)}):await xa.regenerateInitialStory(x,q);else{const ce=h.choiceHistory[h.choiceHistory.length-1],he=de(h);h.gameMode==="custom"&&ce.isCustom?ue=te?await pa.regenerateCustomStoryStream(x,ce.text,he,Le=>{V(Xe=>Xe+Le)},q,Le=>{F(Xe=>Xe+Le)}):await pa.regenerateCustomStory(x,ce.text,he,q):ue=te?await xa.regenerateStoryStream(x,ce,he,Le=>{V(Xe=>Xe+Le)},q,Le=>{F(Xe=>Xe+Le)}):await xa.regenerateStory(x,ce,he,q)}ae(!1),j(!1);const ge={...h,currentStory:ue,lastUpdated:new Date};p(ge),V(""),E(ue.thinkingContent||""),F(""),$t.performImmediateSave(ge).catch(ce=>{console.warn("Failed to perform immediate save after regeneration:",ce)});const pe=v(ue.text);O(ue,pe).then(ce=>{ce&&p(he=>!he||he.gameId!==ge.gameId?he:{...he,currentStory:{...he.currentStory,imageUrl:ce},lastUpdated:new Date})})}catch(ue){const ge=ue instanceof Error?ue.message:"Failed to regenerate story";z(ge),ae(!1),V(""),F(""),j(!1)}},[h,x,i,de,O,v,q]),Za=R.useCallback(()=>{c?c():o?o():(p(null),z(null),j(!1))},[c,o]);return R.useEffect(()=>{f==="custom"&&g&&!h&&Y&&!d?oe(g):f==="standard"&&!h&&Y&&!d&&J()},[f,g,h,Y,d]),x?!h&&!y&&!se&&!T?s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center relative",children:[s.jsx("div",{className:"absolute top-4 right-4",children:s.jsxs("button",{onClick:()=>xe(!0),className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust sampler settings",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"AI Sampler"]})}),Se&&s.jsx(In,{settings:q,onSettingsChange:L,onClose:()=>xe(!1)}),s.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-6",children:s.jsx("svg",{className:"h-8 w-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Ready for Adventure"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Start a new Choose Your Own Adventure story powered by AI. Your choices will shape the narrative as it unfolds."}),s.jsx("div",{className:"space-y-4",children:s.jsxs("button",{onClick:J,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start New Adventure"]})})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6 space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Your Adventure"}),h&&s.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["Choices made: ",h.choiceHistory.length]})]}),s.jsx("div",{className:"flex space-x-2 w-full sm:w-auto",children:s.jsxs("button",{onClick:Za,className:"inline-flex items-center justify-center flex-1 sm:flex-none px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-1 sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"New Game"]})})]}),s.jsx(_g,{currentStory:h?.currentStory||null,storyHistory:h?.storyHistory||[],isLoading:y,error:T,onRetry:at,onRegenerate:Ve,canRegenerate:!!h&&!y&&!se,isGeneratingImage:re,imageError:K,onImageRetry:Q,samplerSettings:q,onSamplerSettingsChange:L,streamingText:U,isStreaming:se,enableImageGeneration:x?.enableImageGeneration??!0,thinkingContent:ve,streamingThinking:qe}),h&&!T&&(h.gameMode==="custom"?s.jsx(Dg,{isLoading:y||se,disabled:y||se,onActionSubmit:Ee,choiceHistory:h.choiceHistory}):s.jsx(Ug,{choices:h.currentStory.choices,choiceHistory:h.choiceHistory,isLoading:y||se,onChoiceSelect:me}))]}):s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Configuration Required"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Please configure your AI settings before starting a new adventure."}),s.jsx("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Configure AI Settings"})]})})},Bg=({onResumeGame:x,onDeleteGame:i,onNewGame:o})=>{const[c,d]=R.useState([]),[f,g]=R.useState(!0),[h,p]=R.useState(null),[y,j]=R.useState(null),[T,z]=R.useState(new Set),[G,B]=R.useState(!1),[Y,I]=R.useState(!1);R.useEffect(()=>{re()},[]);const re=async()=>{try{g(!0),p(null);const U=Mt.loadAllGames();d(U);const V=Mt.validateAndRepairStorage();!V.isValid&&V.errors.length>0&&console.warn("Storage validation issues:",V.errors)}catch(U){const V=U instanceof Error?U.message:"Failed to load saved games";p(V),console.error("Failed to load saved games:",U)}finally{g(!1)}},ie=async U=>{try{j(U),Mt.deleteGame(U),d(V=>V.filter(se=>se.gameId!==U)),i&&i(U)}catch(V){const se=V instanceof Error?V.message:"Failed to delete game";p(se),console.error("Failed to delete game:",V)}finally{j(null)}},K=U=>{z(V=>{const se=new Set(V);return se.has(U)?se.delete(U):se.add(U),se})},Z=()=>{T.size===c.length?z(new Set):z(new Set(c.map(U=>U.gameId)))},Se=async()=>{if(T.size!==0)try{I(!0);for(const U of T)Mt.deleteGame(U),i&&i(U);d(U=>U.filter(V=>!T.has(V.gameId))),z(new Set),B(!1)}catch(U){const V=U instanceof Error?U.message:"Failed to delete selected games";p(V),console.error("Failed to bulk delete games:",U)}finally{I(!1)}},xe=()=>{z(new Set),B(!1)},q=U=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(U),M=U=>{const se=new Date().getTime()-U.getTime(),ae=Math.floor(se/(1e3*60*60)),qe=Math.floor(ae/24);return ae<1?"Just now":ae<24?`${ae} hour${ae>1?"s":""} ago`:qe<7?`${qe} day${qe>1?"s":""} ago`:q(U)};return f?s.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 sm:h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 sm:w-1/3 mb-4 sm:mb-6"}),s.jsx("div",{className:"space-y-3 sm:space-y-4",children:[1,2,3].map(U=>s.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[s.jsx("div",{className:"h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 sm:w-1/2 mb-2"}),s.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 sm:w-1/4 mb-2"}),s.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3 sm:w-1/3"})]},U))})]})})}):h?s.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Error Loading Games"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:h}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:justify-center",children:[s.jsx("button",{onClick:re,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Try Again"}),s.jsx("button",{onClick:o,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Start New Game"})]})]})})}):s.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:[s.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Your Adventures"}),c.length>1&&!G&&s.jsxs("button",{onClick:()=>B(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"hidden sm:inline",children:"Select Multiple"}),s.jsx("span",{className:"sm:hidden",children:"Select"})]})]}),!G&&s.jsxs("button",{onClick:o,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Adventure"]})]}),G&&s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:[T.size," of ",c.length," selected"]}),s.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[s.jsx("button",{onClick:Z,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:T.size===c.length?"Deselect All":"Select All"}),s.jsx("button",{onClick:Se,disabled:T.size===0||Y,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Y?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"mr-1.5 h-3 w-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Deleting..."}),s.jsx("span",{className:"sm:hidden",children:"..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete (",T.size,")"]})}),s.jsx("button",{onClick:xe,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Cancel"})]})]})]}),c.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-6",children:s.jsx("svg",{className:"h-8 w-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Saved Adventures"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start your first Choose Your Own Adventure story to begin your journey."}),s.jsxs("button",{onClick:o,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start Your First Adventure"]})]}):s.jsx("div",{className:"space-y-3 sm:space-y-4",children:c.map(U=>s.jsx("div",{className:`border rounded-lg p-4 sm:p-6 transition-colors ${G&&T.has(U.gameId)?"border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:s.jsxs("div",{className:"flex flex-col space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[G&&s.jsx("div",{className:"flex items-center pt-1",children:s.jsx("input",{type:"checkbox",checked:T.has(U.gameId),onChange:()=>K(U.gameId),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 truncate",children:U.metadata.title}),U.metadata.gameMode&&s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium self-start ${U.metadata.gameMode==="custom"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"}`,children:U.metadata.gameMode==="custom"?"✨ Custom":"📖 Standard"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Choices:"})," ",U.metadata.choiceCount]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Last played:"})," ",M(U.metadata.lastPlayed)]}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-medium",children:"Created:"})," ",q(U.metadata.createdAt)]})]})]})]}),s.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2 sm:line-clamp-3",children:[U.gameState.currentStory.text.substring(0,150),U.gameState.currentStory.text.length>150?"...":""]})}),!G&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsxs("button",{onClick:()=>x(U),className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-green-400 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resume Adventure"]}),s.jsx("button",{onClick:()=>ie(U.gameId),disabled:y===U.gameId,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-red-700 dark:text-red-400 bg-white dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y===U.gameId?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Deleting..."}),s.jsx("span",{className:"sm:hidden",children:"..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{className:"hidden sm:inline",children:"Delete"}),s.jsx("span",{className:"sm:hidden",children:"Delete"})]})})]})]})},U.gameId))})]})})},Yg=({onModeSelect:x,aiConfig:i,samplerSettings:o,onSamplerSettingsChange:c})=>{const[d,f]=R.useState(!1);return s.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8 relative",children:[s.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-purple-100 dark:bg-purple-900/30 mb-4 sm:mb-6",children:s.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3",children:"Choose Your Adventure Mode"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Select how you want to experience your story"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs("button",{onClick:()=>x("standard"),className:"group relative bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 sm:p-6 hover:border-blue-500 dark:hover:border-blue-400 hover:shadow-lg transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400",children:[s.jsxs("div",{className:"flex items-start mb-3 sm:mb-4",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors",children:s.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),s.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 sm:mb-2",children:"Standard Mode"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Choose from AI-generated options at each step. Perfect for guided storytelling with curated choices."})]})]}),s.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 font-medium group-hover:text-blue-700 dark:group-hover:text-blue-300",children:["Select Standard Mode",s.jsx("svg",{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),s.jsxs("button",{onClick:()=>x("custom"),className:"group relative bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 sm:p-6 hover:border-purple-500 dark:hover:border-purple-400 hover:shadow-lg transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-purple-400",children:[s.jsxs("div",{className:"flex items-start mb-3 sm:mb-4",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center group-hover:bg-purple-200 dark:group-hover:bg-purple-900/50 transition-colors",children:s.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 sm:mb-2",children:"Custom Scenario Mode"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Write your own scene and actions. Complete creative freedom to shape your unique adventure."})]})]}),s.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-purple-600 dark:text-purple-400 font-medium group-hover:text-purple-700 dark:group-hover:text-purple-300",children:["Select Custom Mode",s.jsx("svg",{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),s.jsxs("div",{className:"mt-6 sm:mt-8 space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-purple-400 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"AI Sampler"]})}),s.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 text-center flex items-center justify-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"You can't switch modes once your adventure begins"]})})]})]}),d&&i&&s.jsx(In,{onClose:()=>f(!1),settings:o,onSettingsChange:c})]})},qg=({onSceneSubmit:x,onBack:i,aiConfig:o,samplerSettings:c,onSamplerSettingsChange:d})=>{const[f,g]=R.useState(""),[h,p]=R.useState(""),[y,j]=R.useState(!1),[T,z]=R.useState(!1),[G,B]=R.useState(""),[Y,I]=R.useState(""),[re,ie]=R.useState(!1),[K,Z]=R.useState(!1),Se=20,xe=500,q=F=>{const ve=F.target.value;g(ve),h&&p("")},M=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),ae&&U())},U=()=>{const F=f.trim();if(F.length===0){p("Please enter a scene description");return}if(F.length<Se){p(`Scene description must be at least ${Se} characters`);return}if(F.length>xe){p(`Scene description must not exceed ${xe} characters`);return}x(F)},V=async()=>{if(!o){B("AI configuration is required to generate scene ideas");return}z(!0),B(""),g(""),p(""),I(""),ie(!1);try{const ve=[Ne.createSystemMessage("You are a creative writing assistant specializing in adventure story openings. DO NOT end it with What do you do?"),Ne.createUserMessage(`Generate a SIMPLE and SHORT opening scene (25-75 words) for a choose-your-own-adventure story. 
Write only the scene description — no dialogue, no choices, no setup notes.

The scene should:
- Set a clear location
- Present a simple situation or problem
- Use straightforward, clear language
- Avoid flowery or overly descriptive language

Keep it SHORT it a SIMPLE scene, NO CHARACTER ACTIONS.`)];if(c.enableStreaming??!0){ie(!0);const L=ml.createStreamingProcessor();let X=!1;const{response:le,thinkingContent:de}=await Ne.chatCompletionStream(o,ve,v=>{const O=L.processChunk(v);O.displayChunk&&(X||(ie(!1),Z(!0),X=!0),g(Q=>Q+O.displayChunk))},{temperature:c?.temperature??.8,maxTokens:2048,onThinkingChunk:v=>{I(O=>O+v)}});if(ie(!1),Z(!1),de&&I(de),le&&le.trim()){const{thinkingContent:v,cleanedResponse:O}=ml.parseThinkingResponse(le);v&&!de&&I(v),O.trim()&&O.trim()!==f.trim()&&g(O.trim()),p("")}else B("Failed to generate scene idea. Please try again.")}else{const L=await Ne.chatCompletionWithRetry(o,ve,{temperature:c?.temperature??.8,maxTokens:2048});if(L&&L.trim()){const{thinkingContent:X,cleanedResponse:le}=ml.parseThinkingResponse(L);X&&I(X),g(le.trim()),p("")}else B("Failed to generate scene idea. Please try again.")}}catch(F){const ve=F instanceof Error?F.message:"Failed to generate scene idea";B(ve),console.error("Scene generation error:",F)}finally{z(!1),ie(!1),Z(!1)}},se=f.length,ae=se>=Se&&se<=xe,qe=se>xe*.9;return s.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:[s.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative",children:[s.jsx("div",{className:"absolute top-0 right-0",children:s.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust AI settings",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),s.jsx("span",{className:"hidden sm:inline",children:"AI Settings"})]})}),s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-purple-100 dark:bg-purple-900/30 mb-4 sm:mb-6",children:s.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3",children:"Set Your Scene"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Describe the initial scene for your custom adventure"})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{htmlFor:"sceneDescription",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Scene Description"}),o&&s.jsx("button",{onClick:V,disabled:T,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-md hover:bg-purple-100 dark:hover:bg-purple-900/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Generate a scene idea using AI",children:T?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),re?"Thinking...":K?"Writing...":"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"})}),"✨ Imagine a Scene"]})})]}),Y&&s.jsx("div",{className:"mb-3",children:s.jsx(If,{thinkingContent:Y,isStreaming:re})}),s.jsx("textarea",{id:"sceneDescription",value:f+(K?"|":""),onChange:q,onKeyDown:M,placeholder:"You wake up in a mysterious forest, surrounded by ancient trees. The air is thick with fog, and you hear strange sounds in the distance...",rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none placeholder-gray-400 dark:placeholder-gray-500",readOnly:K}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Se,"-",xe," characters required"]}),s.jsxs("p",{className:`text-xs font-medium ${se===0?"text-gray-500 dark:text-gray-400":ae?"text-green-600 dark:text-green-400":qe?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"}`,children:[se," / ",xe]})]}),h&&s.jsx("div",{className:"mt-2 p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsx("p",{className:"text-xs sm:text-sm",children:h})]})}),G&&s.jsx("div",{className:"mt-2 p-3 rounded-md bg-orange-50 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 border border-orange-200 dark:border-orange-800",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs sm:text-sm",children:G}),(G.includes("Empty response")||G.includes("API error")||G.includes("Failed to generate"))&&s.jsx("div",{className:"mt-2 p-2 bg-orange-100 dark:bg-orange-800/30 rounded border border-orange-300 dark:border-orange-600",children:s.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:[s.jsx("strong",{children:"💡 Tip:"})," If scene generation fails, try adjusting your AI settings, checking your API connection, or writing your own scene description instead."]})})]})]})})]}),s.jsxs("div",{className:"p-3 sm:p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[s.jsxs("h3",{className:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Tips for a great scene:"]}),s.jsxs("ul",{className:"text-xs sm:text-sm text-purple-800 dark:text-purple-300 space-y-1",children:[s.jsx("li",{children:"• Set the location and atmosphere"}),s.jsx("li",{children:"• Describe what your character sees or feels"}),s.jsx("li",{children:"• Create an intriguing situation or mystery"}),s.jsx("li",{children:"• Leave room for the story to develop"}),o&&s.jsx("li",{children:"• ✨ Use the Imagine tool for AI-generated inspiration"}),s.jsx("li",{children:"• 🧠 If your AI uses thinking, you'll see its reasoning process above"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2",children:[s.jsx("button",{onClick:i,disabled:T,className:"flex-1 px-4 sm:px-6 py-2 sm:py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-400 dark:disabled:text-gray-600 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-gray-500 dark:focus:ring-gray-400 font-medium text-sm sm:text-base",children:"← Back"}),s.jsx("button",{onClick:U,disabled:!ae,className:"flex-1 px-4 sm:px-6 py-2 sm:py-3 bg-purple-600 dark:bg-purple-500 text-white rounded-lg hover:bg-purple-700 dark:hover:bg-purple-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-purple-500 dark:focus:ring-purple-400 font-medium text-sm sm:text-base shadow-lg hover:shadow-xl disabled:shadow-none",children:"Start Adventure →"})]})]})]}),y&&o&&s.jsx(In,{onClose:()=>j(!1),settings:c,onSettingsChange:d})]})},Vg=({aiConfig:x,onConfigurationNeeded:i,onStartNewGame:o,onResumeGame:c,startWithModeSelection:d=!1,startWithSavedGames:f=!1})=>{const[g,h]=R.useState("welcome"),[p,y]=R.useState(null),[j,T]=R.useState(!1),[z,G]=R.useState(!0),[B,Y]=R.useState(!1),[I,re]=R.useState(x?.samplerSettings||{temperature:.7,minP:.05,repetitionPenalty:1.1}),[ie,K]=R.useState("welcome");R.useEffect(()=>{Se()},[]),R.useEffect(()=>{x?.samplerSettings&&re(x.samplerSettings)},[x]),R.useEffect(()=>{d?K("mode-select"):(K("welcome"),h("welcome"))},[d]),R.useEffect(()=>{f&&(K("welcome"),h("saved-games"))},[f]);const Z=R.useCallback(ve=>{if(re(ve),x){const E={...x,samplerSettings:ve};va.saveConfig(E)}},[x]),Se=()=>{try{G(!0);const ve=Mt.getGameCount(),E=Mt.getMostRecentGame();T(ve>0),y(E),h("welcome")}catch(ve){console.error("Failed to check for saved games:",ve),T(!1),y(null)}finally{G(!1)}},xe=()=>{try{const ve=Mt.getGameCount(),E=Mt.getMostRecentGame();T(ve>0),y(E)}catch(ve){console.error("Failed to refresh saved games:",ve),T(!1),y(null)}},q=()=>{h("saved-games")},M=()=>{h("welcome"),K("welcome"),xe()},U=ve=>{console.log(`Game ${ve} deleted, refreshing list`),xe()},V=()=>{h("welcome"),K("mode-select")},se=ve=>{ve==="custom"?K("custom-scene"):o("standard")},ae=ve=>{o("custom",ve)},qe=()=>{K("mode-select")},F=()=>{K("welcome")};return x?z?s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:s.jsxs("div",{className:"animate-pulse text-center",children:[s.jsx("div",{className:"h-16 w-16 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-6"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mx-auto mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mx-auto mb-8"}),s.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mx-auto"})]})})}):g==="saved-games"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-w-4xl mx-auto p-6 mb-4",children:s.jsxs("button",{onClick:M,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Welcome"]})}),s.jsx(Bg,{onResumeGame:c,onDeleteGame:U,onNewGame:V})]}):ie==="mode-select"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 mb-4",children:s.jsxs("button",{onClick:F,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),s.jsx(Yg,{onModeSelect:se,aiConfig:x,samplerSettings:I,onSamplerSettingsChange:Z})]}):ie==="custom-scene"?s.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:s.jsx(qg,{onSceneSubmit:ae,onBack:qe,aiConfig:x,samplerSettings:I,onSamplerSettingsChange:Z})}):s.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8 text-center relative",children:[s.jsx("div",{className:"absolute top-2 right-2 sm:top-4 sm:right-4",children:s.jsxs("button",{onClick:()=>Y(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust sampler settings",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),s.jsx("span",{className:"hidden sm:inline",children:"AI Sampler"})]})}),B&&s.jsx(In,{settings:I,onSettingsChange:Z,onClose:()=>Y(!1)}),s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-4 sm:mb-6 mt-6 sm:mt-0",children:s.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"Welcome to AI Adventure"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-6 sm:mb-8 px-2",children:"Experience interactive storytelling powered by AI. Your choices shape the narrative as it unfolds."}),j&&p&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-green-900 dark:text-green-300",children:"Continue Your Adventure"}),p.metadata.gameMode&&s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${p.metadata.gameMode==="custom"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"}`,children:p.metadata.gameMode==="custom"?"✨ Custom":"📖 Standard"})]}),s.jsxs("p",{className:"text-xs sm:text-sm text-green-700 dark:text-green-400 mb-3 sm:mb-4",children:['Resume "',p.metadata.title,'" - ',p.metadata.choiceCount," choices made"]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-md p-2 sm:p-3 mb-3 sm:mb-4",children:s.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 line-clamp-2 break-words",children:[p.gameState.currentStory.text.substring(0,150),p.gameState.currentStory.text.length>150?"...":""]})}),s.jsxs("button",{onClick:()=>c(p),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 border border-transparent text-sm sm:text-base font-medium rounded-md shadow-sm text-white bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-green-400 transition-colors",children:[s.jsx("svg",{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resume Adventure"]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center justify-center",children:[s.jsxs("button",{onClick:V,className:"w-full sm:w-64 h-14 inline-flex items-center justify-center px-6 py-4 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start New Adventure"]}),j&&s.jsxs("button",{onClick:q,className:"w-full sm:w-64 h-14 inline-flex items-center justify-center px-6 py-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[s.jsx("svg",{className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"View All Saved Games (",Mt.getGameCount(),")"]})]}),!j&&s.jsx("div",{className:"mt-6 sm:mt-8 p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsx("p",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300",children:"🎉 This is your first adventure! Your progress will be automatically saved as you play."})})]})}):s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Configuration Required"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Please configure your AI settings before starting or resuming an adventure."}),s.jsx("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Configure AI Settings"})]})})};class Qf{static validateOpenAIKey(i){if(!i||typeof i!="string")return!1;const o=i.trim();return!!(o.startsWith("sk-")&&o.length>=20)}static validateGenericKey(i){if(!i||typeof i!="string")return!1;const o=i.trim();return o.length>=8&&o.length<=200?/^[a-zA-Z0-9\-_.]+$/.test(o):!1}static validateAPIKey(i){return this.validateOpenAIKey(i)?{isValid:!0,type:"openai"}:this.validateGenericKey(i)?{isValid:!0,type:"generic"}:{isValid:!1,type:"invalid"}}}class Wt{static validateBaseURL(i){if(!i||typeof i!="string")return!1;try{const o=new URL(i.trim());return!(!["http:","https:"].includes(o.protocol)||!o.hostname)}catch{return!1}}static normalizeBaseURL(i){const o=i.trim();return o.endsWith("/")?o.slice(0,-1):o}}class ms{static validateConfig(i){const o=[],c=[];if(!i.apiKey)o.push("API key is required");else{const d=Qf.validateAPIKey(i.apiKey);d.isValid?d.type==="generic"&&(i.baseUrl?.includes("openai.com")||i.baseUrl?.includes("api.openai.com"))&&c.push("API key format not recognized as OpenAI - ensure compatibility"):o.push("Invalid API key format")}if(i.baseUrl?Wt.validateBaseURL(i.baseUrl)||o.push("Invalid base URL format"):o.push("Base URL is required"),i.model?(typeof i.model!="string"||i.model.trim().length===0)&&o.push("Invalid model selection"):o.push("Model selection is required"),i.imageConfig){if(i.imageConfig.provider?["openai","nano-gpt"].includes(i.imageConfig.provider)||o.push("Invalid image provider selection"):o.push("Image provider selection is required when image config is provided"),i.imageConfig.apiKey){const d=Qf.validateAPIKey(i.imageConfig.apiKey);d.isValid?d.type==="generic"&&i.imageConfig.provider==="openai"&&c.push("Image API key format not recognized as OpenAI - ensure compatibility"):o.push("Invalid image API key format")}i.imageConfig.baseUrl&&(Wt.validateBaseURL(i.imageConfig.baseUrl)||o.push("Invalid image base URL format")),i.imageConfig.model?(typeof i.imageConfig.model!="string"||i.imageConfig.model.trim().length===0)&&o.push("Invalid image model selection"):o.push("Image model selection is required when image config is provided")}return{isValid:o.length===0,errors:o,warnings:c}}static createDefaultConfig(){return{baseUrl:"https://api.openai.com/v1",model:"gpt-3.5-turbo",availableModels:[]}}static sanitizeConfig(i){const o={};return i.apiKey&&(o.apiKey=i.apiKey.trim()),i.baseUrl&&(o.baseUrl=Wt.normalizeBaseURL(i.baseUrl)),i.model&&(o.model=i.model.trim()),i.availableModels&&(o.availableModels=i.availableModels.filter(c=>typeof c=="string"&&c.trim().length>0)),typeof i.enableImageGeneration=="boolean"&&(o.enableImageGeneration=i.enableImageGeneration),i.imageConfig&&i.imageConfig.model&&i.imageConfig.provider&&(o.imageConfig={provider:i.imageConfig.provider,model:i.imageConfig.model.trim()},i.imageConfig.apiKey&&(o.imageConfig.apiKey=i.imageConfig.apiKey.trim()),i.imageConfig.baseUrl&&(o.imageConfig.baseUrl=Wt.normalizeBaseURL(i.imageConfig.baseUrl)),i.imageConfig.availableModels&&(o.imageConfig.availableModels=i.imageConfig.availableModels.filter(c=>typeof c=="string"&&c.trim().length>0))),i.samplerSettings&&(o.samplerSettings=i.samplerSettings),o}}class ct extends Error{code;retryable;constructor(i,o,c=!0){super(i),this.name="ModelServiceError",this.code=o,this.retryable=c}}class ba{static REQUEST_TIMEOUT=1e4;static MAX_RETRIES=3;static async fetchAvailableModels(i){if(!i.apiKey||!i.baseUrl)throw new ct("API key and base URL are required","API_ERROR",!1);if(i.baseUrl.includes("api.anthropic.com"))return[{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet (Latest)",description:"Most intelligent model"},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku",description:"Fastest model"},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Powerful model for complex tasks"},{id:"claude-3-sonnet-20240229",name:"Claude 3 Sonnet",description:"Balanced performance"},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Fast and efficient"}];let o=`${i.baseUrl}/models`;const c={Authorization:`Bearer ${i.apiKey}`,"Content-Type":"application/json"};i.baseUrl.includes("api.openai.com")&&(o="/api/openai/v1/models");try{const d=await this.makeRequest(o,{method:"GET",headers:c,signal:AbortSignal.timeout(this.REQUEST_TIMEOUT)});if(!d.ok)throw await this.handleErrorResponse(d);const f=await d.json();return this.parseModelsResponse(f)}catch(d){if(d instanceof ct)throw d;if(d instanceof TypeError&&d.message.includes("fetch"))throw new ct("Network error: Unable to connect to API endpoint","NETWORK_ERROR");if(d instanceof Error&&d.name==="AbortError")throw new ct("Request timeout: API took too long to respond","NETWORK_ERROR");const f=d instanceof Error?d.message:"Unknown error";throw new ct(`Unexpected error: ${f}`,"API_ERROR")}}static async validateModelAccess(i,o){try{return(await this.fetchAvailableModels(i)).some(d=>d.id===o)}catch{return!1}}static async getModelInfo(i,o){try{return(await this.fetchAvailableModels(i)).find(d=>d.id===o)||null}catch{return null}}static async fetchModelsWithRetry(i,o=this.MAX_RETRIES){let c;for(let d=1;d<=o;d++)try{return await this.fetchAvailableModels(i)}catch(f){const g=f instanceof Error?f.message:"Unknown error";if(c=f instanceof ct?f:new ct(`Attempt ${d} failed: ${g}`,"API_ERROR"),!c.retryable)throw c;if(d===o)break;await this.delay(Math.pow(2,d-1)*1e3)}throw c}static async testConnection(i){try{return await this.fetchAvailableModels(i),{success:!0}}catch(o){return{success:!1,error:o instanceof ct?o.message:"Unknown connection error"}}}static async makeRequest(i,o){try{return await fetch(i,o)}catch(c){throw c instanceof TypeError?new ct("Network error: Check your internet connection and API endpoint, If running local ensure CORS is enabled.","NETWORK_ERROR"):c}}static async handleErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 401:c="AUTH_ERROR",d=!1,o="Invalid API key or unauthorized access";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check your API key permissions";break;case 404:c="API_ERROR",d=!1,o="API endpoint not found - check your base URL";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Server error - please try again later";break}return new ct(o,c,d)}static parseModelsResponse(i){try{if(!i||typeof i!="object"||!("data"in i)||!Array.isArray(i.data))throw new Error("Invalid response format: expected data array. Are you using /v1 at the end of the url?");return i.data.filter(c=>c&&typeof c=="object"&&c!==null&&"id"in c&&typeof c.id=="string").map(c=>{const d=c;return{id:d.id,name:d.id,description:d.description||void 0}}).sort((c,d)=>c.name.localeCompare(d.name))}catch(o){const c=o instanceof Error?o.message:"Unknown parsing error";throw new ct(`Failed to parse models response: ${c}`,"PARSE_ERROR",!1)}}static delay(i){return new Promise(o=>setTimeout(o,i))}static filterTextModels(i){const o=[/^gpt/i,/^claude/i,/^llama/i,/^mistral/i,/^gemini/i,/text/i,/chat/i,/instruct/i],c=[/dall-e/i,/whisper/i,/tts/i,/embedding/i,/moderation/i];return i.filter(d=>c.some(f=>f.test(d.id))?!1:(o.some(f=>f.test(d.id)),!0))}static filterImageModels(i){const o=[/^dall-e/i,/^midjourney/i,/stable.*diffusion/i,/^imagen/i,/^firefly/i,/flux/i,/playground/i,/^sd-/i,/^sdxl/i],c=[/^dall-e-2$/i,/^dall-e-3$/i,/^stable-diffusion/i,/^midjourney/i,/^flux-/i,/^playground-/i];return i.filter(d=>c.some(f=>f.test(d.id))?!0:o.some(f=>f.test(d.id))?![/gpt/i,/llama/i,/claude/i,/mistral/i,/gemini/i,/chat/i,/instruct/i,/text/i,/70b/i,/13b/i,/7b/i,/\d+b/i].some(g=>g.test(d.id)):!1)}static async fetchAvailableImageModels(i){if(i.imageConfig?.provider==="nano-gpt")return console.log("Nano-GPT provider detected - skipping model fetching (manual entry required)"),[];const o=i.imageConfig?{apiKey:i.imageConfig.apiKey||i.apiKey,baseUrl:i.imageConfig.baseUrl||i.baseUrl,model:i.imageConfig.model,availableModels:i.imageConfig.availableModels}:i,c=await this.fetchAvailableModels(o),d=this.filterImageModels(c);return d.length===0&&console.log("No image models found after filtering. All available models:",c.map(f=>f.id)),d}static async fetchImageModelsWithRetry(i,o=this.MAX_RETRIES){let c;for(let d=1;d<=o;d++)try{return await this.fetchAvailableImageModels(i)}catch(f){const g=f instanceof Error?f.message:"Unknown error";if(c=f instanceof ct?f:new ct(`Attempt ${d} failed: ${g}`,"API_ERROR"),!c.retryable)throw c;if(d===o)break;await this.delay(Math.pow(2,d-1)*1e3)}throw c}static async testImageConnection(i){if(i.imageConfig?.provider==="nano-gpt"){const o=i.imageConfig.apiKey||i.apiKey,c=i.imageConfig.baseUrl||i.baseUrl;return!o||!c?{success:!1,error:"API key and base URL are required for nano-gpt"}:{success:!0}}try{return await this.fetchAvailableImageModels(i),{success:!0}}catch(o){return{success:!1,error:o instanceof ct?o.message:"Unknown connection error"}}}static async fetchAllModelsForImageConfig(i){if(i.imageConfig?.provider==="nano-gpt")return console.log("Nano-GPT provider detected - skipping model fetching (manual entry required)"),[];const o=i.imageConfig?{apiKey:i.imageConfig.apiKey||i.apiKey,baseUrl:i.imageConfig.baseUrl||i.baseUrl,model:i.imageConfig.model,availableModels:i.imageConfig.availableModels}:i;return await this.fetchAvailableModels(o)}}const Xg=({config:x,onConfigSave:i,onClose:o,className:c=""})=>{const[d,f]=R.useState({apiKey:x?.apiKey||"",baseUrl:x?.baseUrl||"https://api.openai.com/v1",model:x?.model||"gpt-3.5-turbo",enableImageGeneration:x?.enableImageGeneration??!0,enableImageConfig:!!x?.imageConfig,imageProvider:x?.imageConfig?.provider||"openai",imageApiKey:x?.imageConfig?.apiKey||"",imageBaseUrl:x?.imageConfig?.baseUrl||"",imageModel:x?.imageConfig?.model||"dall-e-3"}),[g,h]=R.useState(x?.availableModels?.map(M=>({id:M,name:M}))||[]),[p,y]=R.useState(x?.imageConfig?.availableModels?.map(M=>({id:M,name:M}))||[]),[j,T]=R.useState({errors:[],warnings:[],isValid:!1}),[z,G]=R.useState({models:!1,testing:!1,saving:!1,imageModels:!1,imageTesting:!1}),[B,Y]=R.useState({tested:!1,success:!1}),[I,re]=R.useState({tested:!1,success:!1});R.useEffect(()=>{const M={apiKey:d.apiKey,baseUrl:d.baseUrl,model:d.model,enableImageGeneration:d.enableImageGeneration};d.enableImageConfig&&(M.imageConfig={provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl||void 0,model:d.imageModel});const U=ms.validateConfig(M);T(U)},[d]);const ie=(M,U)=>{if(f(V=>({...V,[M]:U})),(M==="apiKey"||M==="baseUrl")&&(Y({tested:!1,success:!1}),h([])),(M==="imageApiKey"||M==="imageBaseUrl"||M==="imageProvider")&&(re({tested:!1,success:!1}),y([]),M==="imageProvider")){if(U==="nano-gpt"){f(V=>({...V,[M]:U,imageModel:"flux-1.1-pro",imageBaseUrl:V.imageBaseUrl||"https://nano-gpt.com"}));return}else if(U==="openai"){f(V=>({...V,[M]:U,imageModel:"dall-e-3",imageBaseUrl:V.imageBaseUrl||"https://api.openai.com/v1"}));return}}M==="enableImageConfig"&&!U&&(re({tested:!1,success:!1}),y([]))},K=async()=>{if(j.isValid){G(M=>({...M,testing:!0,models:!0})),Y({tested:!1,success:!1});try{const M={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[]},U=await ba.fetchAvailableModels(M),V=ba.filterTextModels(U);h(V),Y({tested:!0,success:!0}),!V.some(se=>se.id===d.model)&&V.length>0&&f(se=>({...se,model:V[0].id}))}catch(M){const U=M instanceof ct?M.message:"Failed to connect to API";Y({tested:!0,success:!1,error:U}),h([])}finally{G(M=>({...M,testing:!1,models:!1}))}}},Z=async()=>{if(j.isValid){G(M=>({...M,models:!0}));try{const M={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[]},U=await ba.fetchModelsWithRetry(M),V=ba.filterTextModels(U);h(V)}catch(M){console.error("Failed to fetch models:",M)}finally{G(M=>({...M,models:!1}))}}},Se=async()=>{if(!(!d.enableImageConfig||!j.isValid)){G(M=>({...M,imageTesting:!0,imageModels:!0})),re({tested:!1,success:!1});try{const M={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[],imageConfig:{provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl?Wt.normalizeBaseURL(d.imageBaseUrl):void 0,model:d.imageModel,availableModels:[]}};if(d.imageProvider==="nano-gpt"){const U=await ba.testImageConnection(M);U.success?(re({tested:!0,success:!0}),y([])):re({tested:!0,success:!1,error:U.error})}else{let U=await ba.fetchAvailableImageModels(M);U.length===0&&(console.log("No image models found with filtering, fetching all models..."),U=await ba.fetchAllModelsForImageConfig(M)),y(U),re({tested:!0,success:!0}),!U.some(V=>V.id===d.imageModel)&&U.length>0&&f(V=>({...V,imageModel:U[0].id}))}}catch(M){const U=M instanceof ct?M.message:"Failed to connect to image API";re({tested:!0,success:!1,error:U}),y([])}finally{G(M=>({...M,imageTesting:!1,imageModels:!1}))}}},xe=async()=>{if(!(!d.enableImageConfig||!j.isValid)){G(M=>({...M,imageModels:!0}));try{const M={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[],imageConfig:{provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl?Wt.normalizeBaseURL(d.imageBaseUrl):void 0,model:d.imageModel,availableModels:[]}};if(d.imageProvider==="nano-gpt"){y([]);return}let U=await ba.fetchImageModelsWithRetry(M);U.length===0&&(console.log("No image models found with filtering in retry, fetching all models..."),U=await ba.fetchAllModelsForImageConfig(M)),y(U)}catch(M){console.error("Failed to fetch image models:",M)}finally{G(M=>({...M,imageModels:!1}))}}},q=async()=>{if(j.isValid){G(M=>({...M,saving:!0}));try{const M={apiKey:d.apiKey,baseUrl:d.baseUrl,model:d.model,enableImageGeneration:d.enableImageGeneration,samplerSettings:x?.samplerSettings};d.enableImageConfig&&(M.imageConfig={provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl||void 0,model:d.imageModel,availableModels:p.map(se=>se.id)});const U=ms.sanitizeConfig(M),V={apiKey:U.apiKey,baseUrl:U.baseUrl,model:U.model,availableModels:g.map(se=>se.id),enableImageGeneration:U.enableImageGeneration,imageConfig:U.imageConfig,samplerSettings:U.samplerSettings};i(V)}finally{G(M=>({...M,saving:!1}))}}};return s.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6 max-w-2xl mx-auto ${c}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"API Configuration"}),o&&s.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 text-2xl sm:text-xl font-bold flex-shrink-0 ml-2","aria-label":"Close settings",children:"×"})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"apiKey",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key *"}),s.jsx("input",{id:"apiKey",type:"password",value:d.apiKey,onChange:M=>ie("apiKey",M.target.value),placeholder:"sk-...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Your OpenAI-compatible API key. For local LLMs, use any 8+ character string like "12345678". This is stored locally and never sent to our servers.'})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"baseUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Base URL *"}),s.jsx("input",{id:"baseUrl",type:"url",value:d.baseUrl,onChange:M=>ie("baseUrl",M.target.value),placeholder:"https://api.openai.com/v1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The base URL for your OpenAI-compatible API endpoint. For local LLMs with CORS enabled use something like http://127.0.0.1:1234/v1"})]}),s.jsxs("div",{children:[s.jsx("button",{onClick:K,disabled:!j.isValid||z.testing,className:"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:z.testing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing Connection..."]}):"Test Connection & Fetch Models"}),B.tested&&s.jsx("div",{className:`mt-2 p-3 rounded-md ${B.success?"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:B.success?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"✓"}),"Connection successful! Found ",g.length," compatible models."]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-red-600 dark:text-red-400",children:"✗"}),"Connection failed"]}),B.error&&s.jsx("p",{className:"text-sm",children:B.error}),s.jsx("button",{onClick:K,className:"text-sm underline hover:no-underline mt-1",children:"Try again"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Model *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("select",{id:"model",value:d.model,onChange:M=>ie("model",M.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:g.length===0?s.jsx("option",{value:d.model,children:d.model}):g.map(M=>s.jsx("option",{value:M.id,children:M.name},M.id))}),g.length===0&&!z.models&&s.jsx("button",{onClick:Z,disabled:!j.isValid,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:"Fetch Models"})]}),z.models&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 dark:border-gray-400"}),"Loading available models..."]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:g.length===0?"Test connection first to load available models":`Choose from ${g.length} available text generation models`})]}),s.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("input",{id:"enableImageGeneration",type:"checkbox",checked:d.enableImageGeneration,onChange:M=>ie("enableImageGeneration",M.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"enableImageGeneration",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Enable Image Generation"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Generate AI images for each story scene. Disable this to play without images for faster story generation."})]}),d.enableImageGeneration&&s.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("input",{id:"enableImageConfig",type:"checkbox",checked:d.enableImageConfig,onChange:M=>ie("enableImageConfig",M.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"enableImageConfig",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Separate Image Generation Configuration"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Configure a separate API endpoint and model for image generation. If disabled, the main configuration will be used for both text and images."}),d.enableImageConfig&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"imageProvider",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Provider *"}),s.jsxs("select",{id:"imageProvider",value:d.imageProvider,onChange:M=>ie("imageProvider",M.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"openai",children:"OpenAI Compatible (DALL-E, etc.)"}),s.jsx("option",{value:"nano-gpt",children:"Nano-GPT"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the image generation service provider. Different providers use different API formats."})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"imageApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image API Key"}),s.jsx("input",{id:"imageApiKey",type:"password",value:d.imageApiKey,onChange:M=>ie("imageApiKey",M.target.value),placeholder:"Leave empty to use main API key",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Optional: Use a different API key for image generation. Leave empty to use the main API key."})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"imageBaseUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Base URL"}),s.jsx("input",{id:"imageBaseUrl",type:"url",value:d.imageBaseUrl,onChange:M=>ie("imageBaseUrl",M.target.value),placeholder:d.imageProvider==="nano-gpt"?"https://nano-gpt.com":"https://api.openai.com/v1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Optional: Use a different base URL for image generation. Leave empty to use the main base URL.",d.imageProvider==="nano-gpt"&&" For nano-gpt, use: https://nano-gpt.com"]})]}),s.jsxs("div",{children:[s.jsx("button",{onClick:Se,disabled:!j.isValid||z.imageTesting,className:"bg-purple-600 dark:bg-purple-500 text-white px-4 py-2 rounded-md hover:bg-purple-700 dark:hover:bg-purple-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:z.imageTesting?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing Image Connection..."]}):"Test Image Connection & Fetch Models"}),I.tested&&s.jsx("div",{className:`mt-2 p-3 rounded-md ${I.success?"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:I.success?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"✓"}),d.imageProvider==="nano-gpt"?"Image connection validated! Enter your model name manually below.":`Image connection successful! Found ${p.length} compatible image models.`]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-red-600 dark:text-red-400",children:"✗"}),"Image connection failed"]}),I.error&&s.jsx("p",{className:"text-sm",children:I.error}),s.jsx("button",{onClick:Se,className:"text-sm underline hover:no-underline mt-1",children:"Try again"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"imageModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Model *"}),d.imageProvider==="nano-gpt"?s.jsxs("div",{children:[s.jsx("input",{id:"imageModel",type:"text",value:d.imageModel,onChange:M=>ie("imageModel",M.target.value),placeholder:"Enter model name (e.g., flux-1.1-pro, stable-diffusion-xl)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter the exact model name as required by nano-gpt. Common models: flux-1.1-pro, stable-diffusion-xl, dall-e-3"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("select",{id:"imageModel",value:d.imageModel,onChange:M=>ie("imageModel",M.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:p.length===0?s.jsx("option",{value:d.imageModel,children:d.imageModel}):p.map(M=>s.jsx("option",{value:M.id,children:M.name},M.id))}),p.length===0&&!z.imageModels&&s.jsx("button",{onClick:xe,disabled:!j.isValid,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:"Fetch Models"})]}),z.imageModels&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 dark:border-gray-400"}),"Loading available image models..."]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:p.length===0?"Test image connection first to load available models":`Choose from ${p.length} available image generation models`})]})]})]})]}),(j.errors.length>0||j.warnings.length>0)&&s.jsxs("div",{className:"space-y-2",children:[j.errors.map((M,U)=>s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30 p-2 rounded",children:M},`error-${U}`)),j.warnings.map((M,U)=>s.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30 p-2 rounded",children:M},`warning-${U}`))]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-gray-700",children:[s.jsx("button",{onClick:q,disabled:!j.isValid||z.saving,className:"bg-green-600 dark:bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-700 dark:hover:bg-green-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:z.saving?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Configuration"}),o&&s.jsx("button",{onClick:o,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-2 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"})]})]})]})},Kg=({onGetStarted:x})=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 mb-8",children:s.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to AI Adventure"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Experience interactive storytelling powered by artificial intelligence"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 text-left",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:s.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Dynamic Stories"}),s.jsx("p",{className:"text-sm text-gray-600",children:"AI creates unique narratives based on your choices"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:s.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Visual Scenes"}),s.jsx("p",{className:"text-sm text-gray-600",children:"AI-generated images bring your adventure to life"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:s.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Your API Key"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Use your own OpenAI-compatible API for full control"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:s.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Auto-Save"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Your progress is automatically saved as you play"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center mb-3",children:[s.jsx("svg",{className:"h-6 w-6 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Quick Setup Required"})]}),s.jsx("p",{className:"text-blue-800 text-sm",children:"To get started, you'll need to configure your OpenAI-compatible API key. This allows the AI to generate your personalized adventure stories and images."}),s.jsxs("div",{className:"mt-4 text-xs text-blue-700",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Supported services:"})," OpenAI, Azure OpenAI, and other compatible APIs"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Privacy:"})," Your API key is stored securely on your device only"]})]})]}),s.jsxs("button",{onClick:x,className:"inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-lg shadow-sm text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-105",children:[s.jsx("svg",{className:"mr-3 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),"Get Started"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"By continuing, you agree to configure your own AI service credentials"})]})})}),Jf=R.createContext(void 0),Qg=({children:x})=>{const[i,o]=R.useState([]),c=R.useCallback(()=>`error-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,[]),d=R.useCallback((z,G,B,Y=!0)=>{const I={id:c(),message:z,type:G,timestamp:new Date,retryAction:B,dismissible:!0,autoHide:Y};return o(re=>[...re,I]),Y&&(G==="success"||G==="info"||G==="warning")&&setTimeout(()=>{o(re=>re.filter(ie=>ie.id!==I.id))},5e3),I.id},[c]),f=R.useCallback((z,G)=>d(z,"error",G,!1),[d]),g=R.useCallback(z=>d(z,"warning",void 0,!0),[d]),h=R.useCallback(z=>d(z,"info",void 0,!0),[d]),p=R.useCallback(z=>d(z,"success",void 0,!0),[d]),y=R.useCallback(z=>{o(G=>G.filter(B=>B.id!==z))},[]),j=R.useCallback(()=>{o([])},[]),T={errors:i,showError:f,showWarning:g,showInfo:h,showSuccess:p,dismissError:y,clearAllErrors:j};return s.jsx(Jf.Provider,{value:T,children:x})},$f=()=>{const x=R.useContext(Jf);if(!x)throw new Error("useError must be used within an ErrorProvider");return x},Wf=R.createContext(void 0),Ig=({children:x})=>{const[i,o]=R.useState(()=>localStorage.getItem("theme")||"light");R.useEffect(()=>{const f=window.document.documentElement;f.classList.remove("light","dark"),f.classList.add(i),localStorage.setItem("theme",i)},[i]);const c=()=>{o(f=>f==="light"?"dark":"light")},d=f=>{o(f)};return s.jsx(Wf.Provider,{value:{theme:i,toggleTheme:c,setTheme:d},children:x})},Zg=()=>{const x=R.useContext(Wf);if(!x)throw new Error("useTheme must be used within ThemeProvider");return x},Jg=()=>{const{errors:x,dismissError:i}=$f();if(x.length===0)return null;const o=f=>{switch(f){case"error":return s.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})});case"warning":return s.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})});case"success":return s.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"info":return s.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},c=f=>{switch(f){case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800"}},d=f=>{switch(f){case"error":return"text-red-600 hover:text-red-800 hover:bg-red-100";case"warning":return"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-100";case"success":return"text-green-600 hover:text-green-800 hover:bg-green-100";case"info":return"text-blue-600 hover:text-blue-800 hover:bg-blue-100"}};return s.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:x.map(f=>s.jsx("div",{className:`rounded-lg border p-4 shadow-lg transition-all duration-300 ${c(f.type)}`,children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:o(f.type)}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:f.message}),f.timestamp&&s.jsx("p",{className:"text-xs opacity-75 mt-1",children:f.timestamp.toLocaleTimeString()})]}),s.jsxs("div",{className:"ml-4 flex-shrink-0 flex space-x-1",children:[f.retryAction&&s.jsxs("button",{onClick:()=>{f.retryAction(),i(f.id)},className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded transition-colors ${d(f.type)}`,title:"Retry operation",children:[s.jsx("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]}),f.dismissible&&s.jsx("button",{onClick:()=>i(f.id),className:`inline-flex items-center p-1 text-xs rounded transition-colors ${d(f.type)}`,title:"Dismiss notification",children:s.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},f.id))})},$g=({message:x="Loading...",size:i="medium",inline:o=!1,className:c=""})=>{const d=()=>{switch(i){case"small":return"h-4 w-4";case"medium":return"h-6 w-6";case"large":return"h-8 w-8"}},f=()=>{switch(i){case"small":return"text-xs";case"medium":return"text-sm";case"large":return"text-base"}};return o?s.jsxs("div",{className:`inline-flex items-center space-x-2 ${c}`,children:[s.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${d()}`}),x&&s.jsx("span",{className:`text-gray-600 ${f()}`,children:x})]}):s.jsxs("div",{className:`flex flex-col items-center justify-center space-y-3 ${c}`,children:[s.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${d()}`}),x&&s.jsx("p",{className:`text-gray-600 ${f()} text-center`,children:x})]})},Wg=()=>{const{theme:x,toggleTheme:i}=Zg();return s.jsx("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors","aria-label":`Switch to ${x==="light"?"dark":"light"} mode`,title:`Switch to ${x==="light"?"dark":"light"} mode`,children:x==="light"?s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};class Fg extends Ng.Component{constructor(i){super(i),this.state={hasError:!1}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,o){console.error("Error caught by boundary:",i,o),this.props.onError?.(i,o)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page to try again."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const Pg=()=>s.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:s.jsx($g,{message:"Loading your adventure...",size:"large"})}),eh=()=>{const[x,i]=R.useState("welcome"),[o,c]=R.useState(null),[d,f]=R.useState(null),[g,h]=R.useState(!0),[p,y]=R.useState(!1),[j,T]=R.useState(0),[z,G]=R.useState(!1),{showError:B,showSuccess:Y,showWarning:I,clearAllErrors:re}=$f(),ie=R.useCallback(async()=>{try{h(!0),re();const L=va.loadConfig(),X=Mt.getGameCount()>0;if(L){const de=ms.validateConfig(L);de.isValid?(c(L),i("launcher"),y(!1),de.warnings.length>0&&de.warnings.forEach(v=>I(v))):(console.warn("Invalid existing config found:",de.errors),I("Your saved configuration is invalid and needs to be updated."),y(!0),i("welcome"))}else X?(i("settings"),y(!1),I("Please configure your AI settings to continue playing.")):(y(!0),i("welcome"));const le=Mt.validateAndRepairStorage();le.isValid||(console.warn("Storage validation issues:",le.errors),le.repairedCount>0&&I(`Repaired ${le.repairedCount} corrupted saved game(s).`),le.errors.forEach(de=>{de.includes("Repaired")||B(de,()=>ie())}))}catch(L){const X=L instanceof Error?L.message:"Failed to initialize application";B(X,()=>ie()),console.error("App initialization error:",L)}finally{h(!1)}},[B,I,re]);R.useEffect(()=>{ie()},[ie]);const K=L=>{try{const X=ms.validateConfig(L);if(!X.isValid){B(`Configuration validation failed: ${X.errors.join(", ")}`);return}va.saveConfig(L),c(L),i("launcher"),y(!1),Y("AI configuration saved successfully!"),X.warnings.length>0&&X.warnings.forEach(le=>I(le))}catch(X){const le=X instanceof Error?X.message:"Failed to save configuration";B(le,()=>K(L)),console.error("Config save error:",X)}},Z=()=>{i("settings")},[Se,xe]=R.useState("standard"),[q,M]=R.useState(void 0),[U,V]=R.useState(!1),se=(L="standard",X)=>{f(null),xe(L),M(X),V(!1),G(!1);const le=va.loadConfig();le&&c(le),i("game")},ae=L=>{f(L),V(!1),G(!1);const X=va.loadConfig();X&&c(X),i("game")},qe=()=>{const L=va.loadConfig();L&&c(L),i("settings")},F=()=>{f(null);const L=va.loadConfig();L&&c(L),x==="game"||x==="settings"?(V(!1),G(!0),i("launcher")):(V(!1),G(!1),i("launcher"),T(X=>X+1))},ve=()=>{f(null);const L=va.loadConfig();L&&c(L),V(!0),G(!1),i("launcher")},E=(L,X)=>{console.error("Global error boundary triggered:",L,X),B(`Application error: ${L.message}`,()=>window.location.reload())};return g?s.jsx(Pg,{}):s.jsx(Fg,{onError:E,children:s.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col",children:[x!=="welcome"&&s.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[s.jsx("div",{className:"flex items-center min-w-0",children:s.jsxs("button",{onClick:F,className:"flex items-center space-x-2 text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[s.jsx("div",{className:"flex items-center justify-center h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-blue-100 dark:bg-blue-900 flex-shrink-0",children:s.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),s.jsx("h1",{className:"text-base sm:text-xl font-bold truncate",children:"AI Adventure"})]})}),s.jsxs("nav",{className:"flex items-center space-x-1 sm:space-x-4",children:[s.jsx(Wg,{}),x!=="launcher"&&s.jsxs("button",{onClick:F,className:"inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsxs("svg",{className:"sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Games"})]}),s.jsxs("button",{onClick:qe,className:`inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${x==="settings"?"border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900 hover:bg-blue-100 dark:hover:bg-blue-800":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[s.jsxs("svg",{className:"sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]})})}),s.jsxs("main",{className:`flex-1 ${x==="welcome"?"":"py-3 sm:py-6"}`,children:[x==="welcome"&&s.jsx(Kg,{onGetStarted:Z}),x==="settings"&&s.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-8",children:s.jsx(Xg,{config:o,onConfigSave:K,onClose:p?void 0:()=>i("launcher")})}),x==="launcher"&&s.jsx(Vg,{aiConfig:o,onConfigurationNeeded:qe,onStartNewGame:se,onResumeGame:ae,startWithModeSelection:U,startWithSavedGames:z},j),x==="game"&&s.jsx(Gg,{aiConfig:o,onConfigurationNeeded:qe,onBackToLauncher:F,onNewGame:ve,gameToResume:d,gameMode:Se,customScene:q})]}),x!=="welcome"&&s.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:s.jsx("div",{className:"max-w-7xl mx-auto py-3 sm:py-4 px-2 sm:px-4 lg:px-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[s.jsx("p",{className:"text-center sm:text-left",children:"AI-powered CYOA"}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[o&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300",children:[s.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),"Connected"]}),s.jsxs("span",{className:"truncate max-w-[150px] sm:max-w-none",children:["Model: ",o?.model||"Not configured"]})]})]})})}),s.jsx(Jg,{})]})})};function th(){return s.jsx(Ig,{children:s.jsx(Qg,{children:s.jsx(eh,{})})})}Rg.createRoot(document.getElementById("root")).render(s.jsx(R.StrictMode,{children:s.jsx(th,{})}));
