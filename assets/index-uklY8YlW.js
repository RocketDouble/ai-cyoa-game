(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function o(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(d){if(d.ep)return;d.ep=!0;const f=o(d);fetch(d.href,f)}})();function Tg(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var Go={exports:{}},nr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function Cg(){if(Kf)return nr;Kf=1;var x=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(c,d,f){var h=null;if(f!==void 0&&(h=""+f),d.key!==void 0&&(h=""+d.key),"key"in d){f={};for(var g in d)g!=="key"&&(f[g]=d[g])}else f=d;return d=f.ref,{$$typeof:x,type:c,key:h,ref:d!==void 0?d:null,props:f}}return nr.Fragment=i,nr.jsx=o,nr.jsxs=o,nr}var If;function Eg(){return If||(If=1,Go.exports=Cg()),Go.exports}var r=Eg(),Bo={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf;function Ag(){if(Qf)return ge;Qf=1;var x=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function D(S){return S===null||typeof S!="object"?null:(S=E&&S[E]||S["@@iterator"],typeof S=="function"?S:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,K={};function ae(S,z,Q){this.props=S,this.context=z,this.refs=K,this.updater=Q||Y}ae.prototype.isReactComponent={},ae.prototype.setState=function(S,z){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,z,"setState")},ae.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function P(){}P.prototype=ae.prototype;function V(S,z,Q){this.props=S,this.context=z,this.refs=K,this.updater=Q||Y}var Z=V.prototype=new P;Z.constructor=V,q(Z,ae.prototype),Z.isPureReactComponent=!0;var ke=Array.isArray;function he(){}var X={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function H(S,z,Q){var ee=Q.ref;return{$$typeof:x,type:S,key:z,ref:ee!==void 0?ee:null,props:Q}}function B(S,z){return H(S.type,z,S.props)}function ie(S){return typeof S=="object"&&S!==null&&S.$$typeof===x}function re(S){var z={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(Q){return z[Q]})}var Ye=/\/+/g;function $(S,z){return typeof S=="object"&&S!==null&&S.key!=null?re(""+S.key):z.toString(36)}function de(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(he,he):(S.status="pending",S.then(function(z){S.status==="pending"&&(S.status="fulfilled",S.value=z)},function(z){S.status==="pending"&&(S.status="rejected",S.reason=z)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function C(S,z,Q,ee,fe){var xe=typeof S;(xe==="undefined"||xe==="boolean")&&(S=null);var Se=!1;if(S===null)Se=!0;else switch(xe){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(S.$$typeof){case x:case i:Se=!0;break;case v:return Se=S._init,C(Se(S._payload),z,Q,ee,fe)}}if(Se)return fe=fe(S),Se=ee===""?"."+$(S,0):ee,ke(fe)?(Q="",Se!=null&&(Q=Se.replace(Ye,"$&/")+"/"),C(fe,z,Q,"",function(Rt){return Rt})):fe!=null&&(ie(fe)&&(fe=B(fe,Q+(fe.key==null||S&&S.key===fe.key?"":(""+fe.key).replace(Ye,"$&/")+"/")+Se)),z.push(fe)),1;Se=0;var De=ee===""?".":ee+":";if(ke(S))for(var Ke=0;Ke<S.length;Ke++)ee=S[Ke],xe=De+$(ee,Ke),Se+=C(ee,z,Q,xe,fe);else if(Ke=D(S),typeof Ke=="function")for(S=Ke.call(S),Ke=0;!(ee=S.next()).done;)ee=ee.value,xe=De+$(ee,Ke++),Se+=C(ee,z,Q,xe,fe);else if(xe==="object"){if(typeof S.then=="function")return C(de(S),z,Q,ee,fe);throw z=String(S),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Se}function L(S,z,Q){if(S==null)return S;var ee=[],fe=0;return C(S,ee,"","",function(xe){return z.call(Q,xe,fe++)}),ee}function I(S){if(S._status===-1){var z=S._result;z=z(),z.then(function(Q){(S._status===0||S._status===-1)&&(S._status=1,S._result=Q)},function(Q){(S._status===0||S._status===-1)&&(S._status=2,S._result=Q)}),S._status===-1&&(S._status=0,S._result=z)}if(S._status===1)return S._result.default;throw S._result}var se=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},ye={map:L,forEach:function(S,z,Q){L(S,function(){z.apply(this,arguments)},Q)},count:function(S){var z=0;return L(S,function(){z++}),z},toArray:function(S){return L(S,function(z){return z})||[]},only:function(S){if(!ie(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return ge.Activity=w,ge.Children=ye,ge.Component=ae,ge.Fragment=o,ge.Profiler=d,ge.PureComponent=V,ge.StrictMode=c,ge.Suspense=p,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,ge.__COMPILER_RUNTIME={__proto__:null,c:function(S){return X.H.useMemoCache(S)}},ge.cache=function(S){return function(){return S.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(S,z,Q){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var ee=q({},S.props),fe=S.key;if(z!=null)for(xe in z.key!==void 0&&(fe=""+z.key),z)!O.call(z,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&z.ref===void 0||(ee[xe]=z[xe]);var xe=arguments.length-2;if(xe===1)ee.children=Q;else if(1<xe){for(var Se=Array(xe),De=0;De<xe;De++)Se[De]=arguments[De+2];ee.children=Se}return H(S.type,fe,ee)},ge.createContext=function(S){return S={$$typeof:h,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:f,_context:S},S},ge.createElement=function(S,z,Q){var ee,fe={},xe=null;if(z!=null)for(ee in z.key!==void 0&&(xe=""+z.key),z)O.call(z,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=z[ee]);var Se=arguments.length-2;if(Se===1)fe.children=Q;else if(1<Se){for(var De=Array(Se),Ke=0;Ke<Se;Ke++)De[Ke]=arguments[Ke+2];fe.children=De}if(S&&S.defaultProps)for(ee in Se=S.defaultProps,Se)fe[ee]===void 0&&(fe[ee]=Se[ee]);return H(S,xe,fe)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(S){return{$$typeof:g,render:S}},ge.isValidElement=ie,ge.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:I}},ge.memo=function(S,z){return{$$typeof:y,type:S,compare:z===void 0?null:z}},ge.startTransition=function(S){var z=X.T,Q={};X.T=Q;try{var ee=S(),fe=X.S;fe!==null&&fe(Q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(he,se)}catch(xe){se(xe)}finally{z!==null&&Q.types!==null&&(z.types=Q.types),X.T=z}},ge.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},ge.use=function(S){return X.H.use(S)},ge.useActionState=function(S,z,Q){return X.H.useActionState(S,z,Q)},ge.useCallback=function(S,z){return X.H.useCallback(S,z)},ge.useContext=function(S){return X.H.useContext(S)},ge.useDebugValue=function(){},ge.useDeferredValue=function(S,z){return X.H.useDeferredValue(S,z)},ge.useEffect=function(S,z){return X.H.useEffect(S,z)},ge.useEffectEvent=function(S){return X.H.useEffectEvent(S)},ge.useId=function(){return X.H.useId()},ge.useImperativeHandle=function(S,z,Q){return X.H.useImperativeHandle(S,z,Q)},ge.useInsertionEffect=function(S,z){return X.H.useInsertionEffect(S,z)},ge.useLayoutEffect=function(S,z){return X.H.useLayoutEffect(S,z)},ge.useMemo=function(S,z){return X.H.useMemo(S,z)},ge.useOptimistic=function(S,z){return X.H.useOptimistic(S,z)},ge.useReducer=function(S,z,Q){return X.H.useReducer(S,z,Q)},ge.useRef=function(S){return X.H.useRef(S)},ge.useState=function(S){return X.H.useState(S)},ge.useSyncExternalStore=function(S,z,Q){return X.H.useSyncExternalStore(S,z,Q)},ge.useTransition=function(){return X.H.useTransition()},ge.version="19.2.0",ge}var Zf;function Qo(){return Zf||(Zf=1,Bo.exports=Ag()),Bo.exports}var M=Qo();const Mg=Tg(M);var Yo={exports:{}},lr={},qo={exports:{}},Vo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function Rg(){return $f||($f=1,(function(x){function i(C,L){var I=C.length;C.push(L);e:for(;0<I;){var se=I-1>>>1,ye=C[se];if(0<d(ye,L))C[se]=L,C[I]=ye,I=se;else break e}}function o(C){return C.length===0?null:C[0]}function c(C){if(C.length===0)return null;var L=C[0],I=C.pop();if(I!==L){C[0]=I;e:for(var se=0,ye=C.length,S=ye>>>1;se<S;){var z=2*(se+1)-1,Q=C[z],ee=z+1,fe=C[ee];if(0>d(Q,I))ee<ye&&0>d(fe,Q)?(C[se]=fe,C[ee]=I,se=ee):(C[se]=Q,C[z]=I,se=z);else if(ee<ye&&0>d(fe,I))C[se]=fe,C[ee]=I,se=ee;else break e}}return L}function d(C,L){var I=C.sortIndex-L.sortIndex;return I!==0?I:C.id-L.id}if(x.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;x.unstable_now=function(){return f.now()}}else{var h=Date,g=h.now();x.unstable_now=function(){return h.now()-g}}var p=[],y=[],v=1,w=null,E=3,D=!1,Y=!1,q=!1,K=!1,ae=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function Z(C){for(var L=o(y);L!==null;){if(L.callback===null)c(y);else if(L.startTime<=C)c(y),L.sortIndex=L.expirationTime,i(p,L);else break;L=o(y)}}function ke(C){if(q=!1,Z(C),!Y)if(o(p)!==null)Y=!0,he||(he=!0,re());else{var L=o(y);L!==null&&de(ke,L.startTime-C)}}var he=!1,X=-1,O=5,H=-1;function B(){return K?!0:!(x.unstable_now()-H<O)}function ie(){if(K=!1,he){var C=x.unstable_now();H=C;var L=!0;try{e:{Y=!1,q&&(q=!1,P(X),X=-1),D=!0;var I=E;try{t:{for(Z(C),w=o(p);w!==null&&!(w.expirationTime>C&&B());){var se=w.callback;if(typeof se=="function"){w.callback=null,E=w.priorityLevel;var ye=se(w.expirationTime<=C);if(C=x.unstable_now(),typeof ye=="function"){w.callback=ye,Z(C),L=!0;break t}w===o(p)&&c(p),Z(C)}else c(p);w=o(p)}if(w!==null)L=!0;else{var S=o(y);S!==null&&de(ke,S.startTime-C),L=!1}}break e}finally{w=null,E=I,D=!1}L=void 0}}finally{L?re():he=!1}}}var re;if(typeof V=="function")re=function(){V(ie)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,$=Ye.port2;Ye.port1.onmessage=ie,re=function(){$.postMessage(null)}}else re=function(){ae(ie,0)};function de(C,L){X=ae(function(){C(x.unstable_now())},L)}x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(C){C.callback=null},x.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<C?Math.floor(1e3/C):5},x.unstable_getCurrentPriorityLevel=function(){return E},x.unstable_next=function(C){switch(E){case 1:case 2:case 3:var L=3;break;default:L=E}var I=E;E=L;try{return C()}finally{E=I}},x.unstable_requestPaint=function(){K=!0},x.unstable_runWithPriority=function(C,L){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var I=E;E=C;try{return L()}finally{E=I}},x.unstable_scheduleCallback=function(C,L,I){var se=x.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?se+I:se):I=se,C){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=I+ye,C={id:v++,callback:L,priorityLevel:C,startTime:I,expirationTime:ye,sortIndex:-1},I>se?(C.sortIndex=I,i(y,C),o(p)===null&&C===o(y)&&(q?(P(X),X=-1):q=!0,de(ke,I-se))):(C.sortIndex=ye,i(p,C),Y||D||(Y=!0,he||(he=!0,re()))),C},x.unstable_shouldYield=B,x.unstable_wrapCallback=function(C){var L=E;return function(){var I=E;E=L;try{return C.apply(this,arguments)}finally{E=I}}}})(Vo)),Vo}var Jf;function Og(){return Jf||(Jf=1,qo.exports=Rg()),qo.exports}var Xo={exports:{}},ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function zg(){if(Ff)return ct;Ff=1;var x=Qo();function i(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var c={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(p,y,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:p,containerInfo:y,implementation:v}}var h=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,ct.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(i(299));return f(p,y,null,v)},ct.flushSync=function(p){var y=h.T,v=c.p;try{if(h.T=null,c.p=2,p)return p()}finally{h.T=y,c.p=v,c.d.f()}},ct.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,c.d.C(p,y))},ct.prefetchDNS=function(p){typeof p=="string"&&c.d.D(p)},ct.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,w=g(v,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?c.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:D}):v==="script"&&c.d.X(p,{crossOrigin:w,integrity:E,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},ct.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=g(y.as,y.crossOrigin);c.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&c.d.M(p)},ct.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,w=g(v,y.crossOrigin);c.d.L(p,v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},ct.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=g(y.as,y.crossOrigin);c.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else c.d.m(p)},ct.requestFormReset=function(p){c.d.r(p)},ct.unstable_batchedUpdates=function(p,y){return p(y)},ct.useFormState=function(p,y,v){return h.H.useFormState(p,y,v)},ct.useFormStatus=function(){return h.H.useHostTransitionStatus()},ct.version="19.2.0",ct}var Wf;function _g(){if(Wf)return Xo.exports;Wf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(i){console.error(i)}}return x(),Xo.exports=zg(),Xo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf;function Ug(){if(Pf)return lr;Pf=1;var x=Og(),i=Qo(),o=_g();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,n=t;;){var l=a.return;if(l===null)break;var s=l.alternate;if(s===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===a)return p(l),e;if(s===n)return p(l),t;s=s.sibling}throw Error(c(188))}if(a.return!==n.return)a=l,n=s;else{for(var u=!1,m=l.child;m;){if(m===a){u=!0,a=l,n=s;break}if(m===n){u=!0,n=l,a=s;break}m=m.sibling}if(!u){for(m=s.child;m;){if(m===a){u=!0,a=s,n=l;break}if(m===n){u=!0,n=s,a=l;break}m=m.sibling}if(!u)throw Error(c(189))}}if(a.alternate!==n)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),V=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=ie&&e[ie]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Symbol.for("react.client.reference");function $(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case ae:return"Profiler";case K:return"StrictMode";case ke:return"Suspense";case he:return"SuspenseList";case H:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Y:return"Portal";case V:return e.displayName||"Context";case P:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return t=e.displayName||null,t!==null?t:$(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return $(e(t))}catch{}}return null}var de=Array.isArray,C=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},se=[],ye=-1;function S(e){return{current:e}}function z(e){0>ye||(e.current=se[ye],se[ye]=null,ye--)}function Q(e,t){ye++,se[ye]=e.current,e.current=t}var ee=S(null),fe=S(null),xe=S(null),Se=S(null);function De(e,t){switch(Q(xe,t),Q(fe,e),Q(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gf(t),e=hf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(ee),Q(ee,e)}function Ke(){z(ee),z(fe),z(xe)}function Rt(e){e.memoizedState!==null&&Q(Se,e);var t=ee.current,a=hf(t,e.type);t!==a&&(Q(fe,e),Q(ee,a))}function Qt(e){fe.current===e&&(z(ee),z(fe)),Se.current===e&&(z(Se),Pl._currentValue=I)}var wa,vn;function ta(e){if(wa===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);wa=t&&t[1]||"",vn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wa+e+vn}var rl=!1;function sl(e,t){if(!e||rl)return"";rl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(R){var A=R}Reflect.construct(e,[],G)}else{try{G.call()}catch(R){A=R}e.call(G.prototype)}}else{try{throw Error()}catch(R){A=R}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(R){if(R&&A&&typeof R.stack=="string")return[R.stack,A.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),u=s[0],m=s[1];if(u&&m){var b=u.split(`
`),T=m.split(`
`);for(l=n=0;n<b.length&&!b[n].includes("DetermineComponentFrameRoot");)n++;for(;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;if(n===b.length||l===T.length)for(n=b.length-1,l=T.length-1;1<=n&&0<=l&&b[n]!==T[l];)l--;for(;1<=n&&0<=l;n--,l--)if(b[n]!==T[l]){if(n!==1||l!==1)do if(n--,l--,0>l||b[n]!==T[l]){var _=`
`+b[n].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=n&&0<=l);break}}}finally{rl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ta(a):""}function Na(e,t){switch(e.tag){case 26:case 27:case 5:return ta(e.type);case 16:return ta("Lazy");case 13:return e.child!==t&&t!==null?ta("Suspense Fallback"):ta("Suspense");case 19:return ta("SuspenseList");case 0:case 15:return sl(e.type,!1);case 11:return sl(e.type.render,!1);case 1:return sl(e.type,!0);case 31:return ta("Activity");default:return""}}function il(e){try{var t="",a=null;do t+=Na(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var ol=Object.prototype.hasOwnProperty,cl=x.unstable_scheduleCallback,ul=x.unstable_cancelCallback,J=x.unstable_shouldYield,F=x.unstable_requestPaint,W=x.unstable_now,ve=x.unstable_getCurrentPriorityLevel,oe=x.unstable_ImmediatePriority,me=x.unstable_UserBlockingPriority,ze=x.unstable_NormalPriority,Ie=x.unstable_LowPriority,Ot=x.unstable_IdlePriority,dt=x.log,cm=x.unstable_setDisableYieldValue,dl=null,vt=null;function Ta(e){if(typeof dt=="function"&&cm(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(dl,e)}catch{}}var St=Math.clz32?Math.clz32:fm,um=Math.log,dm=Math.LN2;function fm(e){return e>>>=0,e===0?32:31-(um(e)/dm|0)|0}var ir=256,or=262144,cr=4194304;function tn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ur(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var l=0,s=e.suspendedLanes,u=e.pingedLanes;e=e.warmLanes;var m=n&134217727;return m!==0?(n=m&~s,n!==0?l=tn(n):(u&=m,u!==0?l=tn(u):a||(a=m&~e,a!==0&&(l=tn(a))))):(m=n&~s,m!==0?l=tn(m):u!==0?l=tn(u):a||(a=n&~e,a!==0&&(l=tn(a)))),l===0?0:t!==0&&t!==l&&(t&s)===0&&(s=l&-l,a=t&-t,s>=a||s===32&&(a&4194048)!==0)?t:l}function fl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function mm(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zo(){var e=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),e}function Ts(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ml(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gm(e,t,a,n,l,s){var u=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,b=e.expirationTimes,T=e.hiddenUpdates;for(a=u&~a;0<a;){var _=31-St(a),G=1<<_;m[_]=0,b[_]=-1;var A=T[_];if(A!==null)for(T[_]=null,_=0;_<A.length;_++){var R=A[_];R!==null&&(R.lane&=-536870913)}a&=~G}n!==0&&$o(e,n,0),s!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=s&~(u&~t))}function $o(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-St(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function Jo(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-St(a),l=1<<n;l&t|e[n]&t&&(e[n]|=t),a&=~l}}function Fo(e,t){var a=t&-t;return a=(a&42)!==0?1:Cs(a),(a&(e.suspendedLanes|t))!==0?0:a}function Cs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Es(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wo(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:Lf(e.type))}function Po(e,t){var a=L.p;try{return L.p=e,t()}finally{L.p=a}}var Ca=Math.random().toString(36).slice(2),lt="__reactFiber$"+Ca,mt="__reactProps$"+Ca,Sn="__reactContainer$"+Ca,As="__reactEvents$"+Ca,hm="__reactListeners$"+Ca,ym="__reactHandles$"+Ca,ec="__reactResources$"+Ca,gl="__reactMarker$"+Ca;function Ms(e){delete e[lt],delete e[mt],delete e[As],delete e[hm],delete e[ym]}function kn(e){var t=e[lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Sn]||a[lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=kf(e);e!==null;){if(a=e[lt])return a;e=kf(e)}return t}e=a,a=e.parentNode}return null}function jn(e){if(e=e[lt]||e[Sn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function hl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function wn(e){var t=e[ec];return t||(t=e[ec]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function at(e){e[gl]=!0}var tc=new Set,ac={};function an(e,t){Nn(e,t),Nn(e+"Capture",t)}function Nn(e,t){for(ac[e]=t,e=0;e<t.length;e++)tc.add(t[e])}var xm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nc={},lc={};function pm(e){return ol.call(lc,e)?!0:ol.call(nc,e)?!1:xm.test(e)?lc[e]=!0:(nc[e]=!0,!1)}function dr(e,t,a){if(pm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function fr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function aa(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bm(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(u){a=""+u,s.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(u){a=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rs(e){if(!e._valueTracker){var t=rc(e)?"checked":"value";e._valueTracker=bm(e,t,""+e[t])}}function sc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=rc(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function mr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vm=/[\n"\\]/g;function _t(e){return e.replace(vm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Os(e,t,a,n,l,s,u,m){e.name="",u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.type=u:e.removeAttribute("type"),t!=null?u==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+zt(t)):e.value!==""+zt(t)&&(e.value=""+zt(t)):u!=="submit"&&u!=="reset"||e.removeAttribute("value"),t!=null?zs(e,u,zt(t)):a!=null?zs(e,u,zt(a)):n!=null&&e.removeAttribute("value"),l==null&&s!=null&&(e.defaultChecked=!!s),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+zt(m):e.removeAttribute("name")}function ic(e,t,a,n,l,s,u,m){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||a!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Rs(e);return}a=a!=null?""+zt(a):"",t=t!=null?""+zt(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=m?e.checked:!!n,e.defaultChecked=!!n,u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.name=u),Rs(e)}function zs(e,t,a){t==="number"&&mr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Tn(e,t,a,n){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&n&&(e[a].defaultSelected=!0)}else{for(a=""+zt(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function oc(e,t,a){if(t!=null&&(t=""+zt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+zt(a):""}function cc(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(c(92));if(de(n)){if(1<n.length)throw Error(c(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=zt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Rs(e)}function Cn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Sm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uc(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Sm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function dc(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in t)n=t[l],t.hasOwnProperty(l)&&a[l]!==n&&uc(e,l,n)}else for(var s in t)t.hasOwnProperty(s)&&uc(e,s,t[s])}function _s(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var km=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(e){return jm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function na(){}var Us=null;function Ds(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var En=null,An=null;function fc(e){var t=jn(e);if(t&&(e=t.stateNode)){var a=e[mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Os(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_t(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var l=n[mt]||null;if(!l)throw Error(c(90));Os(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&sc(n)}break e;case"textarea":oc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Tn(e,!!a.multiple,t,!1)}}}var Hs=!1;function mc(e,t,a){if(Hs)return e(t,a);Hs=!0;try{var n=e(t);return n}finally{if(Hs=!1,(En!==null||An!==null)&&(ts(),En&&(t=En,e=An,An=En=null,fc(t),e)))for(t=0;t<e.length;t++)fc(e[t])}}function yl(e,t){var a=e.stateNode;if(a===null)return null;var n=a[mt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ls=!1;if(la)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{Ls=!1}var Ea=null,Gs=null,hr=null;function gc(){if(hr)return hr;var e,t=Gs,a=t.length,n,l="value"in Ea?Ea.value:Ea.textContent,s=l.length;for(e=0;e<a&&t[e]===l[e];e++);var u=a-e;for(n=1;n<=u&&t[a-n]===l[s-n];n++);return hr=l.slice(e,1<n?1-n:void 0)}function yr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xr(){return!0}function hc(){return!1}function gt(e){function t(a,n,l,s,u){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=s,this.target=u,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(s):s[m]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xr:hc,this.isPropagationStopped=hc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),t}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=gt(nn),pl=w({},nn,{view:0,detail:0}),wm=gt(pl),Bs,Ys,bl,br=w({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bl&&(bl&&e.type==="mousemove"?(Bs=e.screenX-bl.screenX,Ys=e.screenY-bl.screenY):Ys=Bs=0,bl=e),Bs)},movementY:function(e){return"movementY"in e?e.movementY:Ys}}),yc=gt(br),Nm=w({},br,{dataTransfer:0}),Tm=gt(Nm),Cm=w({},pl,{relatedTarget:0}),qs=gt(Cm),Em=w({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Am=gt(Em),Mm=w({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rm=gt(Mm),Om=w({},nn,{data:0}),xc=gt(Om),zm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Um={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Um[e])?!!t[e]:!1}function Vs(){return Dm}var Hm=w({},pl,{key:function(e){if(e.key){var t=zm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(e){return e.type==="keypress"?yr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lm=gt(Hm),Gm=w({},br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pc=gt(Gm),Bm=w({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),Ym=gt(Bm),qm=w({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vm=gt(qm),Xm=w({},br,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Km=gt(Xm),Im=w({},nn,{newState:0,oldState:0}),Qm=gt(Im),Zm=[9,13,27,32],Xs=la&&"CompositionEvent"in window,vl=null;la&&"documentMode"in document&&(vl=document.documentMode);var $m=la&&"TextEvent"in window&&!vl,bc=la&&(!Xs||vl&&8<vl&&11>=vl),vc=" ",Sc=!1;function kc(e,t){switch(e){case"keyup":return Zm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mn=!1;function Jm(e,t){switch(e){case"compositionend":return jc(t);case"keypress":return t.which!==32?null:(Sc=!0,vc);case"textInput":return e=t.data,e===vc&&Sc?null:e;default:return null}}function Fm(e,t){if(Mn)return e==="compositionend"||!Xs&&kc(e,t)?(e=gc(),hr=Gs=Ea=null,Mn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bc&&t.locale!=="ko"?null:t.data;default:return null}}var Wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wm[e.type]:t==="textarea"}function Nc(e,t,a,n){En?An?An.push(n):An=[n]:En=n,t=os(t,"onChange"),0<t.length&&(a=new pr("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Sl=null,kl=null;function Pm(e){of(e,0)}function vr(e){var t=hl(e);if(sc(t))return e}function Tc(e,t){if(e==="change")return t}var Cc=!1;if(la){var Ks;if(la){var Is="oninput"in document;if(!Is){var Ec=document.createElement("div");Ec.setAttribute("oninput","return;"),Is=typeof Ec.oninput=="function"}Ks=Is}else Ks=!1;Cc=Ks&&(!document.documentMode||9<document.documentMode)}function Ac(){Sl&&(Sl.detachEvent("onpropertychange",Mc),kl=Sl=null)}function Mc(e){if(e.propertyName==="value"&&vr(kl)){var t=[];Nc(t,kl,e,Ds(e)),mc(Pm,t)}}function e0(e,t,a){e==="focusin"?(Ac(),Sl=t,kl=a,Sl.attachEvent("onpropertychange",Mc)):e==="focusout"&&Ac()}function t0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vr(kl)}function a0(e,t){if(e==="click")return vr(t)}function n0(e,t){if(e==="input"||e==="change")return vr(t)}function l0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:l0;function jl(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!ol.call(t,l)||!kt(e[l],t[l]))return!1}return!0}function Rc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oc(e,t){var a=Rc(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rc(a)}}function zc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _c(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=mr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=mr(e.document)}return t}function Qs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var r0=la&&"documentMode"in document&&11>=document.documentMode,Rn=null,Zs=null,wl=null,$s=!1;function Uc(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$s||Rn==null||Rn!==mr(n)||(n=Rn,"selectionStart"in n&&Qs(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),wl&&jl(wl,n)||(wl=n,n=os(Zs,"onSelect"),0<n.length&&(t=new pr("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=Rn)))}function ln(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var On={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},Js={},Dc={};la&&(Dc=document.createElement("div").style,"AnimationEvent"in window||(delete On.animationend.animation,delete On.animationiteration.animation,delete On.animationstart.animation),"TransitionEvent"in window||delete On.transitionend.transition);function rn(e){if(Js[e])return Js[e];if(!On[e])return e;var t=On[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Dc)return Js[e]=t[a];return e}var Hc=rn("animationend"),Lc=rn("animationiteration"),Gc=rn("animationstart"),s0=rn("transitionrun"),i0=rn("transitionstart"),o0=rn("transitioncancel"),Bc=rn("transitionend"),Yc=new Map,Fs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fs.push("scrollEnd");function Vt(e,t){Yc.set(e,t),an(t,[e])}var Sr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ut=[],zn=0,Ws=0;function kr(){for(var e=zn,t=Ws=zn=0;t<e;){var a=Ut[t];Ut[t++]=null;var n=Ut[t];Ut[t++]=null;var l=Ut[t];Ut[t++]=null;var s=Ut[t];if(Ut[t++]=null,n!==null&&l!==null){var u=n.pending;u===null?l.next=l:(l.next=u.next,u.next=l),n.pending=l}s!==0&&qc(a,l,s)}}function jr(e,t,a,n){Ut[zn++]=e,Ut[zn++]=t,Ut[zn++]=a,Ut[zn++]=n,Ws|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Ps(e,t,a,n){return jr(e,t,a,n),wr(e)}function sn(e,t){return jr(e,null,null,t),wr(e)}function qc(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var l=!1,s=e.return;s!==null;)s.childLanes|=a,n=s.alternate,n!==null&&(n.childLanes|=a),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(l=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,l&&t!==null&&(l=31-St(a),e=s.hiddenUpdates,n=e[l],n===null?e[l]=[t]:n.push(t),t.lane=a|536870912),s):null}function wr(e){if(50<Il)throw Il=0,oo=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _n={};function c0(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,a,n){return new c0(e,t,a,n)}function ei(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ra(e,t){var a=e.alternate;return a===null?(a=jt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Vc(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Nr(e,t,a,n,l,s){var u=0;if(n=e,typeof e=="function")ei(e)&&(u=1);else if(typeof e=="string")u=gg(e,a,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case H:return e=jt(31,a,t,l),e.elementType=H,e.lanes=s,e;case q:return on(a.children,l,s,t);case K:u=8,l|=24;break;case ae:return e=jt(12,a,t,l|2),e.elementType=ae,e.lanes=s,e;case ke:return e=jt(13,a,t,l),e.elementType=ke,e.lanes=s,e;case he:return e=jt(19,a,t,l),e.elementType=he,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:u=10;break e;case P:u=9;break e;case Z:u=11;break e;case X:u=14;break e;case O:u=16,n=null;break e}u=29,a=Error(c(130,e===null?"null":typeof e,"")),n=null}return t=jt(u,a,t,l),t.elementType=e,t.type=n,t.lanes=s,t}function on(e,t,a,n){return e=jt(7,e,n,t),e.lanes=a,e}function ti(e,t,a){return e=jt(6,e,null,t),e.lanes=a,e}function Xc(e){var t=jt(18,null,null,0);return t.stateNode=e,t}function ai(e,t,a){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kc=new WeakMap;function Dt(e,t){if(typeof e=="object"&&e!==null){var a=Kc.get(e);return a!==void 0?a:(t={value:e,source:t,stack:il(t)},Kc.set(e,t),t)}return{value:e,source:t,stack:il(t)}}var Un=[],Dn=0,Tr=null,Nl=0,Ht=[],Lt=0,Aa=null,Zt=1,$t="";function sa(e,t){Un[Dn++]=Nl,Un[Dn++]=Tr,Tr=e,Nl=t}function Ic(e,t,a){Ht[Lt++]=Zt,Ht[Lt++]=$t,Ht[Lt++]=Aa,Aa=e;var n=Zt;e=$t;var l=32-St(n)-1;n&=~(1<<l),a+=1;var s=32-St(t)+l;if(30<s){var u=l-l%5;s=(n&(1<<u)-1).toString(32),n>>=u,l-=u,Zt=1<<32-St(t)+l|a<<l|n,$t=s+e}else Zt=1<<s|a<<l|n,$t=e}function ni(e){e.return!==null&&(sa(e,1),Ic(e,1,0))}function li(e){for(;e===Tr;)Tr=Un[--Dn],Un[Dn]=null,Nl=Un[--Dn],Un[Dn]=null;for(;e===Aa;)Aa=Ht[--Lt],Ht[Lt]=null,$t=Ht[--Lt],Ht[Lt]=null,Zt=Ht[--Lt],Ht[Lt]=null}function Qc(e,t){Ht[Lt++]=Zt,Ht[Lt++]=$t,Ht[Lt++]=Aa,Zt=t.id,$t=t.overflow,Aa=e}var rt=null,qe=null,Ee=!1,Ma=null,Gt=!1,ri=Error(c(519));function Ra(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Dt(t,e)),ri}function Zc(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[lt]=e,t[mt]=n,a){case"dialog":we("cancel",t),we("close",t);break;case"iframe":case"object":case"embed":we("load",t);break;case"video":case"audio":for(a=0;a<Zl.length;a++)we(Zl[a],t);break;case"source":we("error",t);break;case"img":case"image":case"link":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"input":we("invalid",t),ic(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":we("invalid",t);break;case"textarea":we("invalid",t),cc(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||ff(t.textContent,a)?(n.popover!=null&&(we("beforetoggle",t),we("toggle",t)),n.onScroll!=null&&we("scroll",t),n.onScrollEnd!=null&&we("scrollend",t),n.onClick!=null&&(t.onclick=na),t=!0):t=!1,t||Ra(e,!0)}function $c(e){for(rt=e.return;rt;)switch(rt.tag){case 5:case 31:case 13:Gt=!1;return;case 27:case 3:Gt=!0;return;default:rt=rt.return}}function Hn(e){if(e!==rt)return!1;if(!Ee)return $c(e),Ee=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||wo(e.type,e.memoizedProps)),a=!a),a&&qe&&Ra(e),$c(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));qe=Sf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));qe=Sf(e)}else t===27?(t=qe,Ka(e.type)?(e=Ao,Ao=null,qe=e):qe=t):qe=rt?Yt(e.stateNode.nextSibling):null;return!0}function cn(){qe=rt=null,Ee=!1}function si(){var e=Ma;return e!==null&&(pt===null?pt=e:pt.push.apply(pt,e),Ma=null),e}function Tl(e){Ma===null?Ma=[e]:Ma.push(e)}var ii=S(null),un=null,ia=null;function Oa(e,t,a){Q(ii,t._currentValue),t._currentValue=a}function oa(e){e._currentValue=ii.current,z(ii)}function oi(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function ci(e,t,a,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var s=l.dependencies;if(s!==null){var u=l.child;s=s.firstContext;e:for(;s!==null;){var m=s;s=l;for(var b=0;b<t.length;b++)if(m.context===t[b]){s.lanes|=a,m=s.alternate,m!==null&&(m.lanes|=a),oi(s.return,a,e),n||(u=null);break e}s=m.next}}else if(l.tag===18){if(u=l.return,u===null)throw Error(c(341));u.lanes|=a,s=u.alternate,s!==null&&(s.lanes|=a),oi(u,a,e),u=null}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===e){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}}function Ln(e,t,a,n){e=null;for(var l=t,s=!1;l!==null;){if(!s){if((l.flags&524288)!==0)s=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var u=l.alternate;if(u===null)throw Error(c(387));if(u=u.memoizedProps,u!==null){var m=l.type;kt(l.pendingProps.value,u.value)||(e!==null?e.push(m):e=[m])}}else if(l===Se.current){if(u=l.alternate,u===null)throw Error(c(387));u.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Pl):e=[Pl])}l=l.return}e!==null&&ci(t,e,a,n),t.flags|=262144}function Cr(e){for(e=e.firstContext;e!==null;){if(!kt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function dn(e){un=e,ia=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function st(e){return Jc(un,e)}function Er(e,t){return un===null&&dn(e),Jc(e,t)}function Jc(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ia===null){if(e===null)throw Error(c(308));ia=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ia=ia.next=t;return a}var u0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},d0=x.unstable_scheduleCallback,f0=x.unstable_NormalPriority,Fe={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ui(){return{controller:new u0,data:new Map,refCount:0}}function Cl(e){e.refCount--,e.refCount===0&&d0(f0,function(){e.controller.abort()})}var El=null,di=0,Gn=0,Bn=null;function m0(e,t){if(El===null){var a=El=[];di=0,Gn=ho(),Bn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return di++,t.then(Fc,Fc),t}function Fc(){if(--di===0&&El!==null){Bn!==null&&(Bn.status="fulfilled");var e=El;El=null,Gn=0,Bn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function g0(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var Wc=C.S;C.S=function(e,t){Ud=W(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&m0(e,t),Wc!==null&&Wc(e,t)};var fn=S(null);function fi(){var e=fn.current;return e!==null?e:Be.pooledCache}function Ar(e,t){t===null?Q(fn,fn.current):Q(fn,t.pool)}function Pc(){var e=fi();return e===null?null:{parent:Fe._currentValue,pool:e}}var Yn=Error(c(460)),mi=Error(c(474)),Mr=Error(c(542)),Rr={then:function(){}};function eu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(na,na),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,nu(e),e;default:if(typeof t.status=="string")t.then(na,na);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=n}},function(n){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,nu(e),e}throw gn=t,Yn}}function mn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(gn=a,Yn):a}}var gn=null;function au(){if(gn===null)throw Error(c(459));var e=gn;return gn=null,e}function nu(e){if(e===Yn||e===Mr)throw Error(c(483))}var qn=null,Al=0;function Or(e){var t=Al;return Al+=1,qn===null&&(qn=[]),tu(qn,e,t)}function Ml(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zr(e,t){throw t.$$typeof===E?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function lu(e){function t(j,k){if(e){var N=j.deletions;N===null?(j.deletions=[k],j.flags|=16):N.push(k)}}function a(j,k){if(!e)return null;for(;k!==null;)t(j,k),k=k.sibling;return null}function n(j){for(var k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function l(j,k){return j=ra(j,k),j.index=0,j.sibling=null,j}function s(j,k,N){return j.index=N,e?(N=j.alternate,N!==null?(N=N.index,N<k?(j.flags|=67108866,k):N):(j.flags|=67108866,k)):(j.flags|=1048576,k)}function u(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function m(j,k,N,U){return k===null||k.tag!==6?(k=ti(N,j.mode,U),k.return=j,k):(k=l(k,N),k.return=j,k)}function b(j,k,N,U){var ce=N.type;return ce===q?_(j,k,N.props.children,U,N.key):k!==null&&(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===O&&mn(ce)===k.type)?(k=l(k,N.props),Ml(k,N),k.return=j,k):(k=Nr(N.type,N.key,N.props,null,j.mode,U),Ml(k,N),k.return=j,k)}function T(j,k,N,U){return k===null||k.tag!==4||k.stateNode.containerInfo!==N.containerInfo||k.stateNode.implementation!==N.implementation?(k=ai(N,j.mode,U),k.return=j,k):(k=l(k,N.children||[]),k.return=j,k)}function _(j,k,N,U,ce){return k===null||k.tag!==7?(k=on(N,j.mode,U,ce),k.return=j,k):(k=l(k,N),k.return=j,k)}function G(j,k,N){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=ti(""+k,j.mode,N),k.return=j,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case D:return N=Nr(k.type,k.key,k.props,null,j.mode,N),Ml(N,k),N.return=j,N;case Y:return k=ai(k,j.mode,N),k.return=j,k;case O:return k=mn(k),G(j,k,N)}if(de(k)||re(k))return k=on(k,j.mode,N,null),k.return=j,k;if(typeof k.then=="function")return G(j,Or(k),N);if(k.$$typeof===V)return G(j,Er(j,k),N);zr(j,k)}return null}function A(j,k,N,U){var ce=k!==null?k.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return ce!==null?null:m(j,k,""+N,U);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case D:return N.key===ce?b(j,k,N,U):null;case Y:return N.key===ce?T(j,k,N,U):null;case O:return N=mn(N),A(j,k,N,U)}if(de(N)||re(N))return ce!==null?null:_(j,k,N,U,null);if(typeof N.then=="function")return A(j,k,Or(N),U);if(N.$$typeof===V)return A(j,k,Er(j,N),U);zr(j,N)}return null}function R(j,k,N,U,ce){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return j=j.get(N)||null,m(k,j,""+U,ce);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return j=j.get(U.key===null?N:U.key)||null,b(k,j,U,ce);case Y:return j=j.get(U.key===null?N:U.key)||null,T(k,j,U,ce);case O:return U=mn(U),R(j,k,N,U,ce)}if(de(U)||re(U))return j=j.get(N)||null,_(k,j,U,ce,null);if(typeof U.then=="function")return R(j,k,N,Or(U),ce);if(U.$$typeof===V)return R(j,k,N,Er(k,U),ce);zr(k,U)}return null}function te(j,k,N,U){for(var ce=null,Me=null,ne=k,be=k=0,Ce=null;ne!==null&&be<N.length;be++){ne.index>be?(Ce=ne,ne=null):Ce=ne.sibling;var Re=A(j,ne,N[be],U);if(Re===null){ne===null&&(ne=Ce);break}e&&ne&&Re.alternate===null&&t(j,ne),k=s(Re,k,be),Me===null?ce=Re:Me.sibling=Re,Me=Re,ne=Ce}if(be===N.length)return a(j,ne),Ee&&sa(j,be),ce;if(ne===null){for(;be<N.length;be++)ne=G(j,N[be],U),ne!==null&&(k=s(ne,k,be),Me===null?ce=ne:Me.sibling=ne,Me=ne);return Ee&&sa(j,be),ce}for(ne=n(ne);be<N.length;be++)Ce=R(ne,j,be,N[be],U),Ce!==null&&(e&&Ce.alternate!==null&&ne.delete(Ce.key===null?be:Ce.key),k=s(Ce,k,be),Me===null?ce=Ce:Me.sibling=Ce,Me=Ce);return e&&ne.forEach(function(Ja){return t(j,Ja)}),Ee&&sa(j,be),ce}function ue(j,k,N,U){if(N==null)throw Error(c(151));for(var ce=null,Me=null,ne=k,be=k=0,Ce=null,Re=N.next();ne!==null&&!Re.done;be++,Re=N.next()){ne.index>be?(Ce=ne,ne=null):Ce=ne.sibling;var Ja=A(j,ne,Re.value,U);if(Ja===null){ne===null&&(ne=Ce);break}e&&ne&&Ja.alternate===null&&t(j,ne),k=s(Ja,k,be),Me===null?ce=Ja:Me.sibling=Ja,Me=Ja,ne=Ce}if(Re.done)return a(j,ne),Ee&&sa(j,be),ce;if(ne===null){for(;!Re.done;be++,Re=N.next())Re=G(j,Re.value,U),Re!==null&&(k=s(Re,k,be),Me===null?ce=Re:Me.sibling=Re,Me=Re);return Ee&&sa(j,be),ce}for(ne=n(ne);!Re.done;be++,Re=N.next())Re=R(ne,j,be,Re.value,U),Re!==null&&(e&&Re.alternate!==null&&ne.delete(Re.key===null?be:Re.key),k=s(Re,k,be),Me===null?ce=Re:Me.sibling=Re,Me=Re);return e&&ne.forEach(function(Ng){return t(j,Ng)}),Ee&&sa(j,be),ce}function Ge(j,k,N,U){if(typeof N=="object"&&N!==null&&N.type===q&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case D:e:{for(var ce=N.key;k!==null;){if(k.key===ce){if(ce=N.type,ce===q){if(k.tag===7){a(j,k.sibling),U=l(k,N.props.children),U.return=j,j=U;break e}}else if(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===O&&mn(ce)===k.type){a(j,k.sibling),U=l(k,N.props),Ml(U,N),U.return=j,j=U;break e}a(j,k);break}else t(j,k);k=k.sibling}N.type===q?(U=on(N.props.children,j.mode,U,N.key),U.return=j,j=U):(U=Nr(N.type,N.key,N.props,null,j.mode,U),Ml(U,N),U.return=j,j=U)}return u(j);case Y:e:{for(ce=N.key;k!==null;){if(k.key===ce)if(k.tag===4&&k.stateNode.containerInfo===N.containerInfo&&k.stateNode.implementation===N.implementation){a(j,k.sibling),U=l(k,N.children||[]),U.return=j,j=U;break e}else{a(j,k);break}else t(j,k);k=k.sibling}U=ai(N,j.mode,U),U.return=j,j=U}return u(j);case O:return N=mn(N),Ge(j,k,N,U)}if(de(N))return te(j,k,N,U);if(re(N)){if(ce=re(N),typeof ce!="function")throw Error(c(150));return N=ce.call(N),ue(j,k,N,U)}if(typeof N.then=="function")return Ge(j,k,Or(N),U);if(N.$$typeof===V)return Ge(j,k,Er(j,N),U);zr(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,k!==null&&k.tag===6?(a(j,k.sibling),U=l(k,N),U.return=j,j=U):(a(j,k),U=ti(N,j.mode,U),U.return=j,j=U),u(j)):a(j,k)}return function(j,k,N,U){try{Al=0;var ce=Ge(j,k,N,U);return qn=null,ce}catch(ne){if(ne===Yn||ne===Mr)throw ne;var Me=jt(29,ne,null,j.mode);return Me.lanes=U,Me.return=j,Me}finally{}}}var hn=lu(!0),ru=lu(!1),za=!1;function gi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _a(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Oe&2)!==0){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,t=wr(e),qc(e,null,a),t}return jr(e,n,t,a),wr(e)}function Rl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Jo(e,a)}}function yi(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,s=null;if(a=a.firstBaseUpdate,a!==null){do{var u={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};s===null?l=s=u:s=s.next=u,a=a.next}while(a!==null);s===null?l=s=t:s=s.next=t}else l=s=t;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var xi=!1;function Ol(){if(xi){var e=Bn;if(e!==null)throw e}}function zl(e,t,a,n){xi=!1;var l=e.updateQueue;za=!1;var s=l.firstBaseUpdate,u=l.lastBaseUpdate,m=l.shared.pending;if(m!==null){l.shared.pending=null;var b=m,T=b.next;b.next=null,u===null?s=T:u.next=T,u=b;var _=e.alternate;_!==null&&(_=_.updateQueue,m=_.lastBaseUpdate,m!==u&&(m===null?_.firstBaseUpdate=T:m.next=T,_.lastBaseUpdate=b))}if(s!==null){var G=l.baseState;u=0,_=T=b=null,m=s;do{var A=m.lane&-536870913,R=A!==m.lane;if(R?(Te&A)===A:(n&A)===A){A!==0&&A===Gn&&(xi=!0),_!==null&&(_=_.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var te=e,ue=m;A=t;var Ge=a;switch(ue.tag){case 1:if(te=ue.payload,typeof te=="function"){G=te.call(Ge,G,A);break e}G=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ue.payload,A=typeof te=="function"?te.call(Ge,G,A):te,A==null)break e;G=w({},G,A);break e;case 2:za=!0}}A=m.callback,A!==null&&(e.flags|=64,R&&(e.flags|=8192),R=l.callbacks,R===null?l.callbacks=[A]:R.push(A))}else R={lane:A,tag:m.tag,payload:m.payload,callback:m.callback,next:null},_===null?(T=_=R,b=G):_=_.next=R,u|=A;if(m=m.next,m===null){if(m=l.shared.pending,m===null)break;R=m,m=R.next,R.next=null,l.lastBaseUpdate=R,l.shared.pending=null}}while(!0);_===null&&(b=G),l.baseState=b,l.firstBaseUpdate=T,l.lastBaseUpdate=_,s===null&&(l.shared.lanes=0),Ba|=u,e.lanes=u,e.memoizedState=G}}function su(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function iu(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)su(a[e],t)}var Vn=S(null),_r=S(0);function ou(e,t){e=xa,Q(_r,e),Q(Vn,t),xa=e|t.baseLanes}function pi(){Q(_r,xa),Q(Vn,Vn.current)}function bi(){xa=_r.current,z(Vn),z(_r)}var wt=S(null),Bt=null;function Da(e){var t=e.alternate;Q($e,$e.current&1),Q(wt,e),Bt===null&&(t===null||Vn.current!==null||t.memoizedState!==null)&&(Bt=e)}function vi(e){Q($e,$e.current),Q(wt,e),Bt===null&&(Bt=e)}function cu(e){e.tag===22?(Q($e,$e.current),Q(wt,e),Bt===null&&(Bt=e)):Ha()}function Ha(){Q($e,$e.current),Q(wt,wt.current)}function Nt(e){z(wt),Bt===e&&(Bt=null),z($e)}var $e=S(0);function Ur(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Co(a)||Eo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=0,pe=null,He=null,We=null,Dr=!1,Xn=!1,yn=!1,Hr=0,_l=0,Kn=null,h0=0;function Qe(){throw Error(c(321))}function Si(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!kt(e[a],t[a]))return!1;return!0}function ki(e,t,a,n,l,s){return ca=s,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?Iu:Hi,yn=!1,s=a(n,l),yn=!1,Xn&&(s=du(t,a,n,l)),uu(e),s}function uu(e){C.H=Hl;var t=He!==null&&He.next!==null;if(ca=0,We=He=pe=null,Dr=!1,_l=0,Kn=null,t)throw Error(c(300));e===null||Pe||(e=e.dependencies,e!==null&&Cr(e)&&(Pe=!0))}function du(e,t,a,n){pe=e;var l=0;do{if(Xn&&(Kn=null),_l=0,Xn=!1,25<=l)throw Error(c(301));if(l+=1,We=He=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}C.H=Qu,s=t(a,n)}while(Xn);return s}function y0(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?Ul(t):t,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(pe.flags|=1024),t}function ji(){var e=Hr!==0;return Hr=0,e}function wi(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Ni(e){if(Dr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dr=!1}ca=0,We=He=pe=null,Xn=!1,_l=Hr=0,Kn=null}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?pe.memoizedState=We=e:We=We.next=e,We}function Je(){if(He===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=We===null?pe.memoizedState:We.next;if(t!==null)We=t,He=e;else{if(e===null)throw pe.alternate===null?Error(c(467)):Error(c(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},We===null?pe.memoizedState=We=e:We=We.next=e}return We}function Lr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(e){var t=_l;return _l+=1,Kn===null&&(Kn=[]),e=tu(Kn,e,t),t=pe,(We===null?t.memoizedState:We.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?Iu:Hi),e}function Gr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ul(e);if(e.$$typeof===V)return st(e)}throw Error(c(438,String(e)))}function Ti(e){var t=null,a=pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=pe.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Lr(),pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=B;return t.index++,a}function ua(e,t){return typeof t=="function"?t(e):t}function Br(e){var t=Je();return Ci(t,He,e)}function Ci(e,t,a){var n=e.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=a;var l=e.baseQueue,s=n.pending;if(s!==null){if(l!==null){var u=l.next;l.next=s.next,s.next=u}t.baseQueue=l=s,n.pending=null}if(s=e.baseState,l===null)e.memoizedState=s;else{t=l.next;var m=u=null,b=null,T=t,_=!1;do{var G=T.lane&-536870913;if(G!==T.lane?(Te&G)===G:(ca&G)===G){var A=T.revertLane;if(A===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),G===Gn&&(_=!0);else if((ca&A)===A){T=T.next,A===Gn&&(_=!0);continue}else G={lane:0,revertLane:T.revertLane,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},b===null?(m=b=G,u=s):b=b.next=G,pe.lanes|=A,Ba|=A;G=T.action,yn&&a(s,G),s=T.hasEagerState?T.eagerState:a(s,G)}else A={lane:G,revertLane:T.revertLane,gesture:T.gesture,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},b===null?(m=b=A,u=s):b=b.next=A,pe.lanes|=G,Ba|=G;T=T.next}while(T!==null&&T!==t);if(b===null?u=s:b.next=m,!kt(s,e.memoizedState)&&(Pe=!0,_&&(a=Bn,a!==null)))throw a;e.memoizedState=s,e.baseState=u,e.baseQueue=b,n.lastRenderedState=s}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Ei(e){var t=Je(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var n=a.dispatch,l=a.pending,s=t.memoizedState;if(l!==null){a.pending=null;var u=l=l.next;do s=e(s,u.action),u=u.next;while(u!==l);kt(s,t.memoizedState)||(Pe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),a.lastRenderedState=s}return[s,n]}function fu(e,t,a){var n=pe,l=Je(),s=Ee;if(s){if(a===void 0)throw Error(c(407));a=a()}else a=t();var u=!kt((He||l).memoizedState,a);if(u&&(l.memoizedState=a,Pe=!0),l=l.queue,Ri(hu.bind(null,n,l,e),[e]),l.getSnapshot!==t||u||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,In(9,{destroy:void 0},gu.bind(null,n,l,a,t),null),Be===null)throw Error(c(349));s||(ca&127)!==0||mu(n,t,a)}return a}function mu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=pe.updateQueue,t===null?(t=Lr(),pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function gu(e,t,a,n){t.value=a,t.getSnapshot=n,yu(t)&&xu(e)}function hu(e,t,a){return a(function(){yu(t)&&xu(e)})}function yu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!kt(e,a)}catch{return!0}}function xu(e){var t=sn(e,2);t!==null&&bt(t,e,2)}function Ai(e){var t=ft();if(typeof e=="function"){var a=e;if(e=a(),yn){Ta(!0);try{a()}finally{Ta(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:e},t}function pu(e,t,a,n){return e.baseState=a,Ci(e,He,typeof n=="function"?n:ua)}function x0(e,t,a,n,l){if(Vr(e))throw Error(c(485));if(e=t.action,e!==null){var s={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(u){s.listeners.push(u)}};C.T!==null?a(!0):s.isTransition=!1,n(s),a=t.pending,a===null?(s.next=t.pending=s,bu(t,s)):(s.next=a.next,t.pending=a.next=s)}}function bu(e,t){var a=t.action,n=t.payload,l=e.state;if(t.isTransition){var s=C.T,u={};C.T=u;try{var m=a(l,n),b=C.S;b!==null&&b(u,m),vu(e,t,m)}catch(T){Mi(e,t,T)}finally{s!==null&&u.types!==null&&(s.types=u.types),C.T=s}}else try{s=a(l,n),vu(e,t,s)}catch(T){Mi(e,t,T)}}function vu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Su(e,t,n)},function(n){return Mi(e,t,n)}):Su(e,t,a)}function Su(e,t,a){t.status="fulfilled",t.value=a,ku(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,bu(e,a)))}function Mi(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,ku(t),t=t.next;while(t!==n)}e.action=null}function ku(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ju(e,t){return t}function wu(e,t){if(Ee){var a=Be.formState;if(a!==null){e:{var n=pe;if(Ee){if(qe){t:{for(var l=qe,s=Gt;l.nodeType!==8;){if(!s){l=null;break t}if(l=Yt(l.nextSibling),l===null){l=null;break t}}s=l.data,l=s==="F!"||s==="F"?l:null}if(l){qe=Yt(l.nextSibling),n=l.data==="F!";break e}}Ra(n)}n=!1}n&&(t=a[0])}}return a=ft(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ju,lastRenderedState:t},a.queue=n,a=Vu.bind(null,pe,n),n.dispatch=a,n=Ai(!1),s=Di.bind(null,pe,!1,n.queue),n=ft(),l={state:t,dispatch:null,action:e,pending:null},n.queue=l,a=x0.bind(null,pe,l,s,a),l.dispatch=a,n.memoizedState=e,[t,a,!1]}function Nu(e){var t=Je();return Tu(t,He,e)}function Tu(e,t,a){if(t=Ci(e,t,ju)[0],e=Br(ua)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Ul(t)}catch(u){throw u===Yn?Mr:u}else n=t;t=Je();var l=t.queue,s=l.dispatch;return a!==t.memoizedState&&(pe.flags|=2048,In(9,{destroy:void 0},p0.bind(null,l,a),null)),[n,s,e]}function p0(e,t){e.action=t}function Cu(e){var t=Je(),a=He;if(a!==null)return Tu(t,a,e);Je(),t=t.memoizedState,a=Je();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function In(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=pe.updateQueue,t===null&&(t=Lr(),pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Eu(){return Je().memoizedState}function Yr(e,t,a,n){var l=ft();pe.flags|=e,l.memoizedState=In(1|t,{destroy:void 0},a,n===void 0?null:n)}function qr(e,t,a,n){var l=Je();n=n===void 0?null:n;var s=l.memoizedState.inst;He!==null&&n!==null&&Si(n,He.memoizedState.deps)?l.memoizedState=In(t,s,a,n):(pe.flags|=e,l.memoizedState=In(1|t,s,a,n))}function Au(e,t){Yr(8390656,8,e,t)}function Ri(e,t){qr(2048,8,e,t)}function b0(e){pe.flags|=4;var t=pe.updateQueue;if(t===null)t=Lr(),pe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Mu(e){var t=Je().memoizedState;return b0({ref:t,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Ru(e,t){return qr(4,2,e,t)}function Ou(e,t){return qr(4,4,e,t)}function zu(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _u(e,t,a){a=a!=null?a.concat([e]):null,qr(4,4,zu.bind(null,t,e),a)}function Oi(){}function Uu(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&Si(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Du(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&Si(t,n[1]))return n[0];if(n=e(),yn){Ta(!0);try{e()}finally{Ta(!1)}}return a.memoizedState=[n,t],n}function zi(e,t,a){return a===void 0||(ca&1073741824)!==0&&(Te&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Hd(),pe.lanes|=e,Ba|=e,a)}function Hu(e,t,a,n){return kt(a,t)?a:Vn.current!==null?(e=zi(e,a,n),kt(e,t)||(Pe=!0),e):(ca&42)===0||(ca&1073741824)!==0&&(Te&261930)===0?(Pe=!0,e.memoizedState=a):(e=Hd(),pe.lanes|=e,Ba|=e,t)}function Lu(e,t,a,n,l){var s=L.p;L.p=s!==0&&8>s?s:8;var u=C.T,m={};C.T=m,Di(e,!1,t,a);try{var b=l(),T=C.S;if(T!==null&&T(m,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var _=g0(b,n);Dl(e,t,_,Et(e))}else Dl(e,t,n,Et(e))}catch(G){Dl(e,t,{then:function(){},status:"rejected",reason:G},Et())}finally{L.p=s,u!==null&&m.types!==null&&(u.types=m.types),C.T=u}}function v0(){}function _i(e,t,a,n){if(e.tag!==5)throw Error(c(476));var l=Gu(e).queue;Lu(e,l,t,I,a===null?v0:function(){return Bu(e),a(n)})}function Gu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:I},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Bu(e){var t=Gu(e);t.next===null&&(t=e.alternate.memoizedState),Dl(e,t.next.queue,{},Et())}function Ui(){return st(Pl)}function Yu(){return Je().memoizedState}function qu(){return Je().memoizedState}function S0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Et();e=_a(a);var n=Ua(t,e,a);n!==null&&(bt(n,t,a),Rl(n,t,a)),t={cache:ui()},e.payload=t;return}t=t.return}}function k0(e,t,a){var n=Et();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Vr(e)?Xu(t,a):(a=Ps(e,t,a,n),a!==null&&(bt(a,e,n),Ku(a,t,n)))}function Vu(e,t,a){var n=Et();Dl(e,t,a,n)}function Dl(e,t,a,n){var l={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vr(e))Xu(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var u=t.lastRenderedState,m=s(u,a);if(l.hasEagerState=!0,l.eagerState=m,kt(m,u))return jr(e,t,l,0),Be===null&&kr(),!1}catch{}finally{}if(a=Ps(e,t,l,n),a!==null)return bt(a,e,n),Ku(a,t,n),!0}return!1}function Di(e,t,a,n){if(n={lane:2,revertLane:ho(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Vr(e)){if(t)throw Error(c(479))}else t=Ps(e,a,n,2),t!==null&&bt(t,e,2)}function Vr(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Xu(e,t){Xn=Dr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Ku(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Jo(e,a)}}var Hl={readContext:st,use:Gr,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};Hl.useEffectEvent=Qe;var Iu={readContext:st,use:Gr,useCallback:function(e,t){return ft().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Au,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Yr(4194308,4,zu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){Yr(4,2,e,t)},useMemo:function(e,t){var a=ft();t=t===void 0?null:t;var n=e();if(yn){Ta(!0);try{e()}finally{Ta(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=ft();if(a!==void 0){var l=a(t);if(yn){Ta(!0);try{a(t)}finally{Ta(!1)}}}else l=t;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=k0.bind(null,pe,e),[n.memoizedState,e]},useRef:function(e){var t=ft();return e={current:e},t.memoizedState=e},useState:function(e){e=Ai(e);var t=e.queue,a=Vu.bind(null,pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Oi,useDeferredValue:function(e,t){var a=ft();return zi(a,e,t)},useTransition:function(){var e=Ai(!1);return e=Lu.bind(null,pe,e.queue,!0,!1),ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=pe,l=ft();if(Ee){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),Be===null)throw Error(c(349));(Te&127)!==0||mu(n,t,a)}l.memoizedState=a;var s={value:a,getSnapshot:t};return l.queue=s,Au(hu.bind(null,n,s,e),[e]),n.flags|=2048,In(9,{destroy:void 0},gu.bind(null,n,s,a,t),null),a},useId:function(){var e=ft(),t=Be.identifierPrefix;if(Ee){var a=$t,n=Zt;a=(n&~(1<<32-St(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Hr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=h0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ui,useFormState:wu,useActionState:wu,useOptimistic:function(e){var t=ft();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Di.bind(null,pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ti,useCacheRefresh:function(){return ft().memoizedState=S0.bind(null,pe)},useEffectEvent:function(e){var t=ft(),a={impl:e};return t.memoizedState=a,function(){if((Oe&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},Hi={readContext:st,use:Gr,useCallback:Uu,useContext:st,useEffect:Ri,useImperativeHandle:_u,useInsertionEffect:Ru,useLayoutEffect:Ou,useMemo:Du,useReducer:Br,useRef:Eu,useState:function(){return Br(ua)},useDebugValue:Oi,useDeferredValue:function(e,t){var a=Je();return Hu(a,He.memoizedState,e,t)},useTransition:function(){var e=Br(ua)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:Ul(e),t]},useSyncExternalStore:fu,useId:Yu,useHostTransitionStatus:Ui,useFormState:Nu,useActionState:Nu,useOptimistic:function(e,t){var a=Je();return pu(a,He,e,t)},useMemoCache:Ti,useCacheRefresh:qu};Hi.useEffectEvent=Mu;var Qu={readContext:st,use:Gr,useCallback:Uu,useContext:st,useEffect:Ri,useImperativeHandle:_u,useInsertionEffect:Ru,useLayoutEffect:Ou,useMemo:Du,useReducer:Ei,useRef:Eu,useState:function(){return Ei(ua)},useDebugValue:Oi,useDeferredValue:function(e,t){var a=Je();return He===null?zi(a,e,t):Hu(a,He.memoizedState,e,t)},useTransition:function(){var e=Ei(ua)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:Ul(e),t]},useSyncExternalStore:fu,useId:Yu,useHostTransitionStatus:Ui,useFormState:Cu,useActionState:Cu,useOptimistic:function(e,t){var a=Je();return He!==null?pu(a,He,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ti,useCacheRefresh:qu};Qu.useEffectEvent=Mu;function Li(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Gi={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Et(),l=_a(n);l.payload=t,a!=null&&(l.callback=a),t=Ua(e,l,n),t!==null&&(bt(t,e,n),Rl(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Et(),l=_a(n);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=Ua(e,l,n),t!==null&&(bt(t,e,n),Rl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Et(),n=_a(a);n.tag=2,t!=null&&(n.callback=t),t=Ua(e,n,a),t!==null&&(bt(t,e,a),Rl(t,e,a))}};function Zu(e,t,a,n,l,s,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,u):t.prototype&&t.prototype.isPureReactComponent?!jl(a,n)||!jl(l,s):!0}function $u(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Gi.enqueueReplaceState(t,t.state,null)}function xn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function Ju(e){Sr(e)}function Fu(e){console.error(e)}function Wu(e){Sr(e)}function Xr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Pu(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Bi(e,t,a){return a=_a(a),a.tag=3,a.payload={element:null},a.callback=function(){Xr(e,t)},a}function ed(e){return e=_a(e),e.tag=3,e}function td(e,t,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var s=n.value;e.payload=function(){return l(s)},e.callback=function(){Pu(t,a,n)}}var u=a.stateNode;u!==null&&typeof u.componentDidCatch=="function"&&(e.callback=function(){Pu(t,a,n),typeof l!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})})}function j0(e,t,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Ln(t,a,l,!0),a=wt.current,a!==null){switch(a.tag){case 31:case 13:return Bt===null?as():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===Rr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),fo(e,n,l)),!1;case 22:return a.flags|=65536,n===Rr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),fo(e,n,l)),!1}throw Error(c(435,a.tag))}return fo(e,n,l),as(),!1}if(Ee)return t=wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,n!==ri&&(e=Error(c(422),{cause:n}),Tl(Dt(e,a)))):(n!==ri&&(t=Error(c(423),{cause:n}),Tl(Dt(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=Dt(n,a),l=Bi(e.stateNode,n,l),yi(e,l),Ze!==4&&(Ze=2)),!1;var s=Error(c(520),{cause:n});if(s=Dt(s,a),Kl===null?Kl=[s]:Kl.push(s),Ze!==4&&(Ze=2),t===null)return!0;n=Dt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Bi(a.stateNode,n,e),yi(a,e),!1;case 1:if(t=a.type,s=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ya===null||!Ya.has(s))))return a.flags|=65536,l&=-l,a.lanes|=l,l=ed(l),td(l,e,a,n),yi(a,l),!1}a=a.return}while(a!==null);return!1}var Yi=Error(c(461)),Pe=!1;function it(e,t,a,n){t.child=e===null?ru(t,null,a,n):hn(t,e.child,a,n)}function ad(e,t,a,n,l){a=a.render;var s=t.ref;if("ref"in n){var u={};for(var m in n)m!=="ref"&&(u[m]=n[m])}else u=n;return dn(t),n=ki(e,t,a,u,s,l),m=ji(),e!==null&&!Pe?(wi(e,t,l),da(e,t,l)):(Ee&&m&&ni(t),t.flags|=1,it(e,t,n,l),t.child)}function nd(e,t,a,n,l){if(e===null){var s=a.type;return typeof s=="function"&&!ei(s)&&s.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=s,ld(e,t,s,n,l)):(e=Nr(a.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!$i(e,l)){var u=s.memoizedProps;if(a=a.compare,a=a!==null?a:jl,a(u,n)&&e.ref===t.ref)return da(e,t,l)}return t.flags|=1,e=ra(s,n),e.ref=t.ref,e.return=t,t.child=e}function ld(e,t,a,n,l){if(e!==null){var s=e.memoizedProps;if(jl(s,n)&&e.ref===t.ref)if(Pe=!1,t.pendingProps=n=s,$i(e,l))(e.flags&131072)!==0&&(Pe=!0);else return t.lanes=e.lanes,da(e,t,l)}return qi(e,t,a,n,l)}function rd(e,t,a,n){var l=n.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|a:a,e!==null){for(n=t.child=e.child,l=0;n!==null;)l=l|n.lanes|n.childLanes,n=n.sibling;n=l&~s}else n=0,t.child=null;return sd(e,t,s,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ar(t,s!==null?s.cachePool:null),s!==null?ou(t,s):pi(),cu(t);else return n=t.lanes=536870912,sd(e,t,s!==null?s.baseLanes|a:a,a,n)}else s!==null?(Ar(t,s.cachePool),ou(t,s),Ha(),t.memoizedState=null):(e!==null&&Ar(t,null),pi(),Ha());return it(e,t,l,a),t.child}function Ll(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function sd(e,t,a,n,l){var s=fi();return s=s===null?null:{parent:Fe._currentValue,pool:s},t.memoizedState={baseLanes:a,cachePool:s},e!==null&&Ar(t,null),pi(),cu(t),e!==null&&Ln(e,t,n,!0),t.childLanes=l,null}function Kr(e,t){return t=Qr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function id(e,t,a){return hn(t,e.child,null,a),e=Kr(t,t.pendingProps),e.flags|=2,Nt(t),t.memoizedState=null,e}function w0(e,t,a){var n=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(n.mode==="hidden")return e=Kr(t,n),t.lanes=536870912,Ll(null,e);if(vi(t),(e=qe)?(e=vf(e,Gt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Aa!==null?{id:Zt,overflow:$t}:null,retryLane:536870912,hydrationErrors:null},a=Xc(e),a.return=t,t.child=a,rt=t,qe=null)):e=null,e===null)throw Ra(t);return t.lanes=536870912,null}return Kr(t,n)}var s=e.memoizedState;if(s!==null){var u=s.dehydrated;if(vi(t),l)if(t.flags&256)t.flags&=-257,t=id(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(Pe||Ln(e,t,a,!1),l=(a&e.childLanes)!==0,Pe||l){if(n=Be,n!==null&&(u=Fo(n,a),u!==0&&u!==s.retryLane))throw s.retryLane=u,sn(e,u),bt(n,e,u),Yi;as(),t=id(e,t,a)}else e=s.treeContext,qe=Yt(u.nextSibling),rt=t,Ee=!0,Ma=null,Gt=!1,e!==null&&Qc(t,e),t=Kr(t,n),t.flags|=4096;return t}return e=ra(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ir(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function qi(e,t,a,n,l){return dn(t),a=ki(e,t,a,n,void 0,l),n=ji(),e!==null&&!Pe?(wi(e,t,l),da(e,t,l)):(Ee&&n&&ni(t),t.flags|=1,it(e,t,a,l),t.child)}function od(e,t,a,n,l,s){return dn(t),t.updateQueue=null,a=du(t,n,a,l),uu(e),n=ji(),e!==null&&!Pe?(wi(e,t,s),da(e,t,s)):(Ee&&n&&ni(t),t.flags|=1,it(e,t,a,s),t.child)}function cd(e,t,a,n,l){if(dn(t),t.stateNode===null){var s=_n,u=a.contextType;typeof u=="object"&&u!==null&&(s=st(u)),s=new a(n,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gi,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=n,s.state=t.memoizedState,s.refs={},gi(t),u=a.contextType,s.context=typeof u=="object"&&u!==null?st(u):_n,s.state=t.memoizedState,u=a.getDerivedStateFromProps,typeof u=="function"&&(Li(t,a,u,n),s.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(u=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),u!==s.state&&Gi.enqueueReplaceState(s,s.state,null),zl(t,n,s,l),Ol(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){s=t.stateNode;var m=t.memoizedProps,b=xn(a,m);s.props=b;var T=s.context,_=a.contextType;u=_n,typeof _=="object"&&_!==null&&(u=st(_));var G=a.getDerivedStateFromProps;_=typeof G=="function"||typeof s.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,_||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m||T!==u)&&$u(t,s,n,u),za=!1;var A=t.memoizedState;s.state=A,zl(t,n,s,l),Ol(),T=t.memoizedState,m||A!==T||za?(typeof G=="function"&&(Li(t,a,G,n),T=t.memoizedState),(b=za||Zu(t,a,b,n,A,T,u))?(_||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=T),s.props=n,s.state=T,s.context=u,n=b):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,hi(e,t),u=t.memoizedProps,_=xn(a,u),s.props=_,G=t.pendingProps,A=s.context,T=a.contextType,b=_n,typeof T=="object"&&T!==null&&(b=st(T)),m=a.getDerivedStateFromProps,(T=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==G||A!==b)&&$u(t,s,n,b),za=!1,A=t.memoizedState,s.state=A,zl(t,n,s,l),Ol();var R=t.memoizedState;u!==G||A!==R||za||e!==null&&e.dependencies!==null&&Cr(e.dependencies)?(typeof m=="function"&&(Li(t,a,m,n),R=t.memoizedState),(_=za||Zu(t,a,_,n,A,R,b)||e!==null&&e.dependencies!==null&&Cr(e.dependencies))?(T||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,R,b),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,R,b)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=R),s.props=n,s.state=R,s.context=b,n=_):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,Ir(e,t),n=(t.flags&128)!==0,s||n?(s=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&n?(t.child=hn(t,e.child,null,l),t.child=hn(t,null,a,l)):it(e,t,a,l),t.memoizedState=s.state,e=t.child):e=da(e,t,l),e}function ud(e,t,a,n){return cn(),t.flags|=256,it(e,t,a,n),t.child}var Vi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xi(e){return{baseLanes:e,cachePool:Pc()}}function Ki(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ct),e}function dd(e,t,a){var n=t.pendingProps,l=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:($e.current&2)!==0),u&&(l=!0,t.flags&=-129),u=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(l?Da(t):Ha(),(e=qe)?(e=vf(e,Gt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Aa!==null?{id:Zt,overflow:$t}:null,retryLane:536870912,hydrationErrors:null},a=Xc(e),a.return=t,t.child=a,rt=t,qe=null)):e=null,e===null)throw Ra(t);return Eo(e)?t.lanes=32:t.lanes=536870912,null}var m=n.children;return n=n.fallback,l?(Ha(),l=t.mode,m=Qr({mode:"hidden",children:m},l),n=on(n,l,a,null),m.return=t,n.return=t,m.sibling=n,t.child=m,n=t.child,n.memoizedState=Xi(a),n.childLanes=Ki(e,u,a),t.memoizedState=Vi,Ll(null,n)):(Da(t),Ii(t,m))}var b=e.memoizedState;if(b!==null&&(m=b.dehydrated,m!==null)){if(s)t.flags&256?(Da(t),t.flags&=-257,t=Qi(e,t,a)):t.memoizedState!==null?(Ha(),t.child=e.child,t.flags|=128,t=null):(Ha(),m=n.fallback,l=t.mode,n=Qr({mode:"visible",children:n.children},l),m=on(m,l,a,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,hn(t,e.child,null,a),n=t.child,n.memoizedState=Xi(a),n.childLanes=Ki(e,u,a),t.memoizedState=Vi,t=Ll(null,n));else if(Da(t),Eo(m)){if(u=m.nextSibling&&m.nextSibling.dataset,u)var T=u.dgst;u=T,n=Error(c(419)),n.stack="",n.digest=u,Tl({value:n,source:null,stack:null}),t=Qi(e,t,a)}else if(Pe||Ln(e,t,a,!1),u=(a&e.childLanes)!==0,Pe||u){if(u=Be,u!==null&&(n=Fo(u,a),n!==0&&n!==b.retryLane))throw b.retryLane=n,sn(e,n),bt(u,e,n),Yi;Co(m)||as(),t=Qi(e,t,a)}else Co(m)?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,qe=Yt(m.nextSibling),rt=t,Ee=!0,Ma=null,Gt=!1,e!==null&&Qc(t,e),t=Ii(t,n.children),t.flags|=4096);return t}return l?(Ha(),m=n.fallback,l=t.mode,b=e.child,T=b.sibling,n=ra(b,{mode:"hidden",children:n.children}),n.subtreeFlags=b.subtreeFlags&65011712,T!==null?m=ra(T,m):(m=on(m,l,a,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,Ll(null,n),n=t.child,m=e.child.memoizedState,m===null?m=Xi(a):(l=m.cachePool,l!==null?(b=Fe._currentValue,l=l.parent!==b?{parent:b,pool:b}:l):l=Pc(),m={baseLanes:m.baseLanes|a,cachePool:l}),n.memoizedState=m,n.childLanes=Ki(e,u,a),t.memoizedState=Vi,Ll(e.child,n)):(Da(t),a=e.child,e=a.sibling,a=ra(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(u=t.deletions,u===null?(t.deletions=[e],t.flags|=16):u.push(e)),t.child=a,t.memoizedState=null,a)}function Ii(e,t){return t=Qr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Qr(e,t){return e=jt(22,e,null,t),e.lanes=0,e}function Qi(e,t,a){return hn(t,e.child,null,a),e=Ii(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fd(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),oi(e.return,t,a)}function Zi(e,t,a,n,l,s){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l,treeForkCount:s}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=n,u.tail=a,u.tailMode=l,u.treeForkCount=s)}function md(e,t,a){var n=t.pendingProps,l=n.revealOrder,s=n.tail;n=n.children;var u=$e.current,m=(u&2)!==0;if(m?(u=u&1|2,t.flags|=128):u&=1,Q($e,u),it(e,t,n,a),n=Ee?Nl:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fd(e,a,t);else if(e.tag===19)fd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&Ur(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Zi(t,!1,l,a,s,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ur(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Zi(t,!0,a,null,s,n);break;case"together":Zi(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function da(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ba|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ln(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=ra(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ra(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function $i(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Cr(e)))}function N0(e,t,a){switch(t.tag){case 3:De(t,t.stateNode.containerInfo),Oa(t,Fe,e.memoizedState.cache),cn();break;case 27:case 5:Rt(t);break;case 4:De(t,t.stateNode.containerInfo);break;case 10:Oa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vi(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Da(t),t.flags|=128,null):(a&t.child.childLanes)!==0?dd(e,t,a):(Da(t),e=da(e,t,a),e!==null?e.sibling:null);Da(t);break;case 19:var l=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Ln(e,t,a,!1),n=(a&t.childLanes)!==0),l){if(n)return md(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Q($e,$e.current),n)break;return null;case 22:return t.lanes=0,rd(e,t,a,t.pendingProps);case 24:Oa(t,Fe,e.memoizedState.cache)}return da(e,t,a)}function gd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pe=!0;else{if(!$i(e,a)&&(t.flags&128)===0)return Pe=!1,N0(e,t,a);Pe=(e.flags&131072)!==0}else Pe=!1,Ee&&(t.flags&1048576)!==0&&Ic(t,Nl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=mn(t.elementType),t.type=e,typeof e=="function")ei(e)?(n=xn(e,n),t.tag=1,t=cd(null,t,e,n,a)):(t.tag=0,t=qi(null,t,e,n,a));else{if(e!=null){var l=e.$$typeof;if(l===Z){t.tag=11,t=ad(null,t,e,n,a);break e}else if(l===X){t.tag=14,t=nd(null,t,e,n,a);break e}}throw t=$(e)||e,Error(c(306,t,""))}}return t;case 0:return qi(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,l=xn(n,t.pendingProps),cd(e,t,n,l,a);case 3:e:{if(De(t,t.stateNode.containerInfo),e===null)throw Error(c(387));n=t.pendingProps;var s=t.memoizedState;l=s.element,hi(e,t),zl(t,n,null,a);var u=t.memoizedState;if(n=u.cache,Oa(t,Fe,n),n!==s.cache&&ci(t,[Fe],a,!0),Ol(),n=u.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:u.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=ud(e,t,n,a);break e}else if(n!==l){l=Dt(Error(c(424)),t),Tl(l),t=ud(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qe=Yt(e.firstChild),rt=t,Ee=!0,Ma=null,Gt=!0,a=ru(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cn(),n===l){t=da(e,t,a);break e}it(e,t,n,a)}t=t.child}return t;case 26:return Ir(e,t),e===null?(a=Tf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ee||(a=t.type,e=t.pendingProps,n=cs(xe.current).createElement(a),n[lt]=t,n[mt]=e,ot(n,a,e),at(n),t.stateNode=n):t.memoizedState=Tf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Rt(t),e===null&&Ee&&(n=t.stateNode=jf(t.type,t.pendingProps,xe.current),rt=t,Gt=!0,l=qe,Ka(t.type)?(Ao=l,qe=Yt(n.firstChild)):qe=l),it(e,t,t.pendingProps.children,a),Ir(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((l=n=qe)&&(n=tg(n,t.type,t.pendingProps,Gt),n!==null?(t.stateNode=n,rt=t,qe=Yt(n.firstChild),Gt=!1,l=!0):l=!1),l||Ra(t)),Rt(t),l=t.type,s=t.pendingProps,u=e!==null?e.memoizedProps:null,n=s.children,wo(l,s)?n=null:u!==null&&wo(l,u)&&(t.flags|=32),t.memoizedState!==null&&(l=ki(e,t,y0,null,null,a),Pl._currentValue=l),Ir(e,t),it(e,t,n,a),t.child;case 6:return e===null&&Ee&&((e=a=qe)&&(a=ag(a,t.pendingProps,Gt),a!==null?(t.stateNode=a,rt=t,qe=null,e=!0):e=!1),e||Ra(t)),null;case 13:return dd(e,t,a);case 4:return De(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=hn(t,null,n,a):it(e,t,n,a),t.child;case 11:return ad(e,t,t.type,t.pendingProps,a);case 7:return it(e,t,t.pendingProps,a),t.child;case 8:return it(e,t,t.pendingProps.children,a),t.child;case 12:return it(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Oa(t,t.type,n.value),it(e,t,n.children,a),t.child;case 9:return l=t.type._context,n=t.pendingProps.children,dn(t),l=st(l),n=n(l),t.flags|=1,it(e,t,n,a),t.child;case 14:return nd(e,t,t.type,t.pendingProps,a);case 15:return ld(e,t,t.type,t.pendingProps,a);case 19:return md(e,t,a);case 31:return w0(e,t,a);case 22:return rd(e,t,a,t.pendingProps);case 24:return dn(t),n=st(Fe),e===null?(l=fi(),l===null&&(l=Be,s=ui(),l.pooledCache=s,s.refCount++,s!==null&&(l.pooledCacheLanes|=a),l=s),t.memoizedState={parent:n,cache:l},gi(t),Oa(t,Fe,l)):((e.lanes&a)!==0&&(hi(e,t),zl(t,null,null,a),Ol()),l=e.memoizedState,s=t.memoizedState,l.parent!==n?(l={parent:n,cache:n},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Oa(t,Fe,n)):(n=s.cache,Oa(t,Fe,n),n!==l.cache&&ci(t,[Fe],a,!0))),it(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function fa(e){e.flags|=4}function Ji(e,t,a,n,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Yd())e.flags|=8192;else throw gn=Rr,mi}else e.flags&=-16777217}function hd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rf(t))if(Yd())e.flags|=8192;else throw gn=Rr,mi}function Zr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Zo():536870912,e.lanes|=t,Jn|=t)}function Gl(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function T0(e,t,a){var n=t.pendingProps;switch(li(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return Ve(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),oa(Fe),Ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Hn(t)?fa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,si())),Ve(t),null;case 26:var l=t.type,s=t.memoizedState;return e===null?(fa(t),s!==null?(Ve(t),hd(t,s)):(Ve(t),Ji(t,l,null,n,a))):s?s!==e.memoizedState?(fa(t),Ve(t),hd(t,s)):(Ve(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&fa(t),Ve(t),Ji(t,l,e,n,a)),null;case 27:if(Qt(t),a=xe.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&fa(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return Ve(t),null}e=ee.current,Hn(t)?Zc(t):(e=jf(l,n,a),t.stateNode=e,fa(t))}return Ve(t),null;case 5:if(Qt(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&fa(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return Ve(t),null}if(s=ee.current,Hn(t))Zc(t);else{var u=cs(xe.current);switch(s){case 1:s=u.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=u.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=u.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=u.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof n.is=="string"?u.createElement("select",{is:n.is}):u.createElement("select"),n.multiple?s.multiple=!0:n.size&&(s.size=n.size);break;default:s=typeof n.is=="string"?u.createElement(l,{is:n.is}):u.createElement(l)}}s[lt]=t,s[mt]=n;e:for(u=t.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}t.stateNode=s;e:switch(ot(s,l,n),l){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&fa(t)}}return Ve(t),Ji(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&fa(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(c(166));if(e=xe.current,Hn(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,l=rt,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[lt]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||ff(e.nodeValue,a)),e||Ra(t,!0)}else e=cs(e).createTextNode(n),e[lt]=t,t.stateNode=e}return Ve(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=Hn(t),a!==null){if(e===null){if(!n)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[lt]=t}else cn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ve(t),e=!1}else a=si(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Nt(t),t):(Nt(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Ve(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Hn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(c(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));l[lt]=t}else cn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ve(t),l=!1}else l=si(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Nt(t),t):(Nt(t),null)}return Nt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==l&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Zr(t,t.updateQueue),Ve(t),null);case 4:return Ke(),e===null&&bo(t.stateNode.containerInfo),Ve(t),null;case 10:return oa(t.type),Ve(t),null;case 19:if(z($e),n=t.memoizedState,n===null)return Ve(t),null;if(l=(t.flags&128)!==0,s=n.rendering,s===null)if(l)Gl(n,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=Ur(e),s!==null){for(t.flags|=128,Gl(n,!1),e=s.updateQueue,t.updateQueue=e,Zr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Vc(a,e),a=a.sibling;return Q($e,$e.current&1|2),Ee&&sa(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&W()>Pr&&(t.flags|=128,l=!0,Gl(n,!1),t.lanes=4194304)}else{if(!l)if(e=Ur(s),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Zr(t,e),Gl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!Ee)return Ve(t),null}else 2*W()-n.renderingStartTime>Pr&&a!==536870912&&(t.flags|=128,l=!0,Gl(n,!1),t.lanes=4194304);n.isBackwards?(s.sibling=t.child,t.child=s):(e=n.last,e!==null?e.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=W(),e.sibling=null,a=$e.current,Q($e,l?a&1|2:a&1),Ee&&sa(t,n.treeForkCount),e):(Ve(t),null);case 22:case 23:return Nt(t),bi(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),a=t.updateQueue,a!==null&&Zr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&z(fn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),oa(Fe),Ve(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function C0(e,t){switch(li(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oa(Fe),Ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Qt(t),null;case 31:if(t.memoizedState!==null){if(Nt(t),t.alternate===null)throw Error(c(340));cn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Nt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));cn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return z($e),null;case 4:return Ke(),null;case 10:return oa(t.type),null;case 22:case 23:return Nt(t),bi(),e!==null&&z(fn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return oa(Fe),null;case 25:return null;default:return null}}function yd(e,t){switch(li(t),t.tag){case 3:oa(Fe),Ke();break;case 26:case 27:case 5:Qt(t);break;case 4:Ke();break;case 31:t.memoizedState!==null&&Nt(t);break;case 13:Nt(t);break;case 19:z($e);break;case 10:oa(t.type);break;case 22:case 23:Nt(t),bi(),e!==null&&z(fn);break;case 24:oa(Fe)}}function Bl(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&e)===e){n=void 0;var s=a.create,u=a.inst;n=s(),u.destroy=n}a=a.next}while(a!==l)}}catch(m){Ue(t,t.return,m)}}function La(e,t,a){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var s=l.next;n=s;do{if((n.tag&e)===e){var u=n.inst,m=u.destroy;if(m!==void 0){u.destroy=void 0,l=t;var b=a,T=m;try{T()}catch(_){Ue(l,b,_)}}}n=n.next}while(n!==s)}}catch(_){Ue(t,t.return,_)}}function xd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{iu(t,a)}catch(n){Ue(e,e.return,n)}}}function pd(e,t,a){a.props=xn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){Ue(e,t,n)}}function Yl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(l){Ue(e,t,l)}}function Jt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){Ue(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){Ue(e,t,l)}else a.current=null}function bd(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){Ue(e,e.return,l)}}function Fi(e,t,a){try{var n=e.stateNode;$0(n,e.type,a,t),n[mt]=t}catch(l){Ue(e,e.return,l)}}function vd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ka(e.type)||e.tag===4}function Wi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ka(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pi(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=na));else if(n!==4&&(n===27&&Ka(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Pi(e,t,a),e=e.sibling;e!==null;)Pi(e,t,a),e=e.sibling}function $r(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ka(e.type)&&(a=e.stateNode),e=e.child,e!==null))for($r(e,t,a),e=e.sibling;e!==null;)$r(e,t,a),e=e.sibling}function Sd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);ot(t,n,a),t[lt]=e,t[mt]=a}catch(s){Ue(e,e.return,s)}}var ma=!1,et=!1,eo=!1,kd=typeof WeakSet=="function"?WeakSet:Set,nt=null;function E0(e,t){if(e=e.containerInfo,ko=ys,e=_c(e),Qs(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{a.nodeType,s.nodeType}catch{a=null;break e}var u=0,m=-1,b=-1,T=0,_=0,G=e,A=null;t:for(;;){for(var R;G!==a||l!==0&&G.nodeType!==3||(m=u+l),G!==s||n!==0&&G.nodeType!==3||(b=u+n),G.nodeType===3&&(u+=G.nodeValue.length),(R=G.firstChild)!==null;)A=G,G=R;for(;;){if(G===e)break t;if(A===a&&++T===l&&(m=u),A===s&&++_===n&&(b=u),(R=G.nextSibling)!==null)break;G=A,A=G.parentNode}G=R}a=m===-1||b===-1?null:{start:m,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(jo={focusedElem:e,selectionRange:a},ys=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){switch(t=nt,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,a=t,l=s.memoizedProps,s=s.memoizedState,n=a.stateNode;try{var te=xn(a.type,l);e=n.getSnapshotBeforeUpdate(te,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(ue){Ue(a,a.return,ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)To(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":To(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}}function jd(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ha(e,a),n&4&&Bl(5,a);break;case 1:if(ha(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(u){Ue(a,a.return,u)}else{var l=xn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(u){Ue(a,a.return,u)}}n&64&&xd(a),n&512&&Yl(a,a.return);break;case 3:if(ha(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{iu(e,t)}catch(u){Ue(a,a.return,u)}}break;case 27:t===null&&n&4&&Sd(a);case 26:case 5:ha(e,a),t===null&&n&4&&bd(a),n&512&&Yl(a,a.return);break;case 12:ha(e,a);break;case 31:ha(e,a),n&4&&Td(e,a);break;case 13:ha(e,a),n&4&&Cd(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=H0.bind(null,a),ng(e,a))));break;case 22:if(n=a.memoizedState!==null||ma,!n){t=t!==null&&t.memoizedState!==null||et,l=ma;var s=et;ma=n,(et=t)&&!s?ya(e,a,(a.subtreeFlags&8772)!==0):ha(e,a),ma=l,et=s}break;case 30:break;default:ha(e,a)}}function wd(e){var t=e.alternate;t!==null&&(e.alternate=null,wd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ms(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xe=null,ht=!1;function ga(e,t,a){for(a=a.child;a!==null;)Nd(e,t,a),a=a.sibling}function Nd(e,t,a){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(dl,a)}catch{}switch(a.tag){case 26:et||Jt(a,t),ga(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:et||Jt(a,t);var n=Xe,l=ht;Ka(a.type)&&(Xe=a.stateNode,ht=!1),ga(e,t,a),Jl(a.stateNode),Xe=n,ht=l;break;case 5:et||Jt(a,t);case 6:if(n=Xe,l=ht,Xe=null,ga(e,t,a),Xe=n,ht=l,Xe!==null)if(ht)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(a.stateNode)}catch(s){Ue(a,t,s)}else try{Xe.removeChild(a.stateNode)}catch(s){Ue(a,t,s)}break;case 18:Xe!==null&&(ht?(e=Xe,pf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ll(e)):pf(Xe,a.stateNode));break;case 4:n=Xe,l=ht,Xe=a.stateNode.containerInfo,ht=!0,ga(e,t,a),Xe=n,ht=l;break;case 0:case 11:case 14:case 15:La(2,a,t),et||La(4,a,t),ga(e,t,a);break;case 1:et||(Jt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&pd(a,t,n)),ga(e,t,a);break;case 21:ga(e,t,a);break;case 22:et=(n=et)||a.memoizedState!==null,ga(e,t,a),et=n;break;default:ga(e,t,a)}}function Td(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ll(e)}catch(a){Ue(t,t.return,a)}}}function Cd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ll(e)}catch(a){Ue(t,t.return,a)}}function A0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new kd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new kd),t;default:throw Error(c(435,e.tag))}}function Jr(e,t){var a=A0(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var l=L0.bind(null,e,n);n.then(l,l)}})}function yt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],s=e,u=t,m=u;e:for(;m!==null;){switch(m.tag){case 27:if(Ka(m.type)){Xe=m.stateNode,ht=!1;break e}break;case 5:Xe=m.stateNode,ht=!1;break e;case 3:case 4:Xe=m.stateNode.containerInfo,ht=!0;break e}m=m.return}if(Xe===null)throw Error(c(160));Nd(s,u,l),Xe=null,ht=!1,s=l.alternate,s!==null&&(s.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ed(t,e),t=t.sibling}var Xt=null;function Ed(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yt(t,e),xt(e),n&4&&(La(3,e,e.return),Bl(3,e),La(5,e,e.return));break;case 1:yt(t,e),xt(e),n&512&&(et||a===null||Jt(a,a.return)),n&64&&ma&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=Xt;if(yt(t,e),xt(e),n&512&&(et||a===null||Jt(a,a.return)),n&4){var s=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(n){case"title":s=l.getElementsByTagName("title")[0],(!s||s[gl]||s[lt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=l.createElement(n),l.head.insertBefore(s,l.querySelector("head > title"))),ot(s,n,a),s[lt]=e,at(s),n=s;break e;case"link":var u=Af("link","href",l).get(n+(a.href||""));if(u){for(var m=0;m<u.length;m++)if(s=u[m],s.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&s.getAttribute("rel")===(a.rel==null?null:a.rel)&&s.getAttribute("title")===(a.title==null?null:a.title)&&s.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){u.splice(m,1);break t}}s=l.createElement(n),ot(s,n,a),l.head.appendChild(s);break;case"meta":if(u=Af("meta","content",l).get(n+(a.content||""))){for(m=0;m<u.length;m++)if(s=u[m],s.getAttribute("content")===(a.content==null?null:""+a.content)&&s.getAttribute("name")===(a.name==null?null:a.name)&&s.getAttribute("property")===(a.property==null?null:a.property)&&s.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&s.getAttribute("charset")===(a.charSet==null?null:a.charSet)){u.splice(m,1);break t}}s=l.createElement(n),ot(s,n,a),l.head.appendChild(s);break;default:throw Error(c(468,n))}s[lt]=e,at(s),n=s}e.stateNode=n}else Mf(l,e.type,e.stateNode);else e.stateNode=Ef(l,n,e.memoizedProps);else s!==n?(s===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):s.count--,n===null?Mf(l,e.type,e.stateNode):Ef(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Fi(e,e.memoizedProps,a.memoizedProps)}break;case 27:yt(t,e),xt(e),n&512&&(et||a===null||Jt(a,a.return)),a!==null&&n&4&&Fi(e,e.memoizedProps,a.memoizedProps);break;case 5:if(yt(t,e),xt(e),n&512&&(et||a===null||Jt(a,a.return)),e.flags&32){l=e.stateNode;try{Cn(l,"")}catch(te){Ue(e,e.return,te)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,Fi(e,l,a!==null?a.memoizedProps:l)),n&1024&&(eo=!0);break;case 6:if(yt(t,e),xt(e),n&4){if(e.stateNode===null)throw Error(c(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(te){Ue(e,e.return,te)}}break;case 3:if(fs=null,l=Xt,Xt=us(t.containerInfo),yt(t,e),Xt=l,xt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{ll(t.containerInfo)}catch(te){Ue(e,e.return,te)}eo&&(eo=!1,Ad(e));break;case 4:n=Xt,Xt=us(e.stateNode.containerInfo),yt(t,e),xt(e),Xt=n;break;case 12:yt(t,e),xt(e);break;case 31:yt(t,e),xt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Jr(e,n)));break;case 13:yt(t,e),xt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Wr=W()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Jr(e,n)));break;case 22:l=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,T=ma,_=et;if(ma=T||l,et=_||b,yt(t,e),et=_,ma=T,xt(e),n&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||b||ma||et||pn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){b=a=t;try{if(s=b.stateNode,l)u=s.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{m=b.stateNode;var G=b.memoizedProps.style,A=G!=null&&G.hasOwnProperty("display")?G.display:null;m.style.display=A==null||typeof A=="boolean"?"":(""+A).trim()}}catch(te){Ue(b,b.return,te)}}}else if(t.tag===6){if(a===null){b=t;try{b.stateNode.nodeValue=l?"":b.memoizedProps}catch(te){Ue(b,b.return,te)}}}else if(t.tag===18){if(a===null){b=t;try{var R=b.stateNode;l?bf(R,!0):bf(b.stateNode,!1)}catch(te){Ue(b,b.return,te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Jr(e,a))));break;case 19:yt(t,e),xt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Jr(e,n)));break;case 30:break;case 21:break;default:yt(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(vd(n)){a=n;break}n=n.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var l=a.stateNode,s=Wi(e);$r(e,s,l);break;case 5:var u=a.stateNode;a.flags&32&&(Cn(u,""),a.flags&=-33);var m=Wi(e);$r(e,m,u);break;case 3:case 4:var b=a.stateNode.containerInfo,T=Wi(e);Pi(e,T,b);break;default:throw Error(c(161))}}catch(_){Ue(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ad(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ad(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ha(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)jd(e,t.alternate,t),t=t.sibling}function pn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:La(4,t,t.return),pn(t);break;case 1:Jt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&pd(t,t.return,a),pn(t);break;case 27:Jl(t.stateNode);case 26:case 5:Jt(t,t.return),pn(t);break;case 22:t.memoizedState===null&&pn(t);break;case 30:pn(t);break;default:pn(t)}e=e.sibling}}function ya(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,l=e,s=t,u=s.flags;switch(s.tag){case 0:case 11:case 15:ya(l,s,a),Bl(4,s);break;case 1:if(ya(l,s,a),n=s,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(T){Ue(n,n.return,T)}if(n=s,l=n.updateQueue,l!==null){var m=n.stateNode;try{var b=l.shared.hiddenCallbacks;if(b!==null)for(l.shared.hiddenCallbacks=null,l=0;l<b.length;l++)su(b[l],m)}catch(T){Ue(n,n.return,T)}}a&&u&64&&xd(s),Yl(s,s.return);break;case 27:Sd(s);case 26:case 5:ya(l,s,a),a&&n===null&&u&4&&bd(s),Yl(s,s.return);break;case 12:ya(l,s,a);break;case 31:ya(l,s,a),a&&u&4&&Td(l,s);break;case 13:ya(l,s,a),a&&u&4&&Cd(l,s);break;case 22:s.memoizedState===null&&ya(l,s,a),Yl(s,s.return);break;case 30:break;default:ya(l,s,a)}t=t.sibling}}function to(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Cl(a))}function ao(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cl(e))}function Kt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Md(e,t,a,n),t=t.sibling}function Md(e,t,a,n){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Kt(e,t,a,n),l&2048&&Bl(9,t);break;case 1:Kt(e,t,a,n);break;case 3:Kt(e,t,a,n),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cl(e)));break;case 12:if(l&2048){Kt(e,t,a,n),e=t.stateNode;try{var s=t.memoizedProps,u=s.id,m=s.onPostCommit;typeof m=="function"&&m(u,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Ue(t,t.return,b)}}else Kt(e,t,a,n);break;case 31:Kt(e,t,a,n);break;case 13:Kt(e,t,a,n);break;case 23:break;case 22:s=t.stateNode,u=t.alternate,t.memoizedState!==null?s._visibility&2?Kt(e,t,a,n):ql(e,t):s._visibility&2?Kt(e,t,a,n):(s._visibility|=2,Qn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),l&2048&&to(u,t);break;case 24:Kt(e,t,a,n),l&2048&&ao(t.alternate,t);break;default:Kt(e,t,a,n)}}function Qn(e,t,a,n,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,u=t,m=a,b=n,T=u.flags;switch(u.tag){case 0:case 11:case 15:Qn(s,u,m,b,l),Bl(8,u);break;case 23:break;case 22:var _=u.stateNode;u.memoizedState!==null?_._visibility&2?Qn(s,u,m,b,l):ql(s,u):(_._visibility|=2,Qn(s,u,m,b,l)),l&&T&2048&&to(u.alternate,u);break;case 24:Qn(s,u,m,b,l),l&&T&2048&&ao(u.alternate,u);break;default:Qn(s,u,m,b,l)}t=t.sibling}}function ql(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,l=n.flags;switch(n.tag){case 22:ql(a,n),l&2048&&to(n.alternate,n);break;case 24:ql(a,n),l&2048&&ao(n.alternate,n);break;default:ql(a,n)}t=t.sibling}}var Vl=8192;function Zn(e,t,a){if(e.subtreeFlags&Vl)for(e=e.child;e!==null;)Rd(e,t,a),e=e.sibling}function Rd(e,t,a){switch(e.tag){case 26:Zn(e,t,a),e.flags&Vl&&e.memoizedState!==null&&hg(a,Xt,e.memoizedState,e.memoizedProps);break;case 5:Zn(e,t,a);break;case 3:case 4:var n=Xt;Xt=us(e.stateNode.containerInfo),Zn(e,t,a),Xt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Vl,Vl=16777216,Zn(e,t,a),Vl=n):Zn(e,t,a));break;default:Zn(e,t,a)}}function Od(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];nt=n,_d(n,e)}Od(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zd(e),e=e.sibling}function zd(e){switch(e.tag){case 0:case 11:case 15:Xl(e),e.flags&2048&&La(9,e,e.return);break;case 3:Xl(e);break;case 12:Xl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fr(e)):Xl(e);break;default:Xl(e)}}function Fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];nt=n,_d(n,e)}Od(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:La(8,t,t.return),Fr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Fr(t));break;default:Fr(t)}e=e.sibling}}function _d(e,t){for(;nt!==null;){var a=nt;switch(a.tag){case 0:case 11:case 15:La(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Cl(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,nt=n;else e:for(a=e;nt!==null;){n=nt;var l=n.sibling,s=n.return;if(wd(n),n===a){nt=null;break e}if(l!==null){l.return=s,nt=l;break e}nt=s}}}var M0={getCacheForType:function(e){var t=st(Fe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return st(Fe).controller.signal}},R0=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Be=null,je=null,Te=0,_e=0,Tt=null,Ga=!1,$n=!1,no=!1,xa=0,Ze=0,Ba=0,bn=0,lo=0,Ct=0,Jn=0,Kl=null,pt=null,ro=!1,Wr=0,Ud=0,Pr=1/0,es=null,Ya=null,tt=0,qa=null,Fn=null,pa=0,so=0,io=null,Dd=null,Il=0,oo=null;function Et(){return(Oe&2)!==0&&Te!==0?Te&-Te:C.T!==null?ho():Wo()}function Hd(){if(Ct===0)if((Te&536870912)===0||Ee){var e=or;or<<=1,(or&3932160)===0&&(or=262144),Ct=e}else Ct=536870912;return e=wt.current,e!==null&&(e.flags|=32),Ct}function bt(e,t,a){(e===Be&&(_e===2||_e===9)||e.cancelPendingCommit!==null)&&(Wn(e,0),Va(e,Te,Ct,!1)),ml(e,a),((Oe&2)===0||e!==Be)&&(e===Be&&((Oe&2)===0&&(bn|=a),Ze===4&&Va(e,Te,Ct,!1)),Ft(e))}function Ld(e,t,a){if((Oe&6)!==0)throw Error(c(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||fl(e,t),l=n?_0(e,t):uo(e,t,!0),s=n;do{if(l===0){$n&&!n&&Va(e,t,0,!1);break}else{if(a=e.current.alternate,s&&!O0(a)){l=uo(e,t,!1),s=!1;continue}if(l===2){if(s=t,e.errorRecoveryDisabledLanes&s)var u=0;else u=e.pendingLanes&-536870913,u=u!==0?u:u&536870912?536870912:0;if(u!==0){t=u;e:{var m=e;l=Kl;var b=m.current.memoizedState.isDehydrated;if(b&&(Wn(m,u).flags|=256),u=uo(m,u,!1),u!==2){if(no&&!b){m.errorRecoveryDisabledLanes|=s,bn|=s,l=4;break e}s=pt,pt=l,s!==null&&(pt===null?pt=s:pt.push.apply(pt,s))}l=u}if(s=!1,l!==2)continue}}if(l===1){Wn(e,0),Va(e,t,0,!0);break}e:{switch(n=e,s=l,s){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Va(n,t,Ct,!Ga);break e;case 2:pt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(l=Wr+300-W(),10<l)){if(Va(n,t,Ct,!Ga),ur(n,0,!0)!==0)break e;pa=t,n.timeoutHandle=yf(Gd.bind(null,n,a,pt,es,ro,t,Ct,bn,Jn,Ga,s,"Throttled",-0,0),l);break e}Gd(n,a,pt,es,ro,t,Ct,bn,Jn,Ga,s,null,-0,0)}}break}while(!0);Ft(e)}function Gd(e,t,a,n,l,s,u,m,b,T,_,G,A,R){if(e.timeoutHandle=-1,G=t.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:na},Rd(t,s,G);var te=(s&62914560)===s?Wr-W():(s&4194048)===s?Ud-W():0;if(te=yg(G,te),te!==null){pa=s,e.cancelPendingCommit=te(Qd.bind(null,e,t,s,a,n,l,u,m,b,_,G,null,A,R)),Va(e,s,u,!T);return}}Qd(e,t,s,a,n,l,u,m,b)}function O0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],s=l.getSnapshot;l=l.value;try{if(!kt(s(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Va(e,t,a,n){t&=~lo,t&=~bn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var l=t;0<l;){var s=31-St(l),u=1<<s;n[s]=-1,l&=~u}a!==0&&$o(e,a,t)}function ts(){return(Oe&6)===0?(Ql(0),!1):!0}function co(){if(je!==null){if(_e===0)var e=je.return;else e=je,ia=un=null,Ni(e),qn=null,Al=0,e=je;for(;e!==null;)yd(e.alternate,e),e=e.return;je=null}}function Wn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,W0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),pa=0,co(),Be=e,je=a=ra(e.current,null),Te=t,_e=0,Tt=null,Ga=!1,$n=fl(e,t),no=!1,Jn=Ct=lo=bn=Ba=Ze=0,pt=Kl=null,ro=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var l=31-St(n),s=1<<l;t|=e[l],n&=~s}return xa=t,kr(),a}function Bd(e,t){pe=null,C.H=Hl,t===Yn||t===Mr?(t=au(),_e=3):t===mi?(t=au(),_e=4):_e=t===Yi?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tt=t,je===null&&(Ze=1,Xr(e,Dt(t,e.current)))}function Yd(){var e=wt.current;return e===null?!0:(Te&4194048)===Te?Bt===null:(Te&62914560)===Te||(Te&536870912)!==0?e===Bt:!1}function qd(){var e=C.H;return C.H=Hl,e===null?Hl:e}function Vd(){var e=C.A;return C.A=M0,e}function as(){Ze=4,Ga||(Te&4194048)!==Te&&wt.current!==null||($n=!0),(Ba&134217727)===0&&(bn&134217727)===0||Be===null||Va(Be,Te,Ct,!1)}function uo(e,t,a){var n=Oe;Oe|=2;var l=qd(),s=Vd();(Be!==e||Te!==t)&&(es=null,Wn(e,t)),t=!1;var u=Ze;e:do try{if(_e!==0&&je!==null){var m=je,b=Tt;switch(_e){case 8:co(),u=6;break e;case 3:case 2:case 9:case 6:wt.current===null&&(t=!0);var T=_e;if(_e=0,Tt=null,Pn(e,m,b,T),a&&$n){u=0;break e}break;default:T=_e,_e=0,Tt=null,Pn(e,m,b,T)}}z0(),u=Ze;break}catch(_){Bd(e,_)}while(!0);return t&&e.shellSuspendCounter++,ia=un=null,Oe=n,C.H=l,C.A=s,je===null&&(Be=null,Te=0,kr()),u}function z0(){for(;je!==null;)Xd(je)}function _0(e,t){var a=Oe;Oe|=2;var n=qd(),l=Vd();Be!==e||Te!==t?(es=null,Pr=W()+500,Wn(e,t)):$n=fl(e,t);e:do try{if(_e!==0&&je!==null){t=je;var s=Tt;t:switch(_e){case 1:_e=0,Tt=null,Pn(e,t,s,1);break;case 2:case 9:if(eu(s)){_e=0,Tt=null,Kd(t);break}t=function(){_e!==2&&_e!==9||Be!==e||(_e=7),Ft(e)},s.then(t,t);break e;case 3:_e=7;break e;case 4:_e=5;break e;case 7:eu(s)?(_e=0,Tt=null,Kd(t)):(_e=0,Tt=null,Pn(e,t,s,7));break;case 5:var u=null;switch(je.tag){case 26:u=je.memoizedState;case 5:case 27:var m=je;if(u?Rf(u):m.stateNode.complete){_e=0,Tt=null;var b=m.sibling;if(b!==null)je=b;else{var T=m.return;T!==null?(je=T,ns(T)):je=null}break t}}_e=0,Tt=null,Pn(e,t,s,5);break;case 6:_e=0,Tt=null,Pn(e,t,s,6);break;case 8:co(),Ze=6;break e;default:throw Error(c(462))}}U0();break}catch(_){Bd(e,_)}while(!0);return ia=un=null,C.H=n,C.A=l,Oe=a,je!==null?0:(Be=null,Te=0,kr(),Ze)}function U0(){for(;je!==null&&!J();)Xd(je)}function Xd(e){var t=gd(e.alternate,e,xa);e.memoizedProps=e.pendingProps,t===null?ns(e):je=t}function Kd(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=od(a,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=od(a,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:Ni(t);default:yd(a,t),t=je=Vc(t,xa),t=gd(a,t,xa)}e.memoizedProps=e.pendingProps,t===null?ns(e):je=t}function Pn(e,t,a,n){ia=un=null,Ni(t),qn=null,Al=0;var l=t.return;try{if(j0(e,l,t,a,Te)){Ze=1,Xr(e,Dt(a,e.current)),je=null;return}}catch(s){if(l!==null)throw je=l,s;Ze=1,Xr(e,Dt(a,e.current)),je=null;return}t.flags&32768?(Ee||n===1?e=!0:$n||(Te&536870912)!==0?e=!1:(Ga=e=!0,(n===2||n===9||n===3||n===6)&&(n=wt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Id(t,e)):ns(t)}function ns(e){var t=e;do{if((t.flags&32768)!==0){Id(t,Ga);return}e=t.return;var a=T0(t.alternate,t,xa);if(a!==null){je=a;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Ze===0&&(Ze=5)}function Id(e,t){do{var a=C0(e.alternate,e);if(a!==null){a.flags&=32767,je=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=a}while(e!==null);Ze=6,je=null}function Qd(e,t,a,n,l,s,u,m,b){e.cancelPendingCommit=null;do ls();while(tt!==0);if((Oe&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(s=t.lanes|t.childLanes,s|=Ws,gm(e,a,s,u,m,b),e===Be&&(je=Be=null,Te=0),Fn=t,qa=e,pa=a,so=s,io=l,Dd=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,G0(ze,function(){return Wd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=C.T,C.T=null,l=L.p,L.p=2,u=Oe,Oe|=4;try{E0(e,t,a)}finally{Oe=u,L.p=l,C.T=n}}tt=1,Zd(),$d(),Jd()}}function Zd(){if(tt===1){tt=0;var e=qa,t=Fn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=C.T,C.T=null;var n=L.p;L.p=2;var l=Oe;Oe|=4;try{Ed(t,e);var s=jo,u=_c(e.containerInfo),m=s.focusedElem,b=s.selectionRange;if(u!==m&&m&&m.ownerDocument&&zc(m.ownerDocument.documentElement,m)){if(b!==null&&Qs(m)){var T=b.start,_=b.end;if(_===void 0&&(_=T),"selectionStart"in m)m.selectionStart=T,m.selectionEnd=Math.min(_,m.value.length);else{var G=m.ownerDocument||document,A=G&&G.defaultView||window;if(A.getSelection){var R=A.getSelection(),te=m.textContent.length,ue=Math.min(b.start,te),Ge=b.end===void 0?ue:Math.min(b.end,te);!R.extend&&ue>Ge&&(u=Ge,Ge=ue,ue=u);var j=Oc(m,ue),k=Oc(m,Ge);if(j&&k&&(R.rangeCount!==1||R.anchorNode!==j.node||R.anchorOffset!==j.offset||R.focusNode!==k.node||R.focusOffset!==k.offset)){var N=G.createRange();N.setStart(j.node,j.offset),R.removeAllRanges(),ue>Ge?(R.addRange(N),R.extend(k.node,k.offset)):(N.setEnd(k.node,k.offset),R.addRange(N))}}}}for(G=[],R=m;R=R.parentNode;)R.nodeType===1&&G.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<G.length;m++){var U=G[m];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}ys=!!ko,jo=ko=null}finally{Oe=l,L.p=n,C.T=a}}e.current=t,tt=2}}function $d(){if(tt===2){tt=0;var e=qa,t=Fn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=C.T,C.T=null;var n=L.p;L.p=2;var l=Oe;Oe|=4;try{jd(e,t.alternate,t)}finally{Oe=l,L.p=n,C.T=a}}tt=3}}function Jd(){if(tt===4||tt===3){tt=0,F();var e=qa,t=Fn,a=pa,n=Dd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?tt=5:(tt=0,Fn=qa=null,Fd(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ya=null),Es(a),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(dl,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=C.T,l=L.p,L.p=2,C.T=null;try{for(var s=e.onRecoverableError,u=0;u<n.length;u++){var m=n[u];s(m.value,{componentStack:m.stack})}}finally{C.T=t,L.p=l}}(pa&3)!==0&&ls(),Ft(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===oo?Il++:(Il=0,oo=e):Il=0,Ql(0)}}function Fd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Cl(t)))}function ls(){return Zd(),$d(),Jd(),Wd()}function Wd(){if(tt!==5)return!1;var e=qa,t=so;so=0;var a=Es(pa),n=C.T,l=L.p;try{L.p=32>a?32:a,C.T=null,a=io,io=null;var s=qa,u=pa;if(tt=0,Fn=qa=null,pa=0,(Oe&6)!==0)throw Error(c(331));var m=Oe;if(Oe|=4,zd(s.current),Md(s,s.current,u,a),Oe=m,Ql(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(dl,s)}catch{}return!0}finally{L.p=l,C.T=n,Fd(e,t)}}function Pd(e,t,a){t=Dt(a,t),t=Bi(e.stateNode,t,2),e=Ua(e,t,2),e!==null&&(ml(e,2),Ft(e))}function Ue(e,t,a){if(e.tag===3)Pd(e,e,a);else for(;t!==null;){if(t.tag===3){Pd(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ya===null||!Ya.has(n))){e=Dt(a,e),a=ed(2),n=Ua(t,a,2),n!==null&&(td(a,n,t,e),ml(n,2),Ft(n));break}}t=t.return}}function fo(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new R0;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(a)||(no=!0,l.add(a),e=D0.bind(null,e,t,a),t.then(e,e))}function D0(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Be===e&&(Te&a)===a&&(Ze===4||Ze===3&&(Te&62914560)===Te&&300>W()-Wr?(Oe&2)===0&&Wn(e,0):lo|=a,Jn===Te&&(Jn=0)),Ft(e)}function ef(e,t){t===0&&(t=Zo()),e=sn(e,t),e!==null&&(ml(e,t),Ft(e))}function H0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),ef(e,a)}function L0(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(c(314))}n!==null&&n.delete(t),ef(e,a)}function G0(e,t){return cl(e,t)}var rs=null,el=null,mo=!1,ss=!1,go=!1,Xa=0;function Ft(e){e!==el&&e.next===null&&(el===null?rs=el=e:el=el.next=e),ss=!0,mo||(mo=!0,Y0())}function Ql(e,t){if(!go&&ss){go=!0;do for(var a=!1,n=rs;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var s=0;else{var u=n.suspendedLanes,m=n.pingedLanes;s=(1<<31-St(42|e)+1)-1,s&=l&~(u&~m),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(a=!0,lf(n,s))}else s=Te,s=ur(n,n===Be?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(s&3)===0||fl(n,s)||(a=!0,lf(n,s));n=n.next}while(a);go=!1}}function B0(){tf()}function tf(){ss=mo=!1;var e=0;Xa!==0&&F0()&&(e=Xa);for(var t=W(),a=null,n=rs;n!==null;){var l=n.next,s=af(n,t);s===0?(n.next=null,a===null?rs=l:a.next=l,l===null&&(el=a)):(a=n,(e!==0||(s&3)!==0)&&(ss=!0)),n=l}tt!==0&&tt!==5||Ql(e),Xa!==0&&(Xa=0)}function af(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var u=31-St(s),m=1<<u,b=l[u];b===-1?((m&a)===0||(m&n)!==0)&&(l[u]=mm(m,t)):b<=t&&(e.expiredLanes|=m),s&=~m}if(t=Be,a=Te,a=ur(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(_e===2||_e===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&ul(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||fl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&ul(n),Es(a)){case 2:case 8:a=me;break;case 32:a=ze;break;case 268435456:a=Ot;break;default:a=ze}return n=nf.bind(null,e),a=cl(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&ul(n),e.callbackPriority=2,e.callbackNode=null,2}function nf(e,t){if(tt!==0&&tt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ls()&&e.callbackNode!==a)return null;var n=Te;return n=ur(e,e===Be?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Ld(e,n,t),af(e,W()),e.callbackNode!=null&&e.callbackNode===a?nf.bind(null,e):null)}function lf(e,t){if(ls())return null;Ld(e,t,!0)}function Y0(){P0(function(){(Oe&6)!==0?cl(oe,B0):tf()})}function ho(){if(Xa===0){var e=Gn;e===0&&(e=ir,ir<<=1,(ir&261888)===0&&(ir=256)),Xa=e}return Xa}function rf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:gr(""+e)}function sf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function q0(e,t,a,n,l){if(t==="submit"&&a&&a.stateNode===l){var s=rf((l[mt]||null).action),u=n.submitter;u&&(t=(t=u[mt]||null)?rf(t.formAction):u.getAttribute("formAction"),t!==null&&(s=t,u=null));var m=new pr("action","action",null,n,l);e.push({event:m,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Xa!==0){var b=u?sf(l,u):new FormData(l);_i(a,{pending:!0,data:b,method:l.method,action:s},null,b)}}else typeof s=="function"&&(m.preventDefault(),b=u?sf(l,u):new FormData(l),_i(a,{pending:!0,data:b,method:l.method,action:s},s,b))},currentTarget:l}]})}}for(var yo=0;yo<Fs.length;yo++){var xo=Fs[yo],V0=xo.toLowerCase(),X0=xo[0].toUpperCase()+xo.slice(1);Vt(V0,"on"+X0)}Vt(Hc,"onAnimationEnd"),Vt(Lc,"onAnimationIteration"),Vt(Gc,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(s0,"onTransitionRun"),Vt(i0,"onTransitionStart"),Vt(o0,"onTransitionCancel"),Vt(Bc,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),an("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),an("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),an("onBeforeInput",["compositionend","keypress","textInput","paste"]),an("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function of(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],l=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var u=n.length-1;0<=u;u--){var m=n[u],b=m.instance,T=m.currentTarget;if(m=m.listener,b!==s&&l.isPropagationStopped())break e;s=m,l.currentTarget=T;try{s(l)}catch(_){Sr(_)}l.currentTarget=null,s=b}else for(u=0;u<n.length;u++){if(m=n[u],b=m.instance,T=m.currentTarget,m=m.listener,b!==s&&l.isPropagationStopped())break e;s=m,l.currentTarget=T;try{s(l)}catch(_){Sr(_)}l.currentTarget=null,s=b}}}}function we(e,t){var a=t[As];a===void 0&&(a=t[As]=new Set);var n=e+"__bubble";a.has(n)||(cf(t,e,2,!1),a.add(n))}function po(e,t,a){var n=0;t&&(n|=4),cf(a,e,n,t)}var is="_reactListening"+Math.random().toString(36).slice(2);function bo(e){if(!e[is]){e[is]=!0,tc.forEach(function(a){a!=="selectionchange"&&(K0.has(a)||po(a,!1,e),po(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[is]||(t[is]=!0,po("selectionchange",!1,t))}}function cf(e,t,a,n){switch(Lf(t)){case 2:var l=bg;break;case 8:l=vg;break;default:l=_o}a=l.bind(null,t,a,e),l=void 0,!Ls||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function vo(e,t,a,n,l){var s=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var m=n.stateNode.containerInfo;if(m===l)break;if(u===4)for(u=n.return;u!==null;){var b=u.tag;if((b===3||b===4)&&u.stateNode.containerInfo===l)return;u=u.return}for(;m!==null;){if(u=kn(m),u===null)return;if(b=u.tag,b===5||b===6||b===26||b===27){n=s=u;continue e}m=m.parentNode}}n=n.return}mc(function(){var T=s,_=Ds(a),G=[];e:{var A=Yc.get(e);if(A!==void 0){var R=pr,te=e;switch(e){case"keypress":if(yr(a)===0)break e;case"keydown":case"keyup":R=Lm;break;case"focusin":te="focus",R=qs;break;case"focusout":te="blur",R=qs;break;case"beforeblur":case"afterblur":R=qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Tm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=Ym;break;case Hc:case Lc:case Gc:R=Am;break;case Bc:R=Vm;break;case"scroll":case"scrollend":R=wm;break;case"wheel":R=Km;break;case"copy":case"cut":case"paste":R=Rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=pc;break;case"toggle":case"beforetoggle":R=Qm}var ue=(t&4)!==0,Ge=!ue&&(e==="scroll"||e==="scrollend"),j=ue?A!==null?A+"Capture":null:A;ue=[];for(var k=T,N;k!==null;){var U=k;if(N=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||N===null||j===null||(U=yl(k,j),U!=null&&ue.push($l(k,U,N))),Ge)break;k=k.return}0<ue.length&&(A=new R(A,te,null,a,_),G.push({event:A,listeners:ue}))}}if((t&7)===0){e:{if(A=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",A&&a!==Us&&(te=a.relatedTarget||a.fromElement)&&(kn(te)||te[Sn]))break e;if((R||A)&&(A=_.window===_?_:(A=_.ownerDocument)?A.defaultView||A.parentWindow:window,R?(te=a.relatedTarget||a.toElement,R=T,te=te?kn(te):null,te!==null&&(Ge=f(te),ue=te.tag,te!==Ge||ue!==5&&ue!==27&&ue!==6)&&(te=null)):(R=null,te=T),R!==te)){if(ue=yc,U="onMouseLeave",j="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ue=pc,U="onPointerLeave",j="onPointerEnter",k="pointer"),Ge=R==null?A:hl(R),N=te==null?A:hl(te),A=new ue(U,k+"leave",R,a,_),A.target=Ge,A.relatedTarget=N,U=null,kn(_)===T&&(ue=new ue(j,k+"enter",te,a,_),ue.target=N,ue.relatedTarget=Ge,U=ue),Ge=U,R&&te)t:{for(ue=I0,j=R,k=te,N=0,U=j;U;U=ue(U))N++;U=0;for(var ce=k;ce;ce=ue(ce))U++;for(;0<N-U;)j=ue(j),N--;for(;0<U-N;)k=ue(k),U--;for(;N--;){if(j===k||k!==null&&j===k.alternate){ue=j;break t}j=ue(j),k=ue(k)}ue=null}else ue=null;R!==null&&uf(G,A,R,ue,!1),te!==null&&Ge!==null&&uf(G,Ge,te,ue,!0)}}e:{if(A=T?hl(T):window,R=A.nodeName&&A.nodeName.toLowerCase(),R==="select"||R==="input"&&A.type==="file")var Me=Tc;else if(wc(A))if(Cc)Me=n0;else{Me=t0;var ne=e0}else R=A.nodeName,!R||R.toLowerCase()!=="input"||A.type!=="checkbox"&&A.type!=="radio"?T&&_s(T.elementType)&&(Me=Tc):Me=a0;if(Me&&(Me=Me(e,T))){Nc(G,Me,a,_);break e}ne&&ne(e,A,T),e==="focusout"&&T&&A.type==="number"&&T.memoizedProps.value!=null&&zs(A,"number",A.value)}switch(ne=T?hl(T):window,e){case"focusin":(wc(ne)||ne.contentEditable==="true")&&(Rn=ne,Zs=T,wl=null);break;case"focusout":wl=Zs=Rn=null;break;case"mousedown":$s=!0;break;case"contextmenu":case"mouseup":case"dragend":$s=!1,Uc(G,a,_);break;case"selectionchange":if(r0)break;case"keydown":case"keyup":Uc(G,a,_)}var be;if(Xs)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Mn?kc(e,a)&&(Ce="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(bc&&a.locale!=="ko"&&(Mn||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Mn&&(be=gc()):(Ea=_,Gs="value"in Ea?Ea.value:Ea.textContent,Mn=!0)),ne=os(T,Ce),0<ne.length&&(Ce=new xc(Ce,e,null,a,_),G.push({event:Ce,listeners:ne}),be?Ce.data=be:(be=jc(a),be!==null&&(Ce.data=be)))),(be=$m?Jm(e,a):Fm(e,a))&&(Ce=os(T,"onBeforeInput"),0<Ce.length&&(ne=new xc("onBeforeInput","beforeinput",null,a,_),G.push({event:ne,listeners:Ce}),ne.data=be)),q0(G,e,T,a,_)}of(G,t)})}function $l(e,t,a){return{instance:e,listener:t,currentTarget:a}}function os(e,t){for(var a=t+"Capture",n=[];e!==null;){var l=e,s=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||s===null||(l=yl(e,a),l!=null&&n.unshift($l(e,l,s)),l=yl(e,t),l!=null&&n.push($l(e,l,s))),e.tag===3)return n;e=e.return}return[]}function I0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function uf(e,t,a,n,l){for(var s=t._reactName,u=[];a!==null&&a!==n;){var m=a,b=m.alternate,T=m.stateNode;if(m=m.tag,b!==null&&b===n)break;m!==5&&m!==26&&m!==27||T===null||(b=T,l?(T=yl(a,s),T!=null&&u.unshift($l(a,T,b))):l||(T=yl(a,s),T!=null&&u.push($l(a,T,b)))),a=a.return}u.length!==0&&e.push({event:t,listeners:u})}var Q0=/\r\n?/g,Z0=/\u0000|\uFFFD/g;function df(e){return(typeof e=="string"?e:""+e).replace(Q0,`
`).replace(Z0,"")}function ff(e,t){return t=df(t),df(e)===t}function Le(e,t,a,n,l,s){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Cn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Cn(e,""+n);break;case"className":fr(e,"class",n);break;case"tabIndex":fr(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(e,a,n);break;case"style":dc(e,n,s);break;case"data":if(t!=="object"){fr(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=gr(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(a==="formAction"?(t!=="input"&&Le(e,t,"name",l.name,l,null),Le(e,t,"formEncType",l.formEncType,l,null),Le(e,t,"formMethod",l.formMethod,l,null),Le(e,t,"formTarget",l.formTarget,l,null)):(Le(e,t,"encType",l.encType,l,null),Le(e,t,"method",l.method,l,null),Le(e,t,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=gr(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=na);break;case"onScroll":n!=null&&we("scroll",e);break;case"onScrollEnd":n!=null&&we("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=gr(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":we("beforetoggle",e),we("toggle",e),dr(e,"popover",n);break;case"xlinkActuate":aa(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":aa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":aa(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":aa(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":aa(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":aa(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":aa(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":aa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":aa(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":dr(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=km.get(a)||a,dr(e,a,n))}}function So(e,t,a,n,l,s){switch(a){case"style":dc(e,n,s);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Cn(e,n):(typeof n=="number"||typeof n=="bigint")&&Cn(e,""+n);break;case"onScroll":n!=null&&we("scroll",e);break;case"onScrollEnd":n!=null&&we("scrollend",e);break;case"onClick":n!=null&&(e.onclick=na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ac.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),s=e[mt]||null,s=s!=null?s[a]:null,typeof s=="function"&&e.removeEventListener(t,s,l),typeof n=="function")){typeof s!="function"&&s!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,l);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):dr(e,a,n)}}}function ot(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",e),we("load",e);var n=!1,l=!1,s;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];if(u!=null)switch(s){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Le(e,t,s,u,a,null)}}l&&Le(e,t,"srcSet",a.srcSet,a,null),n&&Le(e,t,"src",a.src,a,null);return;case"input":we("invalid",e);var m=s=u=l=null,b=null,T=null;for(n in a)if(a.hasOwnProperty(n)){var _=a[n];if(_!=null)switch(n){case"name":l=_;break;case"type":u=_;break;case"checked":b=_;break;case"defaultChecked":T=_;break;case"value":s=_;break;case"defaultValue":m=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(c(137,t));break;default:Le(e,t,n,_,a,null)}}ic(e,s,m,b,T,u,l,!1);return;case"select":we("invalid",e),n=u=s=null;for(l in a)if(a.hasOwnProperty(l)&&(m=a[l],m!=null))switch(l){case"value":s=m;break;case"defaultValue":u=m;break;case"multiple":n=m;default:Le(e,t,l,m,a,null)}t=s,a=u,e.multiple=!!n,t!=null?Tn(e,!!n,t,!1):a!=null&&Tn(e,!!n,a,!0);return;case"textarea":we("invalid",e),s=l=n=null;for(u in a)if(a.hasOwnProperty(u)&&(m=a[u],m!=null))switch(u){case"value":n=m;break;case"defaultValue":l=m;break;case"children":s=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(c(91));break;default:Le(e,t,u,m,a,null)}cc(e,n,l,s);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(n=a[b],n!=null))switch(b){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Le(e,t,b,n,a,null)}return;case"dialog":we("beforetoggle",e),we("toggle",e),we("cancel",e),we("close",e);break;case"iframe":case"object":we("load",e);break;case"video":case"audio":for(n=0;n<Zl.length;n++)we(Zl[n],e);break;case"image":we("error",e),we("load",e);break;case"details":we("toggle",e);break;case"embed":case"source":case"link":we("error",e),we("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(T in a)if(a.hasOwnProperty(T)&&(n=a[T],n!=null))switch(T){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Le(e,t,T,n,a,null)}return;default:if(_s(t)){for(_ in a)a.hasOwnProperty(_)&&(n=a[_],n!==void 0&&So(e,t,_,n,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(n=a[m],n!=null&&Le(e,t,m,n,a,null))}function $0(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,s=null,u=null,m=null,b=null,T=null,_=null;for(R in a){var G=a[R];if(a.hasOwnProperty(R)&&G!=null)switch(R){case"checked":break;case"value":break;case"defaultValue":b=G;default:n.hasOwnProperty(R)||Le(e,t,R,null,n,G)}}for(var A in n){var R=n[A];if(G=a[A],n.hasOwnProperty(A)&&(R!=null||G!=null))switch(A){case"type":s=R;break;case"name":l=R;break;case"checked":T=R;break;case"defaultChecked":_=R;break;case"value":u=R;break;case"defaultValue":m=R;break;case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(c(137,t));break;default:R!==G&&Le(e,t,A,R,n,G)}}Os(e,u,m,b,T,_,s,l);return;case"select":R=u=m=A=null;for(s in a)if(b=a[s],a.hasOwnProperty(s)&&b!=null)switch(s){case"value":break;case"multiple":R=b;default:n.hasOwnProperty(s)||Le(e,t,s,null,n,b)}for(l in n)if(s=n[l],b=a[l],n.hasOwnProperty(l)&&(s!=null||b!=null))switch(l){case"value":A=s;break;case"defaultValue":m=s;break;case"multiple":u=s;default:s!==b&&Le(e,t,l,s,n,b)}t=m,a=u,n=R,A!=null?Tn(e,!!a,A,!1):!!n!=!!a&&(t!=null?Tn(e,!!a,t,!0):Tn(e,!!a,a?[]:"",!1));return;case"textarea":R=A=null;for(m in a)if(l=a[m],a.hasOwnProperty(m)&&l!=null&&!n.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:Le(e,t,m,null,n,l)}for(u in n)if(l=n[u],s=a[u],n.hasOwnProperty(u)&&(l!=null||s!=null))switch(u){case"value":A=l;break;case"defaultValue":R=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(c(91));break;default:l!==s&&Le(e,t,u,l,n,s)}oc(e,A,R);return;case"option":for(var te in a)if(A=a[te],a.hasOwnProperty(te)&&A!=null&&!n.hasOwnProperty(te))switch(te){case"selected":e.selected=!1;break;default:Le(e,t,te,null,n,A)}for(b in n)if(A=n[b],R=a[b],n.hasOwnProperty(b)&&A!==R&&(A!=null||R!=null))switch(b){case"selected":e.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Le(e,t,b,A,n,R)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in a)A=a[ue],a.hasOwnProperty(ue)&&A!=null&&!n.hasOwnProperty(ue)&&Le(e,t,ue,null,n,A);for(T in n)if(A=n[T],R=a[T],n.hasOwnProperty(T)&&A!==R&&(A!=null||R!=null))switch(T){case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(c(137,t));break;default:Le(e,t,T,A,n,R)}return;default:if(_s(t)){for(var Ge in a)A=a[Ge],a.hasOwnProperty(Ge)&&A!==void 0&&!n.hasOwnProperty(Ge)&&So(e,t,Ge,void 0,n,A);for(_ in n)A=n[_],R=a[_],!n.hasOwnProperty(_)||A===R||A===void 0&&R===void 0||So(e,t,_,A,n,R);return}}for(var j in a)A=a[j],a.hasOwnProperty(j)&&A!=null&&!n.hasOwnProperty(j)&&Le(e,t,j,null,n,A);for(G in n)A=n[G],R=a[G],!n.hasOwnProperty(G)||A===R||A==null&&R==null||Le(e,t,G,A,n,R)}function mf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var l=a[n],s=l.transferSize,u=l.initiatorType,m=l.duration;if(s&&m&&mf(u)){for(u=0,m=l.responseEnd,n+=1;n<a.length;n++){var b=a[n],T=b.startTime;if(T>m)break;var _=b.transferSize,G=b.initiatorType;_&&mf(G)&&(b=b.responseEnd,u+=_*(b<m?1:(m-T)/(b-T)))}if(--n,t+=8*(s+u)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ko=null,jo=null;function cs(e){return e.nodeType===9?e:e.ownerDocument}function gf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function wo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var No=null;function F0(){var e=window.event;return e&&e.type==="popstate"?e===No?!1:(No=e,!0):(No=null,!1)}var yf=typeof setTimeout=="function"?setTimeout:void 0,W0=typeof clearTimeout=="function"?clearTimeout:void 0,xf=typeof Promise=="function"?Promise:void 0,P0=typeof queueMicrotask=="function"?queueMicrotask:typeof xf<"u"?function(e){return xf.resolve(null).then(e).catch(eg)}:yf;function eg(e){setTimeout(function(){throw e})}function Ka(e){return e==="head"}function pf(e,t){var a=t,n=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(l),ll(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Jl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Jl(a);for(var s=a.firstChild;s;){var u=s.nextSibling,m=s.nodeName;s[gl]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&s.rel.toLowerCase()==="stylesheet"||a.removeChild(s),s=u}}else a==="body"&&Jl(e.ownerDocument.body);a=l}while(a);ll(t)}function bf(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function To(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":To(a),Ms(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function tg(e,t,a,n){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[gl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Yt(e.nextSibling),e===null)break}return null}function ag(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Yt(e.nextSibling),e===null))return null;return e}function vf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Yt(e.nextSibling),e===null))return null;return e}function Co(e){return e.data==="$?"||e.data==="$~"}function Eo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ng(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ao=null;function Sf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Yt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function kf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function jf(e,t,a){switch(t=cs(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Jl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ms(e)}var qt=new Map,wf=new Set;function us(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ba=L.d;L.d={f:lg,r:rg,D:sg,C:ig,L:og,m:cg,X:dg,S:ug,M:fg};function lg(){var e=ba.f(),t=ts();return e||t}function rg(e){var t=jn(e);t!==null&&t.tag===5&&t.type==="form"?Bu(t):ba.r(e)}var tl=typeof document>"u"?null:document;function Nf(e,t,a){var n=tl;if(n&&typeof t=="string"&&t){var l=_t(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),wf.has(l)||(wf.add(l),e={rel:e,crossOrigin:a,href:t},n.querySelector(l)===null&&(t=n.createElement("link"),ot(t,"link",e),at(t),n.head.appendChild(t)))}}function sg(e){ba.D(e),Nf("dns-prefetch",e,null)}function ig(e,t){ba.C(e,t),Nf("preconnect",e,t)}function og(e,t,a){ba.L(e,t,a);var n=tl;if(n&&e&&t){var l='link[rel="preload"][as="'+_t(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+_t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+_t(a.imageSizes)+'"]')):l+='[href="'+_t(e)+'"]';var s=l;switch(t){case"style":s=al(e);break;case"script":s=nl(e)}qt.has(s)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),qt.set(s,e),n.querySelector(l)!==null||t==="style"&&n.querySelector(Fl(s))||t==="script"&&n.querySelector(Wl(s))||(t=n.createElement("link"),ot(t,"link",e),at(t),n.head.appendChild(t)))}}function cg(e,t){ba.m(e,t);var a=tl;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+_t(n)+'"][href="'+_t(e)+'"]',s=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=nl(e)}if(!qt.has(s)&&(e=w({rel:"modulepreload",href:e},t),qt.set(s,e),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wl(s)))return}n=a.createElement("link"),ot(n,"link",e),at(n),a.head.appendChild(n)}}}function ug(e,t,a){ba.S(e,t,a);var n=tl;if(n&&e){var l=wn(n).hoistableStyles,s=al(e);t=t||"default";var u=l.get(s);if(!u){var m={loading:0,preload:null};if(u=n.querySelector(Fl(s)))m.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=qt.get(s))&&Mo(e,a);var b=u=n.createElement("link");at(b),ot(b,"link",e),b._p=new Promise(function(T,_){b.onload=T,b.onerror=_}),b.addEventListener("load",function(){m.loading|=1}),b.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ds(u,t,n)}u={type:"stylesheet",instance:u,count:1,state:m},l.set(s,u)}}}function dg(e,t){ba.X(e,t);var a=tl;if(a&&e){var n=wn(a).hoistableScripts,l=nl(e),s=n.get(l);s||(s=a.querySelector(Wl(l)),s||(e=w({src:e,async:!0},t),(t=qt.get(l))&&Ro(e,t),s=a.createElement("script"),at(s),ot(s,"link",e),a.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(l,s))}}function fg(e,t){ba.M(e,t);var a=tl;if(a&&e){var n=wn(a).hoistableScripts,l=nl(e),s=n.get(l);s||(s=a.querySelector(Wl(l)),s||(e=w({src:e,async:!0,type:"module"},t),(t=qt.get(l))&&Ro(e,t),s=a.createElement("script"),at(s),ot(s,"link",e),a.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(l,s))}}function Tf(e,t,a,n){var l=(l=xe.current)?us(l):null;if(!l)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=al(a.href),a=wn(l).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=al(a.href);var s=wn(l).hoistableStyles,u=s.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,u),(s=l.querySelector(Fl(e)))&&!s._p&&(u.instance=s,u.state.loading=5),qt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qt.set(e,a),s||mg(l,e,a,u.state))),t&&n===null)throw Error(c(528,""));return u}if(t&&n!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=nl(a),a=wn(l).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function al(e){return'href="'+_t(e)+'"'}function Fl(e){return'link[rel="stylesheet"]['+e+"]"}function Cf(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function mg(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),ot(t,"link",a),at(t),e.head.appendChild(t))}function nl(e){return'[src="'+_t(e)+'"]'}function Wl(e){return"script[async]"+e}function Ef(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+_t(a.href)+'"]');if(n)return t.instance=n,at(n),n;var l=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),at(n),ot(n,"style",l),ds(n,a.precedence,e),t.instance=n;case"stylesheet":l=al(a.href);var s=e.querySelector(Fl(l));if(s)return t.state.loading|=4,t.instance=s,at(s),s;n=Cf(a),(l=qt.get(l))&&Mo(n,l),s=(e.ownerDocument||e).createElement("link"),at(s);var u=s;return u._p=new Promise(function(m,b){u.onload=m,u.onerror=b}),ot(s,"link",n),t.state.loading|=4,ds(s,a.precedence,e),t.instance=s;case"script":return s=nl(a.src),(l=e.querySelector(Wl(s)))?(t.instance=l,at(l),l):(n=a,(l=qt.get(s))&&(n=w({},a),Ro(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),at(l),ot(l,"link",n),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ds(n,a.precedence,e));return t.instance}function ds(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,s=l,u=0;u<n.length;u++){var m=n[u];if(m.dataset.precedence===t)s=m;else if(s!==l)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Mo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ro(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fs=null;function Af(e,t,a){if(fs===null){var n=new Map,l=fs=new Map;l.set(a,n)}else l=fs,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var s=a[l];if(!(s[gl]||s[lt]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var u=s.getAttribute(t)||"";u=e+u;var m=n.get(u);m?m.push(s):n.set(u,[s])}}return n}function Mf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function gg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Rf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hg(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=al(n.href),s=t.querySelector(Fl(l));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ms.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=s,at(s);return}s=t.ownerDocument||t,n=Cf(n),(l=qt.get(l))&&Mo(n,l),s=s.createElement("link"),at(s);var u=s;u._p=new Promise(function(m,b){u.onload=m,u.onerror=b}),ot(s,"link",n),a.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ms.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Oo=0;function yg(e,t){return e.stylesheets&&e.count===0&&hs(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&hs(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Oo===0&&(Oo=62500*J0());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hs(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Oo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(l)}}:null}function ms(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hs(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gs=null;function hs(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gs=new Map,t.forEach(xg,e),gs=null,ms.call(e))}function xg(e,t){if(!(t.state.loading&4)){var a=gs.get(e);if(a)var n=a.get(null);else{a=new Map,gs.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<l.length;s++){var u=l[s];(u.nodeName==="LINK"||u.getAttribute("media")!=="not all")&&(a.set(u.dataset.precedence,u),n=u)}n&&a.set(null,n)}l=t.instance,u=l.getAttribute("data-precedence"),s=a.get(u)||n,s===n&&a.set(null,l),a.set(u,l),this.count++,n=ms.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),s?s.parentNode.insertBefore(l,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var Pl={$$typeof:V,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function pg(e,t,a,n,l,s,u,m,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ts(0),this.hiddenUpdates=Ts(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=s,this.onRecoverableError=u,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Of(e,t,a,n,l,s,u,m,b,T,_,G){return e=new pg(e,t,a,u,b,T,_,G,m),t=1,s===!0&&(t|=24),s=jt(3,null,null,t),e.current=s,s.stateNode=e,t=ui(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:a,cache:t},gi(s),e}function zf(e){return e?(e=_n,e):_n}function _f(e,t,a,n,l,s){l=zf(l),n.context===null?n.context=l:n.pendingContext=l,n=_a(t),n.payload={element:a},s=s===void 0?null:s,s!==null&&(n.callback=s),a=Ua(e,n,t),a!==null&&(bt(a,e,t),Rl(a,e,t))}function Uf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function zo(e,t){Uf(e,t),(e=e.alternate)&&Uf(e,t)}function Df(e){if(e.tag===13||e.tag===31){var t=sn(e,67108864);t!==null&&bt(t,e,67108864),zo(e,67108864)}}function Hf(e){if(e.tag===13||e.tag===31){var t=Et();t=Cs(t);var a=sn(e,t);a!==null&&bt(a,e,t),zo(e,t)}}var ys=!0;function bg(e,t,a,n){var l=C.T;C.T=null;var s=L.p;try{L.p=2,_o(e,t,a,n)}finally{L.p=s,C.T=l}}function vg(e,t,a,n){var l=C.T;C.T=null;var s=L.p;try{L.p=8,_o(e,t,a,n)}finally{L.p=s,C.T=l}}function _o(e,t,a,n){if(ys){var l=Uo(n);if(l===null)vo(e,t,n,xs,a),Gf(e,n);else if(kg(l,e,t,a,n))n.stopPropagation();else if(Gf(e,n),t&4&&-1<Sg.indexOf(e)){for(;l!==null;){var s=jn(l);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var u=tn(s.pendingLanes);if(u!==0){var m=s;for(m.pendingLanes|=2,m.entangledLanes|=2;u;){var b=1<<31-St(u);m.entanglements[1]|=b,u&=~b}Ft(s),(Oe&6)===0&&(Pr=W()+500,Ql(0))}}break;case 31:case 13:m=sn(s,2),m!==null&&bt(m,s,2),ts(),zo(s,2)}if(s=Uo(n),s===null&&vo(e,t,n,xs,a),s===l)break;l=s}l!==null&&n.stopPropagation()}else vo(e,t,n,null,a)}}function Uo(e){return e=Ds(e),Do(e)}var xs=null;function Do(e){if(xs=null,e=kn(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xs=e,null}function Lf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case oe:return 2;case me:return 8;case ze:case Ie:return 32;case Ot:return 268435456;default:return 32}default:return 32}}var Ho=!1,Ia=null,Qa=null,Za=null,er=new Map,tr=new Map,$a=[],Sg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gf(e,t){switch(e){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":er.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(t.pointerId)}}function ar(e,t,a,n,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:s,targetContainers:[l]},t!==null&&(t=jn(t),t!==null&&Df(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function kg(e,t,a,n,l){switch(t){case"focusin":return Ia=ar(Ia,e,t,a,n,l),!0;case"dragenter":return Qa=ar(Qa,e,t,a,n,l),!0;case"mouseover":return Za=ar(Za,e,t,a,n,l),!0;case"pointerover":var s=l.pointerId;return er.set(s,ar(er.get(s)||null,e,t,a,n,l)),!0;case"gotpointercapture":return s=l.pointerId,tr.set(s,ar(tr.get(s)||null,e,t,a,n,l)),!0}return!1}function Bf(e){var t=kn(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,Po(e.priority,function(){Hf(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,Po(e.priority,function(){Hf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ps(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Uo(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Us=n,a.target.dispatchEvent(n),Us=null}else return t=jn(a),t!==null&&Df(t),e.blockedOn=a,!1;t.shift()}return!0}function Yf(e,t,a){ps(e)&&a.delete(t)}function jg(){Ho=!1,Ia!==null&&ps(Ia)&&(Ia=null),Qa!==null&&ps(Qa)&&(Qa=null),Za!==null&&ps(Za)&&(Za=null),er.forEach(Yf),tr.forEach(Yf)}function bs(e,t){e.blockedOn===t&&(e.blockedOn=null,Ho||(Ho=!0,x.unstable_scheduleCallback(x.unstable_NormalPriority,jg)))}var vs=null;function qf(e){vs!==e&&(vs=e,x.unstable_scheduleCallback(x.unstable_NormalPriority,function(){vs===e&&(vs=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],l=e[t+2];if(typeof n!="function"){if(Do(n||a)===null)continue;break}var s=jn(a);s!==null&&(e.splice(t,3),t-=3,_i(s,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function ll(e){function t(b){return bs(b,e)}Ia!==null&&bs(Ia,e),Qa!==null&&bs(Qa,e),Za!==null&&bs(Za,e),er.forEach(t),tr.forEach(t);for(var a=0;a<$a.length;a++){var n=$a[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<$a.length&&(a=$a[0],a.blockedOn===null);)Bf(a),a.blockedOn===null&&$a.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],s=a[n+1],u=l[mt]||null;if(typeof s=="function")u||qf(a);else if(u){var m=null;if(s&&s.hasAttribute("formAction")){if(l=s,u=s[mt]||null)m=u.formAction;else if(Do(l)!==null)continue}else m=u.action;typeof m=="function"?a[n+1]=m:(a.splice(n,3),n-=3),qf(a)}}}function Vf(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(u){return l=u})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Lo(e){this._internalRoot=e}Ss.prototype.render=Lo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,n=Et();_f(a,n,e,t,null,null)},Ss.prototype.unmount=Lo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_f(e.current,2,null,e,null,null),ts(),t[Sn]=null}};function Ss(e){this._internalRoot=e}Ss.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wo();e={blockedOn:null,target:e,priority:t};for(var a=0;a<$a.length&&t!==0&&t<$a[a].priority;a++);$a.splice(a,0,e),a===0&&Bf(e)}};var Xf=i.version;if(Xf!=="19.2.0")throw Error(c(527,Xf,"19.2.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var wg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{dl=ks.inject(wg),vt=ks}catch{}}return lr.createRoot=function(e,t){if(!d(e))throw Error(c(299));var a=!1,n="",l=Ju,s=Fu,u=Wu;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Of(e,1,!1,null,null,a,n,null,l,s,u,Vf),e[Sn]=t.current,bo(e),new Lo(t)},lr.hydrateRoot=function(e,t,a){if(!d(e))throw Error(c(299));var n=!1,l="",s=Ju,u=Fu,m=Wu,b=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(s=a.onUncaughtError),a.onCaughtError!==void 0&&(u=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(b=a.formState)),t=Of(e,1,!0,t,a??null,n,l,b,s,u,m,Vf),t.context=zf(null),a=t.current,n=Et(),n=Cs(n),l=_a(n),l.callback=null,Ua(a,l,n),a=n,t.current.lanes=a,ml(t,a),Ft(t),e[Sn]=t.current,bo(e),new Ss(t)},lr.version="19.2.0",lr}var em;function Dg(){if(em)return Yo.exports;em=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(i){console.error(i)}}return x(),Yo.exports=Ug(),Yo.exports}var Hg=Dg();const Lg=({imageUrl:x,altText:i,isLoading:o=!1,error:c=null,onRetry:d,className:f="",fallbackImageUrl:h})=>{const[g,p]=M.useState(!1),[y,v]=M.useState(!1),[w,E]=M.useState(null);M.useEffect(()=>{p(!1),v(!1),E(null)},[x]);const D=M.useCallback(()=>{v(!0),p(!1),x&&E(x)},[x]),Y=M.useCallback(()=>{p(!0),v(!1)},[]),q=M.useCallback(()=>{p(!1),v(!1),d&&d()},[d]),K=x||w||h;return o?r.jsx("div",{className:`relative bg-gray-100 rounded-lg overflow-hidden ${f}`,children:r.jsx("div",{className:"aspect-video w-full",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Generating image..."})]})})})}):c&&!K?r.jsx("div",{className:`relative bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg ${f}`,children:r.jsx("div",{className:"aspect-video w-full",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-3",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Image Generation Failed"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3 max-w-xs",children:c}),d&&r.jsxs("button",{onClick:q,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsx("svg",{className:"mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]})]})})})}):K?r.jsxs("div",{className:`relative rounded-lg overflow-hidden shadow-md ${f}`,children:[!y&&!g&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center z-10",children:r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2 mx-auto"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 mx-auto"})]})})}),r.jsx("img",{src:K,alt:i,className:`w-full h-auto transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,onLoad:D,onError:Y,loading:"lazy",style:{aspectRatio:"16/9",objectFit:"cover",minHeight:"200px"}}),g&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-10 w-10 rounded-full bg-gray-200 mb-2",children:r.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Failed to load image"}),d&&r.jsx("button",{onClick:q,className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Try again"})]})}),y&&i&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3",children:r.jsx("div",{className:"text-white text-sm opacity-0 hover:opacity-100 transition-opacity duration-200",children:i})})]}):r.jsx("div",{className:`relative bg-gray-50 border border-gray-200 rounded-lg ${f}`,children:r.jsx("div",{className:"aspect-video w-full",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx("svg",{className:"h-12 w-12 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("div",{className:"text-sm",children:"No image available"})]})})})})},Gg={temperature:.7,minP:.05,repetitionPenalty:1.1,enableStreaming:!0},sr=({settings:x,onSettingsChange:i,onClose:o})=>{const[c,d]=M.useState(x),f=(p,y)=>{d(v=>({...v,[p]:y}))},h=()=>{i(c),o()},g=()=>{d(Gg)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Sampler Settings"}),r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold","aria-label":"Close",children:""})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Temperature"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.temperature.toFixed(2)})]}),r.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:c.temperature,onChange:p=>f("temperature",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Controls randomness. Lower = more focused, Higher = more creative"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Min P"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.minP.toFixed(3)})]}),r.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.001",value:c.minP,onChange:p=>f("minP",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum probability threshold for token selection"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Repetition Penalty"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.repetitionPenalty.toFixed(2)})]}),r.jsx("input",{type:"range",min:"1",max:"2",step:"0.01",value:c.repetitionPenalty,onChange:p=>f("repetitionPenalty",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Reduces repetitive text. Higher = less repetition"})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-1",children:"Enable Text Streaming"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Show text as it's generated character by character"})]}),r.jsx("button",{type:"button",role:"switch","aria-checked":c.enableStreaming??!0,onClick:()=>f("enableStreaming",!(c.enableStreaming??!0)),className:`
                  relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent 
                  transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                  ${c.enableStreaming??!0?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}
                `,children:r.jsx("span",{"aria-hidden":"true",className:`
                    pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 
                    transition duration-200 ease-in-out
                    ${c.enableStreaming??!0?"translate-x-5":"translate-x-0"}
                  `})})]})})]}),r.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:"Reset to Defaults"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors",children:"Cancel"}),r.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 rounded-md transition-colors",children:"Save Changes"})]})]})]})})};class ea{static CHARS_PER_TOKEN=4;static MAX_TOKENS=32768;static RESERVED_TOKENS=2e3;static MAX_CONTEXT_TOKENS=ea.MAX_TOKENS-ea.RESERVED_TOKENS;static estimateTokens(i){return Math.ceil(i.length/this.CHARS_PER_TOKEN)}static truncateToTokenLimit(i,o=this.MAX_CONTEXT_TOKENS){if(this.estimateTokens(i)<=o)return i;const d=o*this.CHARS_PER_TOKEN,f=i.substring(0,d),h=f.lastIndexOf(". ");return h>d*.8?f.substring(0,h+1)+" [truncated]":f+" [truncated]"}static buildTruncatedContext(i,o,c=this.MAX_CONTEXT_TOKENS){let d="",f=0,h=0,g=0;const p=[...i].reverse(),y=[...o].reverse();for(let v=0;v<Math.max(p.length,y.length);v++){let w="",E="";if(v<p.length){const q=p[v];w=`Story ${i.length-v}: ${q.text}
`}if(v<y.length){const q=y[v];E=`Action ${o.length-v}: ${q.text}
`}const D=w+E,Y=this.estimateTokens(D);if(f+Y>c){const q=c-f;if(q>50&&w){const K=p[v],ae=E?this.estimateTokens(E):0,P=q-ae;if(P>20){const V=P*this.CHARS_PER_TOKEN,Z=K.text.length>V?K.text.substring(0,V)+"...":K.text,ke=`Story ${i.length-v}: ${Z}
`,he=ke+E,X=this.estimateTokens(he);f+X<=c&&(d=he+d,f+=X,ke&&h++,E&&g++)}}break}d=D+d,f+=Y,w&&h++,E&&g++}return{contextText:d,segmentsIncluded:h,choicesIncluded:g}}static buildEnhancedContext(i,o,c,d=this.MAX_CONTEXT_TOKENS){let f=null,h=null;i.length>0&&(f=i[i.length-1].text),o.length>0&&(h=o[o.length-1].text);const g=this.estimateTokens(`Previous segment: 
Previous action: 
Current scene: ${c}`),p=h?this.estimateTokens(h):0,y=g+p+100,v=d-y,w=Math.min(1e3,v*.3),E=v-w;if(f&&this.estimateTokens(f)>E){const V=E*this.CHARS_PER_TOKEN;f=f.substring(0,V)+"..."}const D=this.estimateTokens(`Previous segment: ${f||""}
Previous action: ${h||""}
Current scene: ${c}`),Y=d-D,{contextText:q,segmentsIncluded:K,choicesIncluded:ae}=this.buildTruncatedContext(i.slice(0,-1),o.slice(0,-1),Math.max(0,Y));return{contextText:q,previousSegment:f,previousAction:h,segmentsIncluded:K+(f?1:0),choicesIncluded:ae+(h?1:0)}}static validatePromptSize(i){const o=this.estimateTokens(i);return{valid:o<=this.MAX_CONTEXT_TOKENS,estimatedTokens:o,maxTokens:this.MAX_CONTEXT_TOKENS}}static getTokenStats(i){const o=this.estimateTokens(i),c=this.MAX_CONTEXT_TOKENS-o,d=Math.round(o/this.MAX_CONTEXT_TOKENS*100);return{estimatedTokens:o,characters:i.length,maxTokens:this.MAX_CONTEXT_TOKENS,remainingTokens:Math.max(0,c),utilizationPercent:d}}static debugContextBuilding(i,o,c,d=this.MAX_CONTEXT_TOKENS){const f=this.buildEnhancedContext(i,o,c,d),h=`${f.contextText}Previous segment: ${f.previousSegment||""}
Previous action: ${f.previousAction||""}
Current scene: ${c}`,g=this.estimateTokens(h);return{totalSegments:i.length,totalChoices:o.length,segmentsIncluded:f.segmentsIncluded,choicesIncluded:f.choicesIncluded,contextTokens:g,maxTokens:d,utilizationPercent:Math.round(g/d*100),truncationOccurred:f.segmentsIncluded<i.length||f.choicesIncluded<o.length}}}const lm=({thinkingContent:x,className:i="",isStreaming:o=!1})=>{const[c,d]=M.useState(!1),f=M.useRef(null),h=M.useRef(0),[g,p]=M.useState(!1),y=M.useRef(null),v=M.useRef(!1),w=M.useRef(0),E=M.useRef(null),D=M.useRef(0),Y=M.useRef(0),q=M.useRef(null),[K,ae]=M.useState(!0),P=()=>{if(!f.current||!o||v.current)return;const V=f.current,Z=V.scrollTop,ke=Date.now(),he=V.scrollHeight-V.scrollTop<=V.clientHeight+10,X=ke-Y.current,O=Z-w.current;X>0&&(D.current=Math.abs(O)/X),O<-5&&D.current>.1&&!he?(p(!0),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{f.current&&(f.current.scrollHeight-f.current.scrollTop>f.current.clientHeight+10||p(!1))},3e3)):he&&!v.current&&(p(!1),y.current&&(clearTimeout(y.current),y.current=null)),w.current=Z,Y.current=ke};return M.useEffect(()=>{if(c&&o&&f.current&&!g){const V=x.length;if(V>h.current){const Z=f.current;Z.scrollHeight-Z.scrollTop<=Z.clientHeight+100&&K&&(v.current=!0,requestAnimationFrame(()=>{Z&&!g&&o&&(Z.scrollTop=Z.scrollHeight),setTimeout(()=>{v.current=!1},16)}))}h.current=V}},[x,c,o,g,K]),M.useEffect(()=>{if(c&&o&&f.current&&!g){const V=f.current,Z=V.querySelector("pre");Z&&(q.current=new MutationObserver(()=>{!g&&o&&V&&V.scrollHeight-V.scrollTop<=V.clientHeight+50&&K&&(v.current=!0,V.scrollTop=V.scrollHeight,setTimeout(()=>{v.current=!1},10))}),q.current.observe(Z,{childList:!0,subtree:!0,characterData:!0}))}else q.current&&(q.current.disconnect(),q.current=null);return()=>{q.current&&(q.current.disconnect(),q.current=null)}},[c,o,g,K]),M.useEffect(()=>{if(f.current){const V=new IntersectionObserver(([Z])=>{ae(Z.isIntersecting)},{threshold:.1});return V.observe(f.current),()=>{V.disconnect()}}},[c]),M.useEffect(()=>{o||(h.current=0,p(!1),v.current=!1,w.current=0,D.current=0,Y.current=0,y.current&&(clearTimeout(y.current),y.current=null),E.current&&(clearTimeout(E.current),E.current=null),q.current&&(q.current.disconnect(),q.current=null))},[o]),M.useEffect(()=>()=>{y.current&&clearTimeout(y.current),E.current&&clearTimeout(E.current),q.current&&q.current.disconnect()},[]),x.trim()?r.jsxs("div",{className:`bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg ${i}`,children:[r.jsxs("button",{onClick:()=>d(!c),className:"w-full px-4 py-3 text-left flex items-center justify-between text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"h-4 w-4 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),r.jsx("span",{className:"text-sm font-medium",children:"AI Thinking Process"}),r.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/50 px-2 py-0.5 rounded-full",children:["~",ea.estimateTokens(x)," tokens"]})]}),r.jsx("svg",{className:`h-4 w-4 transform transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&r.jsxs("div",{className:"px-4 pb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{ref:f,onScroll:P,className:"bg-white dark:bg-gray-800 rounded border border-blue-200 dark:border-blue-700 p-3 max-h-64 overflow-y-auto scroll-smooth",children:r.jsxs("pre",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono leading-relaxed",children:[x,o&&r.jsx("span",{className:"inline-block w-1 h-3 bg-blue-500 dark:bg-blue-400 ml-1 animate-pulse"})]})}),g&&o&&f.current&&f.current.scrollHeight-f.current.scrollTop>f.current.clientHeight+20&&r.jsxs("button",{onClick:()=>{f.current&&(v.current=!0,f.current.scrollTop=f.current.scrollHeight,p(!1),y.current&&(clearTimeout(y.current),y.current=null),setTimeout(()=>{v.current=!1},50))},className:"absolute bottom-2 right-2 bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded-full shadow-lg transition-colors flex items-center gap-1",title:"Scroll to bottom",children:[r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),r.jsx("span",{children:"Follow"})]})]}),r.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400 flex items-center justify-between",children:r.jsx("span",{children:"This shows the AI's internal reasoning process before generating the story response."})})]})]}):null},ws=({text:x,className:i=""})=>{const o=f=>{const h=[];let g=0;const p=f.split(`
`);for(let y=0;y<p.length;y++){const v=p[y];if(v.trim()===""){y<p.length-1&&h.push(r.jsx("br",{},`br-${g++}`));continue}const w=c(v,g);h.push(...w.elements),g=w.nextKey,y<p.length-1&&h.push(r.jsx("br",{},`br-${g++}`))}return h},c=(f,h)=>{const g=[];let p=h;const y=f.replace(/[]/g,'"'),v=[{regex:/\*\*(.*?)\*\*/g,type:"bold"},{regex:/__(.*?)__/g,type:"bold"},{regex:/\*(.*?)\*/g,type:"italic"},{regex:/_(.*?)_/g,type:"italic"},{regex:/(?:^|[\s.,!?;:])"([^"]*?)"(?=[\s.,!?;:]|$)/g,type:"quote"}],w=[];v.forEach(Y=>{let q;const K=new RegExp(Y.regex.source,Y.regex.flags);for(;(q=K.exec(y))!==null;)w.push({start:q.index,end:q.index+q[0].length,content:q[1],type:Y.type,fullMatch:q[0]})}),w.sort((Y,q)=>Y.start-q.start);const E=[];for(const Y of w)E.some(K=>Y.start<K.end&&Y.end>K.start)||E.push(Y);let D=0;for(const Y of E){if(Y.start>D){const K=y.substring(D,Y.start);K&&g.push(r.jsx("span",{children:K},`text-${p++}`))}const q=Y.content;switch(Y.type){case"bold":g.push(r.jsx("strong",{className:"font-semibold",children:q},`bold-${p++}`));break;case"italic":g.push(r.jsx("em",{className:"italic text-gray-600 dark:text-gray-400",children:q},`italic-${p++}`));break;case"quote":g.push(r.jsxs("span",{className:"text-orange-700 dark:text-orange-400",children:['"',q,'"']},`quote-${p++}`));break}D=Y.end}if(D<y.length){const Y=y.substring(D);Y&&g.push(r.jsx("span",{children:Y},`text-${p++}`))}return g.length===0&&g.push(r.jsx("span",{children:y},`text-${p++}`)),{elements:g,nextKey:p}},d=o(x);return r.jsx("span",{className:i,children:d})};class Fa{static formatTTFS(i){return i>=1e3?`${(i/1e3).toFixed(1)}s`:`${Math.round(i)}ms`}static formatTokenUsage(i){return`${i.inputTokens.toLocaleString()}  ${i.outputTokens.toLocaleString()}`}static getTTFSColorClass(i){return i<1e3?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30":i<3e3?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":i<5e3?"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30":"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30"}static getTokenColorClass(i){return i<100?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30":i<500?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":i<1e3?"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30":"text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/30"}static getTTFSPerformanceLabel(i){return i<1e3?"Excellent":i<3e3?"Good":i<5e3?"Fair":"Slow"}static formatMetrics(i,o){const c={};return i!==void 0&&(c.ttfsDisplay=`TTFS: ${this.formatTTFS(i)}`,c.ttfsColorClass=this.getTTFSColorClass(i)),o&&(c.tokenDisplay=`Tokens: ${this.formatTokenUsage(o)}`,c.tokenColorClass=this.getTokenColorClass(o.outputTokens)),c}}const Bg=({currentStory:x,storyHistory:i,isLoading:o,error:c,onRetry:d,onRegenerate:f,isGeneratingImage:h=!1,imageError:g=null,onImageRetry:p,samplerSettings:y,onSamplerSettingsChange:v,streamingText:w="",isStreaming:E=!1,enableImageGeneration:D=!0,canRegenerate:Y=!1,thinkingContent:q="",streamingThinking:K="",onRollback:ae})=>{const[P,V]=M.useState(!1),[Z,ke]=M.useState(new Set),[he,X]=M.useState(!1),O={temperature:.7,minP:.05,repetitionPenalty:1.1},H=B=>{ae&&ae(B)};return o&&!E?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating story..."]})})]}):c?r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Story Generation Failed"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:c}),d&&r.jsxs("button",{onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})}):!x&&!E?r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("p",{children:"No story to display. Start a new adventure to begin!"})]})}):r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[i.length>0&&r.jsxs("button",{onClick:()=>V(!P),className:"inline-flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[r.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${P?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),P?"Hide":"Show"," Story History (",i.length,")"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[Y&&f&&!o&&!E&&r.jsxs("button",{onClick:f,className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-md hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors",title:"Regenerate this story response with different variations",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{className:"hidden sm:inline",children:"Regenerate"})]}),v&&r.jsxs("button",{onClick:()=>X(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Adjust sampler settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),r.jsx("span",{className:"hidden sm:inline",children:"AI Sampler"})]})]})]}),he&&v&&r.jsx(sr,{settings:y||O,onSettingsChange:v,onClose:()=>X(!1)}),P&&i.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-96 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Previous Story Segments"}),r.jsx("div",{className:"space-y-4",children:i.map((B,ie)=>{const re=Z.has(B.id),Ye=B.text.length>200,$=re||!Ye?B.text:`${B.text.substring(0,200)}...`;return r.jsxs("div",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Segment ",ie+1]}),B.modelName&&r.jsx("div",{className:"text-xs font-mono px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:B.modelName}),B.ttfs!==void 0&&r.jsxs("div",{className:`text-xs font-mono px-2 py-0.5 rounded ${Fa.getTTFSColorClass(B.ttfs)}`,children:["TTFT: ",Fa.formatTTFS(B.ttfs)]}),B.tokenUsage&&r.jsxs("div",{className:`text-xs font-mono px-2 py-0.5 rounded ${Fa.getTokenColorClass(B.tokenUsage.outputTokens)}`,children:["Tokens: ",Fa.formatTokenUsage(B.tokenUsage)]})]}),ae&&r.jsxs("button",{onClick:()=>H(ie),className:"inline-flex items-center gap-1 px-2 py-1 text-xs text-orange-700 dark:text-orange-300 bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-700 rounded hover:bg-orange-100 dark:hover:bg-orange-900/50 transition-colors",title:`Rollback to this segment (will delete ${i.length-ie} segments)`,children:[r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Rollback"]})]}),r.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:r.jsx(ws,{text:$})}),Ye&&r.jsx("button",{onClick:()=>{ke(de=>{const C=new Set(de);return C.has(B.id)?C.delete(B.id):C.add(B.id),C})},className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:re?"Show less":"Show more"})]},B.id)})})]}),(()=>{const B=E?K:x?.thinkingContent||q;return B&&B.trim()?r.jsx(lm,{thinkingContent:B,className:"mb-4",isStreaming:E&&!!K}):null})(),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[E&&!w&&r.jsx("div",{className:"text-center py-8",children:r.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating story..."]})}),(w||x)&&r.jsx("div",{className:"prose prose-sm sm:prose-lg max-w-none",children:r.jsxs("div",{className:"text-gray-800 dark:text-gray-200 leading-relaxed break-words",style:{fontSize:"clamp(0.9rem, 2.5vw, 1.125rem)",lineHeight:"1.75",fontFamily:"Georgia, serif"},children:[r.jsx(ws,{text:E?w:x?.text||""}),E&&w&&r.jsx("span",{className:"inline-block w-2 h-5 bg-blue-500 dark:bg-blue-400 ml-1 animate-pulse"})]})}),x&&!E&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.sceneDescription&&r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:"Scene"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:x.sceneDescription})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[x.modelName&&r.jsx("div",{className:"text-xs font-mono px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:x.modelName}),x.ttfs!==void 0&&r.jsxs("div",{className:`text-xs font-mono px-2 py-1 rounded ${Fa.getTTFSColorClass(x.ttfs)}`,children:["TTFT: ",Fa.formatTTFS(x.ttfs)]}),x.tokenUsage&&r.jsxs("div",{className:`text-xs font-mono px-2 py-1 rounded ${Fa.getTokenColorClass(x.tokenUsage.outputTokens)}`,children:["Tokens: ",Fa.formatTokenUsage(x.tokenUsage)]})]})]})}),x&&!E&&D&&r.jsx("div",{className:"mt-6",children:r.jsx(Lg,{imageUrl:x.imageUrl,altText:x.sceneDescription||"Story scene",isLoading:h,error:g,onRetry:p,className:"w-full"})})]})]})},Yg=({choices:x,choiceHistory:i,isLoading:o,disabled:c=!1,onChoiceSelect:d})=>{const[f,h]=M.useState(null),[g,p]=M.useState(!1),y=M.useCallback(v=>{c||o||(h(v.id),setTimeout(()=>{d(v),h(null)},150))},[c,o,d]);return!x||x.length===0?r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:r.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{children:"No choices available at the moment."})]})}):r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.length>0&&r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("button",{onClick:()=>p(!g),className:"inline-flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[r.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${g?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),g?"Hide":"Show"," Choice History (",i.length,")"]})}),g&&i.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Previous Choices"}),r.jsx("div",{className:"space-y-2",children:i.map((v,w)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${v.isCustom?"bg-purple-100 dark:bg-purple-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:r.jsx("span",{className:`text-xs font-medium ${v.isCustom?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400"}`,children:w+1})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[v.isCustom&&r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("svg",{className:"h-3 w-3 text-purple-600 dark:text-purple-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),r.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:"Custom Action"})]}),r.jsx("div",{className:`text-sm leading-relaxed ${v.isCustom?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`,children:r.jsx(ws,{text:v.text})})]})]},`${v.id}-${w}`))})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"What do you choose?"}),o&&r.jsx("div",{className:"text-center py-4",children:r.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400 text-sm",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing your choice..."]})}),r.jsx("div",{className:"space-y-2 sm:space-y-3",children:x.map((v,w)=>{const E=f===v.id,D=c||o;return r.jsx("button",{onClick:()=>y(v),disabled:D,className:`
                  w-full text-left p-3 sm:p-4 rounded-lg border-2 transition-all duration-200 
                  ${E?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/30 shadow-md transform scale-[0.98]":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"}
                  ${D?"opacity-50 cursor-not-allowed":"hover:shadow-md cursor-pointer"}
                  focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800
                `,children:r.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[r.jsxs("div",{className:`
                    flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-medium text-xs sm:text-sm
                    ${E?"bg-blue-500 dark:bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300"}
                  `,children:[String.fromCharCode(65+w)," "]}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("div",{className:`
                      text-xs sm:text-sm leading-relaxed break-words
                      ${E?"text-blue-900 dark:text-blue-200":"text-gray-800 dark:text-gray-200"}
                    `,children:r.jsx(ws,{text:v.text})})}),E&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},v.id)})})]})]})},qg=({isLoading:x,disabled:i=!1,onActionSubmit:o,choiceHistory:c})=>{const[d,f]=M.useState(""),[h,g]=M.useState(null),[p,y]=M.useState(!1),v=5,w=200,E=M.useCallback(V=>{const Z=V.trim();return Z.length===0?"Please enter an action":Z.length<v?`Action must be at least ${v} characters`:Z.length>w?`Action must not exceed ${w} characters`:null},[]),D=M.useCallback(V=>{const Z=V.target.value;Z.length<=w&&(f(Z),h&&Z.trim().length>0&&g(null))},[h]),Y=M.useCallback(V=>{if(V.preventDefault(),i||x)return;const Z=E(d);if(Z){g(Z);return}o(d.trim()),f(""),g(null)},[d,i,x,o,E]),q=M.useCallback(V=>{if(V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),!i&&!x&&d.trim().length>0)){const Z=E(d);if(Z){g(Z);return}o(d.trim()),f(""),g(null)}},[i,x,d,E,o]),K=d.length,ae=K>w*.9,P=K>w;return r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[c.length>0&&r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("button",{onClick:()=>y(!p),className:"inline-flex items-center text-xs sm:text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 transition-colors",children:[r.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${p?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),p?"Hide":"Show"," Action History (",c.length,")"]})}),p&&c.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Your Actions"}),r.jsx("div",{className:"space-y-2",children:c.map((V,Z)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:Z+1})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:V.text}),V.isCustom&&r.jsxs("span",{className:"inline-flex items-center mt-1 text-xs text-purple-600 dark:text-purple-400",children:[r.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Custom Action"]})]})]},`${V.id}-${Z}`))})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"What do you do?"}),x&&r.jsx("div",{className:"text-center py-4",children:r.jsxs("div",{className:"inline-flex items-center text-purple-600 dark:text-purple-400 text-sm",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-purple-600 dark:text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing your action..."]})}),r.jsxs("form",{onSubmit:Y,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("textarea",{value:d,onChange:D,onKeyDown:q,disabled:i||x,placeholder:"Type your action here... (e.g., 'I carefully examine the mysterious door' or 'I call out to see if anyone is nearby')",className:`
                w-full px-3 py-3 sm:px-4 sm:py-3 rounded-lg border-2 transition-all duration-200
                text-sm sm:text-base leading-relaxed
                resize-none
                ${h?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-purple-500 dark:focus:ring-purple-400"}
                ${i||x?"bg-gray-100 dark:bg-gray-700 cursor-not-allowed opacity-50":"bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-500"}
                text-gray-900 dark:text-gray-100
                placeholder-gray-400 dark:placeholder-gray-500
                focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800
              `,rows:3,maxLength:w}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsx("div",{children:h&&r.jsxs("p",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h]})}),r.jsxs("span",{className:`
                text-xs sm:text-sm font-medium
                ${P?"text-red-600 dark:text-red-400":ae?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"}
              `,children:[K," / ",w]})]})]}),r.jsx("button",{type:"submit",disabled:i||x||d.trim().length===0,className:`
              w-full py-3 px-4 rounded-lg font-medium text-sm sm:text-base
              transition-all duration-200
              ${i||x||d.trim().length===0?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-purple-600 dark:bg-purple-500 text-white hover:bg-purple-700 dark:hover:bg-purple-600 shadow-md hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98]"}
              focus:outline-none focus:ring-2 focus:ring-purple-500 dark:focus:ring-purple-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800
            `,children:x?"Processing...":"Submit Action"})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center flex items-center justify-center",children:[r.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Tip: Be creative! Describe what your character does, says, or thinks."]}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Press Enter to submit  Shift+Enter for new line"})]})})]})]})},Vg=({isOpen:x,onClose:i,onConfirm:o,segmentIndex:c,segmentCount:d,choiceCount:f,error:h})=>{if(!x)return null;const g=d-c-1+1,p=f-c;return r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Confirm Rollback"})]}),r.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors","aria-label":"Close dialog",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"mb-4",children:[h&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4 mb-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1",children:"Rollback Error"}),r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:h})]})]})}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["You are about to rollback to ",r.jsxs("strong",{children:["Segment ",c+1]}),". This action cannot be undone."]}),r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-md p-4 mb-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-2",children:"The following data will be permanently deleted:"}),r.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:g})," story segment",g!==1?"s":""]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:p})," choice",p!==1?"s":""," made after this point"]})]})]})]})}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["After rollback, you will return to Segment ",c+1," and can continue your story from that point with different choices."]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-700 rounded-b-lg",children:[r.jsx("button",{onClick:i,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:o,disabled:!!h,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600 dark:disabled:hover:bg-red-500",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.334 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})}),"Confirm Rollback"]})]})]})})]})};class en{static parseThinkingResponse(i){const o=/<think>(.*?)<\/think>/is,c=i.match(o);if(c){const h=c[1].trim(),g=i.replace(o,"").trim();return{thinkingContent:h,cleanedResponse:g,hasThinking:!0}}const d=/<think>(.*?)$/is,f=i.match(d);if(f){const h=f[1].trim();let p=i.substring(0,i.indexOf("<think>")).trim();if(!p&&h){const y=this.extractStoryFromThinking(h);y&&(p=y)}return{thinkingContent:h,cleanedResponse:p,hasThinking:!0}}return i.includes("</think>")?{thinkingContent:"",cleanedResponse:i.replace(/<\/think>/gi,"").trim(),hasThinking:!1}:{thinkingContent:"",cleanedResponse:i,hasThinking:!1}}static createReasoningProcessor(){let i="";return{processReasoningChunk:o=>(i+=o,{thinkingChunk:o,fullThinkingContent:i}),getState:()=>({thinkingContent:i,isInThinkingBlock:!1,thinkingComplete:!1}),reset:()=>{i=""}}}static createStreamingProcessor(){let i="",o="",c=!1,d=!1;return{processChunk:f=>{i+=f;let h="",g="";if(d)h=f;else{if(!c&&i.includes("<think>")){const p=i.indexOf("<think>");p>0&&(h=i.substring(0,p),i=i.substring(p)),c=!0,i=i.replace("<think>","")}if(c)if(i.includes("</think>")){const p=i.indexOf("</think>"),y=i.substring(0,p);o+=y,g=y,i=i.substring(p+8),h=i,i="",c=!1,d=!0}else o+=i,g=i,i="";else h=i,i=""}return{displayChunk:h,thinkingChunk:g,thinkingComplete:d,fullThinkingContent:o}},getState:()=>({thinkingContent:o,isInThinkingBlock:c,thinkingComplete:d}),reset:()=>{i="",o="",c=!1,d=!1}}}static extractStoryFromThinking(i){const o=[/STORY:\s*(.*?)$/is,/(?:^|\n)\s*You\s+(?:are|find|see|hear|feel|walk|run|stand|sit|look)\s+.*$/im,/(?:^|\n)\s*The\s+.*$/im,/(?:^|\n)\s*A\s+.*$/im,/(?:^|\n)\s*As\s+you\s+.*$/im,/(?:^|\n)\s*Your\s+.*$/im];for(const d of o){const f=i.match(d);if(f&&f[1]){const h=f[1].trim();if(h.length>50)return h}else if(f&&f[0]){const h=f[0].trim();if(h.length>50)return h}}const c=i.split(/[.!?]+/).filter(d=>d.trim().length>20);if(c.length>0){const d=c.slice(-2).join(". ").trim();if(d.length>50&&(d.includes("You ")||d.includes("The ")||d.includes("A ")))return d+"."}return""}static validateThinkingTags(i){const o=[],c=(i.match(/<think>/gi)||[]).length,d=(i.match(/<\/think>/gi)||[]).length;c!==d&&o.push(`Mismatched thinking tags: ${c} opening, ${d} closing`);const f=i.match(/<think>.*?<\/think>/gis)||[];for(const h of f)if((h.match(/<think>/gi)||[]).length>1){o.push("Nested thinking tags detected");break}return{isValid:o.length===0,errors:o}}static cleanupMalformedTags(i){let o=i;const c=[...o.matchAll(/<think>/gi)],d=[...o.matchAll(/<\/think>/gi)];if(c.length>d.length){const f=c.length-d.length;for(let h=0;h<f;h++){const g=o.lastIndexOf("<think>");g!==-1&&(o=o.substring(0,g)+o.substring(g+7))}}if(d.length>c.length){const f=d.length-c.length;for(let h=0;h<f;h++){const g=o.indexOf("</think>");g!==-1&&(o=o.substring(0,g)+o.substring(g+8))}}return o}}class tm{static estimateTokens(i){if(!i||i.length===0)return 0;const o=i.trim().replace(/\s+/g," "),c=Math.ceil(o.length/4);return Math.max(1,c)}static estimateMessagesTokens(i){let o=0;for(const c of i)o+=this.estimateTokens(c.content),o+=4;return o+=2,o}static createEstimatedUsage(i,o){return{inputTokens:this.estimateMessagesTokens(i),outputTokens:this.estimateTokens(o)}}}class le extends Error{code;retryable;statusCode;constructor(i,o,c=!0,d){super(i),this.name="AIServiceError",this.code=o,this.retryable=c,this.statusCode=d}}class Ne{static MAX_RETRIES=3;static isAnthropicAPI(i){return i.includes("api.anthropic.com")}static transformUrlForProxy(i,o){if(this.isAnthropicAPI(i))return`/api/anthropic${o}`;if(i.includes("api.openai.com"))return`/api/openai${o}`;const c=i.endsWith("/")?i.slice(0,-1):i;if(c.endsWith("/v1")&&o.startsWith("/v1/")){const f=o.substring(3);return`${c}${f}`}const d=o.startsWith("/")?o:`/${o}`;return`${c}${d}`}static convertToAnthropicMessages(i){const o=i.find(d=>d.role==="system"),c=i.filter(d=>d.role!=="system");return{system:o?.content,messages:c.map(d=>({role:d.role,content:d.content}))}}static getHeaders(i,o){const c={"Content-Type":"application/json","User-Agent":"AI-CYOA-Game/1.0"};return o.includes("api.anthropic.com")?(c["x-api-key"]=i.apiKey,c["anthropic-version"]="2023-06-01"):c.Authorization=`Bearer ${i.apiKey}`,c}static async chatCompletionStream(i,o,c,d={}){const f=this.isAnthropicAPI(i.baseUrl),h=i.baseUrl.includes("nano-gpt.com");let g;f?g="/v1/messages":h?g="/chat/completions":g="/v1/chat/completions";const p=this.transformUrlForProxy(i.baseUrl,g),y=this.getHeaders(i,i.baseUrl);y.Accept="text/event-stream";let v;if(f){const{system:w,messages:E}=this.convertToAnthropicMessages(o);v={model:i.model,messages:E,max_tokens:d.maxTokens??1e3,temperature:d.temperature??.7,stream:!0},w&&(v.system=w)}else v={model:i.model,messages:o,stream:!0,temperature:d.temperature??.7,max_tokens:d.maxTokens??1e3,top_p:1,frequency_penalty:0,presence_penalty:0},i.baseUrl.includes("nano-gpt.com")&&(i.enableReasoning===!0?v.reasoning={}:v.reasoning={exclude:!0});try{const w=performance.now();let E;const D=await fetch(p,{method:"POST",headers:y,body:JSON.stringify(v)});if(!D.ok)throw await this.handleErrorResponse(D);if(!D.body)throw new le("No response body received","API_ERROR");const Y=D.body.getReader(),q=new TextDecoder;let K="",ae="",P;const V=en.createStreamingProcessor();let Z="";for(;;){const{done:O,value:H}=await Y.read();if(O)break;ae+=q.decode(H,{stream:!0});const B=ae.split(`
`);ae=B.pop()||"";for(const ie of B){const re=ie.trim();if(!(!re||re==="data: [DONE]")&&re.startsWith("data: "))try{const Ye=re.slice(6),$=JSON.parse(Ye);let de="";if(f)$.type==="content_block_delta"&&$.delta?.text&&(de=$.delta.text),($.type==="message_delta"||$.type==="message_stop")&&$.usage&&(P={inputTokens:$.usage.input_tokens||0,outputTokens:$.usage.output_tokens||0});else{const C=$.choices?.[0]?.delta,L=C?.content,I=C?.reasoning;if(L&&(de=L),I&&(E===void 0&&(E=performance.now()),Z+=I,d.onThinkingChunk&&d.onThinkingChunk(I)),$.usage&&(P={inputTokens:$.usage.prompt_tokens||0,outputTokens:$.usage.completion_tokens||0}),$.choices?.[0]?.usage){const se=$.choices[0].usage;P={inputTokens:se.prompt_tokens||0,outputTokens:se.completion_tokens||0}}}if(de){E===void 0&&(E=performance.now()),K+=de;const C=V.processChunk(de);C.thinkingChunk&&d.onThinkingChunk&&d.onThinkingChunk(C.thinkingChunk),C.displayChunk&&c(C.displayChunk)}}catch{}}}const{thinkingContent:ke}=V.getState(),he=Z||ke,X=E!==void 0?E-w:void 0;if(!P&&K){const{cleanedResponse:O}=en.parseThinkingResponse(K);P=tm.createEstimatedUsage(o,O)}return{response:K,thinkingContent:he,ttfs:X,tokenUsage:P,modelName:i.model}}catch(w){if(w instanceof le)throw w;if(w instanceof TypeError&&w.message.includes("fetch"))throw new le("Network error: Unable to connect to AI service","NETWORK_ERROR");const E=w instanceof Error?w.message:"Unknown error";throw new le(`Unexpected error: ${E}`,"API_ERROR")}}static async chatCompletion(i,o,c={}){const d=this.isAnthropicAPI(i.baseUrl),f=i.baseUrl.includes("nano-gpt.com");let h;d?h="/v1/messages":f?h="/chat/completions":h="/v1/chat/completions";const g=this.transformUrlForProxy(i.baseUrl,h),p=this.getHeaders(i,i.baseUrl);p.Accept="application/json";let y;if(d){const{system:v,messages:w}=this.convertToAnthropicMessages(o);y={model:i.model,messages:w,max_tokens:c.maxTokens??1e3,temperature:c.temperature??.7},v&&(y.system=v)}else y={model:i.model,messages:o,stream:c.stream??!1,temperature:c.temperature??.7,max_tokens:c.maxTokens??1e3,top_p:1,frequency_penalty:0,presence_penalty:0,cache_control:{enabled:!1,ttl:"5m"}},i.baseUrl.includes("nano-gpt.com")&&(i.enableReasoning===!0?y.reasoning={}:y.reasoning={exclude:!0});try{const v=await fetch(g,{method:"POST",headers:p,body:JSON.stringify(y)});if(!v.ok)throw await this.handleErrorResponse(v);const w=await v.json();if(w&&typeof w=="object"&&"error"in w){const K=w.error;let ae="API returned an error";if(K&&typeof K=="object"){const P=["message","detail","description","error"];for(const V of P)if(V in K&&typeof K[V]=="string"){ae=K[V];break}if(ae==="API returned an error")try{ae=`API error: ${JSON.stringify(K)}`}catch{ae="API returned an unreadable error"}}else typeof K=="string"&&(ae=K);throw new le(ae,"API_ERROR")}const{response:E,tokenUsage:D}=this.parseChatCompletionResponse(w,d),{cleanedResponse:Y}=en.parseThinkingResponse(E),q=D||tm.createEstimatedUsage(o,Y);return{response:Y,tokenUsage:q,modelName:i.model}}catch(v){if(v instanceof le)throw v;if(v instanceof TypeError&&v.message.includes("fetch"))throw new le("Network error: Unable to connect to AI service","NETWORK_ERROR");if(v instanceof Error&&v.name==="AbortError")throw new le("Request timeout: AI service took too long to respond","TIMEOUT_ERROR");const w=v instanceof Error?v.message:"Unknown error";throw new le(`Unexpected error: ${w}`,"API_ERROR")}}static async chatCompletionWithRetry(i,o,c={}){const d=c.maxRetries??this.MAX_RETRIES;let f;for(let h=1;h<=d;h++)try{return await this.chatCompletion(i,o,c)}catch(g){const p=g instanceof Error?g.message:"Unknown error";if(f=g instanceof le?g:new le(`Attempt ${h} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(h===d)break;await this.delay(Math.pow(2,h-1)*1e3)}throw f}static async testConnection(i){try{const o=[{role:"user",content:"Hello"}];return await this.chatCompletion(i,o,{maxTokens:10}),{success:!0}}catch(o){return{success:!1,error:o instanceof le?o.message:"Unknown connection error"}}}static async handleErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 401:c="AUTH_ERROR",d=!1,o="Invalid API key or unauthorized access";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check your API key permissions";break;case 404:c="API_ERROR",d=!1,o="API endpoint not found - check your base URL";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Server error - please try again later";break}return new le(o,c,d,i.status)}static parseChatCompletionResponse(i,o=!1){try{if(o){if(!i||typeof i!="object"||!("content"in i)||!Array.isArray(i.content))throw new Error("Invalid Anthropic response format: expected content array");const y=i,v=y.content;if(v.length===0)throw new Error("No content blocks returned from Anthropic");let w="";for(const D of v)D&&typeof D=="object"&&"text"in D&&typeof D.text=="string"&&(w+=D.text);if(!w)throw new Error("No text content found in Anthropic response");const E=y.usage?{inputTokens:y.usage.input_tokens||0,outputTokens:y.usage.output_tokens||0}:void 0;return{response:w.trim(),tokenUsage:E}}if(!i||typeof i!="object"||!("choices"in i)||!Array.isArray(i.choices)){if(i&&typeof i=="object"&&"content"in i&&typeof i.content=="string")return{response:i.content.trim()};if(typeof i=="string")return{response:i.trim()};if(i&&typeof i=="object"){const y=this.extractTextFromUnknownFormat(i);if(y)return{response:y.trim()}}throw new Error(`Invalid response format: expected choices array. Got: ${typeof i}`)}const c=i,d=c.choices;if(d.length===0)throw new Error("No choices returned from AI service");const f=d[0];if(!f||typeof f!="object"||!("message"in f))throw new Error("Invalid choice format: expected message object");const h=f.message;if(!h||typeof h!="object"||!("content"in h))throw new Error("Invalid message format: expected content string");const g=h.content;if(typeof g!="string")throw new Error("Invalid content format: expected string");const p=c.usage?{inputTokens:c.usage.prompt_tokens||0,outputTokens:c.usage.completion_tokens||0}:void 0;return{response:g.trim(),tokenUsage:p}}catch(c){const d=c instanceof Error?c.message:"Unknown parsing error";throw new le(`Failed to parse AI response: ${d}`,"PARSE_ERROR",!1)}}static extractTextFromUnknownFormat(i){if(!i||typeof i!="object")return null;const o=i,c=["text","content","message","response","output","result"];for(const d of c)if(d in o&&typeof o[d]=="string")return o[d];for(const d of Object.values(o))if(d&&typeof d=="object"){const f=this.extractTextFromUnknownFormat(d);if(f)return f}return null}static delay(i){return new Promise(o=>setTimeout(o,i))}static createSystemMessage(i){return{role:"system",content:i}}static createUserMessage(i){return{role:"user",content:i}}static createAssistantMessage(i){return{role:"assistant",content:i}}}const Xg="modulepreload",Kg=function(x){return"/ai-cyoa-game/"+x},am={},Ig=function(i,o,c){let d=Promise.resolve();if(o&&o.length>0){let y=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};var h=y;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),p=g?.nonce||g?.getAttribute("nonce");d=y(o.map(v=>{if(v=Kg(v),v in am)return;am[v]=!0;const w=v.endsWith(".css"),E=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${E}`))return;const D=document.createElement("link");if(D.rel=w?"stylesheet":Xg,w||(D.as="script"),D.crossOrigin="",D.href=v,p&&D.setAttribute("nonce",p),document.head.appendChild(D),w)return new Promise((Y,q)=>{D.addEventListener("load",Y),D.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${v}`)))})}))}function f(g){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=g,window.dispatchEvent(p),!p.defaultPrevented)throw g}return d.then(g=>{for(const p of g||[])p.status==="rejected"&&f(p.reason);return i().catch(f)})};class rr extends Error{cause;constructor(i,o){super(i),this.name="ThemeServiceError",this.cause=o}}class Ae{static LOG_PREFIX="[ThemeService]";static info(i,o){console.log(`${this.LOG_PREFIX} ${i}`,o||"")}static warn(i,o){console.warn(`${this.LOG_PREFIX} WARNING: ${i}`,o||"")}static error(i,o){console.error(`${this.LOG_PREFIX} ERROR: ${i}`,o||"")}static debug(i,o){}}class Io{static cachedThemes=null;static async loadThemes(){try{if(Ae.debug("Attempting to load theme configuration"),this.cachedThemes)return Ae.debug("Returning cached theme configuration"),this.cachedThemes;let i;try{i=await Ig(()=>import("./themes-CvtEafsA.js"),[])}catch(c){throw Ae.error("Failed to import themes.json file",c),c instanceof Error&&c.message.includes("Cannot resolve module")?new rr("Theme configuration file not found. Please ensure themes.json exists in src/config/",c):new rr("Failed to load theme configuration file",c instanceof Error?c:void 0)}const o=i.default||i;if(Ae.debug("Theme configuration file loaded successfully"),!this.validateThemeConfig(o))throw Ae.error("Theme configuration validation failed",o),new rr("Invalid theme configuration format. Please check the themes.json file structure.");return this.cachedThemes=o,this.cachedThemes}catch(i){if(i instanceof rr)throw i;const o=i instanceof Error?i.message:"Unknown error";throw Ae.error("Unexpected error during theme loading",i),new rr(`Failed to load theme configuration: ${o}`,i instanceof Error?i:void 0)}}static validateThemeConfig(i){try{if(Ae.debug("Validating theme configuration format"),!i||typeof i!="object")return Ae.warn("Theme configuration is not an object"),!1;const o=i;if(typeof o.version!="string")return Ae.warn("Theme configuration missing or invalid version field"),!1;if(typeof o.lastUpdated!="string")return Ae.warn("Theme configuration missing or invalid lastUpdated field"),!1;if(!Array.isArray(o.themes))return Ae.warn("Theme configuration missing or invalid themes array"),!1;if(o.themes.length===0)return Ae.warn("Theme configuration contains empty themes array"),!1;for(let c=0;c<o.themes.length;c++){const d=o.themes[c];if(!this.validateTheme(d))return Ae.warn(`Theme validation failed at index ${c}`,d),!1}return Ae.debug(`Theme configuration validation successful: ${o.themes.length} themes validated`),!0}catch(o){return Ae.error("Unexpected error during theme configuration validation",o),!1}}static validateTheme(i){if(!i||typeof i!="object")return!1;const o=i;return!(typeof o.id!="string"||typeof o.name!="string"||o.id.trim()===""||o.name.trim()===""||o.description!==void 0&&typeof o.description!="string"||o.keywords!==void 0&&(!Array.isArray(o.keywords)||!o.keywords.every(c=>typeof c=="string")))}static async selectRandomTheme(){try{Ae.debug("Attempting to select random theme");let i;try{i=await this.loadThemes()}catch(d){return Ae.warn("Failed to load themes for selection, continuing without theme",d),null}if(!i.themes||i.themes.length===0)return Ae.warn("No themes available for selection - theme list is empty"),null;const o=Math.floor(Math.random()*i.themes.length),c=i.themes[o];return!c||!c.name||c.name.trim()===""?(Ae.warn(`Selected theme at index ${o} is invalid`,c),null):(console.log(` Selected theme: "${c.name}"`),c.name)}catch(i){return Ae.warn("Unexpected error during theme selection, continuing without theme",i),null}}static injectThemeIntoPrompt(i,o){try{if(Ae.debug("Attempting theme injection into prompt"),!i||typeof i!="string"||i.trim()==="")return Ae.warn("Invalid base prompt provided for theme injection, returning empty string"),"";if(!o||typeof o!="string"||o.trim()==="")return Ae.debug("No theme provided, returning original prompt"),i;const c=o.trim();if(c.length===0)return Ae.debug("Theme is empty after sanitization, returning original prompt"),i;const f=`Set this story in a ${c} setting. `+i;return f.length>1e4&&Ae.warn(`Enhanced prompt is very long (${f.length} characters), this may cause issues`),f}catch(c){return Ae.error("Unexpected error during theme injection, returning original prompt",c),i||""}}static async getAvailableThemes(){try{Ae.debug("Retrieving all available theme names");let i;try{i=await this.loadThemes()}catch(c){return Ae.warn("Failed to load themes when getting available themes",c),[]}if(!i.themes||i.themes.length===0)return Ae.warn("No themes available - theme list is empty"),[];const o=i.themes.filter(c=>c&&c.name&&c.name.trim()!=="").map(c=>c.name);return Ae.debug(`Retrieved ${o.length} theme names`),o}catch(i){return Ae.error("Unexpected error while getting available themes",i),[]}}static clearCache(){this.cachedThemes=null}static async healthCheck(){try{Ae.debug("Performing theme system health check");const i=await this.loadThemes();if(!i.themes||i.themes.length===0)return{healthy:!1,error:"No themes available in configuration",themeCount:0};if(i.themes.length>0){const o=i.themes[0];if(!o||!o.name||o.name.trim()==="")return{healthy:!1,error:"Theme data validation failed - invalid theme structure",themeCount:i.themes.length};const c="This is a test prompt.";if(this.injectThemeIntoPrompt(c,o.name)===c)return{healthy:!1,error:"Theme injection failed",themeCount:i.themes.length}}return{healthy:!0,themeCount:i.themes.length}}catch(i){const o=i instanceof Error?i.message:"Unknown error";return Ae.error("Theme system health check failed",i),{healthy:!1,error:o}}}}class Wt{static STORY_SYSTEM_PROMPT=`You are a creative storyteller for an interactive Choose Your Own Adventure game. Your role is to:

1. Create engaging, immersive narratives with vivid descriptions
2. Maintain narrative continuity and consistency
3. Keep responses SHORT, CONCISE, but descriptive (2 paragraphs max)
4. Always end with a clear situation that requires a decision
5. NEVER include choices or options in the STORY section

Guidelines:
- Write in second person ("You...")
- Each story segment should advance the plot meaningfully
- The STORY section should contain ONLY narrative text
- The SCENE section should contain ONLY visual scene description
- DO NOT include "Do you:", choices, or options in the STORY section
- Choices will be generated separately in a different step`;static generateInitialStoryPrompt(i=!0,o){const h=`Create the opening scene for a new Choose Your Own Adventure story. 

Requirements:
- Set up an intriguing premise and setting
- Introduce the main character (the player)
- Create an engaging hook that draws the reader in
- End with a situation that requires a decision${i?`
- Include a brief scene description for potential image generation`:`
- Do NOT include any scene descriptions or SCENE: sections`}

Format your response as:
STORY: [The narrative text - NO choices, NO "Do you:" text, ONLY story narrative]${i?`
SCENE: [Brief visual description of the current scene for image generation]`:""}
CHOICES: [3-4 numbered choices, each on a new line]

IMPORTANT: The STORY section must contain ONLY narrative text. Do not include any choices, options, or "Do you:" prompts in the STORY section. Put all choices in the separate CHOICES section.${i?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide STORY and CHOICES sections.`}`;let g;try{g=Io.injectThemeIntoPrompt(h,o)}catch(p){console.warn("[StoryService] Theme injection failed, using base prompt:",p),g=h}return ea.truncateToTokenLimit(g)}static generateContinuationPrompt(i,o,c=!0){const{contextText:d,previousSegment:f,previousAction:h,segmentsIncluded:g,choicesIncluded:p}=ea.buildEnhancedContext(o.storyHistory,o.choiceHistory,o.currentScene,28e3),y=c?`
- Include a scene description for image generation`:`
- Do NOT include any scene descriptions or SCENE: sections`,v=c?`
SCENE: [Brief visual description of the new scene for image generation]`:"",w=c?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide STORY and CHOICES sections.`,E=`Continue the story based on the player's choice: "${i.text}"

IMMEDIATE CONTEXT:
Previous segment: ${f||"None"}
Previous action: ${h||"None"}
Current scene: ${o.currentScene}

STORY HISTORY (${g} segments, ${p} actions included):
${d}

REQUIREMENTS:
THE PLAYER DOES NOT ALWAYS NEED TO HAVE CONSEQUENCES
- Show the consequences of the player's choice if it MAKES SENSE
- Advance the story meaningfully from the previous segment
- Maintain consistency with previous events and the established narrative
YOU DO NOT HAVE TO CREATE A NEW SCENE FOR THE PLAYER TO DECIDE, LET IT FLOW NATURALLY${y}

Format your response as:
STORY: [The narrative text showing consequences and new developments - NO choices, NO "Do you:" text]${v}
CHOICES: [3-4 numbered choices, each on a new line]

IMPORTANT: The STORY section must contain ONLY narrative text. Do not include any choices, options, or "Do you:" prompts in the STORY section. Put all choices in the separate CHOICES section.${w}`;return ea.truncateToTokenLimit(E)}static generateChoicesPrompt(i,o){return`Based on the current story situation, generate 3-4 meaningful choices for the player.

Current story: ${i.substring(0,500)}...
Current scene: ${o}

Requirements:
- Each choice should lead to different story outcomes
- Choices should be specific and actionable
- Avoid generic options like "Go left" or "Go right"
- Make choices feel consequential and interesting
- Keep each choice to 1-2 sentences maximum

Format your response as a numbered list:
1. [First choice option]
2. [Second choice option]
3. [Third choice option]
4. [Fourth choice option (if applicable)]`}}class va{static async generateInitialStoryStream(i,o,c,d){const f=i.enableImageGeneration!==!1,h=await this.safeThemeSelection(),g=[Ne.createSystemMessage(Wt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wt.generateInitialStoryPrompt(f,h||void 0))];try{const{response:p,thinkingContent:y,ttfs:v,tokenUsage:w,modelName:E}=await Ne.chatCompletionStream(i,g,o,{temperature:c?.temperature??.8,maxTokens:2048,onThinkingChunk:d});return{...this.parseStoryResponse(p,f),thinkingContent:y,ttfs:v,tokenUsage:w,modelName:E}}catch(p){throw p instanceof le?p:new le(`Failed to generate initial story: ${p instanceof Error?p.message:"Unknown error"}`,"API_ERROR")}}static async generateInitialStory(i,o){const c=i.enableImageGeneration!==!1,d=await this.safeThemeSelection(),f=[Ne.createSystemMessage(Wt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wt.generateInitialStoryPrompt(c,d||void 0))];try{const{response:h,tokenUsage:g,modelName:p}=await Ne.chatCompletionWithRetry(i,f,{temperature:o?.temperature??.8,maxTokens:2048});return{...this.parseStoryResponse(h,c),tokenUsage:g,modelName:p}}catch(h){throw h instanceof le?h:new le(`Failed to generate initial story: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static async continueStoryStream(i,o,c,d,f,h){const g=i.enableImageGeneration!==!1,p=[Ne.createSystemMessage(Wt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wt.generateContinuationPrompt(o,c,g))];try{const{response:y,thinkingContent:v,ttfs:w,tokenUsage:E,modelName:D}=await Ne.chatCompletionStream(i,p,d,{temperature:f?.temperature??.8,maxTokens:2048,onThinkingChunk:h}),Y=this.parseStoryResponse(y,g);if(Y.choices.length===0){const q=await this.generateChoices(i,Y.text,Y.sceneDescription,f);Y.choices=q}return{...Y,thinkingContent:v,ttfs:w,tokenUsage:E,modelName:D}}catch(y){throw y instanceof le?y:new le(`Failed to continue story: ${y instanceof Error?y.message:"Unknown error"}`,"API_ERROR")}}static async continueStory(i,o,c,d){const f=i.enableImageGeneration!==!1,h=[Ne.createSystemMessage(Wt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wt.generateContinuationPrompt(o,c,f))];try{const{response:g,tokenUsage:p,modelName:y}=await Ne.chatCompletionWithRetry(i,h,{temperature:d?.temperature??.8,maxTokens:2048}),v=this.parseStoryResponse(g,f);if(v.choices.length===0){const w=await this.generateChoices(i,v.text,v.sceneDescription,d);v.choices=w}return{...v,tokenUsage:p,modelName:y}}catch(g){throw g instanceof le?g:new le(`Failed to continue story: ${g instanceof Error?g.message:"Unknown error"}`,"API_ERROR")}}static async generateChoices(i,o,c,d){const f=[Ne.createSystemMessage(Wt.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wt.generateChoicesPrompt(o,c))];try{const{response:h}=await Ne.chatCompletionWithRetry(i,f,{temperature:d?.temperature??.7,maxTokens:400});return this.parseChoicesResponse(h)}catch(h){throw h instanceof le?h:new le(`Failed to generate choices: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static async generateInitialStoryWithRetry(i,o=3,c){let d;for(let f=1;f<=o;f++)try{const h=await this.generateInitialStory(i,c);if(h.choices.length===0){const g=await this.generateChoices(i,h.text,h.sceneDescription,c);h.choices=g}return h}catch(h){const g=h instanceof Error?h.message:"Unknown error";if(d=h instanceof le?h:new le(`Attempt ${f} failed: ${g}`,"API_ERROR"),!d.retryable)throw d;if(f===o)break;await this.delay(Math.pow(2,f-1)*1e3)}throw d}static parseStoryResponse(i,o=!0){try{const{cleanedResponse:c}=en.parseThinkingResponse(i),d=c.match(/STORY:\s*(.*?)(?=\n\s*\*?\*?SCENE:?|\n\s*\*?\*?CHOICES:?|$)/is),f=c.match(/\*?\*?SCENE:\s*(.*?)(?=\n\s*\*?\*?CHOICES:?|$)/is),h=c.match(/\*?\*?CHOICES:?\*?\*?\s*(.*?)$/is);if(!d||!d[1]){const v=this.tryFallbackParsing(c);if(v)return v;let w="No story content found in response";throw i.includes("<think>")&&!i.includes("</think>")?w="AI response appears to be incomplete (truncated thinking). Try again or check your token limits.":i.length<50?w="AI response too short. The model may not be responding properly.":i.includes("STORY:")||(w="AI response missing expected format. The model may not be following instructions."),new Error(w)}const g=d[1].trim(),p=o&&f?f[1].trim():"A mysterious scene unfolds";if(g.length<50)throw new Error("Story content too short");let y=[];return h&&h[1]&&(y=this.parseChoicesFromText(h[1].trim())),{id:this.generateId(),text:g,sceneDescription:p,choices:y}}catch(c){throw new le(`Failed to parse story response: ${c instanceof Error?c.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static parseChoicesResponse(i){try{const o=[],c=i.split(`
`).filter(d=>d.trim());for(const d of c){const f=d.match(/^\d+\.\s*(.+)$/);if(f&&f[1]){const h=f[1].trim();h.length>10&&o.push({id:this.generateId(),text:h})}}if(o.length<2)throw new Error("Not enough valid choices generated");return o.slice(0,4)}catch(o){throw new le(`Failed to parse choices response: ${o instanceof Error?o.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static generateId(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}static parseChoicesFromText(i){const o=[],c=i.split(`
`).filter(d=>d.trim());for(const d of c){const f=d.trim(),h=f.match(/^\d+[.)]\s*(.+)$/);h&&h[1]?o.push({id:this.generateId(),text:h[1].trim()}):f.length>0&&o.push({id:this.generateId(),text:f})}return o}static tryFallbackParsing(i){try{const o=i.trim();if(o.length<20)return null;if(o.length>50&&!o.includes("STORY:")&&!o.includes("CHOICES:")&&!o.includes("CHOICES")&&!o.includes("**CHOICES"))return{id:this.generateId(),text:o,sceneDescription:"A mysterious scene unfolds",choices:[]};const c=o.split(`
`).filter(h=>h.trim()),d=[];let f=!1;for(const h of c){const g=h.trim();g&&!g.match(/^\d+\./)&&!g.match(/^\*?\*?(STORY|SCENE|CHOICES):?\*?\*?/i)&&!g.match(/^(Do you|What do you|Your options|Choose)/i)&&(d.push(g),f=!0)}if(f&&d.length>0){const h=d.join(" ").trim();if(h.length>50)return{id:this.generateId(),text:h,sceneDescription:"A mysterious scene unfolds",choices:[]}}if(o.length>20){const h=[/You\s+(?:are|find|see|hear|feel|walk|run|stand|sit|look)\s+.*$/im,/The\s+.*$/im,/A\s+.*$/im,/As\s+you\s+.*$/im];for(const g of h){const p=o.match(g);if(p&&p[0]&&p[0].length>50)return{id:this.generateId(),text:p[0].trim(),sceneDescription:"A mysterious scene unfolds",choices:[]}}}return null}catch{return null}}static delay(i){return new Promise(o=>setTimeout(o,i))}static validateStoryContext(i){return i&&Array.isArray(i.storyHistory)&&Array.isArray(i.choiceHistory)&&typeof i.currentScene=="string"&&i.currentScene.length>0}static createStoryContext(i,o,c){return{storyHistory:[...i],choiceHistory:[...o],currentScene:c}}static async regenerateInitialStoryStream(i,o,c,d){const f={temperature:Math.min((c?.temperature??.7)+.1,1),minP:c?.minP??.05,repetitionPenalty:c?.repetitionPenalty??1.1,enableStreaming:c?.enableStreaming};return this.generateInitialStoryStream(i,o,f,d)}static async regenerateInitialStory(i,o){const c={temperature:Math.min((o?.temperature??.7)+.1,1),minP:o?.minP??.05,repetitionPenalty:o?.repetitionPenalty??1.1,enableStreaming:o?.enableStreaming};return this.generateInitialStory(i,c)}static async regenerateStoryStream(i,o,c,d,f,h){const g={temperature:Math.min((f?.temperature??.7)+.1,1),minP:f?.minP??.05,repetitionPenalty:f?.repetitionPenalty??1.1,enableStreaming:f?.enableStreaming};return this.continueStoryStream(i,o,c,d,g,h)}static async regenerateStory(i,o,c,d){const f={temperature:Math.min((d?.temperature??.7)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.continueStory(i,o,c,f)}static async testStoryGeneration(i){try{const o=await this.generateInitialStory(i);return!o.text||o.text.length<50?{success:!1,error:"Generated story too short or empty"}:{success:!0}}catch(o){return{success:!1,error:o instanceof le?o.message:"Unknown story generation error"}}}static async safeThemeSelection(){try{const i=await Io.selectRandomTheme();return i||console.log(" Generating story without theme"),i}catch(i){return console.warn("[StoryService] Theme selection failed, continuing without theme:",i),null}}static async validateGracefulDegradation(i){try{let o=!1;try{o=(await Io.healthCheck()).healthy}catch{o=!1}const c=await this.generateInitialStory(i);return!c.text||c.text.length<50?{success:!1,error:"Story generation failed even with theme system fallback",themeSystemWorking:o}:{success:!0,themeSystemWorking:o}}catch(o){return{success:!1,error:`Graceful degradation failed: ${o instanceof Error?o.message:"Unknown error"}`,themeSystemWorking:!1}}}}class Wa{static CUSTOM_STORY_SYSTEM_PROMPT=`You are a creative storyteller for an interactive Choose Your Own Adventure game in CUSTOM MODE. Your role is to:

1. Continue stories based on user-provided scene descriptions and actions
2. Maintain narrative continuity and consistency
3. Keep responses SHORT, CONCISE, but descriptive (2 paragraphs max)
4. NEVER include choices or options in your response - the user provides their own actions

Guidelines:
- Write in second person ("You...")
- Each story segment should advance the plot meaningfully based on the user's input
- The STORY section should contain ONLY narrative text
- DO NOT include "Do you:", choices, options, or questions in the STORY section
- The user will provide their own custom actions`;static generateCustomInitialStoryPrompt(i,o=!0){const f=`The user has provided this initial setup for their custom adventure:
"${i}"

Begin this interactive story by:
1. Expanding on the user's setup, while avoiding purple prose
2. Creating an engaging opening situation
3. Establishing the tone and setting
4. Drawing the reader into the narrative

IMPORTANT: Do NOT include any choices or options. The user will provide their own actions.

Format your response as:
STORY: [The narrative opening - NO choices, NO "Do you:" text, ONLY story narrative]${o?`
SCENE: [Brief visual description of the current scene for image generation]`:""}${o?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide the STORY section.`}`;return ea.truncateToTokenLimit(f)}static generateCustomContinuationPrompt(i,o,c=!0){const{contextText:d,previousSegment:f,previousAction:h,segmentsIncluded:g,choicesIncluded:p}=ea.buildEnhancedContext(o.storyHistory,o.choiceHistory,o.currentScene,6e3),y=c?`
SCENE: [Brief visual description of the new scene for image generation]`:"",v=c?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide the STORY section.`,w=`The user chose to: "${i}"

IMMEDIATE CONTEXT:
Previous segment: ${f||"None"}
Previous action: ${h||"None"}
Current scene: ${o.currentScene}

STORY HISTORY (${g} segments, ${p} actions included):
${d}

Continue the story based on this action by:
1. Showing the immediate consequences of the user's action
2. Advancing the narrative meaningfully from the previous segment
3. Creating a new situation that flows naturally from their choice
4. Maintaining consistency with previous events and the established narrative

IMPORTANT: Do NOT include any choices or options. The user will provide their own next action.

Format your response as:
STORY: [The narrative continuation - NO choices, NO "Do you:" text, ONLY story narrative]${y}${v}`;return ea.truncateToTokenLimit(w)}}class Sa{static async generateCustomInitialStoryStream(i,o,c,d,f){const h=i.enableImageGeneration!==!1,g=[Ne.createSystemMessage(Wa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wa.generateCustomInitialStoryPrompt(o,h))];try{const{response:p,thinkingContent:y,ttfs:v,tokenUsage:w,modelName:E}=await Ne.chatCompletionStream(i,g,c,{temperature:d?.temperature??.8,maxTokens:2048,onThinkingChunk:f});return{...this.parseCustomStoryResponse(p,h),thinkingContent:y,ttfs:v,tokenUsage:w,modelName:E}}catch(p){throw p instanceof le?p:new le(`Failed to generate custom initial story: ${p instanceof Error?p.message:"Unknown error"}`,"API_ERROR")}}static async generateCustomInitialStory(i,o,c){const d=i.enableImageGeneration!==!1,f=[Ne.createSystemMessage(Wa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wa.generateCustomInitialStoryPrompt(o,d))];try{const{response:h,tokenUsage:g,modelName:p}=await Ne.chatCompletionWithRetry(i,f,{temperature:c?.temperature??.8,maxTokens:2048});return{...this.parseCustomStoryResponse(h,d),tokenUsage:g,modelName:p}}catch(h){throw h instanceof le?h:new le(`Failed to generate custom initial story: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static async continueCustomStoryStream(i,o,c,d,f,h){const g=i.enableImageGeneration!==!1,p=[Ne.createSystemMessage(Wa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wa.generateCustomContinuationPrompt(o,c,g))];try{const{response:y,thinkingContent:v,ttfs:w,tokenUsage:E,modelName:D}=await Ne.chatCompletionStream(i,p,d,{temperature:f?.temperature??.8,maxTokens:2048,onThinkingChunk:h});return{...this.parseCustomStoryResponse(y,g),thinkingContent:v,ttfs:w,tokenUsage:E,modelName:D}}catch(y){throw y instanceof le?y:new le(`Failed to continue custom story: ${y instanceof Error?y.message:"Unknown error"}`,"API_ERROR")}}static async continueCustomStory(i,o,c,d){const f=i.enableImageGeneration!==!1,h=[Ne.createSystemMessage(Wa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Wa.generateCustomContinuationPrompt(o,c,f))];try{const{response:g,tokenUsage:p,modelName:y}=await Ne.chatCompletionWithRetry(i,h,{temperature:d?.temperature??.8,maxTokens:2048});return{...this.parseCustomStoryResponse(g,f),tokenUsage:p,modelName:y}}catch(g){throw g instanceof le?g:new le(`Failed to continue custom story: ${g instanceof Error?g.message:"Unknown error"}`,"API_ERROR")}}static parseCustomStoryResponse(i,o=!0){try{const{cleanedResponse:c}=en.parseThinkingResponse(i),d=c.match(/STORY:\s*(.*?)(?=SCENE:|$)/s),f=c.match(/SCENE:\s*(.*?)$/s);if(!d||!d[1]){const p=this.tryFallbackParsing(c);if(p)return p;throw new Error("No story content found in response")}const h=d[1].trim(),g=o&&f?f[1].trim():"A mysterious scene unfolds";if(h.length<50)throw new Error("Story content too short");return{id:this.generateId(),text:h,sceneDescription:g,choices:[]}}catch(c){throw new le(`Failed to parse custom story response: ${c instanceof Error?c.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static generateId(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}static validateStoryContext(i){return i&&Array.isArray(i.storyHistory)&&Array.isArray(i.choiceHistory)&&typeof i.currentScene=="string"&&i.currentScene.length>0}static createStoryContext(i,o,c){return{storyHistory:[...i],choiceHistory:[...o],currentScene:c}}static async regenerateCustomInitialStoryStream(i,o,c,d,f){const h={temperature:Math.min((d?.temperature??.8)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.generateCustomInitialStoryStream(i,o,c,h,f)}static async regenerateCustomInitialStory(i,o,c){const d={temperature:Math.min((c?.temperature??.8)+.1,1),minP:c?.minP??.05,repetitionPenalty:c?.repetitionPenalty??1.1,enableStreaming:c?.enableStreaming};return this.generateCustomInitialStory(i,o,d)}static async regenerateCustomStoryStream(i,o,c,d,f,h){const g={temperature:Math.min((f?.temperature??.8)+.1,1),minP:f?.minP??.05,repetitionPenalty:f?.repetitionPenalty??1.1,enableStreaming:f?.enableStreaming};return this.continueCustomStoryStream(i,o,c,d,g,h)}static async regenerateCustomStory(i,o,c,d){const f={temperature:Math.min((d?.temperature??.8)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.continueCustomStory(i,o,c,f)}static tryFallbackParsing(i){try{const o=i.trim();if(o.length>50&&!o.includes("STORY:")&&!o.includes("SCENE:"))return{id:this.generateId(),text:o,sceneDescription:"A mysterious scene unfolds",choices:[]};const c=o.split(`
`).filter(h=>h.trim()),d=[];let f=!1;for(const h of c){const g=h.trim();g&&(g.match(/^(STORY|SCENE):/i)||(d.push(g),f=!0))}if(f&&d.length>0){const h=d.join(" ").trim();if(h.length>50)return{id:this.generateId(),text:h,sceneDescription:"A mysterious scene unfolds",choices:[]}}return null}catch{return null}}static async testCustomStoryGeneration(i,o="You find yourself in a mysterious forest at twilight"){try{const c=await this.generateCustomInitialStory(i,o);return!c.text||c.text.length<50?{success:!1,error:"Generated story too short or empty"}:c.choices.length!==0?{success:!1,error:"Custom story should not include choices"}:{success:!0}}catch(c){return{success:!1,error:c instanceof le?c.message:"Unknown custom story generation error"}}}}class Ko{static IMAGE_SYSTEM_PROMPT=`You are an AI assistant that creates detailed image prompts for DALL-E style image generation. Your role is to:

1. Create vivid, detailed visual descriptions
2. Focus on atmosphere, lighting, and composition
3. Include artistic style and mood descriptors
4. Keep prompts concise but descriptive (under 200 words)
5. Avoid text or writing in images

Guidelines:
- Use descriptive adjectives for mood and atmosphere
- Include lighting conditions (dramatic, soft, golden hour, etc.)
- Specify artistic style when appropriate (realistic, fantasy art, etc.)
- Focus on visual elements that enhance the story mood
- Avoid including people's faces in detail to maintain mystery`;static generateScenePrompt(i,o){let c="";if(o){const d=["Do you:","What do you do?","Your options are:","Choose your action:","You can:","Your choices:","1. **","2. **","3. **","4. **"];let f=o;for(const h of d){const g=f.indexOf(h);if(g!==-1){f=f.substring(0,g).trim();break}}f.length>50&&(c=`

Narrative context: ${f.substring(0,200)}...`)}return`Create a detailed image prompt for this scene: "${i}"${c}

Requirements:
- Focus on the environment, atmosphere, and mood
- Include lighting and weather conditions if relevant
- Specify artistic style (realistic, fantasy, cinematic, etc.)
- Keep the prompt under 200 words
- Make it visually compelling and atmospheric
- DO NOT include any choices, options, or decision text
- Focus purely on the visual scene description

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`}static generateItemPrompt(i,o){const c=o?`

Context: ${o.substring(0,200)}...`:"";return`Create a detailed image prompt for this item or character: "${i}"${c}

Requirements:
- Focus on visual details, textures, and materials
- Include appropriate lighting and background
- Specify artistic style and mood
- Keep the prompt under 150 words
- Make it visually interesting and detailed

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`}}class Qg{static IMAGE_REQUEST_TIMEOUT=6e4;static MAX_RETRIES=2;static async generateSceneImage(i,o,c){try{const d=await this.generateCleanImagePrompt(i,o);return await this.generateImage(i,d)}catch(d){throw d instanceof le?d:new le(`Failed to generate scene image: ${d instanceof Error?d.message:"Unknown error"}`,"API_ERROR")}}static async generateItemImage(i,o,c){try{const d=await this.generateItemImagePrompt(i,o,c);return await this.generateImage(i,d)}catch(d){throw d instanceof le?d:new le(`Failed to generate item image: ${d instanceof Error?d.message:"Unknown error"}`,"API_ERROR")}}static async generateSceneImageWithRetry(i,o,c,d=this.MAX_RETRIES){let f;for(let h=1;h<=d;h++)try{return await this.generateSceneImage(i,o,c)}catch(g){const p=g instanceof Error?g.message:"Unknown error";if(f=g instanceof le?g:new le(`Attempt ${h} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(h===d)break;await this.delay(Math.pow(2,h)*2e3)}throw f}static async generateItemImageWithRetry(i,o,c,d=this.MAX_RETRIES){let f;for(let h=1;h<=d;h++)try{return await this.generateItemImage(i,o,c)}catch(g){const p=g instanceof Error?g.message:"Unknown error";if(f=g instanceof le?g:new le(`Attempt ${h} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(h===d)break;await this.delay(Math.pow(2,h)*2e3)}throw f}static async generateCleanImagePrompt(i,o){const c=`Create a detailed image prompt for this scene: "${o}"

Requirements:
- Focus on the environment, atmosphere, and mood
- Include lighting and weather conditions if relevant
- Specify artistic style (realistic, fantasy, cinematic, etc.)
- Keep the prompt under 200 words
- Make it visually compelling and atmospheric
- DO NOT include any choices, options, or decision text
- Focus purely on the visual scene description

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`,d=[Ne.createSystemMessage(Ko.IMAGE_SYSTEM_PROMPT),Ne.createUserMessage(c)];try{const{response:f}=await Ne.chatCompletionWithRetry(i,d,{temperature:.8,maxTokens:300});return f.trim()}catch(f){throw f instanceof le?f:new le(`Failed to generate image prompt: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async generateItemImagePrompt(i,o,c){const d=[Ne.createSystemMessage(Ko.IMAGE_SYSTEM_PROMPT),Ne.createUserMessage(Ko.generateItemPrompt(o,c))];try{const{response:f}=await Ne.chatCompletionWithRetry(i,d,{temperature:.8,maxTokens:250});return f.trim()}catch(f){throw f instanceof le?f:new le(`Failed to generate item image prompt: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async generateImage(i,o){const c=i.imageConfig?.apiKey||i.apiKey,d=i.imageConfig?.baseUrl||i.baseUrl,f=i.imageConfig?.provider||"openai",h=i.imageConfig?.model||i.model;let g,p,y;switch(f){case"nano-gpt":{g=`${d}/api/generate-image`,p={prompt:o,model:h,size:"1024x1024"},y={"Content-Type":"application/json","x-api-key":c};break}case"openai":default:{g=`${d}/images/generations`,p={prompt:o,model:h,n:1,size:"1024x1024",response_format:"url"},y={Authorization:`Bearer ${c}`,"Content-Type":"application/json"};break}}try{const v=await this.makeImageRequest(g,{method:"POST",headers:y,body:JSON.stringify(p),signal:AbortSignal.timeout(this.IMAGE_REQUEST_TIMEOUT)});if(!v.ok)throw await this.handleImageErrorResponse(v);const w=await v.json();return this.parseImageResponse(w,f)}catch(v){if(v instanceof le)throw v;if(v instanceof TypeError&&v.message.includes("fetch"))throw new le("Network error: Unable to connect to image generation service","NETWORK_ERROR");if(v instanceof Error&&v.name==="AbortError")throw new le("Request timeout: Image generation took too long","TIMEOUT_ERROR");const w=v instanceof Error?v.message:"Unknown error";throw new le(`Unexpected image generation error: ${w}`,"API_ERROR")}}static async makeImageRequest(i,o){try{return await fetch(i,o)}catch(c){throw c instanceof TypeError?new le("Network error: Check your internet connection and image API endpoint","NETWORK_ERROR"):c}}static async handleImageErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 400:c="API_ERROR",d=!1,o="Invalid image generation request - check prompt content";break;case 401:c="AUTH_ERROR",d=!1,o="Invalid API key for image generation";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check image generation permissions";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded for image generation - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Image generation server error - please try again later";break}return new le(o,c,d,i.status)}static parseImageResponse(i,o="openai"){try{if(!i||typeof i!="object")throw new Error("Invalid response format: expected object");let c;switch(o){case"nano-gpt":{const d=i;if("image"in d&&typeof d.image=="string")c=d.image;else if("imageDataUrl"in d&&typeof d.imageDataUrl=="string")c=d.imageDataUrl;else if("image_url"in d&&typeof d.image_url=="string")c=d.image_url;else if("url"in d&&typeof d.url=="string")c=d.url;else if("data"in d&&Array.isArray(d.data)&&d.data.length>0){const f=d.data[0];if(f&&typeof f=="object"&&f!==null){const h=f;if("url"in h&&typeof h.url=="string")c=h.url;else if("image"in h&&typeof h.image=="string")c=h.image;else if("imageDataUrl"in h&&typeof h.imageDataUrl=="string")c=h.imageDataUrl;else if("image_url"in h&&typeof h.image_url=="string")c=h.image_url;else if("b64_json"in h&&typeof h.b64_json=="string")c=`data:image/jpeg;base64,${h.b64_json}`;else throw new Error(`Invalid nano-gpt data item format: no image URL found. Available fields: ${Object.keys(h).join(", ")}`)}else throw new Error("Invalid nano-gpt response format: no image URL found")}else throw console.error("Available fields in nano-gpt response:",Object.keys(d)),new Error(`Invalid nano-gpt response format: no image URL found. Available fields: ${Object.keys(d).join(", ")}`);break}case"openai":default:{if(!("data"in i)||!Array.isArray(i.data))throw new Error("Invalid OpenAI response format: expected data array");const d=i.data;if(d.length===0)throw new Error("No images returned from OpenAI service");const f=d[0];if(!f||typeof f!="object"||!("url"in f))throw new Error("Invalid OpenAI image format: expected url property");c=f.url;break}}if(typeof c!="string"||!c.startsWith("http")&&!c.startsWith("data:"))throw new Error("Invalid image URL format: expected valid HTTP URL or data URL");return c}catch(c){const d=c instanceof Error?c.message:"Unknown parsing error";throw new le(`Failed to parse ${o} image response: ${d}`,"PARSE_ERROR",!1)}}static async testImageGeneration(i){try{const o=await this.generateImage(i,"A simple test image of a peaceful landscape");return!o||!o.startsWith("http")?{success:!1,error:"Generated image URL is invalid"}:{success:!0}}catch(o){return{success:!1,error:o instanceof le?o.message:"Unknown image generation error"}}}static getEffectiveImageConfig(i){return{apiKey:i.imageConfig?.apiKey||i.apiKey,baseUrl:i.imageConfig?.baseUrl||i.baseUrl,model:i.imageConfig?.model||i.model}}static delay(i){return new Promise(o=>setTimeout(o,i))}static validateImageParams(i){return typeof i=="string"&&i.trim().length>10&&i.length<1e3}static createFallbackImageUrl(i){return`https://via.placeholder.com/512x512/4a5568/ffffff?text=${encodeURIComponent(i.substring(0,50))}`}}const At={AI_CONFIG:"cyoa_ai_config",APP_SETTINGS:"cyoa_app_settings",SAVED_GAMES:"cyoa_saved_games"},rm="1.0.0";class js{static encode(i){return btoa(i)}static decode(i){try{return atob(i)}catch{return i}}static setItem(i,o){try{localStorage.setItem(i,this.encode(o))}catch(c){throw console.error("Failed to save to localStorage:",c),new Error("Failed to save configuration")}}static getItem(i){try{const o=localStorage.getItem(i);return o?this.decode(o):null}catch(o){return console.error("Failed to read from localStorage:",o),null}}static removeItem(i){try{localStorage.removeItem(i)}catch(o){console.error("Failed to remove from localStorage:",o)}}}class ja{static saveConfig(i){try{const o=JSON.stringify(i);js.setItem(At.AI_CONFIG,o)}catch(o){throw console.error("Failed to save AI config:",o),new Error("Failed to save AI configuration")}}static loadConfig(){try{const i=js.getItem(At.AI_CONFIG);return i?JSON.parse(i):null}catch(i){return console.error("Failed to load AI config:",i),null}}static clearConfig(){js.removeItem(At.AI_CONFIG)}static hasConfig(){return js.getItem(At.AI_CONFIG)!==null}}class Zg{static serialize(i){try{const o={...i,createdAt:i.createdAt.toISOString(),lastUpdated:i.lastUpdated.toISOString(),version:rm};return JSON.stringify(o)}catch(o){throw console.error("Failed to serialize game state:",o),new Error("Failed to serialize game state")}}static deserialize(i){try{const o=JSON.parse(i);if(!this.validateGameState(o))throw new Error("Invalid game state format");return{...o,createdAt:new Date(o.createdAt),lastUpdated:new Date(o.lastUpdated),gameMode:o.gameMode||"standard"}}catch(o){throw console.error("Failed to deserialize game state:",o),new Error("Failed to deserialize game state")}}static validateGameState(i){if(!i||typeof i!="object")return!1;const o=i;if(!o.gameId||typeof o.gameId!="string"||!o.createdAt||!o.lastUpdated||!o.currentStory||typeof o.currentStory!="object"||!Array.isArray(o.storyHistory)||!Array.isArray(o.choiceHistory))return!1;const c=o.currentStory;if(!c.id||!c.text||!c.sceneDescription||!Array.isArray(c.choices))return!1;for(const d of c.choices){const f=d;if(!f.id||!f.text)return!1}return!0}}class Pa{static serialize(i){try{const o={...i,gameState:{...i.gameState,createdAt:i.gameState.createdAt.toISOString(),lastUpdated:i.gameState.lastUpdated.toISOString()},metadata:{...i.metadata,createdAt:i.metadata.createdAt.toISOString(),lastPlayed:i.metadata.lastPlayed.toISOString()},version:rm};return JSON.stringify(o)}catch(o){throw console.error("Failed to serialize saved game:",o),new Error("Failed to serialize saved game")}}static deserialize(i){try{const o=JSON.parse(i);if(!this.validateSavedGame(o))throw new Error("Invalid saved game format");return{...o,gameState:{...o.gameState,createdAt:new Date(o.gameState.createdAt),lastUpdated:new Date(o.gameState.lastUpdated),gameMode:o.gameState.gameMode||"standard",customScene:o.gameState.customScene},metadata:{...o.metadata,createdAt:new Date(o.metadata.createdAt),lastPlayed:new Date(o.metadata.lastPlayed),gameMode:o.metadata.gameMode||o.gameState.gameMode||"standard"}}}catch(o){throw console.error("Failed to deserialize saved game:",o),new Error("Failed to deserialize saved game")}}static validateSavedGame(i){if(!i||typeof i!="object")return!1;const o=i;if(!o.gameId||typeof o.gameId!="string"||!o.gameState||typeof o.gameState!="object"||!o.metadata||typeof o.metadata!="object")return!1;const c=o.metadata;return!c.title||typeof c.title!="string"||!c.createdAt||!c.lastPlayed||typeof c.choiceCount!="number"?!1:Zg.validateGameState(o.gameState)}}class Mt{static MAX_SAVED_GAMES=10;static MAX_HISTORY_ITEMS=20;static compressGameState(i){return{...i,gameState:{...i.gameState,storyHistory:i.gameState.storyHistory.slice(-this.MAX_HISTORY_ITEMS).map(o=>({...o,imageUrl:void 0})),choiceHistory:i.gameState.choiceHistory.slice(-this.MAX_HISTORY_ITEMS)}}}static saveGame(i){try{const o=this.compressGameState(i),c=Pa.serialize(o);Pa.deserialize(c);const f=this.loadAllGames().filter(p=>p.gameId!==i.gameId);f.push(o),f.sort((p,y)=>new Date(y.metadata.lastPlayed).getTime()-new Date(p.metadata.lastPlayed).getTime());const h=f.slice(0,this.MAX_SAVED_GAMES),g=JSON.stringify(h.map(p=>Pa.serialize(p)));try{localStorage.setItem(At.SAVED_GAMES,g)}catch(p){if(p instanceof DOMException&&p.name==="QuotaExceededError"){console.warn("Storage quota exceeded, removing old saves...");for(let y=h.length-1;y>=1;y--)try{const v=h.slice(0,y),w=JSON.stringify(v.map(E=>Pa.serialize(E)));localStorage.setItem(At.SAVED_GAMES,w),console.log(`Successfully saved with ${y} games (removed ${h.length-y} old saves)`);return}catch{continue}throw new Error("Storage quota exceeded even after removing old saves")}throw p}}catch(o){throw console.error("Failed to save game:",o),new Error("Failed to save game: "+(o instanceof Error?o.message:"Unknown error"))}}static loadAllGames(){try{const i=localStorage.getItem(At.SAVED_GAMES);if(!i)return[];const o=JSON.parse(i),c=[],d=[];for(const f of o)try{const h=Pa.deserialize(f);c.push(h)}catch(h){console.warn("Corrupted game data found, skipping:",h);try{const g=JSON.parse(f);g.gameId&&d.push(g.gameId)}catch{}}return d.length>0&&(console.warn(`Found ${d.length} corrupted games, cleaning up storage`),this.cleanupCorruptedGames(c)),c}catch(i){return console.error("Failed to load saved games:",i),this.clearAllGames(),[]}}static loadGame(i){try{return this.loadAllGames().find(c=>c.gameId===i)||null}catch(o){return console.error("Failed to load game:",o),null}}static deleteGame(i){try{const c=this.loadAllGames().filter(f=>f.gameId!==i),d=JSON.stringify(c.map(f=>Pa.serialize(f)));localStorage.setItem(At.SAVED_GAMES,d)}catch(o){throw console.error("Failed to delete game:",o),new Error("Failed to delete game")}}static getMostRecentGame(){const i=this.loadAllGames();return i.length===0?null:i.reduce((o,c)=>new Date(c.metadata.lastPlayed)>new Date(o.metadata.lastPlayed)?c:o)}static hasGame(i){return this.loadAllGames().some(c=>c.gameId===i)}static getGameCount(){return this.loadAllGames().length}static clearAllGames(){try{localStorage.removeItem(At.SAVED_GAMES)}catch(i){console.error("Failed to clear saved games:",i)}}static cleanupCorruptedGames(i){try{const o=JSON.stringify(i.map(c=>Pa.serialize(c)));localStorage.setItem(At.SAVED_GAMES,o)}catch(o){console.error("Failed to cleanup corrupted games:",o)}}static validateAndRepairStorage(){const i={isValid:!0,repairedCount:0,errors:[]};try{const o=this.loadAllGames(),c=this.getStorageItemCount();return o.length<c&&(i.repairedCount=c-o.length,i.isValid=!1,i.errors.push(`Repaired ${i.repairedCount} corrupted game(s)`)),i}catch(o){return i.isValid=!1,i.errors.push(o instanceof Error?o.message:"Unknown storage error"),i}}static getStorageItemCount(){try{const i=localStorage.getItem(At.SAVED_GAMES);return i?JSON.parse(i).length:0}catch{return 0}}static getStorageInfo(){try{const i=localStorage.getItem(At.SAVED_GAMES),o=i?new Blob([i]).size:0,c=this.getGameCount();return{gameCount:c,estimatedSize:o,maxGames:this.MAX_SAVED_GAMES,canSaveMore:c<this.MAX_SAVED_GAMES}}catch{return{gameCount:0,estimatedSize:0,maxGames:this.MAX_SAVED_GAMES,canSaveMore:!0}}}static pruneOldGames(i=5){try{const o=this.loadAllGames();if(o.length<=i)return 0;o.sort((h,g)=>new Date(g.metadata.lastPlayed).getTime()-new Date(h.metadata.lastPlayed).getTime());const c=o.slice(0,i),d=o.length-i,f=JSON.stringify(c.map(h=>Pa.serialize(h)));return localStorage.setItem(At.SAVED_GAMES,f),d}catch(o){return console.error("Failed to prune old games:",o),0}}}class It{static saveQueue=new Map;static SAVE_DEBOUNCE_MS=1e3;static MAX_SAVE_ATTEMPTS=3;static scheduleAutoSave(i){const o=i.gameId,c=this.saveQueue.get(o);c&&clearTimeout(c);const d=setTimeout(()=>{this.performAutoSave(i),this.saveQueue.delete(o)},this.SAVE_DEBOUNCE_MS);this.saveQueue.set(o,d)}static async performImmediateSave(i){const o=i.gameId,c=this.saveQueue.get(o);return c&&(clearTimeout(c),this.saveQueue.delete(o)),this.performAutoSave(i)}static async performAutoSave(i,o=1){try{const c=Mt.loadGame(i.gameId);if(c&&this.hasConflict(i,c.gameState)){console.warn("Save conflict detected, resolving...");const d=this.resolveConflict(i,c.gameState);return this.saveGameState(d)}return this.saveGameState(i)}catch(c){if(console.error(`Auto-save attempt ${o} failed:`,c),o<this.MAX_SAVE_ATTEMPTS){const d=Math.pow(2,o)*1e3;return await new Promise(f=>setTimeout(f,d)),this.performAutoSave(i,o+1)}return console.error("Auto-save failed after maximum attempts"),!1}}static saveGameState(i){try{const o={...i,gameMode:i.gameMode||"standard",customScene:i.gameMode==="custom"?i.customScene:void 0},c={gameId:o.gameId,gameState:o,metadata:{title:this.generateGameTitle(o),createdAt:o.createdAt,lastPlayed:new Date,choiceCount:o.choiceHistory.length,gameMode:o.gameMode}};return Mt.saveGame(c),!0}catch(o){return console.error("Failed to save game state:",o),!1}}static hasConflict(i,o){const c=i.lastUpdated.getTime();return o.lastUpdated.getTime()>c+5e3}static resolveConflict(i,o){if(o.choiceHistory.length>i.choiceHistory.length)return console.log("Resolving conflict: keeping existing state (more progress)"),{...o,lastUpdated:new Date};if(o.choiceHistory.length===i.choiceHistory.length){const c=o.lastUpdated>i.lastUpdated;return console.log(`Resolving conflict: using ${c?"existing":"new"} state (same progress, newer timestamp)`),c?o:i}return console.log("Resolving conflict: using new state (more progress)"),i}static generateGameTitle(i){const o=i.choiceHistory.length,c=i.gameId.slice(0,8),d=i.gameMode==="custom"?"Custom":"Adventure";if(i.gameMode==="custom"&&i.customScene){const p=i.customScene.trim().split(" ").filter(y=>y.length>3&&!["the","and","but","for","are","with","they","have","this","that","from","your","you"].includes(y.toLowerCase()));if(p.length>=2)return`${p.slice(0,3).join(" ")}... (${o} actions)`}const h=i.currentStory.text.split(/[.!?]+/).filter(p=>p.trim().length>0);if(h.length>0){const y=h[0].trim().split(" ").filter(v=>v.length>3&&!["the","and","but","for","are","with","they","have","this","that","from","your","you"].includes(v.toLowerCase()));if(y.length>=2){const v=y.slice(0,3).join(" "),w=i.gameMode==="custom"?"actions":"choices";return`${v}... (${o} ${w})`}}const g=i.gameMode==="custom"?"actions":"choices";return`${d} ${c} (${o} ${g})`}static validateGameState(i){const o=[];return i.gameId||o.push("Missing game ID"),i.currentStory||o.push("Missing current story"),i.createdAt||o.push("Missing creation date"),i.lastUpdated||o.push("Missing last updated date"),i.gameMode?i.gameMode!=="standard"&&i.gameMode!=="custom"&&o.push('Invalid game mode (must be "standard" or "custom")'):o.push("Missing game mode"),i.gameMode==="custom"&&(!i.customScene||i.customScene.trim().length===0?o.push("Custom mode game missing custom scene description"):i.customScene.trim().length<20?o.push("Custom scene description too short (minimum 20 characters)"):i.customScene.trim().length>500&&o.push("Custom scene description too long (maximum 500 characters)")),i.currentStory&&(i.currentStory.id||o.push("Missing story ID"),i.currentStory.text||o.push("Missing story text"),i.currentStory.sceneDescription||o.push("Missing scene description"),Array.isArray(i.currentStory.choices)||o.push("Invalid choices array")),Array.isArray(i.storyHistory)||o.push("Invalid story history"),Array.isArray(i.choiceHistory)||o.push("Invalid choice history"),i.choiceHistory.length>0&&i.storyHistory.length!==i.choiceHistory.length&&o.push("Story history and choice history length mismatch"),{isValid:o.length===0,errors:o}}static cleanup(){for(const[,i]of this.saveQueue.entries())clearTimeout(i);this.saveQueue.clear()}static getSaveStats(){return{pendingSaves:this.saveQueue.size,queuedGames:Array.from(this.saveQueue.keys())}}}const $g=({aiConfig:x,onConfigurationNeeded:i,onBackToLauncher:o,onNewGame:c,gameToResume:d,gameMode:f,customScene:h})=>{const[g,p]=M.useState(null),[y,v]=M.useState(!1),[w,E]=M.useState(null),[D,Y]=M.useState(null),[q,K]=M.useState(!1),[ae,P]=M.useState(!1),[V,Z]=M.useState(null),[ke,he]=M.useState(!1),[X,O]=M.useState(x?.samplerSettings||{temperature:.7,minP:.05,repetitionPenalty:1.1,enableStreaming:!0}),[H,B]=M.useState(""),[ie,re]=M.useState(!1),[Ye,$]=M.useState(""),[de,C]=M.useState(""),[L,I]=M.useState(!1),[se,ye]=M.useState(null),[S,z]=M.useState(null);M.useEffect(()=>{x?.samplerSettings&&O(x.samplerSettings)},[x]);const Q=M.useCallback(J=>{if(O(J),x){const F={...x,samplerSettings:J};ja.saveConfig(F)}},[x]),ee=M.useCallback(J=>{try{p(J.gameState),E(null),v(!1)}catch(F){const W=F instanceof Error?F.message:"Failed to resume game";E(W),console.error("Failed to resume game:",F)}},[]);M.useEffect(()=>{d&&ee(d),K(!0)},[d,ee]),M.useEffect(()=>{if(!g||!q)return;const J=It.validateGameState(g);if(!J.isValid){console.warn("Invalid game state, skipping auto-save:",J.errors);return}return It.scheduleAutoSave(g),()=>{}},[g,q]),M.useEffect(()=>()=>{It.cleanup()},[]);const fe=()=>`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,xe=M.useCallback(J=>{const F=[...J.storyHistory,J.currentStory];return va.createStoryContext(F,J.choiceHistory,J.currentStory.sceneDescription)},[]),Se=M.useCallback(J=>{const F=["Do you:","What do you do?","Your options are:","Choose your action:","You can:","Your choices:"];for(const W of F){const ve=J.indexOf(W);if(ve!==-1)return J.substring(0,ve).trim()}return J.trim()},[]),De=M.useCallback(async(J,F)=>{if(!x||x.enableImageGeneration===!1)return null;try{return P(!0),Z(null),await Qg.generateSceneImageWithRetry(x,J.sceneDescription,F)}catch(W){const ve=W instanceof Error?W.message:"Failed to generate image";return Z(ve),console.warn("Image generation failed:",ve),null}finally{P(!1)}},[x]),Ke=M.useCallback(async()=>{if(!g||!x)return;const J=g.storyHistory.length>0?Se(g.storyHistory[g.storyHistory.length-1].text):void 0,F=await De(g.currentStory,J);if(F){const W={...g.currentStory,imageUrl:F};p({...g,currentStory:W,lastUpdated:new Date})}},[g,x,De,Se]),Rt=M.useCallback(async()=>{if(!x){i();return}E(null),Y(null),Z(null),B(""),$(""),C("");const J=X.enableStreaming??!0;J?(re(!0),v(!1)):(v(!0),re(!1));try{const F=J?await va.generateInitialStoryStream(x,ve=>{B(oe=>oe+ve)},X,ve=>{$(oe=>oe+ve)}):await va.generateInitialStory(x,X);re(!1),v(!1);const W={gameId:fe(),currentStory:F,storyHistory:[],choiceHistory:[],createdAt:new Date,lastUpdated:new Date,gameMode:"standard"};p(W),B(""),C(F.thinkingContent||""),$(""),It.performImmediateSave(W).catch(ve=>{console.warn("Failed to perform immediate save for new game:",ve)}),De(F).then(ve=>{ve&&p(oe=>{if(!oe||oe.gameId!==W.gameId)return oe;const me={...oe,currentStory:{...oe.currentStory,imageUrl:ve},lastUpdated:new Date};return It.scheduleAutoSave(me),me})})}catch(F){const W=F instanceof Error?F.message:"Failed to start new game";E(W),Y({type:"initial"}),re(!1),B(""),$(""),v(!1)}},[x,i,De,X]),Qt=M.useCallback(async J=>{if(!x){i();return}E(null),Y(null),Z(null),B(""),$(""),C("");const F=X.enableStreaming??!0;F?(re(!0),v(!1)):(v(!0),re(!1));try{const W=F?await Sa.generateCustomInitialStoryStream(x,J,oe=>{B(me=>me+oe)},X,oe=>{$(me=>me+oe)}):await Sa.generateCustomInitialStory(x,J,X);re(!1),v(!1);const ve={gameId:fe(),currentStory:W,storyHistory:[],choiceHistory:[],createdAt:new Date,lastUpdated:new Date,gameMode:"custom",customScene:J};p(ve),B(""),C(W.thinkingContent||""),$(""),It.performImmediateSave(ve).catch(oe=>{console.warn("Failed to perform immediate save for new game:",oe)}),De(W).then(oe=>{oe&&p(me=>{if(!me||me.gameId!==ve.gameId)return me;const ze={...me,currentStory:{...me.currentStory,imageUrl:oe},lastUpdated:new Date};return It.scheduleAutoSave(ze),ze})})}catch(W){const ve=W instanceof Error?W.message:"Failed to start custom game";E(ve),Y({type:"custom-initial",data:J}),re(!1),B(""),$(""),v(!1)}},[x,i,De,X]),wa=M.useCallback(async J=>{if(!g||!x){i();return}E(null),Y(null),Z(null),B(""),$(""),C("");const F=X.enableStreaming??!0;F?(re(!0),v(!1)):(v(!0),re(!1));try{const W=xe(g),ve=F?await va.continueStoryStream(x,J,W,ze=>{B(Ie=>Ie+ze)},X,ze=>{$(Ie=>Ie+ze)}):await va.continueStory(x,J,W,X);re(!1),v(!1);const oe={...g,currentStory:ve,storyHistory:[...g.storyHistory,g.currentStory],choiceHistory:[...g.choiceHistory,{...J,selected:!0}],lastUpdated:new Date};p(oe),B(""),C(ve.thinkingContent||""),$(""),It.performImmediateSave(oe).catch(ze=>{console.warn("Failed to perform immediate save after choice:",ze)});const me=Se(ve.text);De(ve,me).then(ze=>{ze&&p(Ie=>!Ie||Ie.gameId!==oe.gameId?Ie:{...Ie,currentStory:{...Ie.currentStory,imageUrl:ze},lastUpdated:new Date})})}catch(W){const ve=W instanceof Error?W.message:"Failed to continue story";E(ve),Y({type:"choice",data:J}),re(!1),B(""),$(""),v(!1)}},[g,x,i,xe,De,Se,X]),vn=M.useCallback(async J=>{if(!g||!x){i();return}E(null),Y(null),Z(null),B(""),$(""),C("");const F=X.enableStreaming??!0;F?(re(!0),v(!1)):(v(!0),re(!1));try{const W={id:fe(),text:J,selected:!0,isCustom:!0},ve=[...g.storyHistory,g.currentStory],oe=Sa.createStoryContext(ve,g.choiceHistory,g.currentStory.sceneDescription),me=F?await Sa.continueCustomStoryStream(x,J,oe,Ot=>{B(dt=>dt+Ot)},X,Ot=>{$(dt=>dt+Ot)}):await Sa.continueCustomStory(x,J,oe,X);re(!1),v(!1);const ze={...g,currentStory:me,storyHistory:[...g.storyHistory,g.currentStory],choiceHistory:[...g.choiceHistory,W],lastUpdated:new Date};p(ze),B(""),C(me.thinkingContent||""),$(""),It.performImmediateSave(ze).catch(Ot=>{console.warn("Failed to perform immediate save after custom action:",Ot)});const Ie=Se(me.text);De(me,Ie).then(Ot=>{Ot&&p(dt=>!dt||dt.gameId!==ze.gameId?dt:{...dt,currentStory:{...dt.currentStory,imageUrl:Ot},lastUpdated:new Date})})}catch(W){const ve=W instanceof Error?W.message:"Failed to continue custom story";E(ve),Y({type:"custom-action",data:J}),re(!1),B(""),$(""),v(!1)}},[g,x,i,De,Se,X]),ta=M.useCallback(()=>{if(D)switch(D.type){case"initial":Rt();break;case"custom-initial":typeof D.data=="string"&&Qt(D.data);break;case"choice":D.data&&typeof D.data=="object"&&wa(D.data);break;case"custom-action":typeof D.data=="string"&&vn(D.data);break}else if(g){const J=g.choiceHistory[g.choiceHistory.length-1];J?wa(J):g.gameMode==="custom"&&g.customScene?Qt(g.customScene):Rt()}else f==="custom"&&h?Qt(h):Rt()},[D,g,wa,Rt,Qt,vn,f,h]),rl=M.useCallback(async()=>{if(!g||!x){i();return}E(null),Z(null),B(""),$(""),C("");const J=X.enableStreaming??!0;J?(re(!0),v(!1)):(v(!0),re(!1));try{let F;if(g.choiceHistory.length===0)g.gameMode==="custom"&&g.customScene?F=J?await Sa.regenerateCustomInitialStoryStream(x,g.customScene,oe=>{B(me=>me+oe)},X,oe=>{$(me=>me+oe)}):await Sa.regenerateCustomInitialStory(x,g.customScene,X):F=J?await va.regenerateInitialStoryStream(x,oe=>{B(me=>me+oe)},X,oe=>{$(me=>me+oe)}):await va.regenerateInitialStory(x,X);else{const oe=g.choiceHistory[g.choiceHistory.length-1],me=xe(g);g.gameMode==="custom"&&oe.isCustom?F=J?await Sa.regenerateCustomStoryStream(x,oe.text,me,ze=>{B(Ie=>Ie+ze)},X,ze=>{$(Ie=>Ie+ze)}):await Sa.regenerateCustomStory(x,oe.text,me,X):F=J?await va.regenerateStoryStream(x,oe,me,ze=>{B(Ie=>Ie+ze)},X,ze=>{$(Ie=>Ie+ze)}):await va.regenerateStory(x,oe,me,X)}re(!1),v(!1);const W={...g,currentStory:F,lastUpdated:new Date};p(W),B(""),C(F.thinkingContent||""),$(""),It.performImmediateSave(W).catch(oe=>{console.warn("Failed to perform immediate save after regeneration:",oe)});const ve=Se(F.text);De(F,ve).then(oe=>{oe&&p(me=>!me||me.gameId!==W.gameId?me:{...me,currentStory:{...me.currentStory,imageUrl:oe},lastUpdated:new Date})})}catch(F){const W=F instanceof Error?F.message:"Failed to regenerate story";E(W),re(!1),B(""),$(""),v(!1)}},[g,x,i,xe,De,Se,X]),sl=M.useCallback(()=>{c?c():o?o():(p(null),E(null),v(!1))},[c,o]),Na=M.useCallback((J,F)=>{const W=[];if(J<0&&W.push("Segment index cannot be negative"),J>=F.storyHistory.length&&W.push("Segment index exceeds story history length"),(!F.storyHistory||F.storyHistory.length===0)&&W.push("No story history available for rollback"),F.choiceHistory||W.push("Choice history is missing"),F.storyHistory&&F.choiceHistory){const ve=J;F.choiceHistory.length<ve&&W.push("Insufficient choice history for rollback operation");const oe=F.storyHistory[J];oe?(oe.id||W.push("Target segment is missing required ID"),oe.text||W.push("Target segment is missing story text"),oe.sceneDescription||W.push("Target segment is missing scene description")):W.push("Target segment does not exist")}return F.gameId||W.push("Game state is missing game ID"),F.currentStory||W.push("Game state is missing current story"),{isValid:W.length===0,errors:W}},[]),il=M.useCallback((J,F)=>{const W=Na(J,F);if(!W.isValid)throw new Error(`Rollback validation failed: ${W.errors.join(", ")}`);const ve=F.storyHistory[J];if(!ve)throw new Error("Target segment does not exist");const oe=F.storyHistory.length-J-1+1,me=F.choiceHistory.length-J;if(oe<0)throw new Error("Invalid rollback: target segment is beyond history");if(me<0)throw new Error("Data integrity error: insufficient choice history for rollback");const ze=F.storyHistory.slice(0,J),Ie=F.choiceHistory.slice(0,J),dt={...F,currentStory:ve,storyHistory:ze,choiceHistory:Ie,lastUpdated:new Date};if(!dt.gameId||!dt.currentStory)throw new Error("Failed to create valid rollback state: missing required properties");return{targetSegmentIndex:J,segmentsToDelete:oe,choicesToDelete:me,newGameState:dt}},[Na]),ol=M.useCallback(J=>{if(z(null),!g){z("No game state available for rollback");return}const F=Na(J,g);if(!F.isValid){z(`Cannot rollback: ${F.errors.join(", ")}`);return}ye(J),I(!0)},[g,Na]),cl=M.useCallback(async()=>{if(se!==null&&g)try{z(null);const J=Na(se,g);if(!J.isValid)throw new Error(`Rollback validation failed: ${J.errors.join(", ")}`);const F=il(se,g);if(!F.newGameState)throw new Error("Failed to calculate valid rollback state");if(y||ie)throw new Error("Cannot perform rollback while other operations are in progress");p(F.newGameState),E(null),Z(null),Y(null),v(!1),re(!1),P(!1),B(""),$("");try{await It.performImmediateSave(F.newGameState)}catch(W){console.error("Failed to save after rollback:",W),z("Rollback completed but failed to save. Your progress may not be preserved.")}I(!1),ye(null)}catch(J){const F=J instanceof Error?J.message:"Failed to perform rollback";z(F),console.error("Rollback failed:",J)}else z(g?"No target segment selected":"No game state available"),console.error("Rollback failed: Invalid state -",{targetSegmentIndex:se,hasGameState:!!g})},[se,g,il,Na,y,ie]),ul=M.useCallback(()=>{I(!1),ye(null),z(null)},[]);return M.useEffect(()=>{f==="custom"&&h&&!g&&q&&!d?Qt(h):f==="standard"&&!g&&q&&!d&&Rt()},[f,h,g,q,d]),x?!g&&!y&&!ie&&!w?r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center relative",children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsxs("button",{onClick:()=>he(!0),className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust sampler settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"AI Sampler"]})}),ke&&r.jsx(sr,{settings:X,onSettingsChange:Q,onClose:()=>he(!1)}),r.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-6",children:r.jsx("svg",{className:"h-8 w-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Ready for Adventure"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Start a new Choose Your Own Adventure story powered by AI. Your choices will shape the narrative as it unfolds."}),r.jsx("div",{className:"space-y-4",children:r.jsxs("button",{onClick:Rt,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start New Adventure"]})})]})}):r.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6 space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Your Adventure"}),g&&r.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["Choices made: ",g.choiceHistory.length]})]}),r.jsx("div",{className:"flex space-x-2 w-full sm:w-auto",children:r.jsxs("button",{onClick:sl,className:"inline-flex items-center justify-center flex-1 sm:flex-none px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-1 sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"New Game"]})})]}),r.jsx(Bg,{currentStory:g?.currentStory||null,storyHistory:g?.storyHistory||[],isLoading:y,error:w,onRetry:ta,onRegenerate:rl,canRegenerate:!!g&&!y&&!ie,isGeneratingImage:ae,imageError:V,onImageRetry:Ke,samplerSettings:X,onSamplerSettingsChange:Q,streamingText:H,isStreaming:ie,enableImageGeneration:x?.enableImageGeneration??!0,thinkingContent:de,streamingThinking:Ye,onRollback:ol}),S&&!L&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Rollback Failed"}),r.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:S})]}),r.jsx("div",{className:"ml-auto pl-3",children:r.jsx("button",{onClick:()=>z(null),className:"inline-flex text-red-400 hover:text-red-600 dark:text-red-500 dark:hover:text-red-300 transition-colors","aria-label":"Dismiss error",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})}),g&&!w&&(g.gameMode==="custom"?r.jsx(qg,{isLoading:y||ie,disabled:y||ie,onActionSubmit:vn,choiceHistory:g.choiceHistory}):r.jsx(Yg,{choices:g.currentStory.choices,choiceHistory:g.choiceHistory,isLoading:y||ie,onChoiceSelect:wa})),g&&r.jsx(Vg,{isOpen:L,onClose:ul,onConfirm:cl,segmentIndex:se||0,segmentCount:g.storyHistory.length,choiceCount:g.choiceHistory.length,error:S})]}):r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Configuration Required"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Please configure your AI settings before starting a new adventure."}),r.jsx("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Configure AI Settings"})]})})},Jg=({onResumeGame:x,onDeleteGame:i,onNewGame:o})=>{const[c,d]=M.useState([]),[f,h]=M.useState(!0),[g,p]=M.useState(null),[y,v]=M.useState(null),[w,E]=M.useState(new Set),[D,Y]=M.useState(!1),[q,K]=M.useState(!1);M.useEffect(()=>{ae()},[]);const ae=async()=>{try{h(!0),p(null);const H=Mt.loadAllGames();d(H);const B=Mt.validateAndRepairStorage();!B.isValid&&B.errors.length>0&&console.warn("Storage validation issues:",B.errors)}catch(H){const B=H instanceof Error?H.message:"Failed to load saved games";p(B),console.error("Failed to load saved games:",H)}finally{h(!1)}},P=async H=>{try{v(H),Mt.deleteGame(H),d(B=>B.filter(ie=>ie.gameId!==H)),i&&i(H)}catch(B){const ie=B instanceof Error?B.message:"Failed to delete game";p(ie),console.error("Failed to delete game:",B)}finally{v(null)}},V=H=>{E(B=>{const ie=new Set(B);return ie.has(H)?ie.delete(H):ie.add(H),ie})},Z=()=>{w.size===c.length?E(new Set):E(new Set(c.map(H=>H.gameId)))},ke=async()=>{if(w.size!==0)try{K(!0);for(const H of w)Mt.deleteGame(H),i&&i(H);d(H=>H.filter(B=>!w.has(B.gameId))),E(new Set),Y(!1)}catch(H){const B=H instanceof Error?H.message:"Failed to delete selected games";p(B),console.error("Failed to bulk delete games:",H)}finally{K(!1)}},he=()=>{E(new Set),Y(!1)},X=H=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(H),O=H=>{const ie=new Date().getTime()-H.getTime(),re=Math.floor(ie/(1e3*60*60)),Ye=Math.floor(re/24);return re<1?"Just now":re<24?`${re} hour${re>1?"s":""} ago`:Ye<7?`${Ye} day${Ye>1?"s":""} ago`:X(H)};return f?r.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-6 sm:h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 sm:w-1/3 mb-4 sm:mb-6"}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:[1,2,3].map(H=>r.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[r.jsx("div",{className:"h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 sm:w-1/2 mb-2"}),r.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 sm:w-1/4 mb-2"}),r.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3 sm:w-1/3"})]},H))})]})})}):g?r.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Error Loading Games"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:g}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:justify-center",children:[r.jsx("button",{onClick:ae,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Try Again"}),r.jsx("button",{onClick:o,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Start New Game"})]})]})})}):r.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:[r.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Your Adventures"}),c.length>1&&!D&&r.jsxs("button",{onClick:()=>Y(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"hidden sm:inline",children:"Select Multiple"}),r.jsx("span",{className:"sm:hidden",children:"Select"})]})]}),!D&&r.jsxs("button",{onClick:o,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Adventure"]})]}),D&&r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:[w.size," of ",c.length," selected"]}),r.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[r.jsx("button",{onClick:Z,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:w.size===c.length?"Deselect All":"Select All"}),r.jsx("button",{onClick:ke,disabled:w.size===0||q,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:q?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"mr-1.5 h-3 w-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Deleting..."}),r.jsx("span",{className:"sm:hidden",children:"..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete (",w.size,")"]})}),r.jsx("button",{onClick:he,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Cancel"})]})]})]}),c.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-6",children:r.jsx("svg",{className:"h-8 w-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Saved Adventures"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start your first Choose Your Own Adventure story to begin your journey."}),r.jsxs("button",{onClick:o,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start Your First Adventure"]})]}):r.jsx("div",{className:"space-y-3 sm:space-y-4",children:c.map(H=>r.jsx("div",{className:`border rounded-lg p-4 sm:p-6 transition-colors ${D&&w.has(H.gameId)?"border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[D&&r.jsx("div",{className:"flex items-center pt-1",children:r.jsx("input",{type:"checkbox",checked:w.has(H.gameId),onChange:()=>V(H.gameId),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 truncate",children:H.metadata.title}),H.metadata.gameMode&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium self-start ${H.metadata.gameMode==="custom"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"}`,children:H.metadata.gameMode==="custom"?" Custom":" Standard"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Choices:"})," ",H.metadata.choiceCount]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Last played:"})," ",O(H.metadata.lastPlayed)]}),r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("span",{className:"font-medium",children:"Created:"})," ",X(H.metadata.createdAt)]})]})]})]}),r.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2 sm:line-clamp-3",children:[H.gameState.currentStory.text.substring(0,150),H.gameState.currentStory.text.length>150?"...":""]})}),!D&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[r.jsxs("button",{onClick:()=>x(H),className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-green-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resume Adventure"]}),r.jsx("button",{onClick:()=>P(H.gameId),disabled:y===H.gameId,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-red-700 dark:text-red-400 bg-white dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y===H.gameId?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Deleting..."}),r.jsx("span",{className:"sm:hidden",children:"..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),r.jsx("span",{className:"hidden sm:inline",children:"Delete"}),r.jsx("span",{className:"sm:hidden",children:"Delete"})]})})]})]})},H.gameId))})]})})},Fg=({onModeSelect:x,aiConfig:i,samplerSettings:o,onSamplerSettingsChange:c})=>{const[d,f]=M.useState(!1);return r.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8 relative",children:[r.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-purple-100 dark:bg-purple-900/30 mb-4 sm:mb-6",children:r.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3",children:"Choose Your Adventure Mode"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Select how you want to experience your story"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("button",{onClick:()=>x("standard"),className:"group relative bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 sm:p-6 hover:border-blue-500 dark:hover:border-blue-400 hover:shadow-lg transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400",children:[r.jsxs("div",{className:"flex items-start mb-3 sm:mb-4",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors",children:r.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),r.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 sm:mb-2",children:"Standard Mode"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Choose from AI-generated options at each step. Perfect for guided storytelling with curated choices."})]})]}),r.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 font-medium group-hover:text-blue-700 dark:group-hover:text-blue-300",children:["Select Standard Mode",r.jsx("svg",{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),r.jsxs("button",{onClick:()=>x("custom"),className:"group relative bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 sm:p-6 hover:border-purple-500 dark:hover:border-purple-400 hover:shadow-lg transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-purple-400",children:[r.jsxs("div",{className:"flex items-start mb-3 sm:mb-4",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center group-hover:bg-purple-200 dark:group-hover:bg-purple-900/50 transition-colors",children:r.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 sm:mb-2",children:"Custom Scenario Mode"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Write your own scene and actions. Complete creative freedom to shape your unique adventure."})]})]}),r.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-purple-600 dark:text-purple-400 font-medium group-hover:text-purple-700 dark:group-hover:text-purple-300",children:["Select Custom Mode",r.jsx("svg",{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),r.jsxs("div",{className:"mt-6 sm:mt-8 space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-purple-400 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"AI Sampler"]})}),r.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 text-center flex items-center justify-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"You can't switch modes once your adventure begins"]})})]})]}),d&&i&&r.jsx(sr,{onClose:()=>f(!1),settings:o,onSettingsChange:c})]})},Wg=({onSceneSubmit:x,onBack:i,aiConfig:o,samplerSettings:c,onSamplerSettingsChange:d})=>{const[f,h]=M.useState(""),[g,p]=M.useState(""),[y,v]=M.useState(!1),[w,E]=M.useState(!1),[D,Y]=M.useState(""),[q,K]=M.useState(""),[ae,P]=M.useState(!1),[V,Z]=M.useState(!1),ke=20,he=500,X=$=>{const de=$.target.value;h(de),g&&p("")},O=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),re&&H())},H=()=>{const $=f.trim();if($.length===0){p("Please enter a scene description");return}if($.length<ke){p(`Scene description must be at least ${ke} characters`);return}if($.length>he){p(`Scene description must not exceed ${he} characters`);return}x($)},B=async()=>{if(!o){Y("AI configuration is required to generate scene ideas");return}E(!0),Y(""),h(""),p(""),K(""),P(!1);try{const de=[Ne.createSystemMessage("You are a creative writing assistant specializing in adventure story openings. DO NOT end it with What do you do?"),Ne.createUserMessage(`Generate a SIMPLE and SHORT opening scene (25-75 words) for a choose-your-own-adventure story. 
Write only the scene description  no dialogue, no choices, no setup notes.

The scene should:
- Set a clear location
- Present a simple situation or problem
- Use straightforward, clear language
- Avoid flowery or overly descriptive language

Keep it SHORT it a SIMPLE scene, NO CHARACTER ACTIONS.`)];if(c.enableStreaming??!0){P(!0);const L=en.createStreamingProcessor();let I=!1;const{response:se,thinkingContent:ye}=await Ne.chatCompletionStream(o,de,S=>{const z=L.processChunk(S);z.displayChunk&&(I||(P(!1),Z(!0),I=!0),h(Q=>Q+z.displayChunk))},{temperature:c?.temperature??.8,maxTokens:2048,onThinkingChunk:S=>{K(z=>z+S)}});if(P(!1),Z(!1),ye&&K(ye),se&&se.trim()){const{thinkingContent:S,cleanedResponse:z}=en.parseThinkingResponse(se);S&&!ye&&K(S),z.trim()&&z.trim()!==f.trim()&&h(z.trim()),p("")}else Y("Failed to generate scene idea. Please try again.")}else{const L=await Ne.chatCompletionWithRetry(o,de,{temperature:c?.temperature??.8,maxTokens:2048});if(L&&L.response.trim()){const{thinkingContent:I,cleanedResponse:se}=en.parseThinkingResponse(L.response);I&&K(I),h(se.trim()),p("")}else Y("Failed to generate scene idea. Please try again.")}}catch($){const de=$ instanceof Error?$.message:"Failed to generate scene idea";Y(de),console.error("Scene generation error:",$)}finally{E(!1),P(!1),Z(!1)}},ie=f.length,re=ie>=ke&&ie<=he,Ye=ie>he*.9;return r.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:[r.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative",children:[r.jsx("div",{className:"absolute top-0 right-0",children:r.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust AI settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),r.jsx("span",{className:"hidden sm:inline",children:"AI Settings"})]})}),r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-purple-100 dark:bg-purple-900/30 mb-4 sm:mb-6",children:r.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3",children:"Set Your Scene"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Describe the initial scene for your custom adventure"})]}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{htmlFor:"sceneDescription",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Scene Description"}),o&&r.jsx("button",{onClick:B,disabled:w,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-md hover:bg-purple-100 dark:hover:bg-purple-900/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Generate a scene idea using AI",children:w?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ae?"Thinking...":V?"Writing...":"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"})})," Imagine a Scene"]})})]}),q&&r.jsx("div",{className:"mb-3",children:r.jsx(lm,{thinkingContent:q,isStreaming:ae})}),r.jsx("textarea",{id:"sceneDescription",value:f+(V?"|":""),onChange:X,onKeyDown:O,placeholder:"You wake up in a mysterious forest, surrounded by ancient trees. The air is thick with fog, and you hear strange sounds in the distance...",rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none placeholder-gray-400 dark:placeholder-gray-500",readOnly:V}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ke,"-",he," characters required"]}),r.jsxs("p",{className:`text-xs font-medium ${ie===0?"text-gray-500 dark:text-gray-400":re?"text-green-600 dark:text-green-400":Ye?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"}`,children:[ie," / ",he]})]}),g&&r.jsx("div",{className:"mt-2 p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsx("p",{className:"text-xs sm:text-sm",children:g})]})}),D&&r.jsx("div",{className:"mt-2 p-3 rounded-md bg-orange-50 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 border border-orange-200 dark:border-orange-800",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs sm:text-sm",children:D}),(D.includes("Empty response")||D.includes("API error")||D.includes("Failed to generate"))&&r.jsx("div",{className:"mt-2 p-2 bg-orange-100 dark:bg-orange-800/30 rounded border border-orange-300 dark:border-orange-600",children:r.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:[r.jsx("strong",{children:" Tip:"})," If scene generation fails, try adjusting your AI settings, checking your API connection, or writing your own scene description instead."]})})]})]})})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[r.jsxs("h3",{className:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Tips for a great scene:"]}),r.jsxs("ul",{className:"text-xs sm:text-sm text-purple-800 dark:text-purple-300 space-y-1",children:[r.jsx("li",{children:" Set the location and atmosphere"}),r.jsx("li",{children:" Describe what your character sees or feels"}),r.jsx("li",{children:" Create an intriguing situation or mystery"}),r.jsx("li",{children:" Leave room for the story to develop"}),o&&r.jsx("li",{children:"  Use the Imagine tool for AI-generated inspiration"}),r.jsx("li",{children:"  If your AI uses thinking, you'll see its reasoning process above"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2",children:[r.jsx("button",{onClick:i,disabled:w,className:"flex-1 px-4 sm:px-6 py-2 sm:py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-400 dark:disabled:text-gray-600 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-gray-500 dark:focus:ring-gray-400 font-medium text-sm sm:text-base",children:" Back"}),r.jsx("button",{onClick:H,disabled:!re,className:"flex-1 px-4 sm:px-6 py-2 sm:py-3 bg-purple-600 dark:bg-purple-500 text-white rounded-lg hover:bg-purple-700 dark:hover:bg-purple-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-purple-500 dark:focus:ring-purple-400 font-medium text-sm sm:text-base shadow-lg hover:shadow-xl disabled:shadow-none",children:"Start Adventure "})]})]})]}),y&&o&&r.jsx(sr,{onClose:()=>v(!1),settings:c,onSettingsChange:d})]})},Pg=({aiConfig:x,onConfigurationNeeded:i,onStartNewGame:o,onResumeGame:c,startWithModeSelection:d=!1,startWithSavedGames:f=!1})=>{const[h,g]=M.useState("welcome"),[p,y]=M.useState(null),[v,w]=M.useState(!1),[E,D]=M.useState(!0),[Y,q]=M.useState(!1),[K,ae]=M.useState(x?.samplerSettings||{temperature:.7,minP:.05,repetitionPenalty:1.1}),[P,V]=M.useState("welcome");M.useEffect(()=>{ke()},[]),M.useEffect(()=>{x?.samplerSettings&&ae(x.samplerSettings)},[x]),M.useEffect(()=>{d?V("mode-select"):(V("welcome"),g("welcome"))},[d]),M.useEffect(()=>{f&&(V("welcome"),g("saved-games"))},[f]);const Z=M.useCallback(de=>{if(ae(de),x){const C={...x,samplerSettings:de};ja.saveConfig(C)}},[x]),ke=()=>{try{D(!0);const de=Mt.getGameCount(),C=Mt.getMostRecentGame();w(de>0),y(C),g("welcome")}catch(de){console.error("Failed to check for saved games:",de),w(!1),y(null)}finally{D(!1)}},he=()=>{try{const de=Mt.getGameCount(),C=Mt.getMostRecentGame();w(de>0),y(C)}catch(de){console.error("Failed to refresh saved games:",de),w(!1),y(null)}},X=()=>{g("saved-games")},O=()=>{g("welcome"),V("welcome"),he()},H=de=>{console.log(`Game ${de} deleted, refreshing list`),he()},B=()=>{g("welcome"),V("mode-select")},ie=de=>{de==="custom"?V("custom-scene"):o("standard")},re=de=>{o("custom",de)},Ye=()=>{V("mode-select")},$=()=>{V("welcome")};return x?E?r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:r.jsxs("div",{className:"animate-pulse text-center",children:[r.jsx("div",{className:"h-16 w-16 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-6"}),r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mx-auto mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mx-auto mb-8"}),r.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mx-auto"})]})})}):h==="saved-games"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"max-w-4xl mx-auto p-6 mb-4",children:r.jsxs("button",{onClick:O,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Welcome"]})}),r.jsx(Jg,{onResumeGame:c,onDeleteGame:H,onNewGame:B})]}):P==="mode-select"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 mb-4",children:r.jsxs("button",{onClick:$,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),r.jsx(Fg,{onModeSelect:ie,aiConfig:x,samplerSettings:K,onSamplerSettingsChange:Z})]}):P==="custom-scene"?r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:r.jsx(Wg,{onSceneSubmit:re,onBack:Ye,aiConfig:x,samplerSettings:K,onSamplerSettingsChange:Z})}):r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8 text-center relative",children:[r.jsx("div",{className:"absolute top-2 right-2 sm:top-4 sm:right-4",children:r.jsxs("button",{onClick:()=>q(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust sampler settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),r.jsx("span",{className:"hidden sm:inline",children:"AI Sampler"})]})}),Y&&r.jsx(sr,{settings:K,onSettingsChange:Z,onClose:()=>q(!1)}),r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-4 sm:mb-6 mt-6 sm:mt-0",children:r.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"Welcome to AI Adventure"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-6 sm:mb-8 px-2",children:"Experience interactive storytelling powered by AI. Your choices shape the narrative as it unfolds."}),v&&p&&r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-green-900 dark:text-green-300",children:"Continue Your Adventure"}),p.metadata.gameMode&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${p.metadata.gameMode==="custom"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"}`,children:p.metadata.gameMode==="custom"?" Custom":" Standard"})]}),r.jsxs("p",{className:"text-xs sm:text-sm text-green-700 dark:text-green-400 mb-3 sm:mb-4",children:['Resume "',p.metadata.title,'" - ',p.metadata.choiceCount," choices made"]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-md p-2 sm:p-3 mb-3 sm:mb-4",children:r.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 line-clamp-2 break-words",children:[p.gameState.currentStory.text.substring(0,150),p.gameState.currentStory.text.length>150?"...":""]})}),r.jsxs("button",{onClick:()=>c(p),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 border border-transparent text-sm sm:text-base font-medium rounded-md shadow-sm text-white bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-green-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resume Adventure"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center justify-center",children:[r.jsxs("button",{onClick:B,className:"w-full sm:w-64 h-14 inline-flex items-center justify-center px-6 py-4 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start New Adventure"]}),v&&r.jsxs("button",{onClick:X,className:"w-full sm:w-64 h-14 inline-flex items-center justify-center px-6 py-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"View All Saved Games (",Mt.getGameCount(),")"]})]}),!v&&r.jsx("div",{className:"mt-6 sm:mt-8 p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:r.jsx("p",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300",children:" This is your first adventure! Your progress will be automatically saved as you play."})})]})}):r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Configuration Required"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Please configure your AI settings before starting or resuming an adventure."}),r.jsx("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Configure AI Settings"})]})})};class nm{static validateOpenAIKey(i){if(!i||typeof i!="string")return!1;const o=i.trim();return!!(o.startsWith("sk-")&&o.length>=20)}static validateGenericKey(i){if(!i||typeof i!="string")return!1;const o=i.trim();return o.length>=8&&o.length<=200?/^[a-zA-Z0-9\-_.]+$/.test(o):!1}static validateAPIKey(i){return this.validateOpenAIKey(i)?{isValid:!0,type:"openai"}:this.validateGenericKey(i)?{isValid:!0,type:"generic"}:{isValid:!1,type:"invalid"}}}class Pt{static validateBaseURL(i){if(!i||typeof i!="string")return!1;try{const o=new URL(i.trim());return!(!["http:","https:"].includes(o.protocol)||!o.hostname)}catch{return!1}}static normalizeBaseURL(i){const o=i.trim();return o.endsWith("/")?o.slice(0,-1):o}}class Ns{static validateConfig(i){const o=[],c=[];if(!i.apiKey)o.push("API key is required");else{const d=nm.validateAPIKey(i.apiKey);d.isValid?d.type==="generic"&&(i.baseUrl?.includes("openai.com")||i.baseUrl?.includes("api.openai.com"))&&c.push("API key format not recognized as OpenAI - ensure compatibility"):o.push("Invalid API key format")}if(i.baseUrl?Pt.validateBaseURL(i.baseUrl)||o.push("Invalid base URL format"):o.push("Base URL is required"),i.model?(typeof i.model!="string"||i.model.trim().length===0)&&o.push("Invalid model selection"):o.push("Model selection is required"),i.imageConfig){if(i.imageConfig.provider?["openai","nano-gpt"].includes(i.imageConfig.provider)||o.push("Invalid image provider selection"):o.push("Image provider selection is required when image config is provided"),i.imageConfig.apiKey){const d=nm.validateAPIKey(i.imageConfig.apiKey);d.isValid?d.type==="generic"&&i.imageConfig.provider==="openai"&&c.push("Image API key format not recognized as OpenAI - ensure compatibility"):o.push("Invalid image API key format")}i.imageConfig.baseUrl&&(Pt.validateBaseURL(i.imageConfig.baseUrl)||o.push("Invalid image base URL format")),i.imageConfig.model?(typeof i.imageConfig.model!="string"||i.imageConfig.model.trim().length===0)&&o.push("Invalid image model selection"):o.push("Image model selection is required when image config is provided")}return{isValid:o.length===0,errors:o,warnings:c}}static createDefaultConfig(){return{baseUrl:"https://api.openai.com/v1",model:"gpt-3.5-turbo",availableModels:[]}}static sanitizeConfig(i){const o={};return i.apiKey&&(o.apiKey=i.apiKey.trim()),i.baseUrl&&(o.baseUrl=Pt.normalizeBaseURL(i.baseUrl)),i.model&&(o.model=i.model.trim()),i.availableModels&&(o.availableModels=i.availableModels.filter(c=>typeof c=="string"&&c.trim().length>0)),typeof i.enableImageGeneration=="boolean"&&(o.enableImageGeneration=i.enableImageGeneration),i.imageConfig&&i.imageConfig.model&&i.imageConfig.provider&&(o.imageConfig={provider:i.imageConfig.provider,model:i.imageConfig.model.trim()},i.imageConfig.apiKey&&(o.imageConfig.apiKey=i.imageConfig.apiKey.trim()),i.imageConfig.baseUrl&&(o.imageConfig.baseUrl=Pt.normalizeBaseURL(i.imageConfig.baseUrl)),i.imageConfig.availableModels&&(o.imageConfig.availableModels=i.imageConfig.availableModels.filter(c=>typeof c=="string"&&c.trim().length>0))),i.samplerSettings&&(o.samplerSettings=i.samplerSettings),o}}class ut extends Error{code;retryable;constructor(i,o,c=!0){super(i),this.name="ModelServiceError",this.code=o,this.retryable=c}}class ka{static REQUEST_TIMEOUT=1e4;static MAX_RETRIES=3;static async fetchAvailableModels(i){if(!i.apiKey||!i.baseUrl)throw new ut("API key and base URL are required","API_ERROR",!1);if(i.baseUrl.includes("api.anthropic.com"))return[{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet (Latest)",description:"Most intelligent model"},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku",description:"Fastest model"},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Powerful model for complex tasks"},{id:"claude-3-sonnet-20240229",name:"Claude 3 Sonnet",description:"Balanced performance"},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Fast and efficient"}];let o=`${i.baseUrl}/models`;const c={Authorization:`Bearer ${i.apiKey}`,"Content-Type":"application/json"};i.baseUrl.includes("api.openai.com")&&(o="/api/openai/v1/models");try{const d=await this.makeRequest(o,{method:"GET",headers:c,signal:AbortSignal.timeout(this.REQUEST_TIMEOUT)});if(!d.ok)throw await this.handleErrorResponse(d);const f=await d.json();return this.parseModelsResponse(f)}catch(d){if(d instanceof ut)throw d;if(d instanceof TypeError&&d.message.includes("fetch"))throw new ut("Network error: Unable to connect to API endpoint","NETWORK_ERROR");if(d instanceof Error&&d.name==="AbortError")throw new ut("Request timeout: API took too long to respond","NETWORK_ERROR");const f=d instanceof Error?d.message:"Unknown error";throw new ut(`Unexpected error: ${f}`,"API_ERROR")}}static async validateModelAccess(i,o){try{return(await this.fetchAvailableModels(i)).some(d=>d.id===o)}catch{return!1}}static async getModelInfo(i,o){try{return(await this.fetchAvailableModels(i)).find(d=>d.id===o)||null}catch{return null}}static async fetchModelsWithRetry(i,o=this.MAX_RETRIES){let c;for(let d=1;d<=o;d++)try{return await this.fetchAvailableModels(i)}catch(f){const h=f instanceof Error?f.message:"Unknown error";if(c=f instanceof ut?f:new ut(`Attempt ${d} failed: ${h}`,"API_ERROR"),!c.retryable)throw c;if(d===o)break;await this.delay(Math.pow(2,d-1)*1e3)}throw c}static async testConnection(i){try{return await this.fetchAvailableModels(i),{success:!0}}catch(o){return{success:!1,error:o instanceof ut?o.message:"Unknown connection error"}}}static async makeRequest(i,o){try{return await fetch(i,o)}catch(c){throw c instanceof TypeError?new ut("Network error: Check your internet connection and API endpoint, If running local ensure CORS is enabled.","NETWORK_ERROR"):c}}static async handleErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 401:c="AUTH_ERROR",d=!1,o="Invalid API key or unauthorized access";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check your API key permissions";break;case 404:c="API_ERROR",d=!1,o="API endpoint not found - check your base URL";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Server error - please try again later";break}return new ut(o,c,d)}static parseModelsResponse(i){try{if(!i||typeof i!="object"||!("data"in i)||!Array.isArray(i.data))throw new Error("Invalid response format: expected data array. Are you using /v1 at the end of the url?");return i.data.filter(c=>c&&typeof c=="object"&&c!==null&&"id"in c&&typeof c.id=="string").map(c=>{const d=c;return{id:d.id,name:d.id,description:d.description||void 0}}).sort((c,d)=>c.name.localeCompare(d.name))}catch(o){const c=o instanceof Error?o.message:"Unknown parsing error";throw new ut(`Failed to parse models response: ${c}`,"PARSE_ERROR",!1)}}static delay(i){return new Promise(o=>setTimeout(o,i))}static filterTextModels(i){const o=[/^gpt/i,/^claude/i,/^llama/i,/^mistral/i,/^gemini/i,/text/i,/chat/i,/instruct/i],c=[/dall-e/i,/whisper/i,/tts/i,/embedding/i,/moderation/i];return i.filter(d=>c.some(f=>f.test(d.id))?!1:(o.some(f=>f.test(d.id)),!0))}static filterImageModels(i){const o=[/^dall-e/i,/^midjourney/i,/stable.*diffusion/i,/^imagen/i,/^firefly/i,/flux/i,/playground/i,/^sd-/i,/^sdxl/i],c=[/^dall-e-2$/i,/^dall-e-3$/i,/^stable-diffusion/i,/^midjourney/i,/^flux-/i,/^playground-/i];return i.filter(d=>c.some(f=>f.test(d.id))?!0:o.some(f=>f.test(d.id))?![/gpt/i,/llama/i,/claude/i,/mistral/i,/gemini/i,/chat/i,/instruct/i,/text/i,/70b/i,/13b/i,/7b/i,/\d+b/i].some(h=>h.test(d.id)):!1)}static async fetchAvailableImageModels(i){if(i.imageConfig?.provider==="nano-gpt")return console.log("Nano-GPT provider detected - skipping model fetching (manual entry required)"),[];const o=i.imageConfig?{apiKey:i.imageConfig.apiKey||i.apiKey,baseUrl:i.imageConfig.baseUrl||i.baseUrl,model:i.imageConfig.model,availableModels:i.imageConfig.availableModels}:i,c=await this.fetchAvailableModels(o),d=this.filterImageModels(c);return d.length===0&&console.log("No image models found after filtering. All available models:",c.map(f=>f.id)),d}static async fetchImageModelsWithRetry(i,o=this.MAX_RETRIES){let c;for(let d=1;d<=o;d++)try{return await this.fetchAvailableImageModels(i)}catch(f){const h=f instanceof Error?f.message:"Unknown error";if(c=f instanceof ut?f:new ut(`Attempt ${d} failed: ${h}`,"API_ERROR"),!c.retryable)throw c;if(d===o)break;await this.delay(Math.pow(2,d-1)*1e3)}throw c}static async testImageConnection(i){if(i.imageConfig?.provider==="nano-gpt"){const o=i.imageConfig.apiKey||i.apiKey,c=i.imageConfig.baseUrl||i.baseUrl;return!o||!c?{success:!1,error:"API key and base URL are required for nano-gpt"}:{success:!0}}try{return await this.fetchAvailableImageModels(i),{success:!0}}catch(o){return{success:!1,error:o instanceof ut?o.message:"Unknown connection error"}}}static async fetchAllModelsForImageConfig(i){if(i.imageConfig?.provider==="nano-gpt")return console.log("Nano-GPT provider detected - skipping model fetching (manual entry required)"),[];const o=i.imageConfig?{apiKey:i.imageConfig.apiKey||i.apiKey,baseUrl:i.imageConfig.baseUrl||i.baseUrl,model:i.imageConfig.model,availableModels:i.imageConfig.availableModels}:i;return await this.fetchAvailableModels(o)}}const eh=({config:x,onConfigSave:i,onClose:o,className:c=""})=>{const[d,f]=M.useState({apiKey:x?.apiKey||"",baseUrl:x?.baseUrl||"https://api.openai.com/v1",model:x?.model||"gpt-3.5-turbo",enableReasoning:x?.enableReasoning??!0,enableImageGeneration:x?.enableImageGeneration??!0,enableImageConfig:!!x?.imageConfig,imageProvider:x?.imageConfig?.provider||"openai",imageApiKey:x?.imageConfig?.apiKey||"",imageBaseUrl:x?.imageConfig?.baseUrl||"",imageModel:x?.imageConfig?.model||"dall-e-3"}),[h,g]=M.useState(x?.availableModels?.map(O=>({id:O,name:O}))||[]),[p,y]=M.useState(x?.imageConfig?.availableModels?.map(O=>({id:O,name:O}))||[]),[v,w]=M.useState({errors:[],warnings:[],isValid:!1}),[E,D]=M.useState({models:!1,testing:!1,saving:!1,imageModels:!1,imageTesting:!1}),[Y,q]=M.useState({tested:!1,success:!1}),[K,ae]=M.useState({tested:!1,success:!1});M.useEffect(()=>{const O={apiKey:d.apiKey,baseUrl:d.baseUrl,model:d.model,enableImageGeneration:d.enableImageGeneration};d.enableImageConfig&&(O.imageConfig={provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl||void 0,model:d.imageModel});const H=Ns.validateConfig(O);w(H)},[d]);const P=(O,H)=>{if(f(B=>({...B,[O]:H})),(O==="apiKey"||O==="baseUrl")&&(q({tested:!1,success:!1}),g([])),(O==="imageApiKey"||O==="imageBaseUrl"||O==="imageProvider")&&(ae({tested:!1,success:!1}),y([]),O==="imageProvider")){if(H==="nano-gpt"){f(B=>({...B,[O]:H,imageModel:"flux-1.1-pro",imageBaseUrl:B.imageBaseUrl||"https://nano-gpt.com"}));return}else if(H==="openai"){f(B=>({...B,[O]:H,imageModel:"dall-e-3",imageBaseUrl:B.imageBaseUrl||"https://api.openai.com/v1"}));return}}O==="enableImageConfig"&&!H&&(ae({tested:!1,success:!1}),y([]))},V=async()=>{if(v.isValid){D(O=>({...O,testing:!0,models:!0})),q({tested:!1,success:!1});try{const O={apiKey:d.apiKey,baseUrl:Pt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[]},H=await ka.fetchAvailableModels(O),B=ka.filterTextModels(H);g(B),q({tested:!0,success:!0}),!B.some(ie=>ie.id===d.model)&&B.length>0&&f(ie=>({...ie,model:B[0].id}))}catch(O){const H=O instanceof ut?O.message:"Failed to connect to API";q({tested:!0,success:!1,error:H}),g([])}finally{D(O=>({...O,testing:!1,models:!1}))}}},Z=async()=>{if(v.isValid){D(O=>({...O,models:!0}));try{const O={apiKey:d.apiKey,baseUrl:Pt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[]},H=await ka.fetchModelsWithRetry(O),B=ka.filterTextModels(H);g(B)}catch(O){console.error("Failed to fetch models:",O)}finally{D(O=>({...O,models:!1}))}}},ke=async()=>{if(!(!d.enableImageConfig||!v.isValid)){D(O=>({...O,imageTesting:!0,imageModels:!0})),ae({tested:!1,success:!1});try{const O={apiKey:d.apiKey,baseUrl:Pt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[],imageConfig:{provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl?Pt.normalizeBaseURL(d.imageBaseUrl):void 0,model:d.imageModel,availableModels:[]}};if(d.imageProvider==="nano-gpt"){const H=await ka.testImageConnection(O);H.success?(ae({tested:!0,success:!0}),y([])):ae({tested:!0,success:!1,error:H.error})}else{let H=await ka.fetchAvailableImageModels(O);H.length===0&&(console.log("No image models found with filtering, fetching all models..."),H=await ka.fetchAllModelsForImageConfig(O)),y(H),ae({tested:!0,success:!0}),!H.some(B=>B.id===d.imageModel)&&H.length>0&&f(B=>({...B,imageModel:H[0].id}))}}catch(O){const H=O instanceof ut?O.message:"Failed to connect to image API";ae({tested:!0,success:!1,error:H}),y([])}finally{D(O=>({...O,imageTesting:!1,imageModels:!1}))}}},he=async()=>{if(!(!d.enableImageConfig||!v.isValid)){D(O=>({...O,imageModels:!0}));try{const O={apiKey:d.apiKey,baseUrl:Pt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[],imageConfig:{provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl?Pt.normalizeBaseURL(d.imageBaseUrl):void 0,model:d.imageModel,availableModels:[]}};if(d.imageProvider==="nano-gpt"){y([]);return}let H=await ka.fetchImageModelsWithRetry(O);H.length===0&&(console.log("No image models found with filtering in retry, fetching all models..."),H=await ka.fetchAllModelsForImageConfig(O)),y(H)}catch(O){console.error("Failed to fetch image models:",O)}finally{D(O=>({...O,imageModels:!1}))}}},X=async()=>{if(v.isValid){D(O=>({...O,saving:!0}));try{const O={apiKey:d.apiKey,baseUrl:d.baseUrl,model:d.model,enableReasoning:d.enableReasoning,enableImageGeneration:d.enableImageGeneration,samplerSettings:x?.samplerSettings};d.enableImageConfig&&(O.imageConfig={provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl||void 0,model:d.imageModel,availableModels:p.map(ie=>ie.id)});const H=Ns.sanitizeConfig(O),B={apiKey:H.apiKey,baseUrl:H.baseUrl,model:H.model,availableModels:h.map(ie=>ie.id),enableReasoning:d.enableReasoning,enableImageGeneration:H.enableImageGeneration,imageConfig:H.imageConfig,samplerSettings:H.samplerSettings};i(B)}finally{D(O=>({...O,saving:!1}))}}};return r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6 max-w-2xl mx-auto ${c}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"API Configuration"}),o&&r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 text-2xl sm:text-xl font-bold flex-shrink-0 ml-2","aria-label":"Close settings",children:""})]}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apiKey",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key *"}),r.jsx("input",{id:"apiKey",type:"password",value:d.apiKey,onChange:O=>P("apiKey",O.target.value),placeholder:"sk-...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Your OpenAI-compatible API key. For local LLMs, use any 8+ character string like "12345678". This is stored locally and never sent to our servers.'})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"baseUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Base URL *"}),r.jsx("input",{id:"baseUrl",type:"url",value:d.baseUrl,onChange:O=>P("baseUrl",O.target.value),placeholder:"https://api.openai.com/v1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The base URL for your OpenAI-compatible API endpoint. For local LLMs with CORS enabled use something like http://127.0.0.1:1234/v1"})]}),r.jsxs("div",{children:[r.jsx("button",{onClick:V,disabled:!v.isValid||E.testing,className:"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:E.testing?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing Connection..."]}):"Test Connection & Fetch Models"}),Y.tested&&r.jsx("div",{className:`mt-2 p-3 rounded-md ${Y.success?"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:Y.success?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),"Connection successful! Found ",h.length," compatible models."]}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),"Connection failed"]}),Y.error&&r.jsx("p",{className:"text-sm",children:Y.error}),r.jsx("button",{onClick:V,className:"text-sm underline hover:no-underline mt-1",children:"Try again"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Model *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("select",{id:"model",value:d.model,onChange:O=>P("model",O.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:h.length===0?r.jsx("option",{value:d.model,children:d.model}):h.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))}),h.length===0&&!E.models&&r.jsx("button",{onClick:Z,disabled:!v.isValid,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:"Fetch Models"})]}),E.models&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 dark:border-gray-400"}),"Loading available models..."]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.length===0?"Test connection first to load available models":`Choose from ${h.length} available text generation models`})]}),r.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("input",{id:"enableReasoning",type:"checkbox",checked:d.enableReasoning,onChange:O=>P("enableReasoning",O.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"enableReasoning",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Request AI Reasoning"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Request the AI to show its thinking process and reasoning. When disabled, the AI provides only the final response for faster generation."})]}),r.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("input",{id:"enableImageGeneration",type:"checkbox",checked:d.enableImageGeneration,onChange:O=>P("enableImageGeneration",O.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"enableImageGeneration",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Enable Image Generation"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Generate AI images for each story scene. Disable this to play without images for faster story generation."})]}),d.enableImageGeneration&&r.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("input",{id:"enableImageConfig",type:"checkbox",checked:d.enableImageConfig,onChange:O=>P("enableImageConfig",O.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"enableImageConfig",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Separate Image Generation Configuration"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Configure a separate API endpoint and model for image generation. If disabled, the main configuration will be used for both text and images."}),d.enableImageConfig&&r.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageProvider",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Provider *"}),r.jsxs("select",{id:"imageProvider",value:d.imageProvider,onChange:O=>P("imageProvider",O.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"openai",children:"OpenAI Compatible (DALL-E, etc.)"}),r.jsx("option",{value:"nano-gpt",children:"Nano-GPT"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the image generation service provider. Different providers use different API formats."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image API Key"}),r.jsx("input",{id:"imageApiKey",type:"password",value:d.imageApiKey,onChange:O=>P("imageApiKey",O.target.value),placeholder:"Leave empty to use main API key",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Optional: Use a different API key for image generation. Leave empty to use the main API key."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageBaseUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Base URL"}),r.jsx("input",{id:"imageBaseUrl",type:"url",value:d.imageBaseUrl,onChange:O=>P("imageBaseUrl",O.target.value),placeholder:d.imageProvider==="nano-gpt"?"https://nano-gpt.com":"https://api.openai.com/v1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Optional: Use a different base URL for image generation. Leave empty to use the main base URL.",d.imageProvider==="nano-gpt"&&" For nano-gpt, use: https://nano-gpt.com"]})]}),r.jsxs("div",{children:[r.jsx("button",{onClick:ke,disabled:!v.isValid||E.imageTesting,className:"bg-purple-600 dark:bg-purple-500 text-white px-4 py-2 rounded-md hover:bg-purple-700 dark:hover:bg-purple-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:E.imageTesting?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing Image Connection..."]}):"Test Image Connection & Fetch Models"}),K.tested&&r.jsx("div",{className:`mt-2 p-3 rounded-md ${K.success?"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:K.success?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),d.imageProvider==="nano-gpt"?"Image connection validated! Enter your model name manually below.":`Image connection successful! Found ${p.length} compatible image models.`]}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),"Image connection failed"]}),K.error&&r.jsx("p",{className:"text-sm",children:K.error}),r.jsx("button",{onClick:ke,className:"text-sm underline hover:no-underline mt-1",children:"Try again"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Model *"}),d.imageProvider==="nano-gpt"?r.jsxs("div",{children:[r.jsx("input",{id:"imageModel",type:"text",value:d.imageModel,onChange:O=>P("imageModel",O.target.value),placeholder:"Enter model name (e.g., flux-1.1-pro, stable-diffusion-xl)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter the exact model name as required by nano-gpt. Common models: flux-1.1-pro, stable-diffusion-xl, dall-e-3"})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("select",{id:"imageModel",value:d.imageModel,onChange:O=>P("imageModel",O.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:p.length===0?r.jsx("option",{value:d.imageModel,children:d.imageModel}):p.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))}),p.length===0&&!E.imageModels&&r.jsx("button",{onClick:he,disabled:!v.isValid,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:"Fetch Models"})]}),E.imageModels&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 dark:border-gray-400"}),"Loading available image models..."]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:p.length===0?"Test image connection first to load available models":`Choose from ${p.length} available image generation models`})]})]})]})]}),(v.errors.length>0||v.warnings.length>0)&&r.jsxs("div",{className:"space-y-2",children:[v.errors.map((O,H)=>r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30 p-2 rounded",children:O},`error-${H}`)),v.warnings.map((O,H)=>r.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30 p-2 rounded",children:O},`warning-${H}`))]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{onClick:X,disabled:!v.isValid||E.saving,className:"bg-green-600 dark:bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-700 dark:hover:bg-green-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:E.saving?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Configuration"}),o&&r.jsx("button",{onClick:o,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-2 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"})]})]})]})},th=({onGetStarted:x})=>r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 mb-8",children:r.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to AI Adventure"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Experience interactive storytelling powered by artificial intelligence"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 text-left",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Dynamic Stories"}),r.jsx("p",{className:"text-sm text-gray-600",children:"AI creates unique narratives based on your choices"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Visual Scenes"}),r.jsx("p",{className:"text-sm text-gray-600",children:"AI-generated images bring your adventure to life"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Your API Key"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Use your own OpenAI-compatible API for full control"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Auto-Save"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your progress is automatically saved as you play"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center mb-3",children:[r.jsx("svg",{className:"h-6 w-6 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Quick Setup Required"})]}),r.jsx("p",{className:"text-blue-800 text-sm",children:"To get started, you'll need to configure your OpenAI-compatible API key. This allows the AI to generate your personalized adventure stories and images."}),r.jsxs("div",{className:"mt-4 text-xs text-blue-700",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Supported services:"})," OpenAI, Azure OpenAI, and other compatible APIs"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Privacy:"})," Your API key is stored securely on your device only"]})]})]}),r.jsxs("button",{onClick:x,className:"inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-lg shadow-sm text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-105",children:[r.jsx("svg",{className:"mr-3 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),"Get Started"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"By continuing, you agree to configure your own AI service credentials"})]})})}),sm=M.createContext(void 0),ah=({children:x})=>{const[i,o]=M.useState([]),c=M.useCallback(()=>`error-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,[]),d=M.useCallback((E,D,Y,q=!0)=>{const K={id:c(),message:E,type:D,timestamp:new Date,retryAction:Y,dismissible:!0,autoHide:q};return o(ae=>[...ae,K]),q&&(D==="success"||D==="info"||D==="warning")&&setTimeout(()=>{o(ae=>ae.filter(P=>P.id!==K.id))},5e3),K.id},[c]),f=M.useCallback((E,D)=>d(E,"error",D,!1),[d]),h=M.useCallback(E=>d(E,"warning",void 0,!0),[d]),g=M.useCallback(E=>d(E,"info",void 0,!0),[d]),p=M.useCallback(E=>d(E,"success",void 0,!0),[d]),y=M.useCallback(E=>{o(D=>D.filter(Y=>Y.id!==E))},[]),v=M.useCallback(()=>{o([])},[]),w={errors:i,showError:f,showWarning:h,showInfo:g,showSuccess:p,dismissError:y,clearAllErrors:v};return r.jsx(sm.Provider,{value:w,children:x})},im=()=>{const x=M.useContext(sm);if(!x)throw new Error("useError must be used within an ErrorProvider");return x},om=M.createContext(void 0),nh=({children:x})=>{const[i,o]=M.useState(()=>localStorage.getItem("theme")||"light");M.useEffect(()=>{const f=window.document.documentElement;f.classList.remove("light","dark"),f.classList.add(i),localStorage.setItem("theme",i)},[i]);const c=()=>{o(f=>f==="light"?"dark":"light")},d=f=>{o(f)};return r.jsx(om.Provider,{value:{theme:i,toggleTheme:c,setTheme:d},children:x})},lh=()=>{const x=M.useContext(om);if(!x)throw new Error("useTheme must be used within ThemeProvider");return x},rh=()=>{const{errors:x,dismissError:i}=im();if(x.length===0)return null;const o=f=>{switch(f){case"error":return r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})});case"warning":return r.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})});case"success":return r.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"info":return r.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},c=f=>{switch(f){case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800"}},d=f=>{switch(f){case"error":return"text-red-600 hover:text-red-800 hover:bg-red-100";case"warning":return"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-100";case"success":return"text-green-600 hover:text-green-800 hover:bg-green-100";case"info":return"text-blue-600 hover:text-blue-800 hover:bg-blue-100"}};return r.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:x.map(f=>r.jsx("div",{className:`rounded-lg border p-4 shadow-lg transition-all duration-300 ${c(f.type)}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:o(f.type)}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:f.message}),f.timestamp&&r.jsx("p",{className:"text-xs opacity-75 mt-1",children:f.timestamp.toLocaleTimeString()})]}),r.jsxs("div",{className:"ml-4 flex-shrink-0 flex space-x-1",children:[f.retryAction&&r.jsxs("button",{onClick:()=>{f.retryAction(),i(f.id)},className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded transition-colors ${d(f.type)}`,title:"Retry operation",children:[r.jsx("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]}),f.dismissible&&r.jsx("button",{onClick:()=>i(f.id),className:`inline-flex items-center p-1 text-xs rounded transition-colors ${d(f.type)}`,title:"Dismiss notification",children:r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},f.id))})},sh=({message:x="Loading...",size:i="medium",inline:o=!1,className:c=""})=>{const d=()=>{switch(i){case"small":return"h-4 w-4";case"medium":return"h-6 w-6";case"large":return"h-8 w-8"}},f=()=>{switch(i){case"small":return"text-xs";case"medium":return"text-sm";case"large":return"text-base"}};return o?r.jsxs("div",{className:`inline-flex items-center space-x-2 ${c}`,children:[r.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${d()}`}),x&&r.jsx("span",{className:`text-gray-600 ${f()}`,children:x})]}):r.jsxs("div",{className:`flex flex-col items-center justify-center space-y-3 ${c}`,children:[r.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${d()}`}),x&&r.jsx("p",{className:`text-gray-600 ${f()} text-center`,children:x})]})},ih=()=>{const{theme:x,toggleTheme:i}=lh();return r.jsx("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors","aria-label":`Switch to ${x==="light"?"dark":"light"} mode`,title:`Switch to ${x==="light"?"dark":"light"} mode`,children:x==="light"?r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};class oh extends Mg.Component{constructor(i){super(i),this.state={hasError:!1}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,o){console.error("Error caught by boundary:",i,o),this.props.onError?.(i,o)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page to try again."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const ch=()=>r.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:r.jsx(sh,{message:"Loading your adventure...",size:"large"})}),uh=()=>{const[x,i]=M.useState("welcome"),[o,c]=M.useState(null),[d,f]=M.useState(null),[h,g]=M.useState(!0),[p,y]=M.useState(!1),[v,w]=M.useState(0),[E,D]=M.useState(!1),{showError:Y,showSuccess:q,showWarning:K,clearAllErrors:ae}=im(),P=M.useCallback(async()=>{try{g(!0),ae();const L=ja.loadConfig(),I=Mt.getGameCount()>0;if(L){const ye=Ns.validateConfig(L);ye.isValid?(c(L),i("launcher"),y(!1),ye.warnings.length>0&&ye.warnings.forEach(S=>K(S))):(console.warn("Invalid existing config found:",ye.errors),K("Your saved configuration is invalid and needs to be updated."),y(!0),i("welcome"))}else I?(i("settings"),y(!1),K("Please configure your AI settings to continue playing.")):(y(!0),i("welcome"));const se=Mt.validateAndRepairStorage();se.isValid||(console.warn("Storage validation issues:",se.errors),se.repairedCount>0&&K(`Repaired ${se.repairedCount} corrupted saved game(s).`),se.errors.forEach(ye=>{ye.includes("Repaired")||Y(ye,()=>P())}))}catch(L){const I=L instanceof Error?L.message:"Failed to initialize application";Y(I,()=>P()),console.error("App initialization error:",L)}finally{g(!1)}},[Y,K,ae]);M.useEffect(()=>{P()},[P]);const V=L=>{try{const I=Ns.validateConfig(L);if(!I.isValid){Y(`Configuration validation failed: ${I.errors.join(", ")}`);return}ja.saveConfig(L),c(L),i("launcher"),y(!1),q("AI configuration saved successfully!"),I.warnings.length>0&&I.warnings.forEach(se=>K(se))}catch(I){const se=I instanceof Error?I.message:"Failed to save configuration";Y(se,()=>V(L)),console.error("Config save error:",I)}},Z=()=>{i("settings")},[ke,he]=M.useState("standard"),[X,O]=M.useState(void 0),[H,B]=M.useState(!1),ie=(L="standard",I)=>{f(null),he(L),O(I),B(!1),D(!1);const se=ja.loadConfig();se&&c(se),i("game")},re=L=>{f(L),B(!1),D(!1);const I=ja.loadConfig();I&&c(I),i("game")},Ye=()=>{const L=ja.loadConfig();L&&c(L),i("settings")},$=()=>{f(null);const L=ja.loadConfig();L&&c(L),x==="game"||x==="settings"?(B(!1),D(!0),i("launcher")):(B(!1),D(!1),i("launcher"),w(I=>I+1))},de=()=>{f(null);const L=ja.loadConfig();L&&c(L),B(!0),D(!1),i("launcher")},C=(L,I)=>{console.error("Global error boundary triggered:",L,I),Y(`Application error: ${L.message}`,()=>window.location.reload())};return h?r.jsx(ch,{}):r.jsx(oh,{onError:C,children:r.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col",children:[x!=="welcome"&&r.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[r.jsx("div",{className:"flex items-center min-w-0",children:r.jsxs("button",{onClick:$,className:"flex items-center space-x-2 text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[r.jsx("div",{className:"flex items-center justify-center h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-blue-100 dark:bg-blue-900 flex-shrink-0",children:r.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h1",{className:"text-base sm:text-xl font-bold truncate",children:"AI Adventure"})]})}),r.jsxs("nav",{className:"flex items-center space-x-1 sm:space-x-4",children:[r.jsx(ih,{}),x!=="launcher"&&r.jsxs("button",{onClick:$,className:"inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsxs("svg",{className:"sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Games"})]}),r.jsxs("button",{onClick:Ye,className:`inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${x==="settings"?"border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900 hover:bg-blue-100 dark:hover:bg-blue-800":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[r.jsxs("svg",{className:"sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]})})}),r.jsxs("main",{className:`flex-1 ${x==="welcome"?"":"py-3 sm:py-6"}`,children:[x==="welcome"&&r.jsx(th,{onGetStarted:Z}),x==="settings"&&r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-8",children:r.jsx(eh,{config:o,onConfigSave:V,onClose:p?void 0:()=>i("launcher")})}),x==="launcher"&&r.jsx(Pg,{aiConfig:o,onConfigurationNeeded:Ye,onStartNewGame:ie,onResumeGame:re,startWithModeSelection:H,startWithSavedGames:E},v),x==="game"&&r.jsx($g,{aiConfig:o,onConfigurationNeeded:Ye,onBackToLauncher:$,onNewGame:de,gameToResume:d,gameMode:ke,customScene:X})]}),x!=="welcome"&&r.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:r.jsx("div",{className:"max-w-7xl mx-auto py-3 sm:py-4 px-2 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[r.jsx("p",{className:"text-center sm:text-left",children:"AI-powered CYOA"}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[o&&r.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300",children:[r.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),"Connected"]}),r.jsxs("span",{className:"truncate max-w-[150px] sm:max-w-none",children:["Model: ",o?.model||"Not configured"]})]})]})})}),r.jsx(rh,{})]})})};function dh(){return r.jsx(nh,{children:r.jsx(ah,{children:r.jsx(uh,{})})})}Hg.createRoot(document.getElementById("root")).render(r.jsx(M.StrictMode,{children:r.jsx(dh,{})}));
