(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function o(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(d){if(d.ep)return;d.ep=!0;const f=o(d);fetch(d.href,f)}})();function kg(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var Ho={exports:{}},ar={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf;function jg(){if(qf)return ar;qf=1;var x=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(c,d,f){var h=null;if(f!==void 0&&(h=""+f),d.key!==void 0&&(h=""+d.key),"key"in d){f={};for(var g in d)g!=="key"&&(f[g]=d[g])}else f=d;return d=f.ref,{$$typeof:x,type:c,key:h,ref:d!==void 0?d:null,props:f}}return ar.Fragment=i,ar.jsx=o,ar.jsxs=o,ar}var Vf;function Ng(){return Vf||(Vf=1,Ho.exports=jg()),Ho.exports}var r=Ng(),Lo={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function wg(){if(Xf)return ge;Xf=1;var x=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),A=Symbol.iterator;function B(v){return v===null||typeof v!="object"?null:(v=A&&v[A]||v["@@iterator"],typeof v=="function"?v:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,K={};function le(v,z,I){this.props=v,this.context=z,this.refs=K,this.updater=I||Y}le.prototype.isReactComponent={},le.prototype.setState=function(v,z){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,z,"setState")},le.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function ae(){}ae.prototype=le.prototype;function Q(v,z,I){this.props=v,this.context=z,this.refs=K,this.updater=I||Y}var $=Q.prototype=new ae;$.constructor=Q,q($,le.prototype),$.isPureReactComponent=!0;var Ce=Array.isArray;function be(){}var X={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function D(v,z,I){var P=I.ref;return{$$typeof:x,type:v,key:z,ref:P!==void 0?P:null,props:I}}function G(v,z){return D(v.type,z,v.props)}function ie(v){return typeof v=="object"&&v!==null&&v.$$typeof===x}function re(v){var z={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(I){return z[I]})}var Be=/\/+/g;function Z(v,z){return typeof v=="object"&&v!==null&&v.key!=null?re(""+v.key):z.toString(36)}function de(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(be,be):(v.status="pending",v.then(function(z){v.status==="pending"&&(v.status="fulfilled",v.value=z)},function(z){v.status==="pending"&&(v.status="rejected",v.reason=z)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function C(v,z,I,P,fe){var ye=typeof v;(ye==="undefined"||ye==="boolean")&&(v=null);var Se=!1;if(v===null)Se=!0;else switch(ye){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(v.$$typeof){case x:case i:Se=!0;break;case S:return Se=v._init,C(Se(v._payload),z,I,P,fe)}}if(Se)return fe=fe(v),Se=P===""?"."+Z(v,0):P,Ce(fe)?(I="",Se!=null&&(I=Se.replace(Be,"$&/")+"/"),C(fe,z,I,"",function(Mt){return Mt})):fe!=null&&(ie(fe)&&(fe=G(fe,I+(fe.key==null||v&&v.key===fe.key?"":(""+fe.key).replace(Be,"$&/")+"/")+Se)),z.push(fe)),1;Se=0;var Ue=P===""?".":P+":";if(Ce(v))for(var Xe=0;Xe<v.length;Xe++)P=v[Xe],ye=Ue+Z(P,Xe),Se+=C(P,z,I,ye,fe);else if(Xe=B(v),typeof Xe=="function")for(v=Xe.call(v),Xe=0;!(P=v.next()).done;)P=P.value,ye=Ue+Z(P,Xe++),Se+=C(P,z,I,ye,fe);else if(ye==="object"){if(typeof v.then=="function")return C(de(v),z,I,P,fe);throw z=String(v),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Se}function H(v,z,I){if(v==null)return v;var P=[],fe=0;return C(v,P,"","",function(ye){return z.call(I,ye,fe++)}),P}function V(v){if(v._status===-1){var z=v._result;z=z(),z.then(function(I){(v._status===0||v._status===-1)&&(v._status=1,v._result=I)},function(I){(v._status===0||v._status===-1)&&(v._status=2,v._result=I)}),v._status===-1&&(v._status=0,v._result=z)}if(v._status===1)return v._result.default;throw v._result}var se=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},he={map:H,forEach:function(v,z,I){H(v,function(){z.apply(this,arguments)},I)},count:function(v){var z=0;return H(v,function(){z++}),z},toArray:function(v){return H(v,function(z){return z})||[]},only:function(v){if(!ie(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return ge.Activity=N,ge.Children=he,ge.Component=le,ge.Fragment=o,ge.Profiler=d,ge.PureComponent=Q,ge.StrictMode=c,ge.Suspense=p,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,ge.__COMPILER_RUNTIME={__proto__:null,c:function(v){return X.H.useMemoCache(v)}},ge.cache=function(v){return function(){return v.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(v,z,I){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var P=q({},v.props),fe=v.key;if(z!=null)for(ye in z.key!==void 0&&(fe=""+z.key),z)!O.call(z,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&z.ref===void 0||(P[ye]=z[ye]);var ye=arguments.length-2;if(ye===1)P.children=I;else if(1<ye){for(var Se=Array(ye),Ue=0;Ue<ye;Ue++)Se[Ue]=arguments[Ue+2];P.children=Se}return D(v.type,fe,P)},ge.createContext=function(v){return v={$$typeof:h,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:f,_context:v},v},ge.createElement=function(v,z,I){var P,fe={},ye=null;if(z!=null)for(P in z.key!==void 0&&(ye=""+z.key),z)O.call(z,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(fe[P]=z[P]);var Se=arguments.length-2;if(Se===1)fe.children=I;else if(1<Se){for(var Ue=Array(Se),Xe=0;Xe<Se;Xe++)Ue[Xe]=arguments[Xe+2];fe.children=Ue}if(v&&v.defaultProps)for(P in Se=v.defaultProps,Se)fe[P]===void 0&&(fe[P]=Se[P]);return D(v,ye,fe)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(v){return{$$typeof:g,render:v}},ge.isValidElement=ie,ge.lazy=function(v){return{$$typeof:S,_payload:{_status:-1,_result:v},_init:V}},ge.memo=function(v,z){return{$$typeof:y,type:v,compare:z===void 0?null:z}},ge.startTransition=function(v){var z=X.T,I={};X.T=I;try{var P=v(),fe=X.S;fe!==null&&fe(I,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(be,se)}catch(ye){se(ye)}finally{z!==null&&I.types!==null&&(z.types=I.types),X.T=z}},ge.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},ge.use=function(v){return X.H.use(v)},ge.useActionState=function(v,z,I){return X.H.useActionState(v,z,I)},ge.useCallback=function(v,z){return X.H.useCallback(v,z)},ge.useContext=function(v){return X.H.useContext(v)},ge.useDebugValue=function(){},ge.useDeferredValue=function(v,z){return X.H.useDeferredValue(v,z)},ge.useEffect=function(v,z){return X.H.useEffect(v,z)},ge.useEffectEvent=function(v){return X.H.useEffectEvent(v)},ge.useId=function(){return X.H.useId()},ge.useImperativeHandle=function(v,z,I){return X.H.useImperativeHandle(v,z,I)},ge.useInsertionEffect=function(v,z){return X.H.useInsertionEffect(v,z)},ge.useLayoutEffect=function(v,z){return X.H.useLayoutEffect(v,z)},ge.useMemo=function(v,z){return X.H.useMemo(v,z)},ge.useOptimistic=function(v,z){return X.H.useOptimistic(v,z)},ge.useReducer=function(v,z,I){return X.H.useReducer(v,z,I)},ge.useRef=function(v){return X.H.useRef(v)},ge.useState=function(v){return X.H.useState(v)},ge.useSyncExternalStore=function(v,z,I){return X.H.useSyncExternalStore(v,z,I)},ge.useTransition=function(){return X.H.useTransition()},ge.version="19.2.0",ge}var Kf;function Xo(){return Kf||(Kf=1,Lo.exports=wg()),Lo.exports}var M=Xo();const Tg=kg(M);var Go={exports:{}},nr={},Bo={exports:{}},Yo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf;function Cg(){return Qf||(Qf=1,(function(x){function i(C,H){var V=C.length;C.push(H);e:for(;0<V;){var se=V-1>>>1,he=C[se];if(0<d(he,H))C[se]=H,C[V]=he,V=se;else break e}}function o(C){return C.length===0?null:C[0]}function c(C){if(C.length===0)return null;var H=C[0],V=C.pop();if(V!==H){C[0]=V;e:for(var se=0,he=C.length,v=he>>>1;se<v;){var z=2*(se+1)-1,I=C[z],P=z+1,fe=C[P];if(0>d(I,V))P<he&&0>d(fe,I)?(C[se]=fe,C[P]=V,se=P):(C[se]=I,C[z]=V,se=z);else if(P<he&&0>d(fe,V))C[se]=fe,C[P]=V,se=P;else break e}}return H}function d(C,H){var V=C.sortIndex-H.sortIndex;return V!==0?V:C.id-H.id}if(x.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;x.unstable_now=function(){return f.now()}}else{var h=Date,g=h.now();x.unstable_now=function(){return h.now()-g}}var p=[],y=[],S=1,N=null,A=3,B=!1,Y=!1,q=!1,K=!1,le=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function $(C){for(var H=o(y);H!==null;){if(H.callback===null)c(y);else if(H.startTime<=C)c(y),H.sortIndex=H.expirationTime,i(p,H);else break;H=o(y)}}function Ce(C){if(q=!1,$(C),!Y)if(o(p)!==null)Y=!0,be||(be=!0,re());else{var H=o(y);H!==null&&de(Ce,H.startTime-C)}}var be=!1,X=-1,O=5,D=-1;function G(){return K?!0:!(x.unstable_now()-D<O)}function ie(){if(K=!1,be){var C=x.unstable_now();D=C;var H=!0;try{e:{Y=!1,q&&(q=!1,ae(X),X=-1),B=!0;var V=A;try{t:{for($(C),N=o(p);N!==null&&!(N.expirationTime>C&&G());){var se=N.callback;if(typeof se=="function"){N.callback=null,A=N.priorityLevel;var he=se(N.expirationTime<=C);if(C=x.unstable_now(),typeof he=="function"){N.callback=he,$(C),H=!0;break t}N===o(p)&&c(p),$(C)}else c(p);N=o(p)}if(N!==null)H=!0;else{var v=o(y);v!==null&&de(Ce,v.startTime-C),H=!1}}break e}finally{N=null,A=V,B=!1}H=void 0}}finally{H?re():be=!1}}}var re;if(typeof Q=="function")re=function(){Q(ie)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,Z=Be.port2;Be.port1.onmessage=ie,re=function(){Z.postMessage(null)}}else re=function(){le(ie,0)};function de(C,H){X=le(function(){C(x.unstable_now())},H)}x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(C){C.callback=null},x.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<C?Math.floor(1e3/C):5},x.unstable_getCurrentPriorityLevel=function(){return A},x.unstable_next=function(C){switch(A){case 1:case 2:case 3:var H=3;break;default:H=A}var V=A;A=H;try{return C()}finally{A=V}},x.unstable_requestPaint=function(){K=!0},x.unstable_runWithPriority=function(C,H){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var V=A;A=C;try{return H()}finally{A=V}},x.unstable_scheduleCallback=function(C,H,V){var se=x.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?se+V:se):V=se,C){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=V+he,C={id:S++,callback:H,priorityLevel:C,startTime:V,expirationTime:he,sortIndex:-1},V>se?(C.sortIndex=V,i(y,C),o(p)===null&&C===o(y)&&(q?(ae(X),X=-1):q=!0,de(Ce,V-se))):(C.sortIndex=he,i(p,C),Y||B||(Y=!0,be||(be=!0,re()))),C},x.unstable_shouldYield=G,x.unstable_wrapCallback=function(C){var H=A;return function(){var V=A;A=H;try{return C.apply(this,arguments)}finally{A=V}}}})(Yo)),Yo}var If;function Eg(){return If||(If=1,Bo.exports=Cg()),Bo.exports}var qo={exports:{}},ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function Ag(){if(Zf)return ot;Zf=1;var x=Xo();function i(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var c={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(p,y,S){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:N==null?null:""+N,children:p,containerInfo:y,implementation:S}}var h=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,ot.createPortal=function(p,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(i(299));return f(p,y,null,S)},ot.flushSync=function(p){var y=h.T,S=c.p;try{if(h.T=null,c.p=2,p)return p()}finally{h.T=y,c.p=S,c.d.f()}},ot.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,c.d.C(p,y))},ot.prefetchDNS=function(p){typeof p=="string"&&c.d.D(p)},ot.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var S=y.as,N=g(S,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?c.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:N,integrity:A,fetchPriority:B}):S==="script"&&c.d.X(p,{crossOrigin:N,integrity:A,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},ot.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=g(y.as,y.crossOrigin);c.d.M(p,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&c.d.M(p)},ot.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,N=g(S,y.crossOrigin);c.d.L(p,S,{crossOrigin:N,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},ot.preloadModule=function(p,y){if(typeof p=="string")if(y){var S=g(y.as,y.crossOrigin);c.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else c.d.m(p)},ot.requestFormReset=function(p){c.d.r(p)},ot.unstable_batchedUpdates=function(p,y){return p(y)},ot.useFormState=function(p,y,S){return h.H.useFormState(p,y,S)},ot.useFormStatus=function(){return h.H.useHostTransitionStatus()},ot.version="19.2.0",ot}var Jf;function Mg(){if(Jf)return qo.exports;Jf=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(i){console.error(i)}}return x(),qo.exports=Ag(),qo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function Rg(){if($f)return nr;$f=1;var x=Eg(),i=Xo(),o=Mg();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(c(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,n=t;;){var l=a.return;if(l===null)break;var s=l.alternate;if(s===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===a)return p(l),e;if(s===n)return p(l),t;s=s.sibling}throw Error(c(188))}if(a.return!==n.return)a=l,n=s;else{for(var u=!1,m=l.child;m;){if(m===a){u=!0,a=l,n=s;break}if(m===n){u=!0,n=l,a=s;break}m=m.sibling}if(!u){for(m=s.child;m;){if(m===a){u=!0,a=s,n=l;break}if(m===n){u=!0,n=s,a=l;break}m=m.sibling}if(!u)throw Error(c(189))}}if(a.alternate!==n)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,A=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=ie&&e[ie]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Symbol.for("react.client.reference");function Z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Be?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case le:return"Profiler";case K:return"StrictMode";case Ce:return"Suspense";case be:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Y:return"Portal";case Q:return e.displayName||"Context";case ae:return(e._context.displayName||"Context")+".Consumer";case $:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return t=e.displayName||null,t!==null?t:Z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return Z(e(t))}catch{}}return null}var de=Array.isArray,C=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},se=[],he=-1;function v(e){return{current:e}}function z(e){0>he||(e.current=se[he],se[he]=null,he--)}function I(e,t){he++,se[he]=e.current,e.current=t}var P=v(null),fe=v(null),ye=v(null),Se=v(null);function Ue(e,t){switch(I(ye,t),I(fe,e),I(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?df(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=df(t),e=ff(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(P),I(P,e)}function Xe(){z(P),z(fe),z(ye)}function Mt(e){e.memoizedState!==null&&I(Se,e);var t=P.current,a=ff(t,e.type);t!==a&&(I(fe,e),I(P,a))}function Qt(e){fe.current===e&&(z(P),z(fe)),Se.current===e&&(z(Se),Wl._currentValue=V)}var ja,bn;function ea(e){if(ja===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ja=t&&t[1]||"",bn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ja+e+bn}var ll=!1;function rl(e,t){if(!e||ll)return"";ll=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(R){var E=R}Reflect.construct(e,[],L)}else{try{L.call()}catch(R){E=R}e.call(L.prototype)}}else{try{throw Error()}catch(R){E=R}(L=e())&&typeof L.catch=="function"&&L.catch(function(){})}}catch(R){if(R&&E&&typeof R.stack=="string")return[R.stack,E.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),u=s[0],m=s[1];if(u&&m){var b=u.split(`
`),T=m.split(`
`);for(l=n=0;n<b.length&&!b[n].includes("DetermineComponentFrameRoot");)n++;for(;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;if(n===b.length||l===T.length)for(n=b.length-1,l=T.length-1;1<=n&&0<=l&&b[n]!==T[l];)l--;for(;1<=n&&0<=l;n--,l--)if(b[n]!==T[l]){if(n!==1||l!==1)do if(n--,l--,0>l||b[n]!==T[l]){var _=`
`+b[n].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=n&&0<=l);break}}}finally{ll=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ea(a):""}function Na(e,t){switch(e.tag){case 26:case 27:case 5:return ea(e.type);case 16:return ea("Lazy");case 13:return e.child!==t&&t!==null?ea("Suspense Fallback"):ea("Suspense");case 19:return ea("SuspenseList");case 0:case 15:return rl(e.type,!1);case 11:return rl(e.type.render,!1);case 1:return rl(e.type,!0);case 31:return ea("Activity");default:return""}}function sl(e){try{var t="",a=null;do t+=Na(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var il=Object.prototype.hasOwnProperty,ol=x.unstable_scheduleCallback,cl=x.unstable_cancelCallback,J=x.unstable_shouldYield,F=x.unstable_requestPaint,W=x.unstable_now,ve=x.unstable_getCurrentPriorityLevel,oe=x.unstable_ImmediatePriority,me=x.unstable_UserBlockingPriority,Oe=x.unstable_NormalPriority,Ke=x.unstable_LowPriority,Rt=x.unstable_IdlePriority,ut=x.log,r0=x.unstable_setDisableYieldValue,ul=null,bt=null;function wa(e){if(typeof ut=="function"&&r0(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(ul,e)}catch{}}var vt=Math.clz32?Math.clz32:o0,s0=Math.log,i0=Math.LN2;function o0(e){return e>>>=0,e===0?32:31-(s0(e)/i0|0)|0}var rr=256,sr=262144,ir=4194304;function en(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function or(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var l=0,s=e.suspendedLanes,u=e.pingedLanes;e=e.warmLanes;var m=n&134217727;return m!==0?(n=m&~s,n!==0?l=en(n):(u&=m,u!==0?l=en(u):a||(a=m&~e,a!==0&&(l=en(a))))):(m=n&~s,m!==0?l=en(m):u!==0?l=en(u):a||(a=n&~e,a!==0&&(l=en(a)))),l===0?0:t!==0&&t!==l&&(t&s)===0&&(s=l&-l,a=t&-t,s>=a||s===32&&(a&4194048)!==0)?t:l}function dl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function c0(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(){var e=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),e}function Ns(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function fl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function u0(e,t,a,n,l,s){var u=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,b=e.expirationTimes,T=e.hiddenUpdates;for(a=u&~a;0<a;){var _=31-vt(a),L=1<<_;m[_]=0,b[_]=-1;var E=T[_];if(E!==null)for(T[_]=null,_=0;_<E.length;_++){var R=E[_];R!==null&&(R.lane&=-536870913)}a&=~L}n!==0&&Qo(e,n,0),s!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=s&~(u&~t))}function Qo(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-vt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function Io(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-vt(a),l=1<<n;l&t|e[n]&t&&(e[n]|=t),a&=~l}}function Zo(e,t){var a=t&-t;return a=(a&42)!==0?1:ws(a),(a&(e.suspendedLanes|t))!==0?0:a}function ws(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ts(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Jo(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:Uf(e.type))}function $o(e,t){var a=H.p;try{return H.p=e,t()}finally{H.p=a}}var Ta=Math.random().toString(36).slice(2),nt="__reactFiber$"+Ta,ft="__reactProps$"+Ta,vn="__reactContainer$"+Ta,Cs="__reactEvents$"+Ta,d0="__reactListeners$"+Ta,f0="__reactHandles$"+Ta,Fo="__reactResources$"+Ta,ml="__reactMarker$"+Ta;function Es(e){delete e[nt],delete e[ft],delete e[Cs],delete e[d0],delete e[f0]}function Sn(e){var t=e[nt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[vn]||a[nt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=bf(e);e!==null;){if(a=e[nt])return a;e=bf(e)}return t}e=a,a=e.parentNode}return null}function kn(e){if(e=e[nt]||e[vn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function gl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function jn(e){var t=e[Fo];return t||(t=e[Fo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function tt(e){e[ml]=!0}var Wo=new Set,Po={};function tn(e,t){Nn(e,t),Nn(e+"Capture",t)}function Nn(e,t){for(Po[e]=t,e=0;e<t.length;e++)Wo.add(t[e])}var m0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ec={},tc={};function g0(e){return il.call(tc,e)?!0:il.call(ec,e)?!1:m0.test(e)?tc[e]=!0:(ec[e]=!0,!1)}function cr(e,t,a){if(g0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ur(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ta(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ac(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function h0(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(u){a=""+u,s.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(u){a=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function As(e){if(!e._valueTracker){var t=ac(e)?"checked":"value";e._valueTracker=h0(e,t,""+e[t])}}function nc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=ac(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function dr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var y0=/[\n"\\]/g;function zt(e){return e.replace(y0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ms(e,t,a,n,l,s,u,m){e.name="",u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.type=u:e.removeAttribute("type"),t!=null?u==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ot(t)):e.value!==""+Ot(t)&&(e.value=""+Ot(t)):u!=="submit"&&u!=="reset"||e.removeAttribute("value"),t!=null?Rs(e,u,Ot(t)):a!=null?Rs(e,u,Ot(a)):n!=null&&e.removeAttribute("value"),l==null&&s!=null&&(e.defaultChecked=!!s),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Ot(m):e.removeAttribute("name")}function lc(e,t,a,n,l,s,u,m){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||a!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){As(e);return}a=a!=null?""+Ot(a):"",t=t!=null?""+Ot(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=m?e.checked:!!n,e.defaultChecked=!!n,u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.name=u),As(e)}function Rs(e,t,a){t==="number"&&dr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function wn(e,t,a,n){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Ot(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function rc(e,t,a){if(t!=null&&(t=""+Ot(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ot(a):""}function sc(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(c(92));if(de(n)){if(1<n.length)throw Error(c(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Ot(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),As(e)}function Tn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var x0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ic(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||x0.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function oc(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in t)n=t[l],t.hasOwnProperty(l)&&a[l]!==n&&ic(e,l,n)}else for(var s in t)t.hasOwnProperty(s)&&ic(e,s,t[s])}function Os(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),b0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fr(e){return b0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function aa(){}var zs=null;function _s(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cn=null,En=null;function cc(e){var t=kn(e);if(t&&(e=t.stateNode)){var a=e[ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ms(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var l=n[ft]||null;if(!l)throw Error(c(90));Ms(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&nc(n)}break e;case"textarea":rc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&wn(e,!!a.multiple,t,!1)}}}var Us=!1;function uc(e,t,a){if(Us)return e(t,a);Us=!0;try{var n=e(t);return n}finally{if(Us=!1,(Cn!==null||En!==null)&&(Pr(),Cn&&(t=Cn,e=En,En=Cn=null,cc(t),e)))for(t=0;t<e.length;t++)cc(e[t])}}function hl(e,t){var a=e.stateNode;if(a===null)return null;var n=a[ft]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ds=!1;if(na)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{Ds=!1}var Ca=null,Hs=null,mr=null;function dc(){if(mr)return mr;var e,t=Hs,a=t.length,n,l="value"in Ca?Ca.value:Ca.textContent,s=l.length;for(e=0;e<a&&t[e]===l[e];e++);var u=a-e;for(n=1;n<=u&&t[a-n]===l[s-n];n++);return mr=l.slice(e,1<n?1-n:void 0)}function gr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hr(){return!0}function fc(){return!1}function mt(e){function t(a,n,l,s,u){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=s,this.target=u,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(s):s[m]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hr:fc,this.isPropagationStopped=fc,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),t}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yr=mt(an),xl=N({},an,{view:0,detail:0}),v0=mt(xl),Ls,Gs,pl,xr=N({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pl&&(pl&&e.type==="mousemove"?(Ls=e.screenX-pl.screenX,Gs=e.screenY-pl.screenY):Gs=Ls=0,pl=e),Ls)},movementY:function(e){return"movementY"in e?e.movementY:Gs}}),mc=mt(xr),S0=N({},xr,{dataTransfer:0}),k0=mt(S0),j0=N({},xl,{relatedTarget:0}),Bs=mt(j0),N0=N({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),w0=mt(N0),T0=N({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C0=mt(T0),E0=N({},an,{data:0}),gc=mt(E0),A0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=R0[e])?!!t[e]:!1}function Ys(){return O0}var z0=N({},xl,{key:function(e){if(e.key){var t=A0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?M0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(e){return e.type==="keypress"?gr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_0=mt(z0),U0=N({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hc=mt(U0),D0=N({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),H0=mt(D0),L0=N({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),G0=mt(L0),B0=N({},xr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y0=mt(B0),q0=N({},an,{newState:0,oldState:0}),V0=mt(q0),X0=[9,13,27,32],qs=na&&"CompositionEvent"in window,bl=null;na&&"documentMode"in document&&(bl=document.documentMode);var K0=na&&"TextEvent"in window&&!bl,yc=na&&(!qs||bl&&8<bl&&11>=bl),xc=" ",pc=!1;function bc(e,t){switch(e){case"keyup":return X0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var An=!1;function Q0(e,t){switch(e){case"compositionend":return vc(t);case"keypress":return t.which!==32?null:(pc=!0,xc);case"textInput":return e=t.data,e===xc&&pc?null:e;default:return null}}function I0(e,t){if(An)return e==="compositionend"||!qs&&bc(e,t)?(e=dc(),mr=Hs=Ca=null,An=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yc&&t.locale!=="ko"?null:t.data;default:return null}}var Z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z0[e.type]:t==="textarea"}function kc(e,t,a,n){Cn?En?En.push(n):En=[n]:Cn=n,t=ss(t,"onChange"),0<t.length&&(a=new yr("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var vl=null,Sl=null;function J0(e){lf(e,0)}function pr(e){var t=gl(e);if(nc(t))return e}function jc(e,t){if(e==="change")return t}var Nc=!1;if(na){var Vs;if(na){var Xs="oninput"in document;if(!Xs){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),Xs=typeof wc.oninput=="function"}Vs=Xs}else Vs=!1;Nc=Vs&&(!document.documentMode||9<document.documentMode)}function Tc(){vl&&(vl.detachEvent("onpropertychange",Cc),Sl=vl=null)}function Cc(e){if(e.propertyName==="value"&&pr(Sl)){var t=[];kc(t,Sl,e,_s(e)),uc(J0,t)}}function $0(e,t,a){e==="focusin"?(Tc(),vl=t,Sl=a,vl.attachEvent("onpropertychange",Cc)):e==="focusout"&&Tc()}function F0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pr(Sl)}function W0(e,t){if(e==="click")return pr(t)}function P0(e,t){if(e==="input"||e==="change")return pr(t)}function em(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:em;function kl(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!il.call(t,l)||!St(e[l],t[l]))return!1}return!0}function Ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ac(e,t){var a=Ec(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ec(a)}}function Mc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=dr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=dr(e.document)}return t}function Ks(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tm=na&&"documentMode"in document&&11>=document.documentMode,Mn=null,Qs=null,jl=null,Is=!1;function Oc(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Is||Mn==null||Mn!==dr(n)||(n=Mn,"selectionStart"in n&&Ks(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),jl&&kl(jl,n)||(jl=n,n=ss(Qs,"onSelect"),0<n.length&&(t=new yr("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=Mn)))}function nn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Rn={animationend:nn("Animation","AnimationEnd"),animationiteration:nn("Animation","AnimationIteration"),animationstart:nn("Animation","AnimationStart"),transitionrun:nn("Transition","TransitionRun"),transitionstart:nn("Transition","TransitionStart"),transitioncancel:nn("Transition","TransitionCancel"),transitionend:nn("Transition","TransitionEnd")},Zs={},zc={};na&&(zc=document.createElement("div").style,"AnimationEvent"in window||(delete Rn.animationend.animation,delete Rn.animationiteration.animation,delete Rn.animationstart.animation),"TransitionEvent"in window||delete Rn.transitionend.transition);function ln(e){if(Zs[e])return Zs[e];if(!Rn[e])return e;var t=Rn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in zc)return Zs[e]=t[a];return e}var _c=ln("animationend"),Uc=ln("animationiteration"),Dc=ln("animationstart"),am=ln("transitionrun"),nm=ln("transitionstart"),lm=ln("transitioncancel"),Hc=ln("transitionend"),Lc=new Map,Js="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Js.push("scrollEnd");function qt(e,t){Lc.set(e,t),tn(t,[e])}var br=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},_t=[],On=0,$s=0;function vr(){for(var e=On,t=$s=On=0;t<e;){var a=_t[t];_t[t++]=null;var n=_t[t];_t[t++]=null;var l=_t[t];_t[t++]=null;var s=_t[t];if(_t[t++]=null,n!==null&&l!==null){var u=n.pending;u===null?l.next=l:(l.next=u.next,u.next=l),n.pending=l}s!==0&&Gc(a,l,s)}}function Sr(e,t,a,n){_t[On++]=e,_t[On++]=t,_t[On++]=a,_t[On++]=n,$s|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Fs(e,t,a,n){return Sr(e,t,a,n),kr(e)}function rn(e,t){return Sr(e,null,null,t),kr(e)}function Gc(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var l=!1,s=e.return;s!==null;)s.childLanes|=a,n=s.alternate,n!==null&&(n.childLanes|=a),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(l=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,l&&t!==null&&(l=31-vt(a),e=s.hiddenUpdates,n=e[l],n===null?e[l]=[t]:n.push(t),t.lane=a|536870912),s):null}function kr(e){if(50<Kl)throw Kl=0,so=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var zn={};function rm(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,a,n){return new rm(e,t,a,n)}function Ws(e){return e=e.prototype,!(!e||!e.isReactComponent)}function la(e,t){var a=e.alternate;return a===null?(a=kt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Bc(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jr(e,t,a,n,l,s){var u=0;if(n=e,typeof e=="function")Ws(e)&&(u=1);else if(typeof e=="string")u=ug(e,a,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case D:return e=kt(31,a,t,l),e.elementType=D,e.lanes=s,e;case q:return sn(a.children,l,s,t);case K:u=8,l|=24;break;case le:return e=kt(12,a,t,l|2),e.elementType=le,e.lanes=s,e;case Ce:return e=kt(13,a,t,l),e.elementType=Ce,e.lanes=s,e;case be:return e=kt(19,a,t,l),e.elementType=be,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:u=10;break e;case ae:u=9;break e;case $:u=11;break e;case X:u=14;break e;case O:u=16,n=null;break e}u=29,a=Error(c(130,e===null?"null":typeof e,"")),n=null}return t=kt(u,a,t,l),t.elementType=e,t.type=n,t.lanes=s,t}function sn(e,t,a,n){return e=kt(7,e,n,t),e.lanes=a,e}function Ps(e,t,a){return e=kt(6,e,null,t),e.lanes=a,e}function Yc(e){var t=kt(18,null,null,0);return t.stateNode=e,t}function ei(e,t,a){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qc=new WeakMap;function Ut(e,t){if(typeof e=="object"&&e!==null){var a=qc.get(e);return a!==void 0?a:(t={value:e,source:t,stack:sl(t)},qc.set(e,t),t)}return{value:e,source:t,stack:sl(t)}}var _n=[],Un=0,Nr=null,Nl=0,Dt=[],Ht=0,Ea=null,It=1,Zt="";function ra(e,t){_n[Un++]=Nl,_n[Un++]=Nr,Nr=e,Nl=t}function Vc(e,t,a){Dt[Ht++]=It,Dt[Ht++]=Zt,Dt[Ht++]=Ea,Ea=e;var n=It;e=Zt;var l=32-vt(n)-1;n&=~(1<<l),a+=1;var s=32-vt(t)+l;if(30<s){var u=l-l%5;s=(n&(1<<u)-1).toString(32),n>>=u,l-=u,It=1<<32-vt(t)+l|a<<l|n,Zt=s+e}else It=1<<s|a<<l|n,Zt=e}function ti(e){e.return!==null&&(ra(e,1),Vc(e,1,0))}function ai(e){for(;e===Nr;)Nr=_n[--Un],_n[Un]=null,Nl=_n[--Un],_n[Un]=null;for(;e===Ea;)Ea=Dt[--Ht],Dt[Ht]=null,Zt=Dt[--Ht],Dt[Ht]=null,It=Dt[--Ht],Dt[Ht]=null}function Xc(e,t){Dt[Ht++]=It,Dt[Ht++]=Zt,Dt[Ht++]=Ea,It=t.id,Zt=t.overflow,Ea=e}var lt=null,Ye=null,Ee=!1,Aa=null,Lt=!1,ni=Error(c(519));function Ma(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wl(Ut(t,e)),ni}function Kc(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[nt]=e,t[ft]=n,a){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(a=0;a<Il.length;a++)je(Il[a],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),lc(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),sc(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||cf(t.textContent,a)?(n.popover!=null&&(je("beforetoggle",t),je("toggle",t)),n.onScroll!=null&&je("scroll",t),n.onScrollEnd!=null&&je("scrollend",t),n.onClick!=null&&(t.onclick=aa),t=!0):t=!1,t||Ma(e,!0)}function Qc(e){for(lt=e.return;lt;)switch(lt.tag){case 5:case 31:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:lt=lt.return}}function Dn(e){if(e!==lt)return!1;if(!Ee)return Qc(e),Ee=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ko(e.type,e.memoizedProps)),a=!a),a&&Ye&&Ma(e),Qc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ye=pf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ye=pf(e)}else t===27?(t=Ye,Xa(e.type)?(e=Co,Co=null,Ye=e):Ye=t):Ye=lt?Bt(e.stateNode.nextSibling):null;return!0}function on(){Ye=lt=null,Ee=!1}function li(){var e=Aa;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),Aa=null),e}function wl(e){Aa===null?Aa=[e]:Aa.push(e)}var ri=v(null),cn=null,sa=null;function Ra(e,t,a){I(ri,t._currentValue),t._currentValue=a}function ia(e){e._currentValue=ri.current,z(ri)}function si(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function ii(e,t,a,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var s=l.dependencies;if(s!==null){var u=l.child;s=s.firstContext;e:for(;s!==null;){var m=s;s=l;for(var b=0;b<t.length;b++)if(m.context===t[b]){s.lanes|=a,m=s.alternate,m!==null&&(m.lanes|=a),si(s.return,a,e),n||(u=null);break e}s=m.next}}else if(l.tag===18){if(u=l.return,u===null)throw Error(c(341));u.lanes|=a,s=u.alternate,s!==null&&(s.lanes|=a),si(u,a,e),u=null}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===e){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}}function Hn(e,t,a,n){e=null;for(var l=t,s=!1;l!==null;){if(!s){if((l.flags&524288)!==0)s=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var u=l.alternate;if(u===null)throw Error(c(387));if(u=u.memoizedProps,u!==null){var m=l.type;St(l.pendingProps.value,u.value)||(e!==null?e.push(m):e=[m])}}else if(l===Se.current){if(u=l.alternate,u===null)throw Error(c(387));u.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Wl):e=[Wl])}l=l.return}e!==null&&ii(t,e,a,n),t.flags|=262144}function wr(e){for(e=e.firstContext;e!==null;){if(!St(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function un(e){cn=e,sa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return Ic(cn,e)}function Tr(e,t){return cn===null&&un(e),Ic(e,t)}function Ic(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},sa===null){if(e===null)throw Error(c(308));sa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else sa=sa.next=t;return a}var sm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},im=x.unstable_scheduleCallback,om=x.unstable_NormalPriority,$e={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oi(){return{controller:new sm,data:new Map,refCount:0}}function Tl(e){e.refCount--,e.refCount===0&&im(om,function(){e.controller.abort()})}var Cl=null,ci=0,Ln=0,Gn=null;function cm(e,t){if(Cl===null){var a=Cl=[];ci=0,Ln=mo(),Gn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return ci++,t.then(Zc,Zc),t}function Zc(){if(--ci===0&&Cl!==null){Gn!==null&&(Gn.status="fulfilled");var e=Cl;Cl=null,Ln=0,Gn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function um(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var Jc=C.S;C.S=function(e,t){Od=W(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&cm(e,t),Jc!==null&&Jc(e,t)};var dn=v(null);function ui(){var e=dn.current;return e!==null?e:Ge.pooledCache}function Cr(e,t){t===null?I(dn,dn.current):I(dn,t.pool)}function $c(){var e=ui();return e===null?null:{parent:$e._currentValue,pool:e}}var Bn=Error(c(460)),di=Error(c(474)),Er=Error(c(542)),Ar={then:function(){}};function Fc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wc(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(aa,aa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,eu(e),e;default:if(typeof t.status=="string")t.then(aa,aa);else{if(e=Ge,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=n}},function(n){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,eu(e),e}throw mn=t,Bn}}function fn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(mn=a,Bn):a}}var mn=null;function Pc(){if(mn===null)throw Error(c(459));var e=mn;return mn=null,e}function eu(e){if(e===Bn||e===Er)throw Error(c(483))}var Yn=null,El=0;function Mr(e){var t=El;return El+=1,Yn===null&&(Yn=[]),Wc(Yn,e,t)}function Al(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Rr(e,t){throw t.$$typeof===A?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function tu(e){function t(j,k){if(e){var w=j.deletions;w===null?(j.deletions=[k],j.flags|=16):w.push(k)}}function a(j,k){if(!e)return null;for(;k!==null;)t(j,k),k=k.sibling;return null}function n(j){for(var k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function l(j,k){return j=la(j,k),j.index=0,j.sibling=null,j}function s(j,k,w){return j.index=w,e?(w=j.alternate,w!==null?(w=w.index,w<k?(j.flags|=67108866,k):w):(j.flags|=67108866,k)):(j.flags|=1048576,k)}function u(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function m(j,k,w,U){return k===null||k.tag!==6?(k=Ps(w,j.mode,U),k.return=j,k):(k=l(k,w),k.return=j,k)}function b(j,k,w,U){var ce=w.type;return ce===q?_(j,k,w.props.children,U,w.key):k!==null&&(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===O&&fn(ce)===k.type)?(k=l(k,w.props),Al(k,w),k.return=j,k):(k=jr(w.type,w.key,w.props,null,j.mode,U),Al(k,w),k.return=j,k)}function T(j,k,w,U){return k===null||k.tag!==4||k.stateNode.containerInfo!==w.containerInfo||k.stateNode.implementation!==w.implementation?(k=ei(w,j.mode,U),k.return=j,k):(k=l(k,w.children||[]),k.return=j,k)}function _(j,k,w,U,ce){return k===null||k.tag!==7?(k=sn(w,j.mode,U,ce),k.return=j,k):(k=l(k,w),k.return=j,k)}function L(j,k,w){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Ps(""+k,j.mode,w),k.return=j,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case B:return w=jr(k.type,k.key,k.props,null,j.mode,w),Al(w,k),w.return=j,w;case Y:return k=ei(k,j.mode,w),k.return=j,k;case O:return k=fn(k),L(j,k,w)}if(de(k)||re(k))return k=sn(k,j.mode,w,null),k.return=j,k;if(typeof k.then=="function")return L(j,Mr(k),w);if(k.$$typeof===Q)return L(j,Tr(j,k),w);Rr(j,k)}return null}function E(j,k,w,U){var ce=k!==null?k.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return ce!==null?null:m(j,k,""+w,U);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case B:return w.key===ce?b(j,k,w,U):null;case Y:return w.key===ce?T(j,k,w,U):null;case O:return w=fn(w),E(j,k,w,U)}if(de(w)||re(w))return ce!==null?null:_(j,k,w,U,null);if(typeof w.then=="function")return E(j,k,Mr(w),U);if(w.$$typeof===Q)return E(j,k,Tr(j,w),U);Rr(j,w)}return null}function R(j,k,w,U,ce){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return j=j.get(w)||null,m(k,j,""+U,ce);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case B:return j=j.get(U.key===null?w:U.key)||null,b(k,j,U,ce);case Y:return j=j.get(U.key===null?w:U.key)||null,T(k,j,U,ce);case O:return U=fn(U),R(j,k,w,U,ce)}if(de(U)||re(U))return j=j.get(w)||null,_(k,j,U,ce,null);if(typeof U.then=="function")return R(j,k,w,Mr(U),ce);if(U.$$typeof===Q)return R(j,k,w,Tr(k,U),ce);Rr(k,U)}return null}function ee(j,k,w,U){for(var ce=null,Ae=null,te=k,pe=k=0,Te=null;te!==null&&pe<w.length;pe++){te.index>pe?(Te=te,te=null):Te=te.sibling;var Me=E(j,te,w[pe],U);if(Me===null){te===null&&(te=Te);break}e&&te&&Me.alternate===null&&t(j,te),k=s(Me,k,pe),Ae===null?ce=Me:Ae.sibling=Me,Ae=Me,te=Te}if(pe===w.length)return a(j,te),Ee&&ra(j,pe),ce;if(te===null){for(;pe<w.length;pe++)te=L(j,w[pe],U),te!==null&&(k=s(te,k,pe),Ae===null?ce=te:Ae.sibling=te,Ae=te);return Ee&&ra(j,pe),ce}for(te=n(te);pe<w.length;pe++)Te=R(te,j,pe,w[pe],U),Te!==null&&(e&&Te.alternate!==null&&te.delete(Te.key===null?pe:Te.key),k=s(Te,k,pe),Ae===null?ce=Te:Ae.sibling=Te,Ae=Te);return e&&te.forEach(function(Ja){return t(j,Ja)}),Ee&&ra(j,pe),ce}function ue(j,k,w,U){if(w==null)throw Error(c(151));for(var ce=null,Ae=null,te=k,pe=k=0,Te=null,Me=w.next();te!==null&&!Me.done;pe++,Me=w.next()){te.index>pe?(Te=te,te=null):Te=te.sibling;var Ja=E(j,te,Me.value,U);if(Ja===null){te===null&&(te=Te);break}e&&te&&Ja.alternate===null&&t(j,te),k=s(Ja,k,pe),Ae===null?ce=Ja:Ae.sibling=Ja,Ae=Ja,te=Te}if(Me.done)return a(j,te),Ee&&ra(j,pe),ce;if(te===null){for(;!Me.done;pe++,Me=w.next())Me=L(j,Me.value,U),Me!==null&&(k=s(Me,k,pe),Ae===null?ce=Me:Ae.sibling=Me,Ae=Me);return Ee&&ra(j,pe),ce}for(te=n(te);!Me.done;pe++,Me=w.next())Me=R(te,j,pe,Me.value,U),Me!==null&&(e&&Me.alternate!==null&&te.delete(Me.key===null?pe:Me.key),k=s(Me,k,pe),Ae===null?ce=Me:Ae.sibling=Me,Ae=Me);return e&&te.forEach(function(Sg){return t(j,Sg)}),Ee&&ra(j,pe),ce}function Le(j,k,w,U){if(typeof w=="object"&&w!==null&&w.type===q&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case B:e:{for(var ce=w.key;k!==null;){if(k.key===ce){if(ce=w.type,ce===q){if(k.tag===7){a(j,k.sibling),U=l(k,w.props.children),U.return=j,j=U;break e}}else if(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===O&&fn(ce)===k.type){a(j,k.sibling),U=l(k,w.props),Al(U,w),U.return=j,j=U;break e}a(j,k);break}else t(j,k);k=k.sibling}w.type===q?(U=sn(w.props.children,j.mode,U,w.key),U.return=j,j=U):(U=jr(w.type,w.key,w.props,null,j.mode,U),Al(U,w),U.return=j,j=U)}return u(j);case Y:e:{for(ce=w.key;k!==null;){if(k.key===ce)if(k.tag===4&&k.stateNode.containerInfo===w.containerInfo&&k.stateNode.implementation===w.implementation){a(j,k.sibling),U=l(k,w.children||[]),U.return=j,j=U;break e}else{a(j,k);break}else t(j,k);k=k.sibling}U=ei(w,j.mode,U),U.return=j,j=U}return u(j);case O:return w=fn(w),Le(j,k,w,U)}if(de(w))return ee(j,k,w,U);if(re(w)){if(ce=re(w),typeof ce!="function")throw Error(c(150));return w=ce.call(w),ue(j,k,w,U)}if(typeof w.then=="function")return Le(j,k,Mr(w),U);if(w.$$typeof===Q)return Le(j,k,Tr(j,w),U);Rr(j,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,k!==null&&k.tag===6?(a(j,k.sibling),U=l(k,w),U.return=j,j=U):(a(j,k),U=Ps(w,j.mode,U),U.return=j,j=U),u(j)):a(j,k)}return function(j,k,w,U){try{El=0;var ce=Le(j,k,w,U);return Yn=null,ce}catch(te){if(te===Bn||te===Er)throw te;var Ae=kt(29,te,null,j.mode);return Ae.lanes=U,Ae.return=j,Ae}finally{}}}var gn=tu(!0),au=tu(!1),Oa=!1;function fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function za(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Re&2)!==0){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,t=kr(e),Gc(e,null,a),t}return Sr(e,n,t,a),kr(e)}function Ml(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Io(e,a)}}function gi(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,s=null;if(a=a.firstBaseUpdate,a!==null){do{var u={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};s===null?l=s=u:s=s.next=u,a=a.next}while(a!==null);s===null?l=s=t:s=s.next=t}else l=s=t;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var hi=!1;function Rl(){if(hi){var e=Gn;if(e!==null)throw e}}function Ol(e,t,a,n){hi=!1;var l=e.updateQueue;Oa=!1;var s=l.firstBaseUpdate,u=l.lastBaseUpdate,m=l.shared.pending;if(m!==null){l.shared.pending=null;var b=m,T=b.next;b.next=null,u===null?s=T:u.next=T,u=b;var _=e.alternate;_!==null&&(_=_.updateQueue,m=_.lastBaseUpdate,m!==u&&(m===null?_.firstBaseUpdate=T:m.next=T,_.lastBaseUpdate=b))}if(s!==null){var L=l.baseState;u=0,_=T=b=null,m=s;do{var E=m.lane&-536870913,R=E!==m.lane;if(R?(we&E)===E:(n&E)===E){E!==0&&E===Ln&&(hi=!0),_!==null&&(_=_.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var ee=e,ue=m;E=t;var Le=a;switch(ue.tag){case 1:if(ee=ue.payload,typeof ee=="function"){L=ee.call(Le,L,E);break e}L=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=ue.payload,E=typeof ee=="function"?ee.call(Le,L,E):ee,E==null)break e;L=N({},L,E);break e;case 2:Oa=!0}}E=m.callback,E!==null&&(e.flags|=64,R&&(e.flags|=8192),R=l.callbacks,R===null?l.callbacks=[E]:R.push(E))}else R={lane:E,tag:m.tag,payload:m.payload,callback:m.callback,next:null},_===null?(T=_=R,b=L):_=_.next=R,u|=E;if(m=m.next,m===null){if(m=l.shared.pending,m===null)break;R=m,m=R.next,R.next=null,l.lastBaseUpdate=R,l.shared.pending=null}}while(!0);_===null&&(b=L),l.baseState=b,l.firstBaseUpdate=T,l.lastBaseUpdate=_,s===null&&(l.shared.lanes=0),Ga|=u,e.lanes=u,e.memoizedState=L}}function nu(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function lu(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)nu(a[e],t)}var qn=v(null),Or=v(0);function ru(e,t){e=ya,I(Or,e),I(qn,t),ya=e|t.baseLanes}function yi(){I(Or,ya),I(qn,qn.current)}function xi(){ya=Or.current,z(qn),z(Or)}var jt=v(null),Gt=null;function Ua(e){var t=e.alternate;I(Ze,Ze.current&1),I(jt,e),Gt===null&&(t===null||qn.current!==null||t.memoizedState!==null)&&(Gt=e)}function pi(e){I(Ze,Ze.current),I(jt,e),Gt===null&&(Gt=e)}function su(e){e.tag===22?(I(Ze,Ze.current),I(jt,e),Gt===null&&(Gt=e)):Da()}function Da(){I(Ze,Ze.current),I(jt,jt.current)}function Nt(e){z(jt),Gt===e&&(Gt=null),z(Ze)}var Ze=v(0);function zr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||wo(a)||To(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oa=0,xe=null,De=null,Fe=null,_r=!1,Vn=!1,hn=!1,Ur=0,zl=0,Xn=null,dm=0;function Qe(){throw Error(c(321))}function bi(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!St(e[a],t[a]))return!1;return!0}function vi(e,t,a,n,l,s){return oa=s,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?Vu:Ui,hn=!1,s=a(n,l),hn=!1,Vn&&(s=ou(t,a,n,l)),iu(e),s}function iu(e){C.H=Dl;var t=De!==null&&De.next!==null;if(oa=0,Fe=De=xe=null,_r=!1,zl=0,Xn=null,t)throw Error(c(300));e===null||We||(e=e.dependencies,e!==null&&wr(e)&&(We=!0))}function ou(e,t,a,n){xe=e;var l=0;do{if(Vn&&(Xn=null),zl=0,Vn=!1,25<=l)throw Error(c(301));if(l+=1,Fe=De=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}C.H=Xu,s=t(a,n)}while(Vn);return s}function fm(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?_l(t):t,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(xe.flags|=1024),t}function Si(){var e=Ur!==0;return Ur=0,e}function ki(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ji(e){if(_r){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}_r=!1}oa=0,Fe=De=xe=null,Vn=!1,zl=Ur=0,Xn=null}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?xe.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Je(){if(De===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=Fe===null?xe.memoizedState:Fe.next;if(t!==null)Fe=t,De=e;else{if(e===null)throw xe.alternate===null?Error(c(467)):Error(c(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Fe===null?xe.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Dr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(e){var t=zl;return zl+=1,Xn===null&&(Xn=[]),e=Wc(Xn,e,t),t=xe,(Fe===null?t.memoizedState:Fe.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?Vu:Ui),e}function Hr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _l(e);if(e.$$typeof===Q)return rt(e)}throw Error(c(438,String(e)))}function Ni(e){var t=null,a=xe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=xe.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Dr(),xe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=G;return t.index++,a}function ca(e,t){return typeof t=="function"?t(e):t}function Lr(e){var t=Je();return wi(t,De,e)}function wi(e,t,a){var n=e.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=a;var l=e.baseQueue,s=n.pending;if(s!==null){if(l!==null){var u=l.next;l.next=s.next,s.next=u}t.baseQueue=l=s,n.pending=null}if(s=e.baseState,l===null)e.memoizedState=s;else{t=l.next;var m=u=null,b=null,T=t,_=!1;do{var L=T.lane&-536870913;if(L!==T.lane?(we&L)===L:(oa&L)===L){var E=T.revertLane;if(E===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),L===Ln&&(_=!0);else if((oa&E)===E){T=T.next,E===Ln&&(_=!0);continue}else L={lane:0,revertLane:T.revertLane,gesture:null,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},b===null?(m=b=L,u=s):b=b.next=L,xe.lanes|=E,Ga|=E;L=T.action,hn&&a(s,L),s=T.hasEagerState?T.eagerState:a(s,L)}else E={lane:L,revertLane:T.revertLane,gesture:T.gesture,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null},b===null?(m=b=E,u=s):b=b.next=E,xe.lanes|=L,Ga|=L;T=T.next}while(T!==null&&T!==t);if(b===null?u=s:b.next=m,!St(s,e.memoizedState)&&(We=!0,_&&(a=Gn,a!==null)))throw a;e.memoizedState=s,e.baseState=u,e.baseQueue=b,n.lastRenderedState=s}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Ti(e){var t=Je(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var n=a.dispatch,l=a.pending,s=t.memoizedState;if(l!==null){a.pending=null;var u=l=l.next;do s=e(s,u.action),u=u.next;while(u!==l);St(s,t.memoizedState)||(We=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),a.lastRenderedState=s}return[s,n]}function cu(e,t,a){var n=xe,l=Je(),s=Ee;if(s){if(a===void 0)throw Error(c(407));a=a()}else a=t();var u=!St((De||l).memoizedState,a);if(u&&(l.memoizedState=a,We=!0),l=l.queue,Ai(fu.bind(null,n,l,e),[e]),l.getSnapshot!==t||u||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Kn(9,{destroy:void 0},du.bind(null,n,l,a,t),null),Ge===null)throw Error(c(349));s||(oa&127)!==0||uu(n,t,a)}return a}function uu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=xe.updateQueue,t===null?(t=Dr(),xe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function du(e,t,a,n){t.value=a,t.getSnapshot=n,mu(t)&&gu(e)}function fu(e,t,a){return a(function(){mu(t)&&gu(e)})}function mu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!St(e,a)}catch{return!0}}function gu(e){var t=rn(e,2);t!==null&&pt(t,e,2)}function Ci(e){var t=dt();if(typeof e=="function"){var a=e;if(e=a(),hn){wa(!0);try{a()}finally{wa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},t}function hu(e,t,a,n){return e.baseState=a,wi(e,De,typeof n=="function"?n:ca)}function mm(e,t,a,n,l){if(Yr(e))throw Error(c(485));if(e=t.action,e!==null){var s={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(u){s.listeners.push(u)}};C.T!==null?a(!0):s.isTransition=!1,n(s),a=t.pending,a===null?(s.next=t.pending=s,yu(t,s)):(s.next=a.next,t.pending=a.next=s)}}function yu(e,t){var a=t.action,n=t.payload,l=e.state;if(t.isTransition){var s=C.T,u={};C.T=u;try{var m=a(l,n),b=C.S;b!==null&&b(u,m),xu(e,t,m)}catch(T){Ei(e,t,T)}finally{s!==null&&u.types!==null&&(s.types=u.types),C.T=s}}else try{s=a(l,n),xu(e,t,s)}catch(T){Ei(e,t,T)}}function xu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){pu(e,t,n)},function(n){return Ei(e,t,n)}):pu(e,t,a)}function pu(e,t,a){t.status="fulfilled",t.value=a,bu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,yu(e,a)))}function Ei(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,bu(t),t=t.next;while(t!==n)}e.action=null}function bu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vu(e,t){return t}function Su(e,t){if(Ee){var a=Ge.formState;if(a!==null){e:{var n=xe;if(Ee){if(Ye){t:{for(var l=Ye,s=Lt;l.nodeType!==8;){if(!s){l=null;break t}if(l=Bt(l.nextSibling),l===null){l=null;break t}}s=l.data,l=s==="F!"||s==="F"?l:null}if(l){Ye=Bt(l.nextSibling),n=l.data==="F!";break e}}Ma(n)}n=!1}n&&(t=a[0])}}return a=dt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:t},a.queue=n,a=Bu.bind(null,xe,n),n.dispatch=a,n=Ci(!1),s=_i.bind(null,xe,!1,n.queue),n=dt(),l={state:t,dispatch:null,action:e,pending:null},n.queue=l,a=mm.bind(null,xe,l,s,a),l.dispatch=a,n.memoizedState=e,[t,a,!1]}function ku(e){var t=Je();return ju(t,De,e)}function ju(e,t,a){if(t=wi(e,t,vu)[0],e=Lr(ca)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=_l(t)}catch(u){throw u===Bn?Er:u}else n=t;t=Je();var l=t.queue,s=l.dispatch;return a!==t.memoizedState&&(xe.flags|=2048,Kn(9,{destroy:void 0},gm.bind(null,l,a),null)),[n,s,e]}function gm(e,t){e.action=t}function Nu(e){var t=Je(),a=De;if(a!==null)return ju(t,a,e);Je(),t=t.memoizedState,a=Je();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Kn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=xe.updateQueue,t===null&&(t=Dr(),xe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function wu(){return Je().memoizedState}function Gr(e,t,a,n){var l=dt();xe.flags|=e,l.memoizedState=Kn(1|t,{destroy:void 0},a,n===void 0?null:n)}function Br(e,t,a,n){var l=Je();n=n===void 0?null:n;var s=l.memoizedState.inst;De!==null&&n!==null&&bi(n,De.memoizedState.deps)?l.memoizedState=Kn(t,s,a,n):(xe.flags|=e,l.memoizedState=Kn(1|t,s,a,n))}function Tu(e,t){Gr(8390656,8,e,t)}function Ai(e,t){Br(2048,8,e,t)}function hm(e){xe.flags|=4;var t=xe.updateQueue;if(t===null)t=Dr(),xe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Cu(e){var t=Je().memoizedState;return hm({ref:t,nextImpl:e}),function(){if((Re&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Eu(e,t){return Br(4,2,e,t)}function Au(e,t){return Br(4,4,e,t)}function Mu(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ru(e,t,a){a=a!=null?a.concat([e]):null,Br(4,4,Mu.bind(null,t,e),a)}function Mi(){}function Ou(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&bi(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function zu(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&bi(t,n[1]))return n[0];if(n=e(),hn){wa(!0);try{e()}finally{wa(!1)}}return a.memoizedState=[n,t],n}function Ri(e,t,a){return a===void 0||(oa&1073741824)!==0&&(we&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=_d(),xe.lanes|=e,Ga|=e,a)}function _u(e,t,a,n){return St(a,t)?a:qn.current!==null?(e=Ri(e,a,n),St(e,t)||(We=!0),e):(oa&42)===0||(oa&1073741824)!==0&&(we&261930)===0?(We=!0,e.memoizedState=a):(e=_d(),xe.lanes|=e,Ga|=e,t)}function Uu(e,t,a,n,l){var s=H.p;H.p=s!==0&&8>s?s:8;var u=C.T,m={};C.T=m,_i(e,!1,t,a);try{var b=l(),T=C.S;if(T!==null&&T(m,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var _=um(b,n);Ul(e,t,_,Ct(e))}else Ul(e,t,n,Ct(e))}catch(L){Ul(e,t,{then:function(){},status:"rejected",reason:L},Ct())}finally{H.p=s,u!==null&&m.types!==null&&(u.types=m.types),C.T=u}}function ym(){}function Oi(e,t,a,n){if(e.tag!==5)throw Error(c(476));var l=Du(e).queue;Uu(e,l,t,V,a===null?ym:function(){return Hu(e),a(n)})}function Du(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:V},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Hu(e){var t=Du(e);t.next===null&&(t=e.alternate.memoizedState),Ul(e,t.next.queue,{},Ct())}function zi(){return rt(Wl)}function Lu(){return Je().memoizedState}function Gu(){return Je().memoizedState}function xm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ct();e=za(a);var n=_a(t,e,a);n!==null&&(pt(n,t,a),Ml(n,t,a)),t={cache:oi()},e.payload=t;return}t=t.return}}function pm(e,t,a){var n=Ct();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Yr(e)?Yu(t,a):(a=Fs(e,t,a,n),a!==null&&(pt(a,e,n),qu(a,t,n)))}function Bu(e,t,a){var n=Ct();Ul(e,t,a,n)}function Ul(e,t,a,n){var l={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yr(e))Yu(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var u=t.lastRenderedState,m=s(u,a);if(l.hasEagerState=!0,l.eagerState=m,St(m,u))return Sr(e,t,l,0),Ge===null&&vr(),!1}catch{}finally{}if(a=Fs(e,t,l,n),a!==null)return pt(a,e,n),qu(a,t,n),!0}return!1}function _i(e,t,a,n){if(n={lane:2,revertLane:mo(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Yr(e)){if(t)throw Error(c(479))}else t=Fs(e,a,n,2),t!==null&&pt(t,e,2)}function Yr(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Yu(e,t){Vn=_r=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function qu(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Io(e,a)}}var Dl={readContext:rt,use:Hr,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};Dl.useEffectEvent=Qe;var Vu={readContext:rt,use:Hr,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:Tu,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Gr(4194308,4,Mu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Gr(4194308,4,e,t)},useInsertionEffect:function(e,t){Gr(4,2,e,t)},useMemo:function(e,t){var a=dt();t=t===void 0?null:t;var n=e();if(hn){wa(!0);try{e()}finally{wa(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=dt();if(a!==void 0){var l=a(t);if(hn){wa(!0);try{a(t)}finally{wa(!1)}}}else l=t;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=pm.bind(null,xe,e),[n.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ci(e);var t=e.queue,a=Bu.bind(null,xe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Mi,useDeferredValue:function(e,t){var a=dt();return Ri(a,e,t)},useTransition:function(){var e=Ci(!1);return e=Uu.bind(null,xe,e.queue,!0,!1),dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=xe,l=dt();if(Ee){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),Ge===null)throw Error(c(349));(we&127)!==0||uu(n,t,a)}l.memoizedState=a;var s={value:a,getSnapshot:t};return l.queue=s,Tu(fu.bind(null,n,s,e),[e]),n.flags|=2048,Kn(9,{destroy:void 0},du.bind(null,n,s,a,t),null),a},useId:function(){var e=dt(),t=Ge.identifierPrefix;if(Ee){var a=Zt,n=It;a=(n&~(1<<32-vt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ur++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=dm++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:zi,useFormState:Su,useActionState:Su,useOptimistic:function(e){var t=dt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=_i.bind(null,xe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ni,useCacheRefresh:function(){return dt().memoizedState=xm.bind(null,xe)},useEffectEvent:function(e){var t=dt(),a={impl:e};return t.memoizedState=a,function(){if((Re&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},Ui={readContext:rt,use:Hr,useCallback:Ou,useContext:rt,useEffect:Ai,useImperativeHandle:Ru,useInsertionEffect:Eu,useLayoutEffect:Au,useMemo:zu,useReducer:Lr,useRef:wu,useState:function(){return Lr(ca)},useDebugValue:Mi,useDeferredValue:function(e,t){var a=Je();return _u(a,De.memoizedState,e,t)},useTransition:function(){var e=Lr(ca)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:_l(e),t]},useSyncExternalStore:cu,useId:Lu,useHostTransitionStatus:zi,useFormState:ku,useActionState:ku,useOptimistic:function(e,t){var a=Je();return hu(a,De,e,t)},useMemoCache:Ni,useCacheRefresh:Gu};Ui.useEffectEvent=Cu;var Xu={readContext:rt,use:Hr,useCallback:Ou,useContext:rt,useEffect:Ai,useImperativeHandle:Ru,useInsertionEffect:Eu,useLayoutEffect:Au,useMemo:zu,useReducer:Ti,useRef:wu,useState:function(){return Ti(ca)},useDebugValue:Mi,useDeferredValue:function(e,t){var a=Je();return De===null?Ri(a,e,t):_u(a,De.memoizedState,e,t)},useTransition:function(){var e=Ti(ca)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:_l(e),t]},useSyncExternalStore:cu,useId:Lu,useHostTransitionStatus:zi,useFormState:Nu,useActionState:Nu,useOptimistic:function(e,t){var a=Je();return De!==null?hu(a,De,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ni,useCacheRefresh:Gu};Xu.useEffectEvent=Cu;function Di(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:N({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Hi={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Ct(),l=za(n);l.payload=t,a!=null&&(l.callback=a),t=_a(e,l,n),t!==null&&(pt(t,e,n),Ml(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Ct(),l=za(n);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=_a(e,l,n),t!==null&&(pt(t,e,n),Ml(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ct(),n=za(a);n.tag=2,t!=null&&(n.callback=t),t=_a(e,n,a),t!==null&&(pt(t,e,a),Ml(t,e,a))}};function Ku(e,t,a,n,l,s,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,u):t.prototype&&t.prototype.isPureReactComponent?!kl(a,n)||!kl(l,s):!0}function Qu(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Hi.enqueueReplaceState(t,t.state,null)}function yn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=N({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function Iu(e){br(e)}function Zu(e){console.error(e)}function Ju(e){br(e)}function qr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function $u(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Li(e,t,a){return a=za(a),a.tag=3,a.payload={element:null},a.callback=function(){qr(e,t)},a}function Fu(e){return e=za(e),e.tag=3,e}function Wu(e,t,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var s=n.value;e.payload=function(){return l(s)},e.callback=function(){$u(t,a,n)}}var u=a.stateNode;u!==null&&typeof u.componentDidCatch=="function"&&(e.callback=function(){$u(t,a,n),typeof l!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})})}function bm(e,t,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Hn(t,a,l,!0),a=jt.current,a!==null){switch(a.tag){case 31:case 13:return Gt===null?es():a.alternate===null&&Ie===0&&(Ie=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===Ar?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),co(e,n,l)),!1;case 22:return a.flags|=65536,n===Ar?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),co(e,n,l)),!1}throw Error(c(435,a.tag))}return co(e,n,l),es(),!1}if(Ee)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,n!==ni&&(e=Error(c(422),{cause:n}),wl(Ut(e,a)))):(n!==ni&&(t=Error(c(423),{cause:n}),wl(Ut(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=Ut(n,a),l=Li(e.stateNode,n,l),gi(e,l),Ie!==4&&(Ie=2)),!1;var s=Error(c(520),{cause:n});if(s=Ut(s,a),Xl===null?Xl=[s]:Xl.push(s),Ie!==4&&(Ie=2),t===null)return!0;n=Ut(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Li(a.stateNode,n,e),gi(a,e),!1;case 1:if(t=a.type,s=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ba===null||!Ba.has(s))))return a.flags|=65536,l&=-l,a.lanes|=l,l=Fu(l),Wu(l,e,a,n),gi(a,l),!1}a=a.return}while(a!==null);return!1}var Gi=Error(c(461)),We=!1;function st(e,t,a,n){t.child=e===null?au(t,null,a,n):gn(t,e.child,a,n)}function Pu(e,t,a,n,l){a=a.render;var s=t.ref;if("ref"in n){var u={};for(var m in n)m!=="ref"&&(u[m]=n[m])}else u=n;return un(t),n=vi(e,t,a,u,s,l),m=Si(),e!==null&&!We?(ki(e,t,l),ua(e,t,l)):(Ee&&m&&ti(t),t.flags|=1,st(e,t,n,l),t.child)}function ed(e,t,a,n,l){if(e===null){var s=a.type;return typeof s=="function"&&!Ws(s)&&s.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=s,td(e,t,s,n,l)):(e=jr(a.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Ii(e,l)){var u=s.memoizedProps;if(a=a.compare,a=a!==null?a:kl,a(u,n)&&e.ref===t.ref)return ua(e,t,l)}return t.flags|=1,e=la(s,n),e.ref=t.ref,e.return=t,t.child=e}function td(e,t,a,n,l){if(e!==null){var s=e.memoizedProps;if(kl(s,n)&&e.ref===t.ref)if(We=!1,t.pendingProps=n=s,Ii(e,l))(e.flags&131072)!==0&&(We=!0);else return t.lanes=e.lanes,ua(e,t,l)}return Bi(e,t,a,n,l)}function ad(e,t,a,n){var l=n.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|a:a,e!==null){for(n=t.child=e.child,l=0;n!==null;)l=l|n.lanes|n.childLanes,n=n.sibling;n=l&~s}else n=0,t.child=null;return nd(e,t,s,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Cr(t,s!==null?s.cachePool:null),s!==null?ru(t,s):yi(),su(t);else return n=t.lanes=536870912,nd(e,t,s!==null?s.baseLanes|a:a,a,n)}else s!==null?(Cr(t,s.cachePool),ru(t,s),Da(),t.memoizedState=null):(e!==null&&Cr(t,null),yi(),Da());return st(e,t,l,a),t.child}function Hl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function nd(e,t,a,n,l){var s=ui();return s=s===null?null:{parent:$e._currentValue,pool:s},t.memoizedState={baseLanes:a,cachePool:s},e!==null&&Cr(t,null),yi(),su(t),e!==null&&Hn(e,t,n,!0),t.childLanes=l,null}function Vr(e,t){return t=Kr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ld(e,t,a){return gn(t,e.child,null,a),e=Vr(t,t.pendingProps),e.flags|=2,Nt(t),t.memoizedState=null,e}function vm(e,t,a){var n=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(n.mode==="hidden")return e=Vr(t,n),t.lanes=536870912,Hl(null,e);if(pi(t),(e=Ye)?(e=xf(e,Lt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ea!==null?{id:It,overflow:Zt}:null,retryLane:536870912,hydrationErrors:null},a=Yc(e),a.return=t,t.child=a,lt=t,Ye=null)):e=null,e===null)throw Ma(t);return t.lanes=536870912,null}return Vr(t,n)}var s=e.memoizedState;if(s!==null){var u=s.dehydrated;if(pi(t),l)if(t.flags&256)t.flags&=-257,t=ld(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(We||Hn(e,t,a,!1),l=(a&e.childLanes)!==0,We||l){if(n=Ge,n!==null&&(u=Zo(n,a),u!==0&&u!==s.retryLane))throw s.retryLane=u,rn(e,u),pt(n,e,u),Gi;es(),t=ld(e,t,a)}else e=s.treeContext,Ye=Bt(u.nextSibling),lt=t,Ee=!0,Aa=null,Lt=!1,e!==null&&Xc(t,e),t=Vr(t,n),t.flags|=4096;return t}return e=la(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Xr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Bi(e,t,a,n,l){return un(t),a=vi(e,t,a,n,void 0,l),n=Si(),e!==null&&!We?(ki(e,t,l),ua(e,t,l)):(Ee&&n&&ti(t),t.flags|=1,st(e,t,a,l),t.child)}function rd(e,t,a,n,l,s){return un(t),t.updateQueue=null,a=ou(t,n,a,l),iu(e),n=Si(),e!==null&&!We?(ki(e,t,s),ua(e,t,s)):(Ee&&n&&ti(t),t.flags|=1,st(e,t,a,s),t.child)}function sd(e,t,a,n,l){if(un(t),t.stateNode===null){var s=zn,u=a.contextType;typeof u=="object"&&u!==null&&(s=rt(u)),s=new a(n,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Hi,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=n,s.state=t.memoizedState,s.refs={},fi(t),u=a.contextType,s.context=typeof u=="object"&&u!==null?rt(u):zn,s.state=t.memoizedState,u=a.getDerivedStateFromProps,typeof u=="function"&&(Di(t,a,u,n),s.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(u=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),u!==s.state&&Hi.enqueueReplaceState(s,s.state,null),Ol(t,n,s,l),Rl(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){s=t.stateNode;var m=t.memoizedProps,b=yn(a,m);s.props=b;var T=s.context,_=a.contextType;u=zn,typeof _=="object"&&_!==null&&(u=rt(_));var L=a.getDerivedStateFromProps;_=typeof L=="function"||typeof s.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,_||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m||T!==u)&&Qu(t,s,n,u),Oa=!1;var E=t.memoizedState;s.state=E,Ol(t,n,s,l),Rl(),T=t.memoizedState,m||E!==T||Oa?(typeof L=="function"&&(Di(t,a,L,n),T=t.memoizedState),(b=Oa||Ku(t,a,b,n,E,T,u))?(_||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=T),s.props=n,s.state=T,s.context=u,n=b):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,mi(e,t),u=t.memoizedProps,_=yn(a,u),s.props=_,L=t.pendingProps,E=s.context,T=a.contextType,b=zn,typeof T=="object"&&T!==null&&(b=rt(T)),m=a.getDerivedStateFromProps,(T=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==L||E!==b)&&Qu(t,s,n,b),Oa=!1,E=t.memoizedState,s.state=E,Ol(t,n,s,l),Rl();var R=t.memoizedState;u!==L||E!==R||Oa||e!==null&&e.dependencies!==null&&wr(e.dependencies)?(typeof m=="function"&&(Di(t,a,m,n),R=t.memoizedState),(_=Oa||Ku(t,a,_,n,E,R,b)||e!==null&&e.dependencies!==null&&wr(e.dependencies))?(T||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,R,b),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,R,b)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=R),s.props=n,s.state=R,s.context=b,n=_):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),n=!1)}return s=n,Xr(e,t),n=(t.flags&128)!==0,s||n?(s=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&n?(t.child=gn(t,e.child,null,l),t.child=gn(t,null,a,l)):st(e,t,a,l),t.memoizedState=s.state,e=t.child):e=ua(e,t,l),e}function id(e,t,a,n){return on(),t.flags|=256,st(e,t,a,n),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qi(e){return{baseLanes:e,cachePool:$c()}}function Vi(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Tt),e}function od(e,t,a){var n=t.pendingProps,l=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(Ze.current&2)!==0),u&&(l=!0,t.flags&=-129),u=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(l?Ua(t):Da(),(e=Ye)?(e=xf(e,Lt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ea!==null?{id:It,overflow:Zt}:null,retryLane:536870912,hydrationErrors:null},a=Yc(e),a.return=t,t.child=a,lt=t,Ye=null)):e=null,e===null)throw Ma(t);return To(e)?t.lanes=32:t.lanes=536870912,null}var m=n.children;return n=n.fallback,l?(Da(),l=t.mode,m=Kr({mode:"hidden",children:m},l),n=sn(n,l,a,null),m.return=t,n.return=t,m.sibling=n,t.child=m,n=t.child,n.memoizedState=qi(a),n.childLanes=Vi(e,u,a),t.memoizedState=Yi,Hl(null,n)):(Ua(t),Xi(t,m))}var b=e.memoizedState;if(b!==null&&(m=b.dehydrated,m!==null)){if(s)t.flags&256?(Ua(t),t.flags&=-257,t=Ki(e,t,a)):t.memoizedState!==null?(Da(),t.child=e.child,t.flags|=128,t=null):(Da(),m=n.fallback,l=t.mode,n=Kr({mode:"visible",children:n.children},l),m=sn(m,l,a,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,gn(t,e.child,null,a),n=t.child,n.memoizedState=qi(a),n.childLanes=Vi(e,u,a),t.memoizedState=Yi,t=Hl(null,n));else if(Ua(t),To(m)){if(u=m.nextSibling&&m.nextSibling.dataset,u)var T=u.dgst;u=T,n=Error(c(419)),n.stack="",n.digest=u,wl({value:n,source:null,stack:null}),t=Ki(e,t,a)}else if(We||Hn(e,t,a,!1),u=(a&e.childLanes)!==0,We||u){if(u=Ge,u!==null&&(n=Zo(u,a),n!==0&&n!==b.retryLane))throw b.retryLane=n,rn(e,n),pt(u,e,n),Gi;wo(m)||es(),t=Ki(e,t,a)}else wo(m)?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,Ye=Bt(m.nextSibling),lt=t,Ee=!0,Aa=null,Lt=!1,e!==null&&Xc(t,e),t=Xi(t,n.children),t.flags|=4096);return t}return l?(Da(),m=n.fallback,l=t.mode,b=e.child,T=b.sibling,n=la(b,{mode:"hidden",children:n.children}),n.subtreeFlags=b.subtreeFlags&65011712,T!==null?m=la(T,m):(m=sn(m,l,a,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,Hl(null,n),n=t.child,m=e.child.memoizedState,m===null?m=qi(a):(l=m.cachePool,l!==null?(b=$e._currentValue,l=l.parent!==b?{parent:b,pool:b}:l):l=$c(),m={baseLanes:m.baseLanes|a,cachePool:l}),n.memoizedState=m,n.childLanes=Vi(e,u,a),t.memoizedState=Yi,Hl(e.child,n)):(Ua(t),a=e.child,e=a.sibling,a=la(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(u=t.deletions,u===null?(t.deletions=[e],t.flags|=16):u.push(e)),t.child=a,t.memoizedState=null,a)}function Xi(e,t){return t=Kr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Kr(e,t){return e=kt(22,e,null,t),e.lanes=0,e}function Ki(e,t,a){return gn(t,e.child,null,a),e=Xi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cd(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),si(e.return,t,a)}function Qi(e,t,a,n,l,s){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l,treeForkCount:s}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=n,u.tail=a,u.tailMode=l,u.treeForkCount=s)}function ud(e,t,a){var n=t.pendingProps,l=n.revealOrder,s=n.tail;n=n.children;var u=Ze.current,m=(u&2)!==0;if(m?(u=u&1|2,t.flags|=128):u&=1,I(Ze,u),st(e,t,n,a),n=Ee?Nl:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cd(e,a,t);else if(e.tag===19)cd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&zr(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Qi(t,!1,l,a,s,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&zr(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Qi(t,!0,a,null,s,n);break;case"together":Qi(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ua(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ga|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Hn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=la(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=la(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Ii(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&wr(e)))}function Sm(e,t,a){switch(t.tag){case 3:Ue(t,t.stateNode.containerInfo),Ra(t,$e,e.memoizedState.cache),on();break;case 27:case 5:Mt(t);break;case 4:Ue(t,t.stateNode.containerInfo);break;case 10:Ra(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,pi(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ua(t),t.flags|=128,null):(a&t.child.childLanes)!==0?od(e,t,a):(Ua(t),e=ua(e,t,a),e!==null?e.sibling:null);Ua(t);break;case 19:var l=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Hn(e,t,a,!1),n=(a&t.childLanes)!==0),l){if(n)return ud(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),I(Ze,Ze.current),n)break;return null;case 22:return t.lanes=0,ad(e,t,a,t.pendingProps);case 24:Ra(t,$e,e.memoizedState.cache)}return ua(e,t,a)}function dd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)We=!0;else{if(!Ii(e,a)&&(t.flags&128)===0)return We=!1,Sm(e,t,a);We=(e.flags&131072)!==0}else We=!1,Ee&&(t.flags&1048576)!==0&&Vc(t,Nl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=fn(t.elementType),t.type=e,typeof e=="function")Ws(e)?(n=yn(e,n),t.tag=1,t=sd(null,t,e,n,a)):(t.tag=0,t=Bi(null,t,e,n,a));else{if(e!=null){var l=e.$$typeof;if(l===$){t.tag=11,t=Pu(null,t,e,n,a);break e}else if(l===X){t.tag=14,t=ed(null,t,e,n,a);break e}}throw t=Z(e)||e,Error(c(306,t,""))}}return t;case 0:return Bi(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,l=yn(n,t.pendingProps),sd(e,t,n,l,a);case 3:e:{if(Ue(t,t.stateNode.containerInfo),e===null)throw Error(c(387));n=t.pendingProps;var s=t.memoizedState;l=s.element,mi(e,t),Ol(t,n,null,a);var u=t.memoizedState;if(n=u.cache,Ra(t,$e,n),n!==s.cache&&ii(t,[$e],a,!0),Rl(),n=u.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:u.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=id(e,t,n,a);break e}else if(n!==l){l=Ut(Error(c(424)),t),wl(l),t=id(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ye=Bt(e.firstChild),lt=t,Ee=!0,Aa=null,Lt=!0,a=au(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(on(),n===l){t=ua(e,t,a);break e}st(e,t,n,a)}t=t.child}return t;case 26:return Xr(e,t),e===null?(a=jf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ee||(a=t.type,e=t.pendingProps,n=is(ye.current).createElement(a),n[nt]=t,n[ft]=e,it(n,a,e),tt(n),t.stateNode=n):t.memoizedState=jf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Mt(t),e===null&&Ee&&(n=t.stateNode=vf(t.type,t.pendingProps,ye.current),lt=t,Lt=!0,l=Ye,Xa(t.type)?(Co=l,Ye=Bt(n.firstChild)):Ye=l),st(e,t,t.pendingProps.children,a),Xr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((l=n=Ye)&&(n=Fm(n,t.type,t.pendingProps,Lt),n!==null?(t.stateNode=n,lt=t,Ye=Bt(n.firstChild),Lt=!1,l=!0):l=!1),l||Ma(t)),Mt(t),l=t.type,s=t.pendingProps,u=e!==null?e.memoizedProps:null,n=s.children,ko(l,s)?n=null:u!==null&&ko(l,u)&&(t.flags|=32),t.memoizedState!==null&&(l=vi(e,t,fm,null,null,a),Wl._currentValue=l),Xr(e,t),st(e,t,n,a),t.child;case 6:return e===null&&Ee&&((e=a=Ye)&&(a=Wm(a,t.pendingProps,Lt),a!==null?(t.stateNode=a,lt=t,Ye=null,e=!0):e=!1),e||Ma(t)),null;case 13:return od(e,t,a);case 4:return Ue(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=gn(t,null,n,a):st(e,t,n,a),t.child;case 11:return Pu(e,t,t.type,t.pendingProps,a);case 7:return st(e,t,t.pendingProps,a),t.child;case 8:return st(e,t,t.pendingProps.children,a),t.child;case 12:return st(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Ra(t,t.type,n.value),st(e,t,n.children,a),t.child;case 9:return l=t.type._context,n=t.pendingProps.children,un(t),l=rt(l),n=n(l),t.flags|=1,st(e,t,n,a),t.child;case 14:return ed(e,t,t.type,t.pendingProps,a);case 15:return td(e,t,t.type,t.pendingProps,a);case 19:return ud(e,t,a);case 31:return vm(e,t,a);case 22:return ad(e,t,a,t.pendingProps);case 24:return un(t),n=rt($e),e===null?(l=ui(),l===null&&(l=Ge,s=oi(),l.pooledCache=s,s.refCount++,s!==null&&(l.pooledCacheLanes|=a),l=s),t.memoizedState={parent:n,cache:l},fi(t),Ra(t,$e,l)):((e.lanes&a)!==0&&(mi(e,t),Ol(t,null,null,a),Rl()),l=e.memoizedState,s=t.memoizedState,l.parent!==n?(l={parent:n,cache:n},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Ra(t,$e,n)):(n=s.cache,Ra(t,$e,n),n!==l.cache&&ii(t,[$e],a,!0))),st(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function da(e){e.flags|=4}function Zi(e,t,a,n,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Ld())e.flags|=8192;else throw mn=Ar,di}else e.flags&=-16777217}function fd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ef(t))if(Ld())e.flags|=8192;else throw mn=Ar,di}function Qr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ko():536870912,e.lanes|=t,Jn|=t)}function Ll(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function km(e,t,a){var n=t.pendingProps;switch(ai(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ia($e),Xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Dn(t)?da(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,li())),qe(t),null;case 26:var l=t.type,s=t.memoizedState;return e===null?(da(t),s!==null?(qe(t),fd(t,s)):(qe(t),Zi(t,l,null,n,a))):s?s!==e.memoizedState?(da(t),qe(t),fd(t,s)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&da(t),qe(t),Zi(t,l,e,n,a)),null;case 27:if(Qt(t),a=ye.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&da(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return qe(t),null}e=P.current,Dn(t)?Kc(t):(e=vf(l,n,a),t.stateNode=e,da(t))}return qe(t),null;case 5:if(Qt(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&da(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return qe(t),null}if(s=P.current,Dn(t))Kc(t);else{var u=is(ye.current);switch(s){case 1:s=u.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=u.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=u.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=u.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof n.is=="string"?u.createElement("select",{is:n.is}):u.createElement("select"),n.multiple?s.multiple=!0:n.size&&(s.size=n.size);break;default:s=typeof n.is=="string"?u.createElement(l,{is:n.is}):u.createElement(l)}}s[nt]=t,s[ft]=n;e:for(u=t.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}t.stateNode=s;e:switch(it(s,l,n),l){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&da(t)}}return qe(t),Zi(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&da(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(c(166));if(e=ye.current,Dn(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,l=lt,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[nt]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||cf(e.nodeValue,a)),e||Ma(t,!0)}else e=is(e).createTextNode(n),e[nt]=t,t.stateNode=e}return qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=Dn(t),a!==null){if(e===null){if(!n)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[nt]=t}else on(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else a=li(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Nt(t),t):(Nt(t),null);if((t.flags&128)!==0)throw Error(c(558))}return qe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Dn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(c(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));l[nt]=t}else on(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),l=!1}else l=li(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Nt(t),t):(Nt(t),null)}return Nt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==l&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Qr(t,t.updateQueue),qe(t),null);case 4:return Xe(),e===null&&xo(t.stateNode.containerInfo),qe(t),null;case 10:return ia(t.type),qe(t),null;case 19:if(z(Ze),n=t.memoizedState,n===null)return qe(t),null;if(l=(t.flags&128)!==0,s=n.rendering,s===null)if(l)Ll(n,!1);else{if(Ie!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=zr(e),s!==null){for(t.flags|=128,Ll(n,!1),e=s.updateQueue,t.updateQueue=e,Qr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Bc(a,e),a=a.sibling;return I(Ze,Ze.current&1|2),Ee&&ra(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&W()>Fr&&(t.flags|=128,l=!0,Ll(n,!1),t.lanes=4194304)}else{if(!l)if(e=zr(s),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Qr(t,e),Ll(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!Ee)return qe(t),null}else 2*W()-n.renderingStartTime>Fr&&a!==536870912&&(t.flags|=128,l=!0,Ll(n,!1),t.lanes=4194304);n.isBackwards?(s.sibling=t.child,t.child=s):(e=n.last,e!==null?e.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=W(),e.sibling=null,a=Ze.current,I(Ze,l?a&1|2:a&1),Ee&&ra(t,n.treeForkCount),e):(qe(t),null);case 22:case 23:return Nt(t),xi(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&Qr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&z(dn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ia($e),qe(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function jm(e,t){switch(ai(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ia($e),Xe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Qt(t),null;case 31:if(t.memoizedState!==null){if(Nt(t),t.alternate===null)throw Error(c(340));on()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Nt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));on()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return z(Ze),null;case 4:return Xe(),null;case 10:return ia(t.type),null;case 22:case 23:return Nt(t),xi(),e!==null&&z(dn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ia($e),null;case 25:return null;default:return null}}function md(e,t){switch(ai(t),t.tag){case 3:ia($e),Xe();break;case 26:case 27:case 5:Qt(t);break;case 4:Xe();break;case 31:t.memoizedState!==null&&Nt(t);break;case 13:Nt(t);break;case 19:z(Ze);break;case 10:ia(t.type);break;case 22:case 23:Nt(t),xi(),e!==null&&z(dn);break;case 24:ia($e)}}function Gl(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&e)===e){n=void 0;var s=a.create,u=a.inst;n=s(),u.destroy=n}a=a.next}while(a!==l)}}catch(m){_e(t,t.return,m)}}function Ha(e,t,a){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var s=l.next;n=s;do{if((n.tag&e)===e){var u=n.inst,m=u.destroy;if(m!==void 0){u.destroy=void 0,l=t;var b=a,T=m;try{T()}catch(_){_e(l,b,_)}}}n=n.next}while(n!==s)}}catch(_){_e(t,t.return,_)}}function gd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{lu(t,a)}catch(n){_e(e,e.return,n)}}}function hd(e,t,a){a.props=yn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){_e(e,t,n)}}function Bl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(l){_e(e,t,l)}}function Jt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){_e(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){_e(e,t,l)}else a.current=null}function yd(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){_e(e,e.return,l)}}function Ji(e,t,a){try{var n=e.stateNode;Km(n,e.type,a,t),n[ft]=t}catch(l){_e(e,e.return,l)}}function xd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Xa(e.type)||e.tag===4}function $i(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Xa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fi(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=aa));else if(n!==4&&(n===27&&Xa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Fi(e,t,a),e=e.sibling;e!==null;)Fi(e,t,a),e=e.sibling}function Ir(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Xa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ir(e,t,a),e=e.sibling;e!==null;)Ir(e,t,a),e=e.sibling}function pd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);it(t,n,a),t[nt]=e,t[ft]=a}catch(s){_e(e,e.return,s)}}var fa=!1,Pe=!1,Wi=!1,bd=typeof WeakSet=="function"?WeakSet:Set,at=null;function Nm(e,t){if(e=e.containerInfo,vo=gs,e=Rc(e),Ks(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{a.nodeType,s.nodeType}catch{a=null;break e}var u=0,m=-1,b=-1,T=0,_=0,L=e,E=null;t:for(;;){for(var R;L!==a||l!==0&&L.nodeType!==3||(m=u+l),L!==s||n!==0&&L.nodeType!==3||(b=u+n),L.nodeType===3&&(u+=L.nodeValue.length),(R=L.firstChild)!==null;)E=L,L=R;for(;;){if(L===e)break t;if(E===a&&++T===l&&(m=u),E===s&&++_===n&&(b=u),(R=L.nextSibling)!==null)break;L=E,E=L.parentNode}L=R}a=m===-1||b===-1?null:{start:m,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(So={focusedElem:e,selectionRange:a},gs=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){switch(t=at,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,a=t,l=s.memoizedProps,s=s.memoizedState,n=a.stateNode;try{var ee=yn(a.type,l);e=n.getSnapshotBeforeUpdate(ee,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(ue){_e(a,a.return,ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)No(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":No(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}}function vd(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ga(e,a),n&4&&Gl(5,a);break;case 1:if(ga(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(u){_e(a,a.return,u)}else{var l=yn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(u){_e(a,a.return,u)}}n&64&&gd(a),n&512&&Bl(a,a.return);break;case 3:if(ga(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{lu(e,t)}catch(u){_e(a,a.return,u)}}break;case 27:t===null&&n&4&&pd(a);case 26:case 5:ga(e,a),t===null&&n&4&&yd(a),n&512&&Bl(a,a.return);break;case 12:ga(e,a);break;case 31:ga(e,a),n&4&&jd(e,a);break;case 13:ga(e,a),n&4&&Nd(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=zm.bind(null,a),Pm(e,a))));break;case 22:if(n=a.memoizedState!==null||fa,!n){t=t!==null&&t.memoizedState!==null||Pe,l=fa;var s=Pe;fa=n,(Pe=t)&&!s?ha(e,a,(a.subtreeFlags&8772)!==0):ga(e,a),fa=l,Pe=s}break;case 30:break;default:ga(e,a)}}function Sd(e){var t=e.alternate;t!==null&&(e.alternate=null,Sd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Es(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,gt=!1;function ma(e,t,a){for(a=a.child;a!==null;)kd(e,t,a),a=a.sibling}function kd(e,t,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(ul,a)}catch{}switch(a.tag){case 26:Pe||Jt(a,t),ma(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pe||Jt(a,t);var n=Ve,l=gt;Xa(a.type)&&(Ve=a.stateNode,gt=!1),ma(e,t,a),Jl(a.stateNode),Ve=n,gt=l;break;case 5:Pe||Jt(a,t);case 6:if(n=Ve,l=gt,Ve=null,ma(e,t,a),Ve=n,gt=l,Ve!==null)if(gt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(a.stateNode)}catch(s){_e(a,t,s)}else try{Ve.removeChild(a.stateNode)}catch(s){_e(a,t,s)}break;case 18:Ve!==null&&(gt?(e=Ve,hf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),nl(e)):hf(Ve,a.stateNode));break;case 4:n=Ve,l=gt,Ve=a.stateNode.containerInfo,gt=!0,ma(e,t,a),Ve=n,gt=l;break;case 0:case 11:case 14:case 15:Ha(2,a,t),Pe||Ha(4,a,t),ma(e,t,a);break;case 1:Pe||(Jt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&hd(a,t,n)),ma(e,t,a);break;case 21:ma(e,t,a);break;case 22:Pe=(n=Pe)||a.memoizedState!==null,ma(e,t,a),Pe=n;break;default:ma(e,t,a)}}function jd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{nl(e)}catch(a){_e(t,t.return,a)}}}function Nd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{nl(e)}catch(a){_e(t,t.return,a)}}function wm(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new bd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new bd),t;default:throw Error(c(435,e.tag))}}function Zr(e,t){var a=wm(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var l=_m.bind(null,e,n);n.then(l,l)}})}function ht(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],s=e,u=t,m=u;e:for(;m!==null;){switch(m.tag){case 27:if(Xa(m.type)){Ve=m.stateNode,gt=!1;break e}break;case 5:Ve=m.stateNode,gt=!1;break e;case 3:case 4:Ve=m.stateNode.containerInfo,gt=!0;break e}m=m.return}if(Ve===null)throw Error(c(160));kd(s,u,l),Ve=null,gt=!1,s=l.alternate,s!==null&&(s.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)wd(t,e),t=t.sibling}var Vt=null;function wd(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ht(t,e),yt(e),n&4&&(Ha(3,e,e.return),Gl(3,e),Ha(5,e,e.return));break;case 1:ht(t,e),yt(e),n&512&&(Pe||a===null||Jt(a,a.return)),n&64&&fa&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=Vt;if(ht(t,e),yt(e),n&512&&(Pe||a===null||Jt(a,a.return)),n&4){var s=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(n){case"title":s=l.getElementsByTagName("title")[0],(!s||s[ml]||s[nt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=l.createElement(n),l.head.insertBefore(s,l.querySelector("head > title"))),it(s,n,a),s[nt]=e,tt(s),n=s;break e;case"link":var u=Tf("link","href",l).get(n+(a.href||""));if(u){for(var m=0;m<u.length;m++)if(s=u[m],s.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&s.getAttribute("rel")===(a.rel==null?null:a.rel)&&s.getAttribute("title")===(a.title==null?null:a.title)&&s.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){u.splice(m,1);break t}}s=l.createElement(n),it(s,n,a),l.head.appendChild(s);break;case"meta":if(u=Tf("meta","content",l).get(n+(a.content||""))){for(m=0;m<u.length;m++)if(s=u[m],s.getAttribute("content")===(a.content==null?null:""+a.content)&&s.getAttribute("name")===(a.name==null?null:a.name)&&s.getAttribute("property")===(a.property==null?null:a.property)&&s.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&s.getAttribute("charset")===(a.charSet==null?null:a.charSet)){u.splice(m,1);break t}}s=l.createElement(n),it(s,n,a),l.head.appendChild(s);break;default:throw Error(c(468,n))}s[nt]=e,tt(s),n=s}e.stateNode=n}else Cf(l,e.type,e.stateNode);else e.stateNode=wf(l,n,e.memoizedProps);else s!==n?(s===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):s.count--,n===null?Cf(l,e.type,e.stateNode):wf(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Ji(e,e.memoizedProps,a.memoizedProps)}break;case 27:ht(t,e),yt(e),n&512&&(Pe||a===null||Jt(a,a.return)),a!==null&&n&4&&Ji(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ht(t,e),yt(e),n&512&&(Pe||a===null||Jt(a,a.return)),e.flags&32){l=e.stateNode;try{Tn(l,"")}catch(ee){_e(e,e.return,ee)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,Ji(e,l,a!==null?a.memoizedProps:l)),n&1024&&(Wi=!0);break;case 6:if(ht(t,e),yt(e),n&4){if(e.stateNode===null)throw Error(c(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(ee){_e(e,e.return,ee)}}break;case 3:if(us=null,l=Vt,Vt=os(t.containerInfo),ht(t,e),Vt=l,yt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{nl(t.containerInfo)}catch(ee){_e(e,e.return,ee)}Wi&&(Wi=!1,Td(e));break;case 4:n=Vt,Vt=os(e.stateNode.containerInfo),ht(t,e),yt(e),Vt=n;break;case 12:ht(t,e),yt(e);break;case 31:ht(t,e),yt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Zr(e,n)));break;case 13:ht(t,e),yt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($r=W()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Zr(e,n)));break;case 22:l=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,T=fa,_=Pe;if(fa=T||l,Pe=_||b,ht(t,e),Pe=_,fa=T,yt(e),n&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||b||fa||Pe||xn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){b=a=t;try{if(s=b.stateNode,l)u=s.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{m=b.stateNode;var L=b.memoizedProps.style,E=L!=null&&L.hasOwnProperty("display")?L.display:null;m.style.display=E==null||typeof E=="boolean"?"":(""+E).trim()}}catch(ee){_e(b,b.return,ee)}}}else if(t.tag===6){if(a===null){b=t;try{b.stateNode.nodeValue=l?"":b.memoizedProps}catch(ee){_e(b,b.return,ee)}}}else if(t.tag===18){if(a===null){b=t;try{var R=b.stateNode;l?yf(R,!0):yf(b.stateNode,!1)}catch(ee){_e(b,b.return,ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Zr(e,a))));break;case 19:ht(t,e),yt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Zr(e,n)));break;case 30:break;case 21:break;default:ht(t,e),yt(e)}}function yt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(xd(n)){a=n;break}n=n.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var l=a.stateNode,s=$i(e);Ir(e,s,l);break;case 5:var u=a.stateNode;a.flags&32&&(Tn(u,""),a.flags&=-33);var m=$i(e);Ir(e,m,u);break;case 3:case 4:var b=a.stateNode.containerInfo,T=$i(e);Fi(e,T,b);break;default:throw Error(c(161))}}catch(_){_e(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Td(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Td(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ga(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vd(e,t.alternate,t),t=t.sibling}function xn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ha(4,t,t.return),xn(t);break;case 1:Jt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&hd(t,t.return,a),xn(t);break;case 27:Jl(t.stateNode);case 26:case 5:Jt(t,t.return),xn(t);break;case 22:t.memoizedState===null&&xn(t);break;case 30:xn(t);break;default:xn(t)}e=e.sibling}}function ha(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,l=e,s=t,u=s.flags;switch(s.tag){case 0:case 11:case 15:ha(l,s,a),Gl(4,s);break;case 1:if(ha(l,s,a),n=s,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(T){_e(n,n.return,T)}if(n=s,l=n.updateQueue,l!==null){var m=n.stateNode;try{var b=l.shared.hiddenCallbacks;if(b!==null)for(l.shared.hiddenCallbacks=null,l=0;l<b.length;l++)nu(b[l],m)}catch(T){_e(n,n.return,T)}}a&&u&64&&gd(s),Bl(s,s.return);break;case 27:pd(s);case 26:case 5:ha(l,s,a),a&&n===null&&u&4&&yd(s),Bl(s,s.return);break;case 12:ha(l,s,a);break;case 31:ha(l,s,a),a&&u&4&&jd(l,s);break;case 13:ha(l,s,a),a&&u&4&&Nd(l,s);break;case 22:s.memoizedState===null&&ha(l,s,a),Bl(s,s.return);break;case 30:break;default:ha(l,s,a)}t=t.sibling}}function Pi(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Tl(a))}function eo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tl(e))}function Xt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cd(e,t,a,n),t=t.sibling}function Cd(e,t,a,n){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Xt(e,t,a,n),l&2048&&Gl(9,t);break;case 1:Xt(e,t,a,n);break;case 3:Xt(e,t,a,n),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tl(e)));break;case 12:if(l&2048){Xt(e,t,a,n),e=t.stateNode;try{var s=t.memoizedProps,u=s.id,m=s.onPostCommit;typeof m=="function"&&m(u,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){_e(t,t.return,b)}}else Xt(e,t,a,n);break;case 31:Xt(e,t,a,n);break;case 13:Xt(e,t,a,n);break;case 23:break;case 22:s=t.stateNode,u=t.alternate,t.memoizedState!==null?s._visibility&2?Xt(e,t,a,n):Yl(e,t):s._visibility&2?Xt(e,t,a,n):(s._visibility|=2,Qn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Pi(u,t);break;case 24:Xt(e,t,a,n),l&2048&&eo(t.alternate,t);break;default:Xt(e,t,a,n)}}function Qn(e,t,a,n,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,u=t,m=a,b=n,T=u.flags;switch(u.tag){case 0:case 11:case 15:Qn(s,u,m,b,l),Gl(8,u);break;case 23:break;case 22:var _=u.stateNode;u.memoizedState!==null?_._visibility&2?Qn(s,u,m,b,l):Yl(s,u):(_._visibility|=2,Qn(s,u,m,b,l)),l&&T&2048&&Pi(u.alternate,u);break;case 24:Qn(s,u,m,b,l),l&&T&2048&&eo(u.alternate,u);break;default:Qn(s,u,m,b,l)}t=t.sibling}}function Yl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,l=n.flags;switch(n.tag){case 22:Yl(a,n),l&2048&&Pi(n.alternate,n);break;case 24:Yl(a,n),l&2048&&eo(n.alternate,n);break;default:Yl(a,n)}t=t.sibling}}var ql=8192;function In(e,t,a){if(e.subtreeFlags&ql)for(e=e.child;e!==null;)Ed(e,t,a),e=e.sibling}function Ed(e,t,a){switch(e.tag){case 26:In(e,t,a),e.flags&ql&&e.memoizedState!==null&&dg(a,Vt,e.memoizedState,e.memoizedProps);break;case 5:In(e,t,a);break;case 3:case 4:var n=Vt;Vt=os(e.stateNode.containerInfo),In(e,t,a),Vt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=ql,ql=16777216,In(e,t,a),ql=n):In(e,t,a));break;default:In(e,t,a)}}function Ad(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];at=n,Rd(n,e)}Ad(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Md(e),e=e.sibling}function Md(e){switch(e.tag){case 0:case 11:case 15:Vl(e),e.flags&2048&&Ha(9,e,e.return);break;case 3:Vl(e);break;case 12:Vl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Jr(e)):Vl(e);break;default:Vl(e)}}function Jr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];at=n,Rd(n,e)}Ad(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ha(8,t,t.return),Jr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Jr(t));break;default:Jr(t)}e=e.sibling}}function Rd(e,t){for(;at!==null;){var a=at;switch(a.tag){case 0:case 11:case 15:Ha(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Tl(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,at=n;else e:for(a=e;at!==null;){n=at;var l=n.sibling,s=n.return;if(Sd(n),n===a){at=null;break e}if(l!==null){l.return=s,at=l;break e}at=s}}}var Tm={getCacheForType:function(e){var t=rt($e),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return rt($e).controller.signal}},Cm=typeof WeakMap=="function"?WeakMap:Map,Re=0,Ge=null,ke=null,we=0,ze=0,wt=null,La=!1,Zn=!1,to=!1,ya=0,Ie=0,Ga=0,pn=0,ao=0,Tt=0,Jn=0,Xl=null,xt=null,no=!1,$r=0,Od=0,Fr=1/0,Wr=null,Ba=null,et=0,Ya=null,$n=null,xa=0,lo=0,ro=null,zd=null,Kl=0,so=null;function Ct(){return(Re&2)!==0&&we!==0?we&-we:C.T!==null?mo():Jo()}function _d(){if(Tt===0)if((we&536870912)===0||Ee){var e=sr;sr<<=1,(sr&3932160)===0&&(sr=262144),Tt=e}else Tt=536870912;return e=jt.current,e!==null&&(e.flags|=32),Tt}function pt(e,t,a){(e===Ge&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(Fn(e,0),qa(e,we,Tt,!1)),fl(e,a),((Re&2)===0||e!==Ge)&&(e===Ge&&((Re&2)===0&&(pn|=a),Ie===4&&qa(e,we,Tt,!1)),$t(e))}function Ud(e,t,a){if((Re&6)!==0)throw Error(c(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||dl(e,t),l=n?Mm(e,t):oo(e,t,!0),s=n;do{if(l===0){Zn&&!n&&qa(e,t,0,!1);break}else{if(a=e.current.alternate,s&&!Em(a)){l=oo(e,t,!1),s=!1;continue}if(l===2){if(s=t,e.errorRecoveryDisabledLanes&s)var u=0;else u=e.pendingLanes&-536870913,u=u!==0?u:u&536870912?536870912:0;if(u!==0){t=u;e:{var m=e;l=Xl;var b=m.current.memoizedState.isDehydrated;if(b&&(Fn(m,u).flags|=256),u=oo(m,u,!1),u!==2){if(to&&!b){m.errorRecoveryDisabledLanes|=s,pn|=s,l=4;break e}s=xt,xt=l,s!==null&&(xt===null?xt=s:xt.push.apply(xt,s))}l=u}if(s=!1,l!==2)continue}}if(l===1){Fn(e,0),qa(e,t,0,!0);break}e:{switch(n=e,s=l,s){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:qa(n,t,Tt,!La);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(l=$r+300-W(),10<l)){if(qa(n,t,Tt,!La),or(n,0,!0)!==0)break e;xa=t,n.timeoutHandle=mf(Dd.bind(null,n,a,xt,Wr,no,t,Tt,pn,Jn,La,s,"Throttled",-0,0),l);break e}Dd(n,a,xt,Wr,no,t,Tt,pn,Jn,La,s,null,-0,0)}}break}while(!0);$t(e)}function Dd(e,t,a,n,l,s,u,m,b,T,_,L,E,R){if(e.timeoutHandle=-1,L=t.subtreeFlags,L&8192||(L&16785408)===16785408){L={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:aa},Ed(t,s,L);var ee=(s&62914560)===s?$r-W():(s&4194048)===s?Od-W():0;if(ee=fg(L,ee),ee!==null){xa=s,e.cancelPendingCommit=ee(Xd.bind(null,e,t,s,a,n,l,u,m,b,_,L,null,E,R)),qa(e,s,u,!T);return}}Xd(e,t,s,a,n,l,u,m,b)}function Em(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],s=l.getSnapshot;l=l.value;try{if(!St(s(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qa(e,t,a,n){t&=~ao,t&=~pn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var l=t;0<l;){var s=31-vt(l),u=1<<s;n[s]=-1,l&=~u}a!==0&&Qo(e,a,t)}function Pr(){return(Re&6)===0?(Ql(0),!1):!0}function io(){if(ke!==null){if(ze===0)var e=ke.return;else e=ke,sa=cn=null,ji(e),Yn=null,El=0,e=ke;for(;e!==null;)md(e.alternate,e),e=e.return;ke=null}}function Fn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Zm(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),xa=0,io(),Ge=e,ke=a=la(e.current,null),we=t,ze=0,wt=null,La=!1,Zn=dl(e,t),to=!1,Jn=Tt=ao=pn=Ga=Ie=0,xt=Xl=null,no=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var l=31-vt(n),s=1<<l;t|=e[l],n&=~s}return ya=t,vr(),a}function Hd(e,t){xe=null,C.H=Dl,t===Bn||t===Er?(t=Pc(),ze=3):t===di?(t=Pc(),ze=4):ze=t===Gi?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wt=t,ke===null&&(Ie=1,qr(e,Ut(t,e.current)))}function Ld(){var e=jt.current;return e===null?!0:(we&4194048)===we?Gt===null:(we&62914560)===we||(we&536870912)!==0?e===Gt:!1}function Gd(){var e=C.H;return C.H=Dl,e===null?Dl:e}function Bd(){var e=C.A;return C.A=Tm,e}function es(){Ie=4,La||(we&4194048)!==we&&jt.current!==null||(Zn=!0),(Ga&134217727)===0&&(pn&134217727)===0||Ge===null||qa(Ge,we,Tt,!1)}function oo(e,t,a){var n=Re;Re|=2;var l=Gd(),s=Bd();(Ge!==e||we!==t)&&(Wr=null,Fn(e,t)),t=!1;var u=Ie;e:do try{if(ze!==0&&ke!==null){var m=ke,b=wt;switch(ze){case 8:io(),u=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var T=ze;if(ze=0,wt=null,Wn(e,m,b,T),a&&Zn){u=0;break e}break;default:T=ze,ze=0,wt=null,Wn(e,m,b,T)}}Am(),u=Ie;break}catch(_){Hd(e,_)}while(!0);return t&&e.shellSuspendCounter++,sa=cn=null,Re=n,C.H=l,C.A=s,ke===null&&(Ge=null,we=0,vr()),u}function Am(){for(;ke!==null;)Yd(ke)}function Mm(e,t){var a=Re;Re|=2;var n=Gd(),l=Bd();Ge!==e||we!==t?(Wr=null,Fr=W()+500,Fn(e,t)):Zn=dl(e,t);e:do try{if(ze!==0&&ke!==null){t=ke;var s=wt;t:switch(ze){case 1:ze=0,wt=null,Wn(e,t,s,1);break;case 2:case 9:if(Fc(s)){ze=0,wt=null,qd(t);break}t=function(){ze!==2&&ze!==9||Ge!==e||(ze=7),$t(e)},s.then(t,t);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:Fc(s)?(ze=0,wt=null,qd(t)):(ze=0,wt=null,Wn(e,t,s,7));break;case 5:var u=null;switch(ke.tag){case 26:u=ke.memoizedState;case 5:case 27:var m=ke;if(u?Ef(u):m.stateNode.complete){ze=0,wt=null;var b=m.sibling;if(b!==null)ke=b;else{var T=m.return;T!==null?(ke=T,ts(T)):ke=null}break t}}ze=0,wt=null,Wn(e,t,s,5);break;case 6:ze=0,wt=null,Wn(e,t,s,6);break;case 8:io(),Ie=6;break e;default:throw Error(c(462))}}Rm();break}catch(_){Hd(e,_)}while(!0);return sa=cn=null,C.H=n,C.A=l,Re=a,ke!==null?0:(Ge=null,we=0,vr(),Ie)}function Rm(){for(;ke!==null&&!J();)Yd(ke)}function Yd(e){var t=dd(e.alternate,e,ya);e.memoizedProps=e.pendingProps,t===null?ts(e):ke=t}function qd(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=rd(a,t,t.pendingProps,t.type,void 0,we);break;case 11:t=rd(a,t,t.pendingProps,t.type.render,t.ref,we);break;case 5:ji(t);default:md(a,t),t=ke=Bc(t,ya),t=dd(a,t,ya)}e.memoizedProps=e.pendingProps,t===null?ts(e):ke=t}function Wn(e,t,a,n){sa=cn=null,ji(t),Yn=null,El=0;var l=t.return;try{if(bm(e,l,t,a,we)){Ie=1,qr(e,Ut(a,e.current)),ke=null;return}}catch(s){if(l!==null)throw ke=l,s;Ie=1,qr(e,Ut(a,e.current)),ke=null;return}t.flags&32768?(Ee||n===1?e=!0:Zn||(we&536870912)!==0?e=!1:(La=e=!0,(n===2||n===9||n===3||n===6)&&(n=jt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Vd(t,e)):ts(t)}function ts(e){var t=e;do{if((t.flags&32768)!==0){Vd(t,La);return}e=t.return;var a=km(t.alternate,t,ya);if(a!==null){ke=a;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ie===0&&(Ie=5)}function Vd(e,t){do{var a=jm(e.alternate,e);if(a!==null){a.flags&=32767,ke=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ke=e;return}ke=e=a}while(e!==null);Ie=6,ke=null}function Xd(e,t,a,n,l,s,u,m,b){e.cancelPendingCommit=null;do as();while(et!==0);if((Re&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(s=t.lanes|t.childLanes,s|=$s,u0(e,a,s,u,m,b),e===Ge&&(ke=Ge=null,we=0),$n=t,Ya=e,xa=a,lo=s,ro=l,zd=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Um(Oe,function(){return Jd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=C.T,C.T=null,l=H.p,H.p=2,u=Re,Re|=4;try{Nm(e,t,a)}finally{Re=u,H.p=l,C.T=n}}et=1,Kd(),Qd(),Id()}}function Kd(){if(et===1){et=0;var e=Ya,t=$n,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=C.T,C.T=null;var n=H.p;H.p=2;var l=Re;Re|=4;try{wd(t,e);var s=So,u=Rc(e.containerInfo),m=s.focusedElem,b=s.selectionRange;if(u!==m&&m&&m.ownerDocument&&Mc(m.ownerDocument.documentElement,m)){if(b!==null&&Ks(m)){var T=b.start,_=b.end;if(_===void 0&&(_=T),"selectionStart"in m)m.selectionStart=T,m.selectionEnd=Math.min(_,m.value.length);else{var L=m.ownerDocument||document,E=L&&L.defaultView||window;if(E.getSelection){var R=E.getSelection(),ee=m.textContent.length,ue=Math.min(b.start,ee),Le=b.end===void 0?ue:Math.min(b.end,ee);!R.extend&&ue>Le&&(u=Le,Le=ue,ue=u);var j=Ac(m,ue),k=Ac(m,Le);if(j&&k&&(R.rangeCount!==1||R.anchorNode!==j.node||R.anchorOffset!==j.offset||R.focusNode!==k.node||R.focusOffset!==k.offset)){var w=L.createRange();w.setStart(j.node,j.offset),R.removeAllRanges(),ue>Le?(R.addRange(w),R.extend(k.node,k.offset)):(w.setEnd(k.node,k.offset),R.addRange(w))}}}}for(L=[],R=m;R=R.parentNode;)R.nodeType===1&&L.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<L.length;m++){var U=L[m];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}gs=!!vo,So=vo=null}finally{Re=l,H.p=n,C.T=a}}e.current=t,et=2}}function Qd(){if(et===2){et=0;var e=Ya,t=$n,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=C.T,C.T=null;var n=H.p;H.p=2;var l=Re;Re|=4;try{vd(e,t.alternate,t)}finally{Re=l,H.p=n,C.T=a}}et=3}}function Id(){if(et===4||et===3){et=0,F();var e=Ya,t=$n,a=xa,n=zd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?et=5:(et=0,$n=Ya=null,Zd(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ba=null),Ts(a),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(ul,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=C.T,l=H.p,H.p=2,C.T=null;try{for(var s=e.onRecoverableError,u=0;u<n.length;u++){var m=n[u];s(m.value,{componentStack:m.stack})}}finally{C.T=t,H.p=l}}(xa&3)!==0&&as(),$t(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===so?Kl++:(Kl=0,so=e):Kl=0,Ql(0)}}function Zd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tl(t)))}function as(){return Kd(),Qd(),Id(),Jd()}function Jd(){if(et!==5)return!1;var e=Ya,t=lo;lo=0;var a=Ts(xa),n=C.T,l=H.p;try{H.p=32>a?32:a,C.T=null,a=ro,ro=null;var s=Ya,u=xa;if(et=0,$n=Ya=null,xa=0,(Re&6)!==0)throw Error(c(331));var m=Re;if(Re|=4,Md(s.current),Cd(s,s.current,u,a),Re=m,Ql(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(ul,s)}catch{}return!0}finally{H.p=l,C.T=n,Zd(e,t)}}function $d(e,t,a){t=Ut(a,t),t=Li(e.stateNode,t,2),e=_a(e,t,2),e!==null&&(fl(e,2),$t(e))}function _e(e,t,a){if(e.tag===3)$d(e,e,a);else for(;t!==null;){if(t.tag===3){$d(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ba===null||!Ba.has(n))){e=Ut(a,e),a=Fu(2),n=_a(t,a,2),n!==null&&(Wu(a,n,t,e),fl(n,2),$t(n));break}}t=t.return}}function co(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Cm;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(a)||(to=!0,l.add(a),e=Om.bind(null,e,t,a),t.then(e,e))}function Om(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ge===e&&(we&a)===a&&(Ie===4||Ie===3&&(we&62914560)===we&&300>W()-$r?(Re&2)===0&&Fn(e,0):ao|=a,Jn===we&&(Jn=0)),$t(e)}function Fd(e,t){t===0&&(t=Ko()),e=rn(e,t),e!==null&&(fl(e,t),$t(e))}function zm(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Fd(e,a)}function _m(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(c(314))}n!==null&&n.delete(t),Fd(e,a)}function Um(e,t){return ol(e,t)}var ns=null,Pn=null,uo=!1,ls=!1,fo=!1,Va=0;function $t(e){e!==Pn&&e.next===null&&(Pn===null?ns=Pn=e:Pn=Pn.next=e),ls=!0,uo||(uo=!0,Hm())}function Ql(e,t){if(!fo&&ls){fo=!0;do for(var a=!1,n=ns;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var s=0;else{var u=n.suspendedLanes,m=n.pingedLanes;s=(1<<31-vt(42|e)+1)-1,s&=l&~(u&~m),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(a=!0,tf(n,s))}else s=we,s=or(n,n===Ge?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(s&3)===0||dl(n,s)||(a=!0,tf(n,s));n=n.next}while(a);fo=!1}}function Dm(){Wd()}function Wd(){ls=uo=!1;var e=0;Va!==0&&Im()&&(e=Va);for(var t=W(),a=null,n=ns;n!==null;){var l=n.next,s=Pd(n,t);s===0?(n.next=null,a===null?ns=l:a.next=l,l===null&&(Pn=a)):(a=n,(e!==0||(s&3)!==0)&&(ls=!0)),n=l}et!==0&&et!==5||Ql(e),Va!==0&&(Va=0)}function Pd(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var u=31-vt(s),m=1<<u,b=l[u];b===-1?((m&a)===0||(m&n)!==0)&&(l[u]=c0(m,t)):b<=t&&(e.expiredLanes|=m),s&=~m}if(t=Ge,a=we,a=or(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&cl(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||dl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&cl(n),Ts(a)){case 2:case 8:a=me;break;case 32:a=Oe;break;case 268435456:a=Rt;break;default:a=Oe}return n=ef.bind(null,e),a=ol(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&cl(n),e.callbackPriority=2,e.callbackNode=null,2}function ef(e,t){if(et!==0&&et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(as()&&e.callbackNode!==a)return null;var n=we;return n=or(e,e===Ge?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Ud(e,n,t),Pd(e,W()),e.callbackNode!=null&&e.callbackNode===a?ef.bind(null,e):null)}function tf(e,t){if(as())return null;Ud(e,t,!0)}function Hm(){Jm(function(){(Re&6)!==0?ol(oe,Dm):Wd()})}function mo(){if(Va===0){var e=Ln;e===0&&(e=rr,rr<<=1,(rr&261888)===0&&(rr=256)),Va=e}return Va}function af(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fr(""+e)}function nf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Lm(e,t,a,n,l){if(t==="submit"&&a&&a.stateNode===l){var s=af((l[ft]||null).action),u=n.submitter;u&&(t=(t=u[ft]||null)?af(t.formAction):u.getAttribute("formAction"),t!==null&&(s=t,u=null));var m=new yr("action","action",null,n,l);e.push({event:m,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Va!==0){var b=u?nf(l,u):new FormData(l);Oi(a,{pending:!0,data:b,method:l.method,action:s},null,b)}}else typeof s=="function"&&(m.preventDefault(),b=u?nf(l,u):new FormData(l),Oi(a,{pending:!0,data:b,method:l.method,action:s},s,b))},currentTarget:l}]})}}for(var go=0;go<Js.length;go++){var ho=Js[go],Gm=ho.toLowerCase(),Bm=ho[0].toUpperCase()+ho.slice(1);qt(Gm,"on"+Bm)}qt(_c,"onAnimationEnd"),qt(Uc,"onAnimationIteration"),qt(Dc,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(am,"onTransitionRun"),qt(nm,"onTransitionStart"),qt(lm,"onTransitionCancel"),qt(Hc,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ym=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function lf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],l=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var u=n.length-1;0<=u;u--){var m=n[u],b=m.instance,T=m.currentTarget;if(m=m.listener,b!==s&&l.isPropagationStopped())break e;s=m,l.currentTarget=T;try{s(l)}catch(_){br(_)}l.currentTarget=null,s=b}else for(u=0;u<n.length;u++){if(m=n[u],b=m.instance,T=m.currentTarget,m=m.listener,b!==s&&l.isPropagationStopped())break e;s=m,l.currentTarget=T;try{s(l)}catch(_){br(_)}l.currentTarget=null,s=b}}}}function je(e,t){var a=t[Cs];a===void 0&&(a=t[Cs]=new Set);var n=e+"__bubble";a.has(n)||(rf(t,e,2,!1),a.add(n))}function yo(e,t,a){var n=0;t&&(n|=4),rf(a,e,n,t)}var rs="_reactListening"+Math.random().toString(36).slice(2);function xo(e){if(!e[rs]){e[rs]=!0,Wo.forEach(function(a){a!=="selectionchange"&&(Ym.has(a)||yo(a,!1,e),yo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rs]||(t[rs]=!0,yo("selectionchange",!1,t))}}function rf(e,t,a,n){switch(Uf(t)){case 2:var l=hg;break;case 8:l=yg;break;default:l=Oo}a=l.bind(null,t,a,e),l=void 0,!Ds||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function po(e,t,a,n,l){var s=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var m=n.stateNode.containerInfo;if(m===l)break;if(u===4)for(u=n.return;u!==null;){var b=u.tag;if((b===3||b===4)&&u.stateNode.containerInfo===l)return;u=u.return}for(;m!==null;){if(u=Sn(m),u===null)return;if(b=u.tag,b===5||b===6||b===26||b===27){n=s=u;continue e}m=m.parentNode}}n=n.return}uc(function(){var T=s,_=_s(a),L=[];e:{var E=Lc.get(e);if(E!==void 0){var R=yr,ee=e;switch(e){case"keypress":if(gr(a)===0)break e;case"keydown":case"keyup":R=_0;break;case"focusin":ee="focus",R=Bs;break;case"focusout":ee="blur",R=Bs;break;case"beforeblur":case"afterblur":R=Bs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=k0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=H0;break;case _c:case Uc:case Dc:R=w0;break;case Hc:R=G0;break;case"scroll":case"scrollend":R=v0;break;case"wheel":R=Y0;break;case"copy":case"cut":case"paste":R=C0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=hc;break;case"toggle":case"beforetoggle":R=V0}var ue=(t&4)!==0,Le=!ue&&(e==="scroll"||e==="scrollend"),j=ue?E!==null?E+"Capture":null:E;ue=[];for(var k=T,w;k!==null;){var U=k;if(w=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||w===null||j===null||(U=hl(k,j),U!=null&&ue.push(Zl(k,U,w))),Le)break;k=k.return}0<ue.length&&(E=new R(E,ee,null,a,_),L.push({event:E,listeners:ue}))}}if((t&7)===0){e:{if(E=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",E&&a!==zs&&(ee=a.relatedTarget||a.fromElement)&&(Sn(ee)||ee[vn]))break e;if((R||E)&&(E=_.window===_?_:(E=_.ownerDocument)?E.defaultView||E.parentWindow:window,R?(ee=a.relatedTarget||a.toElement,R=T,ee=ee?Sn(ee):null,ee!==null&&(Le=f(ee),ue=ee.tag,ee!==Le||ue!==5&&ue!==27&&ue!==6)&&(ee=null)):(R=null,ee=T),R!==ee)){if(ue=mc,U="onMouseLeave",j="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ue=hc,U="onPointerLeave",j="onPointerEnter",k="pointer"),Le=R==null?E:gl(R),w=ee==null?E:gl(ee),E=new ue(U,k+"leave",R,a,_),E.target=Le,E.relatedTarget=w,U=null,Sn(_)===T&&(ue=new ue(j,k+"enter",ee,a,_),ue.target=w,ue.relatedTarget=Le,U=ue),Le=U,R&&ee)t:{for(ue=qm,j=R,k=ee,w=0,U=j;U;U=ue(U))w++;U=0;for(var ce=k;ce;ce=ue(ce))U++;for(;0<w-U;)j=ue(j),w--;for(;0<U-w;)k=ue(k),U--;for(;w--;){if(j===k||k!==null&&j===k.alternate){ue=j;break t}j=ue(j),k=ue(k)}ue=null}else ue=null;R!==null&&sf(L,E,R,ue,!1),ee!==null&&Le!==null&&sf(L,Le,ee,ue,!0)}}e:{if(E=T?gl(T):window,R=E.nodeName&&E.nodeName.toLowerCase(),R==="select"||R==="input"&&E.type==="file")var Ae=jc;else if(Sc(E))if(Nc)Ae=P0;else{Ae=F0;var te=$0}else R=E.nodeName,!R||R.toLowerCase()!=="input"||E.type!=="checkbox"&&E.type!=="radio"?T&&Os(T.elementType)&&(Ae=jc):Ae=W0;if(Ae&&(Ae=Ae(e,T))){kc(L,Ae,a,_);break e}te&&te(e,E,T),e==="focusout"&&T&&E.type==="number"&&T.memoizedProps.value!=null&&Rs(E,"number",E.value)}switch(te=T?gl(T):window,e){case"focusin":(Sc(te)||te.contentEditable==="true")&&(Mn=te,Qs=T,jl=null);break;case"focusout":jl=Qs=Mn=null;break;case"mousedown":Is=!0;break;case"contextmenu":case"mouseup":case"dragend":Is=!1,Oc(L,a,_);break;case"selectionchange":if(tm)break;case"keydown":case"keyup":Oc(L,a,_)}var pe;if(qs)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else An?bc(e,a)&&(Te="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(yc&&a.locale!=="ko"&&(An||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&An&&(pe=dc()):(Ca=_,Hs="value"in Ca?Ca.value:Ca.textContent,An=!0)),te=ss(T,Te),0<te.length&&(Te=new gc(Te,e,null,a,_),L.push({event:Te,listeners:te}),pe?Te.data=pe:(pe=vc(a),pe!==null&&(Te.data=pe)))),(pe=K0?Q0(e,a):I0(e,a))&&(Te=ss(T,"onBeforeInput"),0<Te.length&&(te=new gc("onBeforeInput","beforeinput",null,a,_),L.push({event:te,listeners:Te}),te.data=pe)),Lm(L,e,T,a,_)}lf(L,t)})}function Zl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ss(e,t){for(var a=t+"Capture",n=[];e!==null;){var l=e,s=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||s===null||(l=hl(e,a),l!=null&&n.unshift(Zl(e,l,s)),l=hl(e,t),l!=null&&n.push(Zl(e,l,s))),e.tag===3)return n;e=e.return}return[]}function qm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sf(e,t,a,n,l){for(var s=t._reactName,u=[];a!==null&&a!==n;){var m=a,b=m.alternate,T=m.stateNode;if(m=m.tag,b!==null&&b===n)break;m!==5&&m!==26&&m!==27||T===null||(b=T,l?(T=hl(a,s),T!=null&&u.unshift(Zl(a,T,b))):l||(T=hl(a,s),T!=null&&u.push(Zl(a,T,b)))),a=a.return}u.length!==0&&e.push({event:t,listeners:u})}var Vm=/\r\n?/g,Xm=/\u0000|\uFFFD/g;function of(e){return(typeof e=="string"?e:""+e).replace(Vm,`
`).replace(Xm,"")}function cf(e,t){return t=of(t),of(e)===t}function He(e,t,a,n,l,s){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Tn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Tn(e,""+n);break;case"className":ur(e,"class",n);break;case"tabIndex":ur(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(e,a,n);break;case"style":oc(e,n,s);break;case"data":if(t!=="object"){ur(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=fr(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(a==="formAction"?(t!=="input"&&He(e,t,"name",l.name,l,null),He(e,t,"formEncType",l.formEncType,l,null),He(e,t,"formMethod",l.formMethod,l,null),He(e,t,"formTarget",l.formTarget,l,null)):(He(e,t,"encType",l.encType,l,null),He(e,t,"method",l.method,l,null),He(e,t,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=fr(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=aa);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=fr(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":je("beforetoggle",e),je("toggle",e),cr(e,"popover",n);break;case"xlinkActuate":ta(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ta(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ta(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ta(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ta(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ta(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ta(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ta(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ta(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":cr(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=p0.get(a)||a,cr(e,a,n))}}function bo(e,t,a,n,l,s){switch(a){case"style":oc(e,n,s);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Tn(e,n):(typeof n=="number"||typeof n=="bigint")&&Tn(e,""+n);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"onClick":n!=null&&(e.onclick=aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Po.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),s=e[ft]||null,s=s!=null?s[a]:null,typeof s=="function"&&e.removeEventListener(t,s,l),typeof n=="function")){typeof s!="function"&&s!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,l);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):cr(e,a,n)}}}function it(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var n=!1,l=!1,s;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];if(u!=null)switch(s){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:He(e,t,s,u,a,null)}}l&&He(e,t,"srcSet",a.srcSet,a,null),n&&He(e,t,"src",a.src,a,null);return;case"input":je("invalid",e);var m=s=u=l=null,b=null,T=null;for(n in a)if(a.hasOwnProperty(n)){var _=a[n];if(_!=null)switch(n){case"name":l=_;break;case"type":u=_;break;case"checked":b=_;break;case"defaultChecked":T=_;break;case"value":s=_;break;case"defaultValue":m=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(c(137,t));break;default:He(e,t,n,_,a,null)}}lc(e,s,m,b,T,u,l,!1);return;case"select":je("invalid",e),n=u=s=null;for(l in a)if(a.hasOwnProperty(l)&&(m=a[l],m!=null))switch(l){case"value":s=m;break;case"defaultValue":u=m;break;case"multiple":n=m;default:He(e,t,l,m,a,null)}t=s,a=u,e.multiple=!!n,t!=null?wn(e,!!n,t,!1):a!=null&&wn(e,!!n,a,!0);return;case"textarea":je("invalid",e),s=l=n=null;for(u in a)if(a.hasOwnProperty(u)&&(m=a[u],m!=null))switch(u){case"value":n=m;break;case"defaultValue":l=m;break;case"children":s=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(c(91));break;default:He(e,t,u,m,a,null)}sc(e,n,l,s);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(n=a[b],n!=null))switch(b){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:He(e,t,b,n,a,null)}return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(n=0;n<Il.length;n++)je(Il[n],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(T in a)if(a.hasOwnProperty(T)&&(n=a[T],n!=null))switch(T){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:He(e,t,T,n,a,null)}return;default:if(Os(t)){for(_ in a)a.hasOwnProperty(_)&&(n=a[_],n!==void 0&&bo(e,t,_,n,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(n=a[m],n!=null&&He(e,t,m,n,a,null))}function Km(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,s=null,u=null,m=null,b=null,T=null,_=null;for(R in a){var L=a[R];if(a.hasOwnProperty(R)&&L!=null)switch(R){case"checked":break;case"value":break;case"defaultValue":b=L;default:n.hasOwnProperty(R)||He(e,t,R,null,n,L)}}for(var E in n){var R=n[E];if(L=a[E],n.hasOwnProperty(E)&&(R!=null||L!=null))switch(E){case"type":s=R;break;case"name":l=R;break;case"checked":T=R;break;case"defaultChecked":_=R;break;case"value":u=R;break;case"defaultValue":m=R;break;case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(c(137,t));break;default:R!==L&&He(e,t,E,R,n,L)}}Ms(e,u,m,b,T,_,s,l);return;case"select":R=u=m=E=null;for(s in a)if(b=a[s],a.hasOwnProperty(s)&&b!=null)switch(s){case"value":break;case"multiple":R=b;default:n.hasOwnProperty(s)||He(e,t,s,null,n,b)}for(l in n)if(s=n[l],b=a[l],n.hasOwnProperty(l)&&(s!=null||b!=null))switch(l){case"value":E=s;break;case"defaultValue":m=s;break;case"multiple":u=s;default:s!==b&&He(e,t,l,s,n,b)}t=m,a=u,n=R,E!=null?wn(e,!!a,E,!1):!!n!=!!a&&(t!=null?wn(e,!!a,t,!0):wn(e,!!a,a?[]:"",!1));return;case"textarea":R=E=null;for(m in a)if(l=a[m],a.hasOwnProperty(m)&&l!=null&&!n.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:He(e,t,m,null,n,l)}for(u in n)if(l=n[u],s=a[u],n.hasOwnProperty(u)&&(l!=null||s!=null))switch(u){case"value":E=l;break;case"defaultValue":R=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(c(91));break;default:l!==s&&He(e,t,u,l,n,s)}rc(e,E,R);return;case"option":for(var ee in a)if(E=a[ee],a.hasOwnProperty(ee)&&E!=null&&!n.hasOwnProperty(ee))switch(ee){case"selected":e.selected=!1;break;default:He(e,t,ee,null,n,E)}for(b in n)if(E=n[b],R=a[b],n.hasOwnProperty(b)&&E!==R&&(E!=null||R!=null))switch(b){case"selected":e.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:He(e,t,b,E,n,R)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in a)E=a[ue],a.hasOwnProperty(ue)&&E!=null&&!n.hasOwnProperty(ue)&&He(e,t,ue,null,n,E);for(T in n)if(E=n[T],R=a[T],n.hasOwnProperty(T)&&E!==R&&(E!=null||R!=null))switch(T){case"children":case"dangerouslySetInnerHTML":if(E!=null)throw Error(c(137,t));break;default:He(e,t,T,E,n,R)}return;default:if(Os(t)){for(var Le in a)E=a[Le],a.hasOwnProperty(Le)&&E!==void 0&&!n.hasOwnProperty(Le)&&bo(e,t,Le,void 0,n,E);for(_ in n)E=n[_],R=a[_],!n.hasOwnProperty(_)||E===R||E===void 0&&R===void 0||bo(e,t,_,E,n,R);return}}for(var j in a)E=a[j],a.hasOwnProperty(j)&&E!=null&&!n.hasOwnProperty(j)&&He(e,t,j,null,n,E);for(L in n)E=n[L],R=a[L],!n.hasOwnProperty(L)||E===R||E==null&&R==null||He(e,t,L,E,n,R)}function uf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var l=a[n],s=l.transferSize,u=l.initiatorType,m=l.duration;if(s&&m&&uf(u)){for(u=0,m=l.responseEnd,n+=1;n<a.length;n++){var b=a[n],T=b.startTime;if(T>m)break;var _=b.transferSize,L=b.initiatorType;_&&uf(L)&&(b=b.responseEnd,u+=_*(b<m?1:(m-T)/(b-T)))}if(--n,t+=8*(s+u)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vo=null,So=null;function is(e){return e.nodeType===9?e:e.ownerDocument}function df(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ff(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jo=null;function Im(){var e=window.event;return e&&e.type==="popstate"?e===jo?!1:(jo=e,!0):(jo=null,!1)}var mf=typeof setTimeout=="function"?setTimeout:void 0,Zm=typeof clearTimeout=="function"?clearTimeout:void 0,gf=typeof Promise=="function"?Promise:void 0,Jm=typeof queueMicrotask=="function"?queueMicrotask:typeof gf<"u"?function(e){return gf.resolve(null).then(e).catch($m)}:mf;function $m(e){setTimeout(function(){throw e})}function Xa(e){return e==="head"}function hf(e,t){var a=t,n=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(l),nl(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Jl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Jl(a);for(var s=a.firstChild;s;){var u=s.nextSibling,m=s.nodeName;s[ml]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&s.rel.toLowerCase()==="stylesheet"||a.removeChild(s),s=u}}else a==="body"&&Jl(e.ownerDocument.body);a=l}while(a);nl(t)}function yf(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function No(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":No(a),Es(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Fm(e,t,a,n){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ml])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Bt(e.nextSibling),e===null)break}return null}function Wm(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bt(e.nextSibling),e===null))return null;return e}function xf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Bt(e.nextSibling),e===null))return null;return e}function wo(e){return e.data==="$?"||e.data==="$~"}function To(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Pm(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Co=null;function pf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Bt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function bf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function vf(e,t,a){switch(t=is(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Jl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Es(e)}var Yt=new Map,Sf=new Set;function os(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pa=H.d;H.d={f:eg,r:tg,D:ag,C:ng,L:lg,m:rg,X:ig,S:sg,M:og};function eg(){var e=pa.f(),t=Pr();return e||t}function tg(e){var t=kn(e);t!==null&&t.tag===5&&t.type==="form"?Hu(t):pa.r(e)}var el=typeof document>"u"?null:document;function kf(e,t,a){var n=el;if(n&&typeof t=="string"&&t){var l=zt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),Sf.has(l)||(Sf.add(l),e={rel:e,crossOrigin:a,href:t},n.querySelector(l)===null&&(t=n.createElement("link"),it(t,"link",e),tt(t),n.head.appendChild(t)))}}function ag(e){pa.D(e),kf("dns-prefetch",e,null)}function ng(e,t){pa.C(e,t),kf("preconnect",e,t)}function lg(e,t,a){pa.L(e,t,a);var n=el;if(n&&e&&t){var l='link[rel="preload"][as="'+zt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+zt(a.imageSizes)+'"]')):l+='[href="'+zt(e)+'"]';var s=l;switch(t){case"style":s=tl(e);break;case"script":s=al(e)}Yt.has(s)||(e=N({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Yt.set(s,e),n.querySelector(l)!==null||t==="style"&&n.querySelector($l(s))||t==="script"&&n.querySelector(Fl(s))||(t=n.createElement("link"),it(t,"link",e),tt(t),n.head.appendChild(t)))}}function rg(e,t){pa.m(e,t);var a=el;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+zt(n)+'"][href="'+zt(e)+'"]',s=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=al(e)}if(!Yt.has(s)&&(e=N({rel:"modulepreload",href:e},t),Yt.set(s,e),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(s)))return}n=a.createElement("link"),it(n,"link",e),tt(n),a.head.appendChild(n)}}}function sg(e,t,a){pa.S(e,t,a);var n=el;if(n&&e){var l=jn(n).hoistableStyles,s=tl(e);t=t||"default";var u=l.get(s);if(!u){var m={loading:0,preload:null};if(u=n.querySelector($l(s)))m.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Yt.get(s))&&Eo(e,a);var b=u=n.createElement("link");tt(b),it(b,"link",e),b._p=new Promise(function(T,_){b.onload=T,b.onerror=_}),b.addEventListener("load",function(){m.loading|=1}),b.addEventListener("error",function(){m.loading|=2}),m.loading|=4,cs(u,t,n)}u={type:"stylesheet",instance:u,count:1,state:m},l.set(s,u)}}}function ig(e,t){pa.X(e,t);var a=el;if(a&&e){var n=jn(a).hoistableScripts,l=al(e),s=n.get(l);s||(s=a.querySelector(Fl(l)),s||(e=N({src:e,async:!0},t),(t=Yt.get(l))&&Ao(e,t),s=a.createElement("script"),tt(s),it(s,"link",e),a.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(l,s))}}function og(e,t){pa.M(e,t);var a=el;if(a&&e){var n=jn(a).hoistableScripts,l=al(e),s=n.get(l);s||(s=a.querySelector(Fl(l)),s||(e=N({src:e,async:!0,type:"module"},t),(t=Yt.get(l))&&Ao(e,t),s=a.createElement("script"),tt(s),it(s,"link",e),a.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(l,s))}}function jf(e,t,a,n){var l=(l=ye.current)?os(l):null;if(!l)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=tl(a.href),a=jn(l).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=tl(a.href);var s=jn(l).hoistableStyles,u=s.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,u),(s=l.querySelector($l(e)))&&!s._p&&(u.instance=s,u.state.loading=5),Yt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yt.set(e,a),s||cg(l,e,a,u.state))),t&&n===null)throw Error(c(528,""));return u}if(t&&n!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=al(a),a=jn(l).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function tl(e){return'href="'+zt(e)+'"'}function $l(e){return'link[rel="stylesheet"]['+e+"]"}function Nf(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function cg(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),it(t,"link",a),tt(t),e.head.appendChild(t))}function al(e){return'[src="'+zt(e)+'"]'}function Fl(e){return"script[async]"+e}function wf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+zt(a.href)+'"]');if(n)return t.instance=n,tt(n),n;var l=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),tt(n),it(n,"style",l),cs(n,a.precedence,e),t.instance=n;case"stylesheet":l=tl(a.href);var s=e.querySelector($l(l));if(s)return t.state.loading|=4,t.instance=s,tt(s),s;n=Nf(a),(l=Yt.get(l))&&Eo(n,l),s=(e.ownerDocument||e).createElement("link"),tt(s);var u=s;return u._p=new Promise(function(m,b){u.onload=m,u.onerror=b}),it(s,"link",n),t.state.loading|=4,cs(s,a.precedence,e),t.instance=s;case"script":return s=al(a.src),(l=e.querySelector(Fl(s)))?(t.instance=l,tt(l),l):(n=a,(l=Yt.get(s))&&(n=N({},a),Ao(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),tt(l),it(l,"link",n),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,cs(n,a.precedence,e));return t.instance}function cs(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,s=l,u=0;u<n.length;u++){var m=n[u];if(m.dataset.precedence===t)s=m;else if(s!==l)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Eo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ao(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var us=null;function Tf(e,t,a){if(us===null){var n=new Map,l=us=new Map;l.set(a,n)}else l=us,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var s=a[l];if(!(s[ml]||s[nt]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var u=s.getAttribute(t)||"";u=e+u;var m=n.get(u);m?m.push(s):n.set(u,[s])}}return n}function Cf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function ug(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ef(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function dg(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=tl(n.href),s=t.querySelector($l(l));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ds.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=s,tt(s);return}s=t.ownerDocument||t,n=Nf(n),(l=Yt.get(l))&&Eo(n,l),s=s.createElement("link"),tt(s);var u=s;u._p=new Promise(function(m,b){u.onload=m,u.onerror=b}),it(s,"link",n),a.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ds.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Mo=0;function fg(e,t){return e.stylesheets&&e.count===0&&ms(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&ms(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Mo===0&&(Mo=62500*Qm());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ms(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Mo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(l)}}:null}function ds(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ms(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fs=null;function ms(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fs=new Map,t.forEach(mg,e),fs=null,ds.call(e))}function mg(e,t){if(!(t.state.loading&4)){var a=fs.get(e);if(a)var n=a.get(null);else{a=new Map,fs.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<l.length;s++){var u=l[s];(u.nodeName==="LINK"||u.getAttribute("media")!=="not all")&&(a.set(u.dataset.precedence,u),n=u)}n&&a.set(null,n)}l=t.instance,u=l.getAttribute("data-precedence"),s=a.get(u)||n,s===n&&a.set(null,l),a.set(u,l),this.count++,n=ds.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),s?s.parentNode.insertBefore(l,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var Wl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function gg(e,t,a,n,l,s,u,m,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ns(0),this.hiddenUpdates=Ns(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=s,this.onRecoverableError=u,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Af(e,t,a,n,l,s,u,m,b,T,_,L){return e=new gg(e,t,a,u,b,T,_,L,m),t=1,s===!0&&(t|=24),s=kt(3,null,null,t),e.current=s,s.stateNode=e,t=oi(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:n,isDehydrated:a,cache:t},fi(s),e}function Mf(e){return e?(e=zn,e):zn}function Rf(e,t,a,n,l,s){l=Mf(l),n.context===null?n.context=l:n.pendingContext=l,n=za(t),n.payload={element:a},s=s===void 0?null:s,s!==null&&(n.callback=s),a=_a(e,n,t),a!==null&&(pt(a,e,t),Ml(a,e,t))}function Of(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Ro(e,t){Of(e,t),(e=e.alternate)&&Of(e,t)}function zf(e){if(e.tag===13||e.tag===31){var t=rn(e,67108864);t!==null&&pt(t,e,67108864),Ro(e,67108864)}}function _f(e){if(e.tag===13||e.tag===31){var t=Ct();t=ws(t);var a=rn(e,t);a!==null&&pt(a,e,t),Ro(e,t)}}var gs=!0;function hg(e,t,a,n){var l=C.T;C.T=null;var s=H.p;try{H.p=2,Oo(e,t,a,n)}finally{H.p=s,C.T=l}}function yg(e,t,a,n){var l=C.T;C.T=null;var s=H.p;try{H.p=8,Oo(e,t,a,n)}finally{H.p=s,C.T=l}}function Oo(e,t,a,n){if(gs){var l=zo(n);if(l===null)po(e,t,n,hs,a),Df(e,n);else if(pg(l,e,t,a,n))n.stopPropagation();else if(Df(e,n),t&4&&-1<xg.indexOf(e)){for(;l!==null;){var s=kn(l);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var u=en(s.pendingLanes);if(u!==0){var m=s;for(m.pendingLanes|=2,m.entangledLanes|=2;u;){var b=1<<31-vt(u);m.entanglements[1]|=b,u&=~b}$t(s),(Re&6)===0&&(Fr=W()+500,Ql(0))}}break;case 31:case 13:m=rn(s,2),m!==null&&pt(m,s,2),Pr(),Ro(s,2)}if(s=zo(n),s===null&&po(e,t,n,hs,a),s===l)break;l=s}l!==null&&n.stopPropagation()}else po(e,t,n,null,a)}}function zo(e){return e=_s(e),_o(e)}var hs=null;function _o(e){if(hs=null,e=Sn(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hs=e,null}function Uf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ve()){case oe:return 2;case me:return 8;case Oe:case Ke:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var Uo=!1,Ka=null,Qa=null,Ia=null,Pl=new Map,er=new Map,Za=[],xg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Df(e,t){switch(e){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Pl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(t.pointerId)}}function tr(e,t,a,n,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:s,targetContainers:[l]},t!==null&&(t=kn(t),t!==null&&zf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function pg(e,t,a,n,l){switch(t){case"focusin":return Ka=tr(Ka,e,t,a,n,l),!0;case"dragenter":return Qa=tr(Qa,e,t,a,n,l),!0;case"mouseover":return Ia=tr(Ia,e,t,a,n,l),!0;case"pointerover":var s=l.pointerId;return Pl.set(s,tr(Pl.get(s)||null,e,t,a,n,l)),!0;case"gotpointercapture":return s=l.pointerId,er.set(s,tr(er.get(s)||null,e,t,a,n,l)),!0}return!1}function Hf(e){var t=Sn(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,$o(e.priority,function(){_f(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,$o(e.priority,function(){_f(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ys(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=zo(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);zs=n,a.target.dispatchEvent(n),zs=null}else return t=kn(a),t!==null&&zf(t),e.blockedOn=a,!1;t.shift()}return!0}function Lf(e,t,a){ys(e)&&a.delete(t)}function bg(){Uo=!1,Ka!==null&&ys(Ka)&&(Ka=null),Qa!==null&&ys(Qa)&&(Qa=null),Ia!==null&&ys(Ia)&&(Ia=null),Pl.forEach(Lf),er.forEach(Lf)}function xs(e,t){e.blockedOn===t&&(e.blockedOn=null,Uo||(Uo=!0,x.unstable_scheduleCallback(x.unstable_NormalPriority,bg)))}var ps=null;function Gf(e){ps!==e&&(ps=e,x.unstable_scheduleCallback(x.unstable_NormalPriority,function(){ps===e&&(ps=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],l=e[t+2];if(typeof n!="function"){if(_o(n||a)===null)continue;break}var s=kn(a);s!==null&&(e.splice(t,3),t-=3,Oi(s,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function nl(e){function t(b){return xs(b,e)}Ka!==null&&xs(Ka,e),Qa!==null&&xs(Qa,e),Ia!==null&&xs(Ia,e),Pl.forEach(t),er.forEach(t);for(var a=0;a<Za.length;a++){var n=Za[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Za.length&&(a=Za[0],a.blockedOn===null);)Hf(a),a.blockedOn===null&&Za.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],s=a[n+1],u=l[ft]||null;if(typeof s=="function")u||Gf(a);else if(u){var m=null;if(s&&s.hasAttribute("formAction")){if(l=s,u=s[ft]||null)m=u.formAction;else if(_o(l)!==null)continue}else m=u.action;typeof m=="function"?a[n+1]=m:(a.splice(n,3),n-=3),Gf(a)}}}function Bf(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(u){return l=u})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Do(e){this._internalRoot=e}bs.prototype.render=Do.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,n=Ct();Rf(a,n,e,t,null,null)},bs.prototype.unmount=Do.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rf(e.current,2,null,e,null,null),Pr(),t[vn]=null}};function bs(e){this._internalRoot=e}bs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jo();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Za.length&&t!==0&&t<Za[a].priority;a++);Za.splice(a,0,e),a===0&&Hf(e)}};var Yf=i.version;if(Yf!=="19.2.0")throw Error(c(527,Yf,"19.2.0"));H.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var vg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vs.isDisabled&&vs.supportsFiber)try{ul=vs.inject(vg),bt=vs}catch{}}return nr.createRoot=function(e,t){if(!d(e))throw Error(c(299));var a=!1,n="",l=Iu,s=Zu,u=Ju;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Af(e,1,!1,null,null,a,n,null,l,s,u,Bf),e[vn]=t.current,xo(e),new Do(t)},nr.hydrateRoot=function(e,t,a){if(!d(e))throw Error(c(299));var n=!1,l="",s=Iu,u=Zu,m=Ju,b=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(s=a.onUncaughtError),a.onCaughtError!==void 0&&(u=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(b=a.formState)),t=Af(e,1,!0,t,a??null,n,l,b,s,u,m,Bf),t.context=Mf(null),a=t.current,n=Ct(),n=ws(n),l=za(n),l.callback=null,_a(a,l,n),a=n,t.current.lanes=a,fl(t,a),$t(t),e[vn]=t.current,xo(e),new bs(t)},nr.version="19.2.0",nr}var Ff;function Og(){if(Ff)return Go.exports;Ff=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(i){console.error(i)}}return x(),Go.exports=Rg(),Go.exports}var zg=Og();const _g=({imageUrl:x,altText:i,isLoading:o=!1,error:c=null,onRetry:d,className:f="",fallbackImageUrl:h})=>{const[g,p]=M.useState(!1),[y,S]=M.useState(!1),[N,A]=M.useState(null);M.useEffect(()=>{p(!1),S(!1),A(null)},[x]);const B=M.useCallback(()=>{S(!0),p(!1),x&&A(x)},[x]),Y=M.useCallback(()=>{p(!0),S(!1)},[]),q=M.useCallback(()=>{p(!1),S(!1),d&&d()},[d]),K=x||N||h;return o?r.jsx("div",{className:`relative bg-gray-100 rounded-lg overflow-hidden ${f}`,children:r.jsx("div",{className:"aspect-video w-full",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Generating image..."})]})})})}):c&&!K?r.jsx("div",{className:`relative bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg ${f}`,children:r.jsx("div",{className:"aspect-video w-full",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-3",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Image Generation Failed"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3 max-w-xs",children:c}),d&&r.jsxs("button",{onClick:q,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsx("svg",{className:"mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]})]})})})}):K?r.jsxs("div",{className:`relative rounded-lg overflow-hidden shadow-md ${f}`,children:[!y&&!g&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center z-10",children:r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2 mx-auto"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 mx-auto"})]})})}),r.jsx("img",{src:K,alt:i,className:`w-full h-auto transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,onLoad:B,onError:Y,loading:"lazy",style:{aspectRatio:"16/9",objectFit:"cover",minHeight:"200px"}}),g&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-10 w-10 rounded-full bg-gray-200 mb-2",children:r.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Failed to load image"}),d&&r.jsx("button",{onClick:q,className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Try again"})]})}),y&&i&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3",children:r.jsx("div",{className:"text-white text-sm opacity-0 hover:opacity-100 transition-opacity duration-200",children:i})})]}):r.jsx("div",{className:`relative bg-gray-50 border border-gray-200 rounded-lg ${f}`,children:r.jsx("div",{className:"aspect-video w-full",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx("svg",{className:"h-12 w-12 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("div",{className:"text-sm",children:"No image available"})]})})})})},Ug={temperature:.7,minP:.05,repetitionPenalty:1.1,enableStreaming:!0},lr=({settings:x,onSettingsChange:i,onClose:o})=>{const[c,d]=M.useState(x),f=(p,y)=>{d(S=>({...S,[p]:y}))},h=()=>{i(c),o()},g=()=>{d(Ug)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Sampler Settings"}),r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold","aria-label":"Close",children:""})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Temperature"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.temperature.toFixed(2)})]}),r.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:c.temperature,onChange:p=>f("temperature",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Controls randomness. Lower = more focused, Higher = more creative"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Min P"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.minP.toFixed(3)})]}),r.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.001",value:c.minP,onChange:p=>f("minP",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum probability threshold for token selection"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Repetition Penalty"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.repetitionPenalty.toFixed(2)})]}),r.jsx("input",{type:"range",min:"1",max:"2",step:"0.01",value:c.repetitionPenalty,onChange:p=>f("repetitionPenalty",parseFloat(p.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Reduces repetitive text. Higher = less repetition"})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block mb-1",children:"Enable Text Streaming"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Show text as it's generated character by character"})]}),r.jsx("button",{type:"button",role:"switch","aria-checked":c.enableStreaming??!0,onClick:()=>f("enableStreaming",!(c.enableStreaming??!0)),className:`
                  relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent 
                  transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                  ${c.enableStreaming??!0?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}
                `,children:r.jsx("span",{"aria-hidden":"true",className:`
                    pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 
                    transition duration-200 ease-in-out
                    ${c.enableStreaming??!0?"translate-x-5":"translate-x-0"}
                  `})})]})})]}),r.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:"Reset to Defaults"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors",children:"Cancel"}),r.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 rounded-md transition-colors",children:"Save Changes"})]})]})]})})};class Pt{static CHARS_PER_TOKEN=4;static MAX_TOKENS=8192;static RESERVED_TOKENS=1e3;static MAX_CONTEXT_TOKENS=Pt.MAX_TOKENS-Pt.RESERVED_TOKENS;static estimateTokens(i){return Math.ceil(i.length/this.CHARS_PER_TOKEN)}static truncateToTokenLimit(i,o=this.MAX_CONTEXT_TOKENS){if(this.estimateTokens(i)<=o)return i;const d=o*this.CHARS_PER_TOKEN,f=i.substring(0,d),h=f.lastIndexOf(". ");return h>d*.8?f.substring(0,h+1)+" [truncated]":f+" [truncated]"}static buildTruncatedContext(i,o,c=this.MAX_CONTEXT_TOKENS){let d="",f=0,h=0,g=0;const p=[...i].reverse(),y=[...o].reverse();for(let S=0;S<Math.max(p.length,y.length);S++){let N="",A="";if(S<p.length){const q=p[S],K=q.text.length>300?q.text.substring(0,300)+"...":q.text;N=`Story ${i.length-S}: ${K}
`}if(S<y.length){const q=y[S];A=`Action ${o.length-S}: ${q.text}
`}const B=N+A,Y=this.estimateTokens(B);if(f+Y>c)break;d=B+d,f+=Y,N&&h++,A&&g++}return{contextText:d,segmentsIncluded:h,choicesIncluded:g}}static buildEnhancedContext(i,o,c,d=this.MAX_CONTEXT_TOKENS){let f=null,h=null;if(i.length>0){const A=i[i.length-1];f=A.text.length>500?A.text.substring(0,500)+"...":A.text}o.length>0&&(h=o[o.length-1].text);const g=this.estimateTokens(`Previous segment: ${f||""}
Previous action: ${h||""}
Current scene: ${c}`),p=d-g,{contextText:y,segmentsIncluded:S,choicesIncluded:N}=this.buildTruncatedContext(i.slice(0,-1),o.slice(0,-1),p);return{contextText:y,previousSegment:f,previousAction:h,segmentsIncluded:S+(f?1:0),choicesIncluded:N+(h?1:0)}}static validatePromptSize(i){const o=this.estimateTokens(i);return{valid:o<=this.MAX_CONTEXT_TOKENS,estimatedTokens:o,maxTokens:this.MAX_CONTEXT_TOKENS}}static getTokenStats(i){const o=this.estimateTokens(i),c=this.MAX_CONTEXT_TOKENS-o,d=Math.round(o/this.MAX_CONTEXT_TOKENS*100);return{estimatedTokens:o,characters:i.length,maxTokens:this.MAX_CONTEXT_TOKENS,remainingTokens:Math.max(0,c),utilizationPercent:d}}}const e0=({thinkingContent:x,className:i="",isStreaming:o=!1})=>{const[c,d]=M.useState(!1),f=M.useRef(null),h=M.useRef(0),[g,p]=M.useState(!1),y=M.useRef(null),S=M.useRef(!1),N=M.useRef(0),A=M.useRef(null),B=M.useRef(0),Y=M.useRef(0),q=M.useRef(null),[K,le]=M.useState(!0),ae=()=>{if(!f.current||!o||S.current)return;const Q=f.current,$=Q.scrollTop,Ce=Date.now(),be=Q.scrollHeight-Q.scrollTop<=Q.clientHeight+10,X=Ce-Y.current,O=$-N.current;X>0&&(B.current=Math.abs(O)/X),O<-5&&B.current>.1&&!be?(p(!0),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{f.current&&(f.current.scrollHeight-f.current.scrollTop>f.current.clientHeight+10||p(!1))},3e3)):be&&!S.current&&(p(!1),y.current&&(clearTimeout(y.current),y.current=null)),N.current=$,Y.current=Ce};return M.useEffect(()=>{if(c&&o&&f.current&&!g){const Q=x.length;if(Q>h.current){const $=f.current;$.scrollHeight-$.scrollTop<=$.clientHeight+100&&K&&(S.current=!0,requestAnimationFrame(()=>{$&&!g&&o&&($.scrollTop=$.scrollHeight),setTimeout(()=>{S.current=!1},16)}))}h.current=Q}},[x,c,o,g,K]),M.useEffect(()=>{if(c&&o&&f.current&&!g){const Q=f.current,$=Q.querySelector("pre");$&&(q.current=new MutationObserver(()=>{!g&&o&&Q&&Q.scrollHeight-Q.scrollTop<=Q.clientHeight+50&&K&&(S.current=!0,Q.scrollTop=Q.scrollHeight,setTimeout(()=>{S.current=!1},10))}),q.current.observe($,{childList:!0,subtree:!0,characterData:!0}))}else q.current&&(q.current.disconnect(),q.current=null);return()=>{q.current&&(q.current.disconnect(),q.current=null)}},[c,o,g,K]),M.useEffect(()=>{if(f.current){const Q=new IntersectionObserver(([$])=>{le($.isIntersecting)},{threshold:.1});return Q.observe(f.current),()=>{Q.disconnect()}}},[c]),M.useEffect(()=>{o||(h.current=0,p(!1),S.current=!1,N.current=0,B.current=0,Y.current=0,y.current&&(clearTimeout(y.current),y.current=null),A.current&&(clearTimeout(A.current),A.current=null),q.current&&(q.current.disconnect(),q.current=null))},[o]),M.useEffect(()=>()=>{y.current&&clearTimeout(y.current),A.current&&clearTimeout(A.current),q.current&&q.current.disconnect()},[]),x.trim()?r.jsxs("div",{className:`bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg ${i}`,children:[r.jsxs("button",{onClick:()=>d(!c),className:"w-full px-4 py-3 text-left flex items-center justify-between text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"h-4 w-4 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),r.jsx("span",{className:"text-sm font-medium",children:"AI Thinking Process"}),r.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/50 px-2 py-0.5 rounded-full",children:["~",Pt.estimateTokens(x)," tokens"]})]}),r.jsx("svg",{className:`h-4 w-4 transform transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&r.jsxs("div",{className:"px-4 pb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{ref:f,onScroll:ae,className:"bg-white dark:bg-gray-800 rounded border border-blue-200 dark:border-blue-700 p-3 max-h-64 overflow-y-auto scroll-smooth",children:r.jsxs("pre",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono leading-relaxed",children:[x,o&&r.jsx("span",{className:"inline-block w-1 h-3 bg-blue-500 dark:bg-blue-400 ml-1 animate-pulse"})]})}),g&&o&&f.current&&f.current.scrollHeight-f.current.scrollTop>f.current.clientHeight+20&&r.jsxs("button",{onClick:()=>{f.current&&(S.current=!0,f.current.scrollTop=f.current.scrollHeight,p(!1),y.current&&(clearTimeout(y.current),y.current=null),setTimeout(()=>{S.current=!1},50))},className:"absolute bottom-2 right-2 bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded-full shadow-lg transition-colors flex items-center gap-1",title:"Scroll to bottom",children:[r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),r.jsx("span",{children:"Follow"})]})]}),r.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400 flex items-center justify-between",children:r.jsx("span",{children:"This shows the AI's internal reasoning process before generating the story response."})})]})]}):null},ks=({text:x,className:i=""})=>{const o=f=>{const h=[];let g=0;const p=f.split(`
`);for(let y=0;y<p.length;y++){const S=p[y];if(S.trim()===""){y<p.length-1&&h.push(r.jsx("br",{},`br-${g++}`));continue}const N=c(S,g);h.push(...N.elements),g=N.nextKey,y<p.length-1&&h.push(r.jsx("br",{},`br-${g++}`))}return h},c=(f,h)=>{const g=[];let p=h;const y=f.replace(/[]/g,'"'),S=[{regex:/\*\*(.*?)\*\*/g,type:"bold"},{regex:/__(.*?)__/g,type:"bold"},{regex:/\*(.*?)\*/g,type:"italic"},{regex:/_(.*?)_/g,type:"italic"},{regex:/(?:^|[\s.,!?;:])"([^"]*?)"(?=[\s.,!?;:]|$)/g,type:"quote"}],N=[];S.forEach(Y=>{let q;const K=new RegExp(Y.regex.source,Y.regex.flags);for(;(q=K.exec(y))!==null;)N.push({start:q.index,end:q.index+q[0].length,content:q[1],type:Y.type,fullMatch:q[0]})}),N.sort((Y,q)=>Y.start-q.start);const A=[];for(const Y of N)A.some(K=>Y.start<K.end&&Y.end>K.start)||A.push(Y);let B=0;for(const Y of A){if(Y.start>B){const K=y.substring(B,Y.start);K&&g.push(r.jsx("span",{children:K},`text-${p++}`))}const q=Y.content;switch(Y.type){case"bold":g.push(r.jsx("strong",{className:"font-semibold",children:q},`bold-${p++}`));break;case"italic":g.push(r.jsx("em",{className:"italic text-gray-600 dark:text-gray-400",children:q},`italic-${p++}`));break;case"quote":g.push(r.jsxs("span",{className:"text-orange-700 dark:text-orange-400",children:['"',q,'"']},`quote-${p++}`));break}B=Y.end}if(B<y.length){const Y=y.substring(B);Y&&g.push(r.jsx("span",{children:Y},`text-${p++}`))}return g.length===0&&g.push(r.jsx("span",{children:y},`text-${p++}`)),{elements:g,nextKey:p}},d=o(x);return r.jsx("span",{className:i,children:d})};class $a{static formatTTFS(i){return i>=1e3?`${(i/1e3).toFixed(1)}s`:`${Math.round(i)}ms`}static formatTokenUsage(i){return`${i.inputTokens.toLocaleString()}  ${i.outputTokens.toLocaleString()}`}static getTTFSColorClass(i){return i<1e3?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30":i<3e3?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":i<5e3?"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30":"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30"}static getTokenColorClass(i){return i<100?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30":i<500?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":i<1e3?"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30":"text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/30"}static getTTFSPerformanceLabel(i){return i<1e3?"Excellent":i<3e3?"Good":i<5e3?"Fair":"Slow"}static formatMetrics(i,o){const c={};return i!==void 0&&(c.ttfsDisplay=`TTFS: ${this.formatTTFS(i)}`,c.ttfsColorClass=this.getTTFSColorClass(i)),o&&(c.tokenDisplay=`Tokens: ${this.formatTokenUsage(o)}`,c.tokenColorClass=this.getTokenColorClass(o.outputTokens)),c}}const Dg=({currentStory:x,storyHistory:i,isLoading:o,error:c,onRetry:d,onRegenerate:f,isGeneratingImage:h=!1,imageError:g=null,onImageRetry:p,samplerSettings:y,onSamplerSettingsChange:S,streamingText:N="",isStreaming:A=!1,enableImageGeneration:B=!0,canRegenerate:Y=!1,thinkingContent:q="",streamingThinking:K="",onRollback:le})=>{const[ae,Q]=M.useState(!1),[$,Ce]=M.useState(new Set),[be,X]=M.useState(!1),O={temperature:.7,minP:.05,repetitionPenalty:1.1},D=G=>{le&&le(G)};return o&&!A?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating story..."]})})]}):c?r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Story Generation Failed"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:c}),d&&r.jsxs("button",{onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})}):!x&&!A?r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("p",{children:"No story to display. Start a new adventure to begin!"})]})}):r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[i.length>0&&r.jsxs("button",{onClick:()=>Q(!ae),className:"inline-flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[r.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${ae?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),ae?"Hide":"Show"," Story History (",i.length,")"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[Y&&f&&!o&&!A&&r.jsxs("button",{onClick:f,className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-md hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors",title:"Regenerate this story response with different variations",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{className:"hidden sm:inline",children:"Regenerate"})]}),S&&r.jsxs("button",{onClick:()=>X(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Adjust sampler settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),r.jsx("span",{className:"hidden sm:inline",children:"AI Sampler"})]})]})]}),be&&S&&r.jsx(lr,{settings:y||O,onSettingsChange:S,onClose:()=>X(!1)}),ae&&i.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-96 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Previous Story Segments"}),r.jsx("div",{className:"space-y-4",children:i.map((G,ie)=>{const re=$.has(G.id),Be=G.text.length>200,Z=re||!Be?G.text:`${G.text.substring(0,200)}...`;return r.jsxs("div",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Segment ",ie+1]}),G.modelName&&r.jsx("div",{className:"text-xs font-mono px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:G.modelName}),G.ttfs!==void 0&&r.jsxs("div",{className:`text-xs font-mono px-2 py-0.5 rounded ${$a.getTTFSColorClass(G.ttfs)}`,children:["TTFT: ",$a.formatTTFS(G.ttfs)]}),G.tokenUsage&&r.jsxs("div",{className:`text-xs font-mono px-2 py-0.5 rounded ${$a.getTokenColorClass(G.tokenUsage.outputTokens)}`,children:["Tokens: ",$a.formatTokenUsage(G.tokenUsage)]})]}),le&&r.jsxs("button",{onClick:()=>D(ie),className:"inline-flex items-center gap-1 px-2 py-1 text-xs text-orange-700 dark:text-orange-300 bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-700 rounded hover:bg-orange-100 dark:hover:bg-orange-900/50 transition-colors",title:`Rollback to this segment (will delete ${i.length-ie} segments)`,children:[r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Rollback"]})]}),r.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:r.jsx(ks,{text:Z})}),Be&&r.jsx("button",{onClick:()=>{Ce(de=>{const C=new Set(de);return C.has(G.id)?C.delete(G.id):C.add(G.id),C})},className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:re?"Show less":"Show more"})]},G.id)})})]}),(()=>{const G=A?K:x?.thinkingContent||q;return G&&G.trim()?r.jsx(e0,{thinkingContent:G,className:"mb-4",isStreaming:A&&!!K}):null})(),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[A&&!N&&r.jsx("div",{className:"text-center py-8",children:r.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating story..."]})}),(N||x)&&r.jsx("div",{className:"prose prose-sm sm:prose-lg max-w-none",children:r.jsxs("div",{className:"text-gray-800 dark:text-gray-200 leading-relaxed break-words",style:{fontSize:"clamp(0.9rem, 2.5vw, 1.125rem)",lineHeight:"1.75",fontFamily:"Georgia, serif"},children:[r.jsx(ks,{text:A?N:x?.text||""}),A&&N&&r.jsx("span",{className:"inline-block w-2 h-5 bg-blue-500 dark:bg-blue-400 ml-1 animate-pulse"})]})}),x&&!A&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.sceneDescription&&r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:"Scene"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:x.sceneDescription})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[x.modelName&&r.jsx("div",{className:"text-xs font-mono px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:x.modelName}),x.ttfs!==void 0&&r.jsxs("div",{className:`text-xs font-mono px-2 py-1 rounded ${$a.getTTFSColorClass(x.ttfs)}`,children:["TTFT: ",$a.formatTTFS(x.ttfs)]}),x.tokenUsage&&r.jsxs("div",{className:`text-xs font-mono px-2 py-1 rounded ${$a.getTokenColorClass(x.tokenUsage.outputTokens)}`,children:["Tokens: ",$a.formatTokenUsage(x.tokenUsage)]})]})]})}),x&&!A&&B&&r.jsx("div",{className:"mt-6",children:r.jsx(_g,{imageUrl:x.imageUrl,altText:x.sceneDescription||"Story scene",isLoading:h,error:g,onRetry:p,className:"w-full"})})]})]})},Hg=({choices:x,choiceHistory:i,isLoading:o,disabled:c=!1,onChoiceSelect:d})=>{const[f,h]=M.useState(null),[g,p]=M.useState(!1),y=M.useCallback(S=>{c||o||(h(S.id),setTimeout(()=>{d(S),h(null)},150))},[c,o,d]);return!x||x.length===0?r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:r.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{children:"No choices available at the moment."})]})}):r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.length>0&&r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("button",{onClick:()=>p(!g),className:"inline-flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[r.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${g?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),g?"Hide":"Show"," Choice History (",i.length,")"]})}),g&&i.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Previous Choices"}),r.jsx("div",{className:"space-y-2",children:i.map((S,N)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${S.isCustom?"bg-purple-100 dark:bg-purple-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:r.jsx("span",{className:`text-xs font-medium ${S.isCustom?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400"}`,children:N+1})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[S.isCustom&&r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("svg",{className:"h-3 w-3 text-purple-600 dark:text-purple-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),r.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:"Custom Action"})]}),r.jsx("div",{className:`text-sm leading-relaxed ${S.isCustom?"text-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"}`,children:r.jsx(ks,{text:S.text})})]})]},`${S.id}-${N}`))})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"What do you choose?"}),o&&r.jsx("div",{className:"text-center py-4",children:r.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400 text-sm",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing your choice..."]})}),r.jsx("div",{className:"space-y-2 sm:space-y-3",children:x.map((S,N)=>{const A=f===S.id,B=c||o;return r.jsx("button",{onClick:()=>y(S),disabled:B,className:`
                  w-full text-left p-3 sm:p-4 rounded-lg border-2 transition-all duration-200 
                  ${A?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/30 shadow-md transform scale-[0.98]":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20"}
                  ${B?"opacity-50 cursor-not-allowed":"hover:shadow-md cursor-pointer"}
                  focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800
                `,children:r.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[r.jsxs("div",{className:`
                    flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-medium text-xs sm:text-sm
                    ${A?"bg-blue-500 dark:bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300"}
                  `,children:[String.fromCharCode(65+N)," "]}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("div",{className:`
                      text-xs sm:text-sm leading-relaxed break-words
                      ${A?"text-blue-900 dark:text-blue-200":"text-gray-800 dark:text-gray-200"}
                    `,children:r.jsx(ks,{text:S.text})})}),A&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},S.id)})})]})]})},Lg=({isLoading:x,disabled:i=!1,onActionSubmit:o,choiceHistory:c})=>{const[d,f]=M.useState(""),[h,g]=M.useState(null),[p,y]=M.useState(!1),S=5,N=200,A=M.useCallback(Q=>{const $=Q.trim();return $.length===0?"Please enter an action":$.length<S?`Action must be at least ${S} characters`:$.length>N?`Action must not exceed ${N} characters`:null},[]),B=M.useCallback(Q=>{const $=Q.target.value;$.length<=N&&(f($),h&&$.trim().length>0&&g(null))},[h]),Y=M.useCallback(Q=>{if(Q.preventDefault(),i||x)return;const $=A(d);if($){g($);return}o(d.trim()),f(""),g(null)},[d,i,x,o,A]),q=M.useCallback(Q=>{if(Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),!i&&!x&&d.trim().length>0)){const $=A(d);if($){g($);return}o(d.trim()),f(""),g(null)}},[i,x,d,A,o]),K=d.length,le=K>N*.9,ae=K>N;return r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[c.length>0&&r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("button",{onClick:()=>y(!p),className:"inline-flex items-center text-xs sm:text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 transition-colors",children:[r.jsx("svg",{className:`mr-1 h-4 w-4 transform transition-transform ${p?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),p?"Hide":"Show"," Action History (",c.length,")"]})}),p&&c.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4 max-h-64 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Your Actions"}),r.jsx("div",{className:"space-y-2",children:c.map((Q,$)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:$+1})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:Q.text}),Q.isCustom&&r.jsxs("span",{className:"inline-flex items-center mt-1 text-xs text-purple-600 dark:text-purple-400",children:[r.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Custom Action"]})]})]},`${Q.id}-${$}`))})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"What do you do?"}),x&&r.jsx("div",{className:"text-center py-4",children:r.jsxs("div",{className:"inline-flex items-center text-purple-600 dark:text-purple-400 text-sm",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-purple-600 dark:text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing your action..."]})}),r.jsxs("form",{onSubmit:Y,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("textarea",{value:d,onChange:B,onKeyDown:q,disabled:i||x,placeholder:"Type your action here... (e.g., 'I carefully examine the mysterious door' or 'I call out to see if anyone is nearby')",className:`
                w-full px-3 py-3 sm:px-4 sm:py-3 rounded-lg border-2 transition-all duration-200
                text-sm sm:text-base leading-relaxed
                resize-none
                ${h?"border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-purple-500 dark:focus:ring-purple-400"}
                ${i||x?"bg-gray-100 dark:bg-gray-700 cursor-not-allowed opacity-50":"bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-500"}
                text-gray-900 dark:text-gray-100
                placeholder-gray-400 dark:placeholder-gray-500
                focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800
              `,rows:3,maxLength:N}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsx("div",{children:h&&r.jsxs("p",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h]})}),r.jsxs("span",{className:`
                text-xs sm:text-sm font-medium
                ${ae?"text-red-600 dark:text-red-400":le?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"}
              `,children:[K," / ",N]})]})]}),r.jsx("button",{type:"submit",disabled:i||x||d.trim().length===0,className:`
              w-full py-3 px-4 rounded-lg font-medium text-sm sm:text-base
              transition-all duration-200
              ${i||x||d.trim().length===0?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-purple-600 dark:bg-purple-500 text-white hover:bg-purple-700 dark:hover:bg-purple-600 shadow-md hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98]"}
              focus:outline-none focus:ring-2 focus:ring-purple-500 dark:focus:ring-purple-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800
            `,children:x?"Processing...":"Submit Action"})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center flex items-center justify-center",children:[r.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Tip: Be creative! Describe what your character does, says, or thinks."]}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Press Enter to submit  Shift+Enter for new line"})]})})]})]})},Gg=({isOpen:x,onClose:i,onConfirm:o,segmentIndex:c,segmentCount:d,choiceCount:f,error:h})=>{if(!x)return null;const g=d-c-1+1,p=f-c;return r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Confirm Rollback"})]}),r.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors","aria-label":"Close dialog",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"mb-4",children:[h&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4 mb-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1",children:"Rollback Error"}),r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:h})]})]})}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["You are about to rollback to ",r.jsxs("strong",{children:["Segment ",c+1]}),". This action cannot be undone."]}),r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-md p-4 mb-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-2",children:"The following data will be permanently deleted:"}),r.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:g})," story segment",g!==1?"s":""]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:p})," choice",p!==1?"s":""," made after this point"]})]})]})]})}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["After rollback, you will return to Segment ",c+1," and can continue your story from that point with different choices."]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-700 rounded-b-lg",children:[r.jsx("button",{onClick:i,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:o,disabled:!!h,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600 dark:disabled:hover:bg-red-500",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.334 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})}),"Confirm Rollback"]})]})]})})]})};class Pa{static parseThinkingResponse(i){const o=/<think>(.*?)<\/think>/is,c=i.match(o);if(c){const h=c[1].trim(),g=i.replace(o,"").trim();return{thinkingContent:h,cleanedResponse:g,hasThinking:!0}}const d=/<think>(.*?)$/is,f=i.match(d);if(f){const h=f[1].trim();let p=i.substring(0,i.indexOf("<think>")).trim();if(!p&&h){const y=this.extractStoryFromThinking(h);y&&(p=y)}return{thinkingContent:h,cleanedResponse:p,hasThinking:!0}}return i.includes("</think>")?{thinkingContent:"",cleanedResponse:i.replace(/<\/think>/gi,"").trim(),hasThinking:!1}:{thinkingContent:"",cleanedResponse:i,hasThinking:!1}}static createReasoningProcessor(){let i="";return{processReasoningChunk:o=>(i+=o,{thinkingChunk:o,fullThinkingContent:i}),getState:()=>({thinkingContent:i,isInThinkingBlock:!1,thinkingComplete:!1}),reset:()=>{i=""}}}static createStreamingProcessor(){let i="",o="",c=!1,d=!1;return{processChunk:f=>{i+=f;let h="",g="";if(d)h=f;else{if(!c&&i.includes("<think>")){const p=i.indexOf("<think>");p>0&&(h=i.substring(0,p),i=i.substring(p)),c=!0,i=i.replace("<think>","")}if(c)if(i.includes("</think>")){const p=i.indexOf("</think>"),y=i.substring(0,p);o+=y,g=y,i=i.substring(p+8),h=i,i="",c=!1,d=!0}else o+=i,g=i,i="";else h=i,i=""}return{displayChunk:h,thinkingChunk:g,thinkingComplete:d,fullThinkingContent:o}},getState:()=>({thinkingContent:o,isInThinkingBlock:c,thinkingComplete:d}),reset:()=>{i="",o="",c=!1,d=!1}}}static extractStoryFromThinking(i){const o=[/STORY:\s*(.*?)$/is,/(?:^|\n)\s*You\s+(?:are|find|see|hear|feel|walk|run|stand|sit|look)\s+.*$/im,/(?:^|\n)\s*The\s+.*$/im,/(?:^|\n)\s*A\s+.*$/im,/(?:^|\n)\s*As\s+you\s+.*$/im,/(?:^|\n)\s*Your\s+.*$/im];for(const d of o){const f=i.match(d);if(f&&f[1]){const h=f[1].trim();if(h.length>50)return h}else if(f&&f[0]){const h=f[0].trim();if(h.length>50)return h}}const c=i.split(/[.!?]+/).filter(d=>d.trim().length>20);if(c.length>0){const d=c.slice(-2).join(". ").trim();if(d.length>50&&(d.includes("You ")||d.includes("The ")||d.includes("A ")))return d+"."}return""}static validateThinkingTags(i){const o=[],c=(i.match(/<think>/gi)||[]).length,d=(i.match(/<\/think>/gi)||[]).length;c!==d&&o.push(`Mismatched thinking tags: ${c} opening, ${d} closing`);const f=i.match(/<think>.*?<\/think>/gis)||[];for(const h of f)if((h.match(/<think>/gi)||[]).length>1){o.push("Nested thinking tags detected");break}return{isValid:o.length===0,errors:o}}static cleanupMalformedTags(i){let o=i;const c=[...o.matchAll(/<think>/gi)],d=[...o.matchAll(/<\/think>/gi)];if(c.length>d.length){const f=c.length-d.length;for(let h=0;h<f;h++){const g=o.lastIndexOf("<think>");g!==-1&&(o=o.substring(0,g)+o.substring(g+7))}}if(d.length>c.length){const f=d.length-c.length;for(let h=0;h<f;h++){const g=o.indexOf("</think>");g!==-1&&(o=o.substring(0,g)+o.substring(g+8))}}return o}}class Wf{static estimateTokens(i){if(!i||i.length===0)return 0;const o=i.trim().replace(/\s+/g," "),c=Math.ceil(o.length/4);return Math.max(1,c)}static estimateMessagesTokens(i){let o=0;for(const c of i)o+=this.estimateTokens(c.content),o+=4;return o+=2,o}static createEstimatedUsage(i,o){return{inputTokens:this.estimateMessagesTokens(i),outputTokens:this.estimateTokens(o)}}}class ne extends Error{code;retryable;statusCode;constructor(i,o,c=!0,d){super(i),this.name="AIServiceError",this.code=o,this.retryable=c,this.statusCode=d}}class Ne{static MAX_RETRIES=3;static isAnthropicAPI(i){return i.includes("api.anthropic.com")}static transformUrlForProxy(i,o){if(this.isAnthropicAPI(i))return`/api/anthropic${o}`;if(i.includes("api.openai.com"))return`/api/openai${o}`;const c=i.endsWith("/")?i.slice(0,-1):i;if(c.endsWith("/v1")&&o.startsWith("/v1/")){const f=o.substring(3);return`${c}${f}`}const d=o.startsWith("/")?o:`/${o}`;return`${c}${d}`}static convertToAnthropicMessages(i){const o=i.find(d=>d.role==="system"),c=i.filter(d=>d.role!=="system");return{system:o?.content,messages:c.map(d=>({role:d.role,content:d.content}))}}static getHeaders(i,o){const c={"Content-Type":"application/json","User-Agent":"AI-CYOA-Game/1.0"};return o.includes("api.anthropic.com")?(c["x-api-key"]=i.apiKey,c["anthropic-version"]="2023-06-01"):c.Authorization=`Bearer ${i.apiKey}`,c}static async chatCompletionStream(i,o,c,d={}){const f=this.isAnthropicAPI(i.baseUrl),h=i.baseUrl.includes("nano-gpt.com");let g;f?g="/v1/messages":h?g="/chat/completions":g="/v1/chat/completions";const p=this.transformUrlForProxy(i.baseUrl,g),y=this.getHeaders(i,i.baseUrl);y.Accept="text/event-stream";let S;if(f){const{system:N,messages:A}=this.convertToAnthropicMessages(o);S={model:i.model,messages:A,max_tokens:d.maxTokens??1e3,temperature:d.temperature??.7,stream:!0},N&&(S.system=N)}else S={model:i.model,messages:o,stream:!0,temperature:d.temperature??.7,max_tokens:d.maxTokens??1e3,top_p:1,frequency_penalty:0,presence_penalty:0},i.baseUrl.includes("nano-gpt.com")&&(i.enableReasoning===!0?S.reasoning={}:S.reasoning={exclude:!0});try{const N=performance.now();let A;const B=await fetch(p,{method:"POST",headers:y,body:JSON.stringify(S)});if(!B.ok)throw await this.handleErrorResponse(B);if(!B.body)throw new ne("No response body received","API_ERROR");const Y=B.body.getReader(),q=new TextDecoder;let K="",le="",ae;const Q=Pa.createStreamingProcessor();let $="";for(;;){const{done:O,value:D}=await Y.read();if(O)break;le+=q.decode(D,{stream:!0});const G=le.split(`
`);le=G.pop()||"";for(const ie of G){const re=ie.trim();if(!(!re||re==="data: [DONE]")&&re.startsWith("data: "))try{const Be=re.slice(6),Z=JSON.parse(Be);let de="";if(f)Z.type==="content_block_delta"&&Z.delta?.text&&(de=Z.delta.text),(Z.type==="message_delta"||Z.type==="message_stop")&&Z.usage&&(ae={inputTokens:Z.usage.input_tokens||0,outputTokens:Z.usage.output_tokens||0});else{const C=Z.choices?.[0]?.delta,H=C?.content,V=C?.reasoning;if(H&&(de=H),V&&(A===void 0&&(A=performance.now()),$+=V,d.onThinkingChunk&&d.onThinkingChunk(V)),Z.usage&&(ae={inputTokens:Z.usage.prompt_tokens||0,outputTokens:Z.usage.completion_tokens||0}),Z.choices?.[0]?.usage){const se=Z.choices[0].usage;ae={inputTokens:se.prompt_tokens||0,outputTokens:se.completion_tokens||0}}}if(de){A===void 0&&(A=performance.now()),K+=de;const C=Q.processChunk(de);C.thinkingChunk&&d.onThinkingChunk&&d.onThinkingChunk(C.thinkingChunk),C.displayChunk&&c(C.displayChunk)}}catch{}}}const{thinkingContent:Ce}=Q.getState(),be=$||Ce,X=A!==void 0?A-N:void 0;if(!ae&&K){const{cleanedResponse:O}=Pa.parseThinkingResponse(K);ae=Wf.createEstimatedUsage(o,O)}return{response:K,thinkingContent:be,ttfs:X,tokenUsage:ae,modelName:i.model}}catch(N){if(N instanceof ne)throw N;if(N instanceof TypeError&&N.message.includes("fetch"))throw new ne("Network error: Unable to connect to AI service","NETWORK_ERROR");const A=N instanceof Error?N.message:"Unknown error";throw new ne(`Unexpected error: ${A}`,"API_ERROR")}}static async chatCompletion(i,o,c={}){const d=this.isAnthropicAPI(i.baseUrl),f=i.baseUrl.includes("nano-gpt.com");let h;d?h="/v1/messages":f?h="/chat/completions":h="/v1/chat/completions";const g=this.transformUrlForProxy(i.baseUrl,h),p=this.getHeaders(i,i.baseUrl);p.Accept="application/json";let y;if(d){const{system:S,messages:N}=this.convertToAnthropicMessages(o);y={model:i.model,messages:N,max_tokens:c.maxTokens??1e3,temperature:c.temperature??.7},S&&(y.system=S)}else y={model:i.model,messages:o,stream:c.stream??!1,temperature:c.temperature??.7,max_tokens:c.maxTokens??1e3,top_p:1,frequency_penalty:0,presence_penalty:0,cache_control:{enabled:!1,ttl:"5m"}},i.baseUrl.includes("nano-gpt.com")&&(i.enableReasoning===!0?y.reasoning={}:y.reasoning={exclude:!0});try{const S=await fetch(g,{method:"POST",headers:p,body:JSON.stringify(y)});if(!S.ok)throw await this.handleErrorResponse(S);const N=await S.json();if(N&&typeof N=="object"&&"error"in N){const K=N.error;let le="API returned an error";if(K&&typeof K=="object"){const ae=["message","detail","description","error"];for(const Q of ae)if(Q in K&&typeof K[Q]=="string"){le=K[Q];break}if(le==="API returned an error")try{le=`API error: ${JSON.stringify(K)}`}catch{le="API returned an unreadable error"}}else typeof K=="string"&&(le=K);throw new ne(le,"API_ERROR")}const{response:A,tokenUsage:B}=this.parseChatCompletionResponse(N,d),{cleanedResponse:Y}=Pa.parseThinkingResponse(A),q=B||Wf.createEstimatedUsage(o,Y);return{response:Y,tokenUsage:q,modelName:i.model}}catch(S){if(S instanceof ne)throw S;if(S instanceof TypeError&&S.message.includes("fetch"))throw new ne("Network error: Unable to connect to AI service","NETWORK_ERROR");if(S instanceof Error&&S.name==="AbortError")throw new ne("Request timeout: AI service took too long to respond","TIMEOUT_ERROR");const N=S instanceof Error?S.message:"Unknown error";throw new ne(`Unexpected error: ${N}`,"API_ERROR")}}static async chatCompletionWithRetry(i,o,c={}){const d=c.maxRetries??this.MAX_RETRIES;let f;for(let h=1;h<=d;h++)try{return await this.chatCompletion(i,o,c)}catch(g){const p=g instanceof Error?g.message:"Unknown error";if(f=g instanceof ne?g:new ne(`Attempt ${h} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(h===d)break;await this.delay(Math.pow(2,h-1)*1e3)}throw f}static async testConnection(i){try{const o=[{role:"user",content:"Hello"}];return await this.chatCompletion(i,o,{maxTokens:10}),{success:!0}}catch(o){return{success:!1,error:o instanceof ne?o.message:"Unknown connection error"}}}static async handleErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 401:c="AUTH_ERROR",d=!1,o="Invalid API key or unauthorized access";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check your API key permissions";break;case 404:c="API_ERROR",d=!1,o="API endpoint not found - check your base URL";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Server error - please try again later";break}return new ne(o,c,d,i.status)}static parseChatCompletionResponse(i,o=!1){try{if(o){if(!i||typeof i!="object"||!("content"in i)||!Array.isArray(i.content))throw new Error("Invalid Anthropic response format: expected content array");const y=i,S=y.content;if(S.length===0)throw new Error("No content blocks returned from Anthropic");let N="";for(const B of S)B&&typeof B=="object"&&"text"in B&&typeof B.text=="string"&&(N+=B.text);if(!N)throw new Error("No text content found in Anthropic response");const A=y.usage?{inputTokens:y.usage.input_tokens||0,outputTokens:y.usage.output_tokens||0}:void 0;return{response:N.trim(),tokenUsage:A}}if(!i||typeof i!="object"||!("choices"in i)||!Array.isArray(i.choices)){if(i&&typeof i=="object"&&"content"in i&&typeof i.content=="string")return{response:i.content.trim()};if(typeof i=="string")return{response:i.trim()};if(i&&typeof i=="object"){const y=this.extractTextFromUnknownFormat(i);if(y)return{response:y.trim()}}throw new Error(`Invalid response format: expected choices array. Got: ${typeof i}`)}const c=i,d=c.choices;if(d.length===0)throw new Error("No choices returned from AI service");const f=d[0];if(!f||typeof f!="object"||!("message"in f))throw new Error("Invalid choice format: expected message object");const h=f.message;if(!h||typeof h!="object"||!("content"in h))throw new Error("Invalid message format: expected content string");const g=h.content;if(typeof g!="string")throw new Error("Invalid content format: expected string");const p=c.usage?{inputTokens:c.usage.prompt_tokens||0,outputTokens:c.usage.completion_tokens||0}:void 0;return{response:g.trim(),tokenUsage:p}}catch(c){const d=c instanceof Error?c.message:"Unknown parsing error";throw new ne(`Failed to parse AI response: ${d}`,"PARSE_ERROR",!1)}}static extractTextFromUnknownFormat(i){if(!i||typeof i!="object")return null;const o=i,c=["text","content","message","response","output","result"];for(const d of c)if(d in o&&typeof o[d]=="string")return o[d];for(const d of Object.values(o))if(d&&typeof d=="object"){const f=this.extractTextFromUnknownFormat(d);if(f)return f}return null}static delay(i){return new Promise(o=>setTimeout(o,i))}static createSystemMessage(i){return{role:"system",content:i}}static createUserMessage(i){return{role:"user",content:i}}static createAssistantMessage(i){return{role:"assistant",content:i}}}class Ft{static STORY_SYSTEM_PROMPT=`You are a creative storyteller for an interactive Choose Your Own Adventure game. Your role is to:

1. Create engaging, immersive narratives with vivid descriptions
2. Maintain narrative continuity and consistency
3. Keep responses SHORT, CONCISE, but descriptive (2 paragraphs max)
4. Always end with a clear situation that requires a decision
5. NEVER include choices or options in the STORY section

Guidelines:
- Write in second person ("You...")
- Each story segment should advance the plot meaningfully
- The STORY section should contain ONLY narrative text
- The SCENE section should contain ONLY visual scene description
- DO NOT include "Do you:", choices, or options in the STORY section
- Choices will be generated separately in a different step`;static generateInitialStoryPrompt(i=!0){const f=`Create the opening scene for a new Choose Your Own Adventure story. 

Requirements:
- Set up an intriguing premise and setting
- Introduce the main character (the player)
- Create an engaging hook that draws the reader in
- End with a situation that requires a decision${i?`
- Include a brief scene description for potential image generation`:`
- Do NOT include any scene descriptions or SCENE: sections`}

Format your response as:
STORY: [The narrative text - NO choices, NO "Do you:" text, ONLY story narrative]${i?`
SCENE: [Brief visual description of the current scene for image generation]`:""}
CHOICES: [3-4 numbered choices, each on a new line]

IMPORTANT: The STORY section must contain ONLY narrative text. Do not include any choices, options, or "Do you:" prompts in the STORY section. Put all choices in the separate CHOICES section.${i?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide STORY and CHOICES sections.`}`;return Pt.truncateToTokenLimit(f)}static generateContinuationPrompt(i,o,c=!0){const{contextText:d,previousSegment:f,previousAction:h,segmentsIncluded:g,choicesIncluded:p}=Pt.buildEnhancedContext(o.storyHistory,o.choiceHistory,o.currentScene,5500),y=c?`
- Include a scene description for image generation`:`
- Do NOT include any scene descriptions or SCENE: sections`,S=c?`
SCENE: [Brief visual description of the new scene for image generation]`:"",N=c?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide STORY and CHOICES sections.`,A=`Continue the story based on the player's choice: "${i.text}"

IMMEDIATE CONTEXT:
Previous segment: ${f||"None"}
Previous action: ${h||"None"}
Current scene: ${o.currentScene}

STORY HISTORY (${g} segments, ${p} actions included):
${d}

Requirements:
- Show the consequences of the player's choice
- Advance the story meaningfully from the previous segment
- Maintain consistency with previous events and the established narrative
- Create a new situation requiring a decision${y}

Format your response as:
STORY: [The narrative text showing consequences and new developments - NO choices, NO "Do you:" text]${S}
CHOICES: [3-4 numbered choices, each on a new line]

IMPORTANT: The STORY section must contain ONLY narrative text. Do not include any choices, options, or "Do you:" prompts in the STORY section. Put all choices in the separate CHOICES section.${N}`;return Pt.truncateToTokenLimit(A)}static generateChoicesPrompt(i,o){return`Based on the current story situation, generate 3-4 meaningful choices for the player.

Current story: ${i.substring(0,500)}...
Current scene: ${o}

Requirements:
- Each choice should lead to different story outcomes
- Choices should be specific and actionable
- Avoid generic options like "Go left" or "Go right"
- Make choices feel consequential and interesting
- Keep each choice to 1-2 sentences maximum

Format your response as a numbered list:
1. [First choice option]
2. [Second choice option]
3. [Third choice option]
4. [Fourth choice option (if applicable)]`}}class ba{static async generateInitialStoryStream(i,o,c,d){const f=i.enableImageGeneration!==!1,h=[Ne.createSystemMessage(Ft.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Ft.generateInitialStoryPrompt(f))];try{const{response:g,thinkingContent:p,ttfs:y,tokenUsage:S,modelName:N}=await Ne.chatCompletionStream(i,h,o,{temperature:c?.temperature??.8,maxTokens:2048,onThinkingChunk:d});return{...this.parseStoryResponse(g,f),thinkingContent:p,ttfs:y,tokenUsage:S,modelName:N}}catch(g){throw g instanceof ne?g:new ne(`Failed to generate initial story: ${g instanceof Error?g.message:"Unknown error"}`,"API_ERROR")}}static async generateInitialStory(i,o){const c=i.enableImageGeneration!==!1,d=[Ne.createSystemMessage(Ft.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Ft.generateInitialStoryPrompt(c))];try{const{response:f,tokenUsage:h,modelName:g}=await Ne.chatCompletionWithRetry(i,d,{temperature:o?.temperature??.8,maxTokens:2048});return{...this.parseStoryResponse(f,c),tokenUsage:h,modelName:g}}catch(f){throw f instanceof ne?f:new ne(`Failed to generate initial story: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async continueStoryStream(i,o,c,d,f,h){const g=i.enableImageGeneration!==!1,p=[Ne.createSystemMessage(Ft.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Ft.generateContinuationPrompt(o,c,g))];try{const{response:y,thinkingContent:S,ttfs:N,tokenUsage:A,modelName:B}=await Ne.chatCompletionStream(i,p,d,{temperature:f?.temperature??.8,maxTokens:2048,onThinkingChunk:h}),Y=this.parseStoryResponse(y,g);if(Y.choices.length===0){const q=await this.generateChoices(i,Y.text,Y.sceneDescription,f);Y.choices=q}return{...Y,thinkingContent:S,ttfs:N,tokenUsage:A,modelName:B}}catch(y){throw y instanceof ne?y:new ne(`Failed to continue story: ${y instanceof Error?y.message:"Unknown error"}`,"API_ERROR")}}static async continueStory(i,o,c,d){const f=i.enableImageGeneration!==!1,h=[Ne.createSystemMessage(Ft.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Ft.generateContinuationPrompt(o,c,f))];try{const{response:g,tokenUsage:p,modelName:y}=await Ne.chatCompletionWithRetry(i,h,{temperature:d?.temperature??.8,maxTokens:2048}),S=this.parseStoryResponse(g,f);if(S.choices.length===0){const N=await this.generateChoices(i,S.text,S.sceneDescription,d);S.choices=N}return{...S,tokenUsage:p,modelName:y}}catch(g){throw g instanceof ne?g:new ne(`Failed to continue story: ${g instanceof Error?g.message:"Unknown error"}`,"API_ERROR")}}static async generateChoices(i,o,c,d){const f=[Ne.createSystemMessage(Ft.STORY_SYSTEM_PROMPT),Ne.createUserMessage(Ft.generateChoicesPrompt(o,c))];try{const{response:h}=await Ne.chatCompletionWithRetry(i,f,{temperature:d?.temperature??.7,maxTokens:400});return this.parseChoicesResponse(h)}catch(h){throw h instanceof ne?h:new ne(`Failed to generate choices: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static async generateInitialStoryWithRetry(i,o=3,c){let d;for(let f=1;f<=o;f++)try{const h=await this.generateInitialStory(i,c);if(h.choices.length===0){const g=await this.generateChoices(i,h.text,h.sceneDescription,c);h.choices=g}return h}catch(h){const g=h instanceof Error?h.message:"Unknown error";if(d=h instanceof ne?h:new ne(`Attempt ${f} failed: ${g}`,"API_ERROR"),!d.retryable)throw d;if(f===o)break;await this.delay(Math.pow(2,f-1)*1e3)}throw d}static parseStoryResponse(i,o=!0){try{const{cleanedResponse:c}=Pa.parseThinkingResponse(i),d=c.match(/STORY:\s*(.*?)(?=\n\s*\*?\*?SCENE:?|\n\s*\*?\*?CHOICES:?|$)/is),f=c.match(/\*?\*?SCENE:\s*(.*?)(?=\n\s*\*?\*?CHOICES:?|$)/is),h=c.match(/\*?\*?CHOICES:?\*?\*?\s*(.*?)$/is);if(!d||!d[1]){const S=this.tryFallbackParsing(c);if(S)return S;let N="No story content found in response";throw i.includes("<think>")&&!i.includes("</think>")?N="AI response appears to be incomplete (truncated thinking). Try again or check your token limits.":i.length<50?N="AI response too short. The model may not be responding properly.":i.includes("STORY:")||(N="AI response missing expected format. The model may not be following instructions."),new Error(N)}const g=d[1].trim(),p=o&&f?f[1].trim():"A mysterious scene unfolds";if(g.length<50)throw new Error("Story content too short");let y=[];return h&&h[1]&&(y=this.parseChoicesFromText(h[1].trim())),{id:this.generateId(),text:g,sceneDescription:p,choices:y}}catch(c){throw new ne(`Failed to parse story response: ${c instanceof Error?c.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static parseChoicesResponse(i){try{const o=[],c=i.split(`
`).filter(d=>d.trim());for(const d of c){const f=d.match(/^\d+\.\s*(.+)$/);if(f&&f[1]){const h=f[1].trim();h.length>10&&o.push({id:this.generateId(),text:h})}}if(o.length<2)throw new Error("Not enough valid choices generated");return o.slice(0,4)}catch(o){throw new ne(`Failed to parse choices response: ${o instanceof Error?o.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static generateId(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}static parseChoicesFromText(i){const o=[],c=i.split(`
`).filter(d=>d.trim());for(const d of c){const f=d.trim(),h=f.match(/^\d+[.)]\s*(.+)$/);h&&h[1]?o.push({id:this.generateId(),text:h[1].trim()}):f.length>0&&o.push({id:this.generateId(),text:f})}return o}static tryFallbackParsing(i){try{const o=i.trim();if(o.length<20)return null;if(o.length>50&&!o.includes("STORY:")&&!o.includes("CHOICES:")&&!o.includes("CHOICES")&&!o.includes("**CHOICES"))return{id:this.generateId(),text:o,sceneDescription:"A mysterious scene unfolds",choices:[]};const c=o.split(`
`).filter(h=>h.trim()),d=[];let f=!1;for(const h of c){const g=h.trim();g&&!g.match(/^\d+\./)&&!g.match(/^\*?\*?(STORY|SCENE|CHOICES):?\*?\*?/i)&&!g.match(/^(Do you|What do you|Your options|Choose)/i)&&(d.push(g),f=!0)}if(f&&d.length>0){const h=d.join(" ").trim();if(h.length>50)return{id:this.generateId(),text:h,sceneDescription:"A mysterious scene unfolds",choices:[]}}if(o.length>20){const h=[/You\s+(?:are|find|see|hear|feel|walk|run|stand|sit|look)\s+.*$/im,/The\s+.*$/im,/A\s+.*$/im,/As\s+you\s+.*$/im];for(const g of h){const p=o.match(g);if(p&&p[0]&&p[0].length>50)return{id:this.generateId(),text:p[0].trim(),sceneDescription:"A mysterious scene unfolds",choices:[]}}}return null}catch{return null}}static delay(i){return new Promise(o=>setTimeout(o,i))}static validateStoryContext(i){return i&&Array.isArray(i.storyHistory)&&Array.isArray(i.choiceHistory)&&typeof i.currentScene=="string"&&i.currentScene.length>0}static createStoryContext(i,o,c){return{storyHistory:[...i],choiceHistory:[...o],currentScene:c}}static async regenerateInitialStoryStream(i,o,c,d){const f={temperature:Math.min((c?.temperature??.7)+.1,1),minP:c?.minP??.05,repetitionPenalty:c?.repetitionPenalty??1.1,enableStreaming:c?.enableStreaming};return this.generateInitialStoryStream(i,o,f,d)}static async regenerateInitialStory(i,o){const c={temperature:Math.min((o?.temperature??.7)+.1,1),minP:o?.minP??.05,repetitionPenalty:o?.repetitionPenalty??1.1,enableStreaming:o?.enableStreaming};return this.generateInitialStory(i,c)}static async regenerateStoryStream(i,o,c,d,f,h){const g={temperature:Math.min((f?.temperature??.7)+.1,1),minP:f?.minP??.05,repetitionPenalty:f?.repetitionPenalty??1.1,enableStreaming:f?.enableStreaming};return this.continueStoryStream(i,o,c,d,g,h)}static async regenerateStory(i,o,c,d){const f={temperature:Math.min((d?.temperature??.7)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.continueStory(i,o,c,f)}static async testStoryGeneration(i){try{const o=await this.generateInitialStory(i);return!o.text||o.text.length<50?{success:!1,error:"Generated story too short or empty"}:{success:!0}}catch(o){return{success:!1,error:o instanceof ne?o.message:"Unknown story generation error"}}}}class Fa{static CUSTOM_STORY_SYSTEM_PROMPT=`You are a creative storyteller for an interactive Choose Your Own Adventure game in CUSTOM MODE. Your role is to:

1. Continue stories based on user-provided scene descriptions and actions
2. Maintain narrative continuity and consistency
3. Keep responses SHORT, CONCISE, but descriptive (2 paragraphs max)
4. NEVER include choices or options in your response - the user provides their own actions

Guidelines:
- Write in second person ("You...")
- Each story segment should advance the plot meaningfully based on the user's input
- The STORY section should contain ONLY narrative text
- DO NOT include "Do you:", choices, options, or questions in the STORY section
- The user will provide their own custom actions`;static generateCustomInitialStoryPrompt(i,o=!0){const f=`The user has provided this initial setup for their custom adventure:
"${i}"

Begin this interactive story by:
1. Expanding on the user's setup, while avoiding purple prose
2. Creating an engaging opening situation
3. Establishing the tone and setting
4. Drawing the reader into the narrative

IMPORTANT: Do NOT include any choices or options. The user will provide their own actions.

Format your response as:
STORY: [The narrative opening - NO choices, NO "Do you:" text, ONLY story narrative]${o?`
SCENE: [Brief visual description of the current scene for image generation]`:""}${o?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide the STORY section.`}`;return Pt.truncateToTokenLimit(f)}static generateCustomContinuationPrompt(i,o,c=!0){const{contextText:d,previousSegment:f,previousAction:h,segmentsIncluded:g,choicesIncluded:p}=Pt.buildEnhancedContext(o.storyHistory,o.choiceHistory,o.currentScene,6e3),y=c?`
SCENE: [Brief visual description of the new scene for image generation]`:"",S=c?"":`

IMPORTANT: Do NOT include a SCENE section in your response. Only provide the STORY section.`,N=`The user chose to: "${i}"

IMMEDIATE CONTEXT:
Previous segment: ${f||"None"}
Previous action: ${h||"None"}
Current scene: ${o.currentScene}

STORY HISTORY (${g} segments, ${p} actions included):
${d}

Continue the story based on this action by:
1. Showing the immediate consequences of the user's action
2. Advancing the narrative meaningfully from the previous segment
3. Creating a new situation that flows naturally from their choice
4. Maintaining consistency with previous events and the established narrative

IMPORTANT: Do NOT include any choices or options. The user will provide their own next action.

Format your response as:
STORY: [The narrative continuation - NO choices, NO "Do you:" text, ONLY story narrative]${y}${S}`;return Pt.truncateToTokenLimit(N)}}class va{static async generateCustomInitialStoryStream(i,o,c,d,f){const h=i.enableImageGeneration!==!1,g=[Ne.createSystemMessage(Fa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Fa.generateCustomInitialStoryPrompt(o,h))];try{const{response:p,thinkingContent:y,ttfs:S,tokenUsage:N,modelName:A}=await Ne.chatCompletionStream(i,g,c,{temperature:d?.temperature??.8,maxTokens:2048,onThinkingChunk:f});return{...this.parseCustomStoryResponse(p,h),thinkingContent:y,ttfs:S,tokenUsage:N,modelName:A}}catch(p){throw p instanceof ne?p:new ne(`Failed to generate custom initial story: ${p instanceof Error?p.message:"Unknown error"}`,"API_ERROR")}}static async generateCustomInitialStory(i,o,c){const d=i.enableImageGeneration!==!1,f=[Ne.createSystemMessage(Fa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Fa.generateCustomInitialStoryPrompt(o,d))];try{const{response:h,tokenUsage:g,modelName:p}=await Ne.chatCompletionWithRetry(i,f,{temperature:c?.temperature??.8,maxTokens:2048});return{...this.parseCustomStoryResponse(h,d),tokenUsage:g,modelName:p}}catch(h){throw h instanceof ne?h:new ne(`Failed to generate custom initial story: ${h instanceof Error?h.message:"Unknown error"}`,"API_ERROR")}}static async continueCustomStoryStream(i,o,c,d,f,h){const g=i.enableImageGeneration!==!1,p=[Ne.createSystemMessage(Fa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Fa.generateCustomContinuationPrompt(o,c,g))];try{const{response:y,thinkingContent:S,ttfs:N,tokenUsage:A,modelName:B}=await Ne.chatCompletionStream(i,p,d,{temperature:f?.temperature??.8,maxTokens:2048,onThinkingChunk:h});return{...this.parseCustomStoryResponse(y,g),thinkingContent:S,ttfs:N,tokenUsage:A,modelName:B}}catch(y){throw y instanceof ne?y:new ne(`Failed to continue custom story: ${y instanceof Error?y.message:"Unknown error"}`,"API_ERROR")}}static async continueCustomStory(i,o,c,d){const f=i.enableImageGeneration!==!1,h=[Ne.createSystemMessage(Fa.CUSTOM_STORY_SYSTEM_PROMPT),Ne.createUserMessage(Fa.generateCustomContinuationPrompt(o,c,f))];try{const{response:g,tokenUsage:p,modelName:y}=await Ne.chatCompletionWithRetry(i,h,{temperature:d?.temperature??.8,maxTokens:2048});return{...this.parseCustomStoryResponse(g,f),tokenUsage:p,modelName:y}}catch(g){throw g instanceof ne?g:new ne(`Failed to continue custom story: ${g instanceof Error?g.message:"Unknown error"}`,"API_ERROR")}}static parseCustomStoryResponse(i,o=!0){try{const{cleanedResponse:c}=Pa.parseThinkingResponse(i),d=c.match(/STORY:\s*(.*?)(?=SCENE:|$)/s),f=c.match(/SCENE:\s*(.*?)$/s);if(!d||!d[1]){const p=this.tryFallbackParsing(c);if(p)return p;throw new Error("No story content found in response")}const h=d[1].trim(),g=o&&f?f[1].trim():"A mysterious scene unfolds";if(h.length<50)throw new Error("Story content too short");return{id:this.generateId(),text:h,sceneDescription:g,choices:[]}}catch(c){throw new ne(`Failed to parse custom story response: ${c instanceof Error?c.message:"Unknown error"}`,"PARSE_ERROR",!1)}}static generateId(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}static validateStoryContext(i){return i&&Array.isArray(i.storyHistory)&&Array.isArray(i.choiceHistory)&&typeof i.currentScene=="string"&&i.currentScene.length>0}static createStoryContext(i,o,c){return{storyHistory:[...i],choiceHistory:[...o],currentScene:c}}static async regenerateCustomInitialStoryStream(i,o,c,d,f){const h={temperature:Math.min((d?.temperature??.8)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.generateCustomInitialStoryStream(i,o,c,h,f)}static async regenerateCustomInitialStory(i,o,c){const d={temperature:Math.min((c?.temperature??.8)+.1,1),minP:c?.minP??.05,repetitionPenalty:c?.repetitionPenalty??1.1,enableStreaming:c?.enableStreaming};return this.generateCustomInitialStory(i,o,d)}static async regenerateCustomStoryStream(i,o,c,d,f,h){const g={temperature:Math.min((f?.temperature??.8)+.1,1),minP:f?.minP??.05,repetitionPenalty:f?.repetitionPenalty??1.1,enableStreaming:f?.enableStreaming};return this.continueCustomStoryStream(i,o,c,d,g,h)}static async regenerateCustomStory(i,o,c,d){const f={temperature:Math.min((d?.temperature??.8)+.1,1),minP:d?.minP??.05,repetitionPenalty:d?.repetitionPenalty??1.1,enableStreaming:d?.enableStreaming};return this.continueCustomStory(i,o,c,f)}static tryFallbackParsing(i){try{const o=i.trim();if(o.length>50&&!o.includes("STORY:")&&!o.includes("SCENE:"))return{id:this.generateId(),text:o,sceneDescription:"A mysterious scene unfolds",choices:[]};const c=o.split(`
`).filter(h=>h.trim()),d=[];let f=!1;for(const h of c){const g=h.trim();g&&(g.match(/^(STORY|SCENE):/i)||(d.push(g),f=!0))}if(f&&d.length>0){const h=d.join(" ").trim();if(h.length>50)return{id:this.generateId(),text:h,sceneDescription:"A mysterious scene unfolds",choices:[]}}return null}catch{return null}}static async testCustomStoryGeneration(i,o="You find yourself in a mysterious forest at twilight"){try{const c=await this.generateCustomInitialStory(i,o);return!c.text||c.text.length<50?{success:!1,error:"Generated story too short or empty"}:c.choices.length!==0?{success:!1,error:"Custom story should not include choices"}:{success:!0}}catch(c){return{success:!1,error:c instanceof ne?c.message:"Unknown custom story generation error"}}}}class Vo{static IMAGE_SYSTEM_PROMPT=`You are an AI assistant that creates detailed image prompts for DALL-E style image generation. Your role is to:

1. Create vivid, detailed visual descriptions
2. Focus on atmosphere, lighting, and composition
3. Include artistic style and mood descriptors
4. Keep prompts concise but descriptive (under 200 words)
5. Avoid text or writing in images

Guidelines:
- Use descriptive adjectives for mood and atmosphere
- Include lighting conditions (dramatic, soft, golden hour, etc.)
- Specify artistic style when appropriate (realistic, fantasy art, etc.)
- Focus on visual elements that enhance the story mood
- Avoid including people's faces in detail to maintain mystery`;static generateScenePrompt(i,o){let c="";if(o){const d=["Do you:","What do you do?","Your options are:","Choose your action:","You can:","Your choices:","1. **","2. **","3. **","4. **"];let f=o;for(const h of d){const g=f.indexOf(h);if(g!==-1){f=f.substring(0,g).trim();break}}f.length>50&&(c=`

Narrative context: ${f.substring(0,200)}...`)}return`Create a detailed image prompt for this scene: "${i}"${c}

Requirements:
- Focus on the environment, atmosphere, and mood
- Include lighting and weather conditions if relevant
- Specify artistic style (realistic, fantasy, cinematic, etc.)
- Keep the prompt under 200 words
- Make it visually compelling and atmospheric
- DO NOT include any choices, options, or decision text
- Focus purely on the visual scene description

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`}static generateItemPrompt(i,o){const c=o?`

Context: ${o.substring(0,200)}...`:"";return`Create a detailed image prompt for this item or character: "${i}"${c}

Requirements:
- Focus on visual details, textures, and materials
- Include appropriate lighting and background
- Specify artistic style and mood
- Keep the prompt under 150 words
- Make it visually interesting and detailed

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`}}class Bg{static IMAGE_REQUEST_TIMEOUT=6e4;static MAX_RETRIES=2;static async generateSceneImage(i,o,c){try{const d=await this.generateCleanImagePrompt(i,o);return await this.generateImage(i,d)}catch(d){throw d instanceof ne?d:new ne(`Failed to generate scene image: ${d instanceof Error?d.message:"Unknown error"}`,"API_ERROR")}}static async generateItemImage(i,o,c){try{const d=await this.generateItemImagePrompt(i,o,c);return await this.generateImage(i,d)}catch(d){throw d instanceof ne?d:new ne(`Failed to generate item image: ${d instanceof Error?d.message:"Unknown error"}`,"API_ERROR")}}static async generateSceneImageWithRetry(i,o,c,d=this.MAX_RETRIES){let f;for(let h=1;h<=d;h++)try{return await this.generateSceneImage(i,o,c)}catch(g){const p=g instanceof Error?g.message:"Unknown error";if(f=g instanceof ne?g:new ne(`Attempt ${h} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(h===d)break;await this.delay(Math.pow(2,h)*2e3)}throw f}static async generateItemImageWithRetry(i,o,c,d=this.MAX_RETRIES){let f;for(let h=1;h<=d;h++)try{return await this.generateItemImage(i,o,c)}catch(g){const p=g instanceof Error?g.message:"Unknown error";if(f=g instanceof ne?g:new ne(`Attempt ${h} failed: ${p}`,"API_ERROR"),!f.retryable)throw f;if(h===d)break;await this.delay(Math.pow(2,h)*2e3)}throw f}static async generateCleanImagePrompt(i,o){const c=`Create a detailed image prompt for this scene: "${o}"

Requirements:
- Focus on the environment, atmosphere, and mood
- Include lighting and weather conditions if relevant
- Specify artistic style (realistic, fantasy, cinematic, etc.)
- Keep the prompt under 200 words
- Make it visually compelling and atmospheric
- DO NOT include any choices, options, or decision text
- Focus purely on the visual scene description

Format your response as a single paragraph image prompt suitable for DALL-E or similar image generation models.`,d=[Ne.createSystemMessage(Vo.IMAGE_SYSTEM_PROMPT),Ne.createUserMessage(c)];try{const{response:f}=await Ne.chatCompletionWithRetry(i,d,{temperature:.8,maxTokens:300});return f.trim()}catch(f){throw f instanceof ne?f:new ne(`Failed to generate image prompt: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async generateItemImagePrompt(i,o,c){const d=[Ne.createSystemMessage(Vo.IMAGE_SYSTEM_PROMPT),Ne.createUserMessage(Vo.generateItemPrompt(o,c))];try{const{response:f}=await Ne.chatCompletionWithRetry(i,d,{temperature:.8,maxTokens:250});return f.trim()}catch(f){throw f instanceof ne?f:new ne(`Failed to generate item image prompt: ${f instanceof Error?f.message:"Unknown error"}`,"API_ERROR")}}static async generateImage(i,o){const c=i.imageConfig?.apiKey||i.apiKey,d=i.imageConfig?.baseUrl||i.baseUrl,f=i.imageConfig?.provider||"openai",h=i.imageConfig?.model||i.model;let g,p,y;switch(f){case"nano-gpt":{g=`${d}/api/generate-image`,p={prompt:o,model:h,size:"1024x1024"},y={"Content-Type":"application/json","x-api-key":c};break}case"openai":default:{g=`${d}/images/generations`,p={prompt:o,model:h,n:1,size:"1024x1024",response_format:"url"},y={Authorization:`Bearer ${c}`,"Content-Type":"application/json"};break}}try{const S=await this.makeImageRequest(g,{method:"POST",headers:y,body:JSON.stringify(p),signal:AbortSignal.timeout(this.IMAGE_REQUEST_TIMEOUT)});if(!S.ok)throw await this.handleImageErrorResponse(S);const N=await S.json();return this.parseImageResponse(N,f)}catch(S){if(S instanceof ne)throw S;if(S instanceof TypeError&&S.message.includes("fetch"))throw new ne("Network error: Unable to connect to image generation service","NETWORK_ERROR");if(S instanceof Error&&S.name==="AbortError")throw new ne("Request timeout: Image generation took too long","TIMEOUT_ERROR");const N=S instanceof Error?S.message:"Unknown error";throw new ne(`Unexpected image generation error: ${N}`,"API_ERROR")}}static async makeImageRequest(i,o){try{return await fetch(i,o)}catch(c){throw c instanceof TypeError?new ne("Network error: Check your internet connection and image API endpoint","NETWORK_ERROR"):c}}static async handleImageErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 400:c="API_ERROR",d=!1,o="Invalid image generation request - check prompt content";break;case 401:c="AUTH_ERROR",d=!1,o="Invalid API key for image generation";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check image generation permissions";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded for image generation - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Image generation server error - please try again later";break}return new ne(o,c,d,i.status)}static parseImageResponse(i,o="openai"){try{if(!i||typeof i!="object")throw new Error("Invalid response format: expected object");let c;switch(o){case"nano-gpt":{const d=i;if("image"in d&&typeof d.image=="string")c=d.image;else if("imageDataUrl"in d&&typeof d.imageDataUrl=="string")c=d.imageDataUrl;else if("image_url"in d&&typeof d.image_url=="string")c=d.image_url;else if("url"in d&&typeof d.url=="string")c=d.url;else if("data"in d&&Array.isArray(d.data)&&d.data.length>0){const f=d.data[0];if(f&&typeof f=="object"&&f!==null){const h=f;if("url"in h&&typeof h.url=="string")c=h.url;else if("image"in h&&typeof h.image=="string")c=h.image;else if("imageDataUrl"in h&&typeof h.imageDataUrl=="string")c=h.imageDataUrl;else if("image_url"in h&&typeof h.image_url=="string")c=h.image_url;else if("b64_json"in h&&typeof h.b64_json=="string")c=`data:image/jpeg;base64,${h.b64_json}`;else throw new Error(`Invalid nano-gpt data item format: no image URL found. Available fields: ${Object.keys(h).join(", ")}`)}else throw new Error("Invalid nano-gpt response format: no image URL found")}else throw console.error("Available fields in nano-gpt response:",Object.keys(d)),new Error(`Invalid nano-gpt response format: no image URL found. Available fields: ${Object.keys(d).join(", ")}`);break}case"openai":default:{if(!("data"in i)||!Array.isArray(i.data))throw new Error("Invalid OpenAI response format: expected data array");const d=i.data;if(d.length===0)throw new Error("No images returned from OpenAI service");const f=d[0];if(!f||typeof f!="object"||!("url"in f))throw new Error("Invalid OpenAI image format: expected url property");c=f.url;break}}if(typeof c!="string"||!c.startsWith("http")&&!c.startsWith("data:"))throw new Error("Invalid image URL format: expected valid HTTP URL or data URL");return c}catch(c){const d=c instanceof Error?c.message:"Unknown parsing error";throw new ne(`Failed to parse ${o} image response: ${d}`,"PARSE_ERROR",!1)}}static async testImageGeneration(i){try{const o=await this.generateImage(i,"A simple test image of a peaceful landscape");return!o||!o.startsWith("http")?{success:!1,error:"Generated image URL is invalid"}:{success:!0}}catch(o){return{success:!1,error:o instanceof ne?o.message:"Unknown image generation error"}}}static getEffectiveImageConfig(i){return{apiKey:i.imageConfig?.apiKey||i.apiKey,baseUrl:i.imageConfig?.baseUrl||i.baseUrl,model:i.imageConfig?.model||i.model}}static delay(i){return new Promise(o=>setTimeout(o,i))}static validateImageParams(i){return typeof i=="string"&&i.trim().length>10&&i.length<1e3}static createFallbackImageUrl(i){return`https://via.placeholder.com/512x512/4a5568/ffffff?text=${encodeURIComponent(i.substring(0,50))}`}}const Et={AI_CONFIG:"cyoa_ai_config",APP_SETTINGS:"cyoa_app_settings",SAVED_GAMES:"cyoa_saved_games"},t0="1.0.0";class Ss{static encode(i){return btoa(i)}static decode(i){try{return atob(i)}catch{return i}}static setItem(i,o){try{localStorage.setItem(i,this.encode(o))}catch(c){throw console.error("Failed to save to localStorage:",c),new Error("Failed to save configuration")}}static getItem(i){try{const o=localStorage.getItem(i);return o?this.decode(o):null}catch(o){return console.error("Failed to read from localStorage:",o),null}}static removeItem(i){try{localStorage.removeItem(i)}catch(o){console.error("Failed to remove from localStorage:",o)}}}class ka{static saveConfig(i){try{const o=JSON.stringify(i);Ss.setItem(Et.AI_CONFIG,o)}catch(o){throw console.error("Failed to save AI config:",o),new Error("Failed to save AI configuration")}}static loadConfig(){try{const i=Ss.getItem(Et.AI_CONFIG);return i?JSON.parse(i):null}catch(i){return console.error("Failed to load AI config:",i),null}}static clearConfig(){Ss.removeItem(Et.AI_CONFIG)}static hasConfig(){return Ss.getItem(Et.AI_CONFIG)!==null}}class Yg{static serialize(i){try{const o={...i,createdAt:i.createdAt.toISOString(),lastUpdated:i.lastUpdated.toISOString(),version:t0};return JSON.stringify(o)}catch(o){throw console.error("Failed to serialize game state:",o),new Error("Failed to serialize game state")}}static deserialize(i){try{const o=JSON.parse(i);if(!this.validateGameState(o))throw new Error("Invalid game state format");return{...o,createdAt:new Date(o.createdAt),lastUpdated:new Date(o.lastUpdated),gameMode:o.gameMode||"standard"}}catch(o){throw console.error("Failed to deserialize game state:",o),new Error("Failed to deserialize game state")}}static validateGameState(i){if(!i||typeof i!="object")return!1;const o=i;if(!o.gameId||typeof o.gameId!="string"||!o.createdAt||!o.lastUpdated||!o.currentStory||typeof o.currentStory!="object"||!Array.isArray(o.storyHistory)||!Array.isArray(o.choiceHistory))return!1;const c=o.currentStory;if(!c.id||!c.text||!c.sceneDescription||!Array.isArray(c.choices))return!1;for(const d of c.choices){const f=d;if(!f.id||!f.text)return!1}return!0}}class Wa{static serialize(i){try{const o={...i,gameState:{...i.gameState,createdAt:i.gameState.createdAt.toISOString(),lastUpdated:i.gameState.lastUpdated.toISOString()},metadata:{...i.metadata,createdAt:i.metadata.createdAt.toISOString(),lastPlayed:i.metadata.lastPlayed.toISOString()},version:t0};return JSON.stringify(o)}catch(o){throw console.error("Failed to serialize saved game:",o),new Error("Failed to serialize saved game")}}static deserialize(i){try{const o=JSON.parse(i);if(!this.validateSavedGame(o))throw new Error("Invalid saved game format");return{...o,gameState:{...o.gameState,createdAt:new Date(o.gameState.createdAt),lastUpdated:new Date(o.gameState.lastUpdated),gameMode:o.gameState.gameMode||"standard",customScene:o.gameState.customScene},metadata:{...o.metadata,createdAt:new Date(o.metadata.createdAt),lastPlayed:new Date(o.metadata.lastPlayed),gameMode:o.metadata.gameMode||o.gameState.gameMode||"standard"}}}catch(o){throw console.error("Failed to deserialize saved game:",o),new Error("Failed to deserialize saved game")}}static validateSavedGame(i){if(!i||typeof i!="object")return!1;const o=i;if(!o.gameId||typeof o.gameId!="string"||!o.gameState||typeof o.gameState!="object"||!o.metadata||typeof o.metadata!="object")return!1;const c=o.metadata;return!c.title||typeof c.title!="string"||!c.createdAt||!c.lastPlayed||typeof c.choiceCount!="number"?!1:Yg.validateGameState(o.gameState)}}class At{static MAX_SAVED_GAMES=10;static MAX_HISTORY_ITEMS=20;static compressGameState(i){return{...i,gameState:{...i.gameState,storyHistory:i.gameState.storyHistory.slice(-this.MAX_HISTORY_ITEMS).map(o=>({...o,imageUrl:void 0})),choiceHistory:i.gameState.choiceHistory.slice(-this.MAX_HISTORY_ITEMS)}}}static saveGame(i){try{const o=this.compressGameState(i),c=Wa.serialize(o);Wa.deserialize(c);const f=this.loadAllGames().filter(p=>p.gameId!==i.gameId);f.push(o),f.sort((p,y)=>new Date(y.metadata.lastPlayed).getTime()-new Date(p.metadata.lastPlayed).getTime());const h=f.slice(0,this.MAX_SAVED_GAMES),g=JSON.stringify(h.map(p=>Wa.serialize(p)));try{localStorage.setItem(Et.SAVED_GAMES,g)}catch(p){if(p instanceof DOMException&&p.name==="QuotaExceededError"){console.warn("Storage quota exceeded, removing old saves...");for(let y=h.length-1;y>=1;y--)try{const S=h.slice(0,y),N=JSON.stringify(S.map(A=>Wa.serialize(A)));localStorage.setItem(Et.SAVED_GAMES,N),console.log(`Successfully saved with ${y} games (removed ${h.length-y} old saves)`);return}catch{continue}throw new Error("Storage quota exceeded even after removing old saves")}throw p}}catch(o){throw console.error("Failed to save game:",o),new Error("Failed to save game: "+(o instanceof Error?o.message:"Unknown error"))}}static loadAllGames(){try{const i=localStorage.getItem(Et.SAVED_GAMES);if(!i)return[];const o=JSON.parse(i),c=[],d=[];for(const f of o)try{const h=Wa.deserialize(f);c.push(h)}catch(h){console.warn("Corrupted game data found, skipping:",h);try{const g=JSON.parse(f);g.gameId&&d.push(g.gameId)}catch{}}return d.length>0&&(console.warn(`Found ${d.length} corrupted games, cleaning up storage`),this.cleanupCorruptedGames(c)),c}catch(i){return console.error("Failed to load saved games:",i),this.clearAllGames(),[]}}static loadGame(i){try{return this.loadAllGames().find(c=>c.gameId===i)||null}catch(o){return console.error("Failed to load game:",o),null}}static deleteGame(i){try{const c=this.loadAllGames().filter(f=>f.gameId!==i),d=JSON.stringify(c.map(f=>Wa.serialize(f)));localStorage.setItem(Et.SAVED_GAMES,d)}catch(o){throw console.error("Failed to delete game:",o),new Error("Failed to delete game")}}static getMostRecentGame(){const i=this.loadAllGames();return i.length===0?null:i.reduce((o,c)=>new Date(c.metadata.lastPlayed)>new Date(o.metadata.lastPlayed)?c:o)}static hasGame(i){return this.loadAllGames().some(c=>c.gameId===i)}static getGameCount(){return this.loadAllGames().length}static clearAllGames(){try{localStorage.removeItem(Et.SAVED_GAMES)}catch(i){console.error("Failed to clear saved games:",i)}}static cleanupCorruptedGames(i){try{const o=JSON.stringify(i.map(c=>Wa.serialize(c)));localStorage.setItem(Et.SAVED_GAMES,o)}catch(o){console.error("Failed to cleanup corrupted games:",o)}}static validateAndRepairStorage(){const i={isValid:!0,repairedCount:0,errors:[]};try{const o=this.loadAllGames(),c=this.getStorageItemCount();return o.length<c&&(i.repairedCount=c-o.length,i.isValid=!1,i.errors.push(`Repaired ${i.repairedCount} corrupted game(s)`)),i}catch(o){return i.isValid=!1,i.errors.push(o instanceof Error?o.message:"Unknown storage error"),i}}static getStorageItemCount(){try{const i=localStorage.getItem(Et.SAVED_GAMES);return i?JSON.parse(i).length:0}catch{return 0}}static getStorageInfo(){try{const i=localStorage.getItem(Et.SAVED_GAMES),o=i?new Blob([i]).size:0,c=this.getGameCount();return{gameCount:c,estimatedSize:o,maxGames:this.MAX_SAVED_GAMES,canSaveMore:c<this.MAX_SAVED_GAMES}}catch{return{gameCount:0,estimatedSize:0,maxGames:this.MAX_SAVED_GAMES,canSaveMore:!0}}}static pruneOldGames(i=5){try{const o=this.loadAllGames();if(o.length<=i)return 0;o.sort((h,g)=>new Date(g.metadata.lastPlayed).getTime()-new Date(h.metadata.lastPlayed).getTime());const c=o.slice(0,i),d=o.length-i,f=JSON.stringify(c.map(h=>Wa.serialize(h)));return localStorage.setItem(Et.SAVED_GAMES,f),d}catch(o){return console.error("Failed to prune old games:",o),0}}}class Kt{static saveQueue=new Map;static SAVE_DEBOUNCE_MS=1e3;static MAX_SAVE_ATTEMPTS=3;static scheduleAutoSave(i){const o=i.gameId,c=this.saveQueue.get(o);c&&clearTimeout(c);const d=setTimeout(()=>{this.performAutoSave(i),this.saveQueue.delete(o)},this.SAVE_DEBOUNCE_MS);this.saveQueue.set(o,d)}static async performImmediateSave(i){const o=i.gameId,c=this.saveQueue.get(o);return c&&(clearTimeout(c),this.saveQueue.delete(o)),this.performAutoSave(i)}static async performAutoSave(i,o=1){try{const c=At.loadGame(i.gameId);if(c&&this.hasConflict(i,c.gameState)){console.warn("Save conflict detected, resolving...");const d=this.resolveConflict(i,c.gameState);return this.saveGameState(d)}return this.saveGameState(i)}catch(c){if(console.error(`Auto-save attempt ${o} failed:`,c),o<this.MAX_SAVE_ATTEMPTS){const d=Math.pow(2,o)*1e3;return await new Promise(f=>setTimeout(f,d)),this.performAutoSave(i,o+1)}return console.error("Auto-save failed after maximum attempts"),!1}}static saveGameState(i){try{const o={...i,gameMode:i.gameMode||"standard",customScene:i.gameMode==="custom"?i.customScene:void 0},c={gameId:o.gameId,gameState:o,metadata:{title:this.generateGameTitle(o),createdAt:o.createdAt,lastPlayed:new Date,choiceCount:o.choiceHistory.length,gameMode:o.gameMode}};return At.saveGame(c),!0}catch(o){return console.error("Failed to save game state:",o),!1}}static hasConflict(i,o){const c=i.lastUpdated.getTime();return o.lastUpdated.getTime()>c+5e3}static resolveConflict(i,o){if(o.choiceHistory.length>i.choiceHistory.length)return console.log("Resolving conflict: keeping existing state (more progress)"),{...o,lastUpdated:new Date};if(o.choiceHistory.length===i.choiceHistory.length){const c=o.lastUpdated>i.lastUpdated;return console.log(`Resolving conflict: using ${c?"existing":"new"} state (same progress, newer timestamp)`),c?o:i}return console.log("Resolving conflict: using new state (more progress)"),i}static generateGameTitle(i){const o=i.choiceHistory.length,c=i.gameId.slice(0,8),d=i.gameMode==="custom"?"Custom":"Adventure";if(i.gameMode==="custom"&&i.customScene){const p=i.customScene.trim().split(" ").filter(y=>y.length>3&&!["the","and","but","for","are","with","they","have","this","that","from","your","you"].includes(y.toLowerCase()));if(p.length>=2)return`${p.slice(0,3).join(" ")}... (${o} actions)`}const h=i.currentStory.text.split(/[.!?]+/).filter(p=>p.trim().length>0);if(h.length>0){const y=h[0].trim().split(" ").filter(S=>S.length>3&&!["the","and","but","for","are","with","they","have","this","that","from","your","you"].includes(S.toLowerCase()));if(y.length>=2){const S=y.slice(0,3).join(" "),N=i.gameMode==="custom"?"actions":"choices";return`${S}... (${o} ${N})`}}const g=i.gameMode==="custom"?"actions":"choices";return`${d} ${c} (${o} ${g})`}static validateGameState(i){const o=[];return i.gameId||o.push("Missing game ID"),i.currentStory||o.push("Missing current story"),i.createdAt||o.push("Missing creation date"),i.lastUpdated||o.push("Missing last updated date"),i.gameMode?i.gameMode!=="standard"&&i.gameMode!=="custom"&&o.push('Invalid game mode (must be "standard" or "custom")'):o.push("Missing game mode"),i.gameMode==="custom"&&(!i.customScene||i.customScene.trim().length===0?o.push("Custom mode game missing custom scene description"):i.customScene.trim().length<20?o.push("Custom scene description too short (minimum 20 characters)"):i.customScene.trim().length>500&&o.push("Custom scene description too long (maximum 500 characters)")),i.currentStory&&(i.currentStory.id||o.push("Missing story ID"),i.currentStory.text||o.push("Missing story text"),i.currentStory.sceneDescription||o.push("Missing scene description"),Array.isArray(i.currentStory.choices)||o.push("Invalid choices array")),Array.isArray(i.storyHistory)||o.push("Invalid story history"),Array.isArray(i.choiceHistory)||o.push("Invalid choice history"),i.choiceHistory.length>0&&i.storyHistory.length!==i.choiceHistory.length&&o.push("Story history and choice history length mismatch"),{isValid:o.length===0,errors:o}}static cleanup(){for(const[,i]of this.saveQueue.entries())clearTimeout(i);this.saveQueue.clear()}static getSaveStats(){return{pendingSaves:this.saveQueue.size,queuedGames:Array.from(this.saveQueue.keys())}}}const qg=({aiConfig:x,onConfigurationNeeded:i,onBackToLauncher:o,onNewGame:c,gameToResume:d,gameMode:f,customScene:h})=>{const[g,p]=M.useState(null),[y,S]=M.useState(!1),[N,A]=M.useState(null),[B,Y]=M.useState(null),[q,K]=M.useState(!1),[le,ae]=M.useState(!1),[Q,$]=M.useState(null),[Ce,be]=M.useState(!1),[X,O]=M.useState(x?.samplerSettings||{temperature:.7,minP:.05,repetitionPenalty:1.1,enableStreaming:!0}),[D,G]=M.useState(""),[ie,re]=M.useState(!1),[Be,Z]=M.useState(""),[de,C]=M.useState(""),[H,V]=M.useState(!1),[se,he]=M.useState(null),[v,z]=M.useState(null);M.useEffect(()=>{x?.samplerSettings&&O(x.samplerSettings)},[x]);const I=M.useCallback(J=>{if(O(J),x){const F={...x,samplerSettings:J};ka.saveConfig(F)}},[x]),P=M.useCallback(J=>{try{p(J.gameState),A(null),S(!1)}catch(F){const W=F instanceof Error?F.message:"Failed to resume game";A(W),console.error("Failed to resume game:",F)}},[]);M.useEffect(()=>{d&&P(d),K(!0)},[d,P]),M.useEffect(()=>{if(!g||!q)return;const J=Kt.validateGameState(g);if(!J.isValid){console.warn("Invalid game state, skipping auto-save:",J.errors);return}return Kt.scheduleAutoSave(g),()=>{}},[g,q]),M.useEffect(()=>()=>{Kt.cleanup()},[]);const fe=()=>`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,ye=M.useCallback(J=>{const F=[...J.storyHistory,J.currentStory];return ba.createStoryContext(F,J.choiceHistory,J.currentStory.sceneDescription)},[]),Se=M.useCallback(J=>{const F=["Do you:","What do you do?","Your options are:","Choose your action:","You can:","Your choices:"];for(const W of F){const ve=J.indexOf(W);if(ve!==-1)return J.substring(0,ve).trim()}return J.trim()},[]),Ue=M.useCallback(async(J,F)=>{if(!x||x.enableImageGeneration===!1)return null;try{return ae(!0),$(null),await Bg.generateSceneImageWithRetry(x,J.sceneDescription,F)}catch(W){const ve=W instanceof Error?W.message:"Failed to generate image";return $(ve),console.warn("Image generation failed:",ve),null}finally{ae(!1)}},[x]),Xe=M.useCallback(async()=>{if(!g||!x)return;const J=g.storyHistory.length>0?Se(g.storyHistory[g.storyHistory.length-1].text):void 0,F=await Ue(g.currentStory,J);if(F){const W={...g.currentStory,imageUrl:F};p({...g,currentStory:W,lastUpdated:new Date})}},[g,x,Ue,Se]),Mt=M.useCallback(async()=>{if(!x){i();return}A(null),Y(null),$(null),G(""),Z(""),C("");const J=X.enableStreaming??!0;J?(re(!0),S(!1)):(S(!0),re(!1));try{const F=J?await ba.generateInitialStoryStream(x,ve=>{G(oe=>oe+ve)},X,ve=>{Z(oe=>oe+ve)}):await ba.generateInitialStory(x,X);re(!1),S(!1);const W={gameId:fe(),currentStory:F,storyHistory:[],choiceHistory:[],createdAt:new Date,lastUpdated:new Date,gameMode:"standard"};p(W),G(""),C(F.thinkingContent||""),Z(""),Kt.performImmediateSave(W).catch(ve=>{console.warn("Failed to perform immediate save for new game:",ve)}),Ue(F).then(ve=>{ve&&p(oe=>{if(!oe||oe.gameId!==W.gameId)return oe;const me={...oe,currentStory:{...oe.currentStory,imageUrl:ve},lastUpdated:new Date};return Kt.scheduleAutoSave(me),me})})}catch(F){const W=F instanceof Error?F.message:"Failed to start new game";A(W),Y({type:"initial"}),re(!1),G(""),Z(""),S(!1)}},[x,i,Ue,X]),Qt=M.useCallback(async J=>{if(!x){i();return}A(null),Y(null),$(null),G(""),Z(""),C("");const F=X.enableStreaming??!0;F?(re(!0),S(!1)):(S(!0),re(!1));try{const W=F?await va.generateCustomInitialStoryStream(x,J,oe=>{G(me=>me+oe)},X,oe=>{Z(me=>me+oe)}):await va.generateCustomInitialStory(x,J,X);re(!1),S(!1);const ve={gameId:fe(),currentStory:W,storyHistory:[],choiceHistory:[],createdAt:new Date,lastUpdated:new Date,gameMode:"custom",customScene:J};p(ve),G(""),C(W.thinkingContent||""),Z(""),Kt.performImmediateSave(ve).catch(oe=>{console.warn("Failed to perform immediate save for new game:",oe)}),Ue(W).then(oe=>{oe&&p(me=>{if(!me||me.gameId!==ve.gameId)return me;const Oe={...me,currentStory:{...me.currentStory,imageUrl:oe},lastUpdated:new Date};return Kt.scheduleAutoSave(Oe),Oe})})}catch(W){const ve=W instanceof Error?W.message:"Failed to start custom game";A(ve),Y({type:"custom-initial",data:J}),re(!1),G(""),Z(""),S(!1)}},[x,i,Ue,X]),ja=M.useCallback(async J=>{if(!g||!x){i();return}A(null),Y(null),$(null),G(""),Z(""),C("");const F=X.enableStreaming??!0;F?(re(!0),S(!1)):(S(!0),re(!1));try{const W=ye(g),ve=F?await ba.continueStoryStream(x,J,W,Oe=>{G(Ke=>Ke+Oe)},X,Oe=>{Z(Ke=>Ke+Oe)}):await ba.continueStory(x,J,W,X);re(!1),S(!1);const oe={...g,currentStory:ve,storyHistory:[...g.storyHistory,g.currentStory],choiceHistory:[...g.choiceHistory,{...J,selected:!0}],lastUpdated:new Date};p(oe),G(""),C(ve.thinkingContent||""),Z(""),Kt.performImmediateSave(oe).catch(Oe=>{console.warn("Failed to perform immediate save after choice:",Oe)});const me=Se(ve.text);Ue(ve,me).then(Oe=>{Oe&&p(Ke=>!Ke||Ke.gameId!==oe.gameId?Ke:{...Ke,currentStory:{...Ke.currentStory,imageUrl:Oe},lastUpdated:new Date})})}catch(W){const ve=W instanceof Error?W.message:"Failed to continue story";A(ve),Y({type:"choice",data:J}),re(!1),G(""),Z(""),S(!1)}},[g,x,i,ye,Ue,Se,X]),bn=M.useCallback(async J=>{if(!g||!x){i();return}A(null),Y(null),$(null),G(""),Z(""),C("");const F=X.enableStreaming??!0;F?(re(!0),S(!1)):(S(!0),re(!1));try{const W={id:fe(),text:J,selected:!0,isCustom:!0},ve=[...g.storyHistory,g.currentStory],oe=va.createStoryContext(ve,g.choiceHistory,g.currentStory.sceneDescription),me=F?await va.continueCustomStoryStream(x,J,oe,Rt=>{G(ut=>ut+Rt)},X,Rt=>{Z(ut=>ut+Rt)}):await va.continueCustomStory(x,J,oe,X);re(!1),S(!1);const Oe={...g,currentStory:me,storyHistory:[...g.storyHistory,g.currentStory],choiceHistory:[...g.choiceHistory,W],lastUpdated:new Date};p(Oe),G(""),C(me.thinkingContent||""),Z(""),Kt.performImmediateSave(Oe).catch(Rt=>{console.warn("Failed to perform immediate save after custom action:",Rt)});const Ke=Se(me.text);Ue(me,Ke).then(Rt=>{Rt&&p(ut=>!ut||ut.gameId!==Oe.gameId?ut:{...ut,currentStory:{...ut.currentStory,imageUrl:Rt},lastUpdated:new Date})})}catch(W){const ve=W instanceof Error?W.message:"Failed to continue custom story";A(ve),Y({type:"custom-action",data:J}),re(!1),G(""),Z(""),S(!1)}},[g,x,i,Ue,Se,X]),ea=M.useCallback(()=>{if(B)switch(B.type){case"initial":Mt();break;case"custom-initial":typeof B.data=="string"&&Qt(B.data);break;case"choice":B.data&&typeof B.data=="object"&&ja(B.data);break;case"custom-action":typeof B.data=="string"&&bn(B.data);break}else if(g){const J=g.choiceHistory[g.choiceHistory.length-1];J?ja(J):g.gameMode==="custom"&&g.customScene?Qt(g.customScene):Mt()}else f==="custom"&&h?Qt(h):Mt()},[B,g,ja,Mt,Qt,bn,f,h]),ll=M.useCallback(async()=>{if(!g||!x){i();return}A(null),$(null),G(""),Z(""),C("");const J=X.enableStreaming??!0;J?(re(!0),S(!1)):(S(!0),re(!1));try{let F;if(g.choiceHistory.length===0)g.gameMode==="custom"&&g.customScene?F=J?await va.regenerateCustomInitialStoryStream(x,g.customScene,oe=>{G(me=>me+oe)},X,oe=>{Z(me=>me+oe)}):await va.regenerateCustomInitialStory(x,g.customScene,X):F=J?await ba.regenerateInitialStoryStream(x,oe=>{G(me=>me+oe)},X,oe=>{Z(me=>me+oe)}):await ba.regenerateInitialStory(x,X);else{const oe=g.choiceHistory[g.choiceHistory.length-1],me=ye(g);g.gameMode==="custom"&&oe.isCustom?F=J?await va.regenerateCustomStoryStream(x,oe.text,me,Oe=>{G(Ke=>Ke+Oe)},X,Oe=>{Z(Ke=>Ke+Oe)}):await va.regenerateCustomStory(x,oe.text,me,X):F=J?await ba.regenerateStoryStream(x,oe,me,Oe=>{G(Ke=>Ke+Oe)},X,Oe=>{Z(Ke=>Ke+Oe)}):await ba.regenerateStory(x,oe,me,X)}re(!1),S(!1);const W={...g,currentStory:F,lastUpdated:new Date};p(W),G(""),C(F.thinkingContent||""),Z(""),Kt.performImmediateSave(W).catch(oe=>{console.warn("Failed to perform immediate save after regeneration:",oe)});const ve=Se(F.text);Ue(F,ve).then(oe=>{oe&&p(me=>!me||me.gameId!==W.gameId?me:{...me,currentStory:{...me.currentStory,imageUrl:oe},lastUpdated:new Date})})}catch(F){const W=F instanceof Error?F.message:"Failed to regenerate story";A(W),re(!1),G(""),Z(""),S(!1)}},[g,x,i,ye,Ue,Se,X]),rl=M.useCallback(()=>{c?c():o?o():(p(null),A(null),S(!1))},[c,o]),Na=M.useCallback((J,F)=>{const W=[];if(J<0&&W.push("Segment index cannot be negative"),J>=F.storyHistory.length&&W.push("Segment index exceeds story history length"),(!F.storyHistory||F.storyHistory.length===0)&&W.push("No story history available for rollback"),F.choiceHistory||W.push("Choice history is missing"),F.storyHistory&&F.choiceHistory){const ve=J;F.choiceHistory.length<ve&&W.push("Insufficient choice history for rollback operation");const oe=F.storyHistory[J];oe?(oe.id||W.push("Target segment is missing required ID"),oe.text||W.push("Target segment is missing story text"),oe.sceneDescription||W.push("Target segment is missing scene description")):W.push("Target segment does not exist")}return F.gameId||W.push("Game state is missing game ID"),F.currentStory||W.push("Game state is missing current story"),{isValid:W.length===0,errors:W}},[]),sl=M.useCallback((J,F)=>{const W=Na(J,F);if(!W.isValid)throw new Error(`Rollback validation failed: ${W.errors.join(", ")}`);const ve=F.storyHistory[J];if(!ve)throw new Error("Target segment does not exist");const oe=F.storyHistory.length-J-1+1,me=F.choiceHistory.length-J;if(oe<0)throw new Error("Invalid rollback: target segment is beyond history");if(me<0)throw new Error("Data integrity error: insufficient choice history for rollback");const Oe=F.storyHistory.slice(0,J),Ke=F.choiceHistory.slice(0,J),ut={...F,currentStory:ve,storyHistory:Oe,choiceHistory:Ke,lastUpdated:new Date};if(!ut.gameId||!ut.currentStory)throw new Error("Failed to create valid rollback state: missing required properties");return{targetSegmentIndex:J,segmentsToDelete:oe,choicesToDelete:me,newGameState:ut}},[Na]),il=M.useCallback(J=>{if(z(null),!g){z("No game state available for rollback");return}const F=Na(J,g);if(!F.isValid){z(`Cannot rollback: ${F.errors.join(", ")}`);return}he(J),V(!0)},[g,Na]),ol=M.useCallback(async()=>{if(se!==null&&g)try{z(null);const J=Na(se,g);if(!J.isValid)throw new Error(`Rollback validation failed: ${J.errors.join(", ")}`);const F=sl(se,g);if(!F.newGameState)throw new Error("Failed to calculate valid rollback state");if(y||ie)throw new Error("Cannot perform rollback while other operations are in progress");p(F.newGameState),A(null),$(null),Y(null),S(!1),re(!1),ae(!1),G(""),Z("");try{await Kt.performImmediateSave(F.newGameState)}catch(W){console.error("Failed to save after rollback:",W),z("Rollback completed but failed to save. Your progress may not be preserved.")}V(!1),he(null)}catch(J){const F=J instanceof Error?J.message:"Failed to perform rollback";z(F),console.error("Rollback failed:",J)}else z(g?"No target segment selected":"No game state available"),console.error("Rollback failed: Invalid state -",{targetSegmentIndex:se,hasGameState:!!g})},[se,g,sl,Na,y,ie]),cl=M.useCallback(()=>{V(!1),he(null),z(null)},[]);return M.useEffect(()=>{f==="custom"&&h&&!g&&q&&!d?Qt(h):f==="standard"&&!g&&q&&!d&&Mt()},[f,h,g,q,d]),x?!g&&!y&&!ie&&!N?r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center relative",children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsxs("button",{onClick:()=>be(!0),className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust sampler settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"AI Sampler"]})}),Ce&&r.jsx(lr,{settings:X,onSettingsChange:I,onClose:()=>be(!1)}),r.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-6",children:r.jsx("svg",{className:"h-8 w-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Ready for Adventure"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Start a new Choose Your Own Adventure story powered by AI. Your choices will shape the narrative as it unfolds."}),r.jsx("div",{className:"space-y-4",children:r.jsxs("button",{onClick:Mt,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start New Adventure"]})})]})}):r.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6 space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Your Adventure"}),g&&r.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["Choices made: ",g.choiceHistory.length]})]}),r.jsx("div",{className:"flex space-x-2 w-full sm:w-auto",children:r.jsxs("button",{onClick:rl,className:"inline-flex items-center justify-center flex-1 sm:flex-none px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-1 sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"New Game"]})})]}),r.jsx(Dg,{currentStory:g?.currentStory||null,storyHistory:g?.storyHistory||[],isLoading:y,error:N,onRetry:ea,onRegenerate:ll,canRegenerate:!!g&&!y&&!ie,isGeneratingImage:le,imageError:Q,onImageRetry:Xe,samplerSettings:X,onSamplerSettingsChange:I,streamingText:D,isStreaming:ie,enableImageGeneration:x?.enableImageGeneration??!0,thinkingContent:de,streamingThinking:Be,onRollback:il}),v&&!H&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Rollback Failed"}),r.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:v})]}),r.jsx("div",{className:"ml-auto pl-3",children:r.jsx("button",{onClick:()=>z(null),className:"inline-flex text-red-400 hover:text-red-600 dark:text-red-500 dark:hover:text-red-300 transition-colors","aria-label":"Dismiss error",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})}),g&&!N&&(g.gameMode==="custom"?r.jsx(Lg,{isLoading:y||ie,disabled:y||ie,onActionSubmit:bn,choiceHistory:g.choiceHistory}):r.jsx(Hg,{choices:g.currentStory.choices,choiceHistory:g.choiceHistory,isLoading:y||ie,onChoiceSelect:ja})),g&&r.jsx(Gg,{isOpen:H,onClose:cl,onConfirm:ol,segmentIndex:se||0,segmentCount:g.storyHistory.length,choiceCount:g.choiceHistory.length,error:v})]}):r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Configuration Required"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Please configure your AI settings before starting a new adventure."}),r.jsx("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Configure AI Settings"})]})})},Vg=({onResumeGame:x,onDeleteGame:i,onNewGame:o})=>{const[c,d]=M.useState([]),[f,h]=M.useState(!0),[g,p]=M.useState(null),[y,S]=M.useState(null),[N,A]=M.useState(new Set),[B,Y]=M.useState(!1),[q,K]=M.useState(!1);M.useEffect(()=>{le()},[]);const le=async()=>{try{h(!0),p(null);const D=At.loadAllGames();d(D);const G=At.validateAndRepairStorage();!G.isValid&&G.errors.length>0&&console.warn("Storage validation issues:",G.errors)}catch(D){const G=D instanceof Error?D.message:"Failed to load saved games";p(G),console.error("Failed to load saved games:",D)}finally{h(!1)}},ae=async D=>{try{S(D),At.deleteGame(D),d(G=>G.filter(ie=>ie.gameId!==D)),i&&i(D)}catch(G){const ie=G instanceof Error?G.message:"Failed to delete game";p(ie),console.error("Failed to delete game:",G)}finally{S(null)}},Q=D=>{A(G=>{const ie=new Set(G);return ie.has(D)?ie.delete(D):ie.add(D),ie})},$=()=>{N.size===c.length?A(new Set):A(new Set(c.map(D=>D.gameId)))},Ce=async()=>{if(N.size!==0)try{K(!0);for(const D of N)At.deleteGame(D),i&&i(D);d(D=>D.filter(G=>!N.has(G.gameId))),A(new Set),Y(!1)}catch(D){const G=D instanceof Error?D.message:"Failed to delete selected games";p(G),console.error("Failed to bulk delete games:",D)}finally{K(!1)}},be=()=>{A(new Set),Y(!1)},X=D=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(D),O=D=>{const ie=new Date().getTime()-D.getTime(),re=Math.floor(ie/(1e3*60*60)),Be=Math.floor(re/24);return re<1?"Just now":re<24?`${re} hour${re>1?"s":""} ago`:Be<7?`${Be} day${Be>1?"s":""} ago`:X(D)};return f?r.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-6 sm:h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 sm:w-1/3 mb-4 sm:mb-6"}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:[1,2,3].map(D=>r.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[r.jsx("div",{className:"h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 sm:w-1/2 mb-2"}),r.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 sm:w-1/4 mb-2"}),r.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3 sm:w-1/3"})]},D))})]})})}):g?r.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Error Loading Games"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:g}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:justify-center",children:[r.jsx("button",{onClick:le,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Try Again"}),r.jsx("button",{onClick:o,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Start New Game"})]})]})})}):r.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:[r.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Your Adventures"}),c.length>1&&!B&&r.jsxs("button",{onClick:()=>Y(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"hidden sm:inline",children:"Select Multiple"}),r.jsx("span",{className:"sm:hidden",children:"Select"})]})]}),!B&&r.jsxs("button",{onClick:o,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Adventure"]})]}),B&&r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:[N.size," of ",c.length," selected"]}),r.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[r.jsx("button",{onClick:$,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:N.size===c.length?"Deselect All":"Select All"}),r.jsx("button",{onClick:Ce,disabled:N.size===0||q,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:q?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"mr-1.5 h-3 w-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Deleting..."}),r.jsx("span",{className:"sm:hidden",children:"..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete (",N.size,")"]})}),r.jsx("button",{onClick:be,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Cancel"})]})]})]}),c.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-6",children:r.jsx("svg",{className:"h-8 w-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Saved Adventures"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start your first Choose Your Own Adventure story to begin your journey."}),r.jsxs("button",{onClick:o,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start Your First Adventure"]})]}):r.jsx("div",{className:"space-y-3 sm:space-y-4",children:c.map(D=>r.jsx("div",{className:`border rounded-lg p-4 sm:p-6 transition-colors ${B&&N.has(D.gameId)?"border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[B&&r.jsx("div",{className:"flex items-center pt-1",children:r.jsx("input",{type:"checkbox",checked:N.has(D.gameId),onChange:()=>Q(D.gameId),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100 truncate",children:D.metadata.title}),D.metadata.gameMode&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium self-start ${D.metadata.gameMode==="custom"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"}`,children:D.metadata.gameMode==="custom"?" Custom":" Standard"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Choices:"})," ",D.metadata.choiceCount]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Last played:"})," ",O(D.metadata.lastPlayed)]}),r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("span",{className:"font-medium",children:"Created:"})," ",X(D.metadata.createdAt)]})]})]})]}),r.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2 sm:line-clamp-3",children:[D.gameState.currentStory.text.substring(0,150),D.gameState.currentStory.text.length>150?"...":""]})}),!B&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[r.jsxs("button",{onClick:()=>x(D),className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-green-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resume Adventure"]}),r.jsx("button",{onClick:()=>ae(D.gameId),disabled:y===D.gameId,className:"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-red-700 dark:text-red-400 bg-white dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y===D.gameId?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Deleting..."}),r.jsx("span",{className:"sm:hidden",children:"..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),r.jsx("span",{className:"hidden sm:inline",children:"Delete"}),r.jsx("span",{className:"sm:hidden",children:"Delete"})]})})]})]})},D.gameId))})]})})},Xg=({onModeSelect:x,aiConfig:i,samplerSettings:o,onSamplerSettingsChange:c})=>{const[d,f]=M.useState(!1);return r.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8 relative",children:[r.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-purple-100 dark:bg-purple-900/30 mb-4 sm:mb-6",children:r.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3",children:"Choose Your Adventure Mode"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Select how you want to experience your story"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("button",{onClick:()=>x("standard"),className:"group relative bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 sm:p-6 hover:border-blue-500 dark:hover:border-blue-400 hover:shadow-lg transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400",children:[r.jsxs("div",{className:"flex items-start mb-3 sm:mb-4",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors",children:r.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),r.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 sm:mb-2",children:"Standard Mode"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Choose from AI-generated options at each step. Perfect for guided storytelling with curated choices."})]})]}),r.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-blue-600 dark:text-blue-400 font-medium group-hover:text-blue-700 dark:group-hover:text-blue-300",children:["Select Standard Mode",r.jsx("svg",{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),r.jsxs("button",{onClick:()=>x("custom"),className:"group relative bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 sm:p-6 hover:border-purple-500 dark:hover:border-purple-400 hover:shadow-lg transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-purple-400",children:[r.jsxs("div",{className:"flex items-start mb-3 sm:mb-4",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center group-hover:bg-purple-200 dark:group-hover:bg-purple-900/50 transition-colors",children:r.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsxs("div",{className:"ml-3 sm:ml-4 flex-1",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1 sm:mb-2",children:"Custom Scenario Mode"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:"Write your own scene and actions. Complete creative freedom to shape your unique adventure."})]})]}),r.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-purple-600 dark:text-purple-400 font-medium group-hover:text-purple-700 dark:group-hover:text-purple-300",children:["Select Custom Mode",r.jsx("svg",{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),r.jsxs("div",{className:"mt-6 sm:mt-8 space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-purple-400 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"AI Sampler"]})}),r.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 text-center flex items-center justify-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"You can't switch modes once your adventure begins"]})})]})]}),d&&i&&r.jsx(lr,{onClose:()=>f(!1),settings:o,onSettingsChange:c})]})},Kg=({onSceneSubmit:x,onBack:i,aiConfig:o,samplerSettings:c,onSamplerSettingsChange:d})=>{const[f,h]=M.useState(""),[g,p]=M.useState(""),[y,S]=M.useState(!1),[N,A]=M.useState(!1),[B,Y]=M.useState(""),[q,K]=M.useState(""),[le,ae]=M.useState(!1),[Q,$]=M.useState(!1),Ce=20,be=500,X=Z=>{const de=Z.target.value;h(de),g&&p("")},O=Z=>{Z.key==="Enter"&&!Z.shiftKey&&(Z.preventDefault(),re&&D())},D=()=>{const Z=f.trim();if(Z.length===0){p("Please enter a scene description");return}if(Z.length<Ce){p(`Scene description must be at least ${Ce} characters`);return}if(Z.length>be){p(`Scene description must not exceed ${be} characters`);return}x(Z)},G=async()=>{if(!o){Y("AI configuration is required to generate scene ideas");return}A(!0),Y(""),h(""),p(""),K(""),ae(!1);try{const de=[Ne.createSystemMessage("You are a creative writing assistant specializing in adventure story openings. DO NOT end it with What do you do?"),Ne.createUserMessage(`Generate a SIMPLE and SHORT opening scene (25-75 words) for a choose-your-own-adventure story. 
Write only the scene description  no dialogue, no choices, no setup notes.

The scene should:
- Set a clear location
- Present a simple situation or problem
- Use straightforward, clear language
- Avoid flowery or overly descriptive language

Keep it SHORT it a SIMPLE scene, NO CHARACTER ACTIONS.`)];if(c.enableStreaming??!0){ae(!0);const H=Pa.createStreamingProcessor();let V=!1;const{response:se,thinkingContent:he}=await Ne.chatCompletionStream(o,de,v=>{const z=H.processChunk(v);z.displayChunk&&(V||(ae(!1),$(!0),V=!0),h(I=>I+z.displayChunk))},{temperature:c?.temperature??.8,maxTokens:2048,onThinkingChunk:v=>{K(z=>z+v)}});if(ae(!1),$(!1),he&&K(he),se&&se.trim()){const{thinkingContent:v,cleanedResponse:z}=Pa.parseThinkingResponse(se);v&&!he&&K(v),z.trim()&&z.trim()!==f.trim()&&h(z.trim()),p("")}else Y("Failed to generate scene idea. Please try again.")}else{const H=await Ne.chatCompletionWithRetry(o,de,{temperature:c?.temperature??.8,maxTokens:2048});if(H&&H.response.trim()){const{thinkingContent:V,cleanedResponse:se}=Pa.parseThinkingResponse(H.response);V&&K(V),h(se.trim()),p("")}else Y("Failed to generate scene idea. Please try again.")}}catch(Z){const de=Z instanceof Error?Z.message:"Failed to generate scene idea";Y(de),console.error("Scene generation error:",Z)}finally{A(!1),ae(!1),$(!1)}},ie=f.length,re=ie>=Ce&&ie<=be,Be=ie>be*.9;return r.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8",children:[r.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative",children:[r.jsx("div",{className:"absolute top-0 right-0",children:r.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust AI settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),r.jsx("span",{className:"hidden sm:inline",children:"AI Settings"})]})}),r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-purple-100 dark:bg-purple-900/30 mb-4 sm:mb-6",children:r.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3",children:"Set Your Scene"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Describe the initial scene for your custom adventure"})]}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{htmlFor:"sceneDescription",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Scene Description"}),o&&r.jsx("button",{onClick:G,disabled:N,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-md hover:bg-purple-100 dark:hover:bg-purple-900/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Generate a scene idea using AI",children:N?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),le?"Thinking...":Q?"Writing...":"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3l14 9-14 9V3z"})})," Imagine a Scene"]})})]}),q&&r.jsx("div",{className:"mb-3",children:r.jsx(e0,{thinkingContent:q,isStreaming:le})}),r.jsx("textarea",{id:"sceneDescription",value:f+(Q?"|":""),onChange:X,onKeyDown:O,placeholder:"You wake up in a mysterious forest, surrounded by ancient trees. The air is thick with fog, and you hear strange sounds in the distance...",rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none placeholder-gray-400 dark:placeholder-gray-500",readOnly:Q}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Ce,"-",be," characters required"]}),r.jsxs("p",{className:`text-xs font-medium ${ie===0?"text-gray-500 dark:text-gray-400":re?"text-green-600 dark:text-green-400":Be?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"}`,children:[ie," / ",be]})]}),g&&r.jsx("div",{className:"mt-2 p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsx("p",{className:"text-xs sm:text-sm",children:g})]})}),B&&r.jsx("div",{className:"mt-2 p-3 rounded-md bg-orange-50 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 border border-orange-200 dark:border-orange-800",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs sm:text-sm",children:B}),(B.includes("Empty response")||B.includes("API error")||B.includes("Failed to generate"))&&r.jsx("div",{className:"mt-2 p-2 bg-orange-100 dark:bg-orange-800/30 rounded border border-orange-300 dark:border-orange-600",children:r.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:[r.jsx("strong",{children:" Tip:"})," If scene generation fails, try adjusting your AI settings, checking your API connection, or writing your own scene description instead."]})})]})]})})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[r.jsxs("h3",{className:"text-sm font-semibold text-purple-900 dark:text-purple-300 mb-2 flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Tips for a great scene:"]}),r.jsxs("ul",{className:"text-xs sm:text-sm text-purple-800 dark:text-purple-300 space-y-1",children:[r.jsx("li",{children:" Set the location and atmosphere"}),r.jsx("li",{children:" Describe what your character sees or feels"}),r.jsx("li",{children:" Create an intriguing situation or mystery"}),r.jsx("li",{children:" Leave room for the story to develop"}),o&&r.jsx("li",{children:"  Use the Imagine tool for AI-generated inspiration"}),r.jsx("li",{children:"  If your AI uses thinking, you'll see its reasoning process above"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2",children:[r.jsx("button",{onClick:i,disabled:N,className:"flex-1 px-4 sm:px-6 py-2 sm:py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:text-gray-400 dark:disabled:text-gray-600 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-gray-500 dark:focus:ring-gray-400 font-medium text-sm sm:text-base",children:" Back"}),r.jsx("button",{onClick:D,disabled:!re,className:"flex-1 px-4 sm:px-6 py-2 sm:py-3 bg-purple-600 dark:bg-purple-500 text-white rounded-lg hover:bg-purple-700 dark:hover:bg-purple-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-purple-500 dark:focus:ring-purple-400 font-medium text-sm sm:text-base shadow-lg hover:shadow-xl disabled:shadow-none",children:"Start Adventure "})]})]})]}),y&&o&&r.jsx(lr,{onClose:()=>S(!1),settings:c,onSettingsChange:d})]})},Qg=({aiConfig:x,onConfigurationNeeded:i,onStartNewGame:o,onResumeGame:c,startWithModeSelection:d=!1,startWithSavedGames:f=!1})=>{const[h,g]=M.useState("welcome"),[p,y]=M.useState(null),[S,N]=M.useState(!1),[A,B]=M.useState(!0),[Y,q]=M.useState(!1),[K,le]=M.useState(x?.samplerSettings||{temperature:.7,minP:.05,repetitionPenalty:1.1}),[ae,Q]=M.useState("welcome");M.useEffect(()=>{Ce()},[]),M.useEffect(()=>{x?.samplerSettings&&le(x.samplerSettings)},[x]),M.useEffect(()=>{d?Q("mode-select"):(Q("welcome"),g("welcome"))},[d]),M.useEffect(()=>{f&&(Q("welcome"),g("saved-games"))},[f]);const $=M.useCallback(de=>{if(le(de),x){const C={...x,samplerSettings:de};ka.saveConfig(C)}},[x]),Ce=()=>{try{B(!0);const de=At.getGameCount(),C=At.getMostRecentGame();N(de>0),y(C),g("welcome")}catch(de){console.error("Failed to check for saved games:",de),N(!1),y(null)}finally{B(!1)}},be=()=>{try{const de=At.getGameCount(),C=At.getMostRecentGame();N(de>0),y(C)}catch(de){console.error("Failed to refresh saved games:",de),N(!1),y(null)}},X=()=>{g("saved-games")},O=()=>{g("welcome"),Q("welcome"),be()},D=de=>{console.log(`Game ${de} deleted, refreshing list`),be()},G=()=>{g("welcome"),Q("mode-select")},ie=de=>{de==="custom"?Q("custom-scene"):o("standard")},re=de=>{o("custom",de)},Be=()=>{Q("mode-select")},Z=()=>{Q("welcome")};return x?A?r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:r.jsxs("div",{className:"animate-pulse text-center",children:[r.jsx("div",{className:"h-16 w-16 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-6"}),r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mx-auto mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mx-auto mb-8"}),r.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mx-auto"})]})})}):h==="saved-games"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"max-w-4xl mx-auto p-6 mb-4",children:r.jsxs("button",{onClick:O,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Welcome"]})}),r.jsx(Vg,{onResumeGame:c,onDeleteGame:D,onNewGame:G})]}):ae==="mode-select"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 mb-4",children:r.jsxs("button",{onClick:Z,className:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),r.jsx(Xg,{onModeSelect:ie,aiConfig:x,samplerSettings:K,onSamplerSettingsChange:$})]}):ae==="custom-scene"?r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:r.jsx(Kg,{onSceneSubmit:re,onBack:Be,aiConfig:x,samplerSettings:K,onSamplerSettingsChange:$})}):r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-8 text-center relative",children:[r.jsx("div",{className:"absolute top-2 right-2 sm:top-4 sm:right-4",children:r.jsxs("button",{onClick:()=>q(!0),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",title:"Adjust sampler settings",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),r.jsx("span",{className:"hidden sm:inline",children:"AI Sampler"})]})}),Y&&r.jsx(lr,{settings:K,onSettingsChange:$,onClose:()=>q(!1)}),r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-4 sm:mb-6 mt-6 sm:mt-0",children:r.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:"Welcome to AI Adventure"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-6 sm:mb-8 px-2",children:"Experience interactive storytelling powered by AI. Your choices shape the narrative as it unfolds."}),S&&p&&r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-medium text-green-900 dark:text-green-300",children:"Continue Your Adventure"}),p.metadata.gameMode&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${p.metadata.gameMode==="custom"?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"}`,children:p.metadata.gameMode==="custom"?" Custom":" Standard"})]}),r.jsxs("p",{className:"text-xs sm:text-sm text-green-700 dark:text-green-400 mb-3 sm:mb-4",children:['Resume "',p.metadata.title,'" - ',p.metadata.choiceCount," choices made"]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-md p-2 sm:p-3 mb-3 sm:mb-4",children:r.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 line-clamp-2 break-words",children:[p.gameState.currentStory.text.substring(0,150),p.gameState.currentStory.text.length>150?"...":""]})}),r.jsxs("button",{onClick:()=>c(p),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 sm:px-6 py-2 sm:py-3 border border-transparent text-sm sm:text-base font-medium rounded-md shadow-sm text-white bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-green-400 transition-colors",children:[r.jsx("svg",{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resume Adventure"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center justify-center",children:[r.jsxs("button",{onClick:G,className:"w-full sm:w-64 h-14 inline-flex items-center justify-center px-6 py-4 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Start New Adventure"]}),S&&r.jsxs("button",{onClick:X,className:"w-full sm:w-64 h-14 inline-flex items-center justify-center px-6 py-4 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:[r.jsx("svg",{className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"View All Saved Games (",At.getGameCount(),")"]})]}),!S&&r.jsx("div",{className:"mt-6 sm:mt-8 p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:r.jsx("p",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300",children:" This is your first adventure! Your progress will be automatically saved as you play."})})]})}):r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Configuration Required"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Please configure your AI settings before starting or resuming an adventure."}),r.jsx("button",{onClick:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-colors",children:"Configure AI Settings"})]})})};class Pf{static validateOpenAIKey(i){if(!i||typeof i!="string")return!1;const o=i.trim();return!!(o.startsWith("sk-")&&o.length>=20)}static validateGenericKey(i){if(!i||typeof i!="string")return!1;const o=i.trim();return o.length>=8&&o.length<=200?/^[a-zA-Z0-9\-_.]+$/.test(o):!1}static validateAPIKey(i){return this.validateOpenAIKey(i)?{isValid:!0,type:"openai"}:this.validateGenericKey(i)?{isValid:!0,type:"generic"}:{isValid:!1,type:"invalid"}}}class Wt{static validateBaseURL(i){if(!i||typeof i!="string")return!1;try{const o=new URL(i.trim());return!(!["http:","https:"].includes(o.protocol)||!o.hostname)}catch{return!1}}static normalizeBaseURL(i){const o=i.trim();return o.endsWith("/")?o.slice(0,-1):o}}class js{static validateConfig(i){const o=[],c=[];if(!i.apiKey)o.push("API key is required");else{const d=Pf.validateAPIKey(i.apiKey);d.isValid?d.type==="generic"&&(i.baseUrl?.includes("openai.com")||i.baseUrl?.includes("api.openai.com"))&&c.push("API key format not recognized as OpenAI - ensure compatibility"):o.push("Invalid API key format")}if(i.baseUrl?Wt.validateBaseURL(i.baseUrl)||o.push("Invalid base URL format"):o.push("Base URL is required"),i.model?(typeof i.model!="string"||i.model.trim().length===0)&&o.push("Invalid model selection"):o.push("Model selection is required"),i.imageConfig){if(i.imageConfig.provider?["openai","nano-gpt"].includes(i.imageConfig.provider)||o.push("Invalid image provider selection"):o.push("Image provider selection is required when image config is provided"),i.imageConfig.apiKey){const d=Pf.validateAPIKey(i.imageConfig.apiKey);d.isValid?d.type==="generic"&&i.imageConfig.provider==="openai"&&c.push("Image API key format not recognized as OpenAI - ensure compatibility"):o.push("Invalid image API key format")}i.imageConfig.baseUrl&&(Wt.validateBaseURL(i.imageConfig.baseUrl)||o.push("Invalid image base URL format")),i.imageConfig.model?(typeof i.imageConfig.model!="string"||i.imageConfig.model.trim().length===0)&&o.push("Invalid image model selection"):o.push("Image model selection is required when image config is provided")}return{isValid:o.length===0,errors:o,warnings:c}}static createDefaultConfig(){return{baseUrl:"https://api.openai.com/v1",model:"gpt-3.5-turbo",availableModels:[]}}static sanitizeConfig(i){const o={};return i.apiKey&&(o.apiKey=i.apiKey.trim()),i.baseUrl&&(o.baseUrl=Wt.normalizeBaseURL(i.baseUrl)),i.model&&(o.model=i.model.trim()),i.availableModels&&(o.availableModels=i.availableModels.filter(c=>typeof c=="string"&&c.trim().length>0)),typeof i.enableImageGeneration=="boolean"&&(o.enableImageGeneration=i.enableImageGeneration),i.imageConfig&&i.imageConfig.model&&i.imageConfig.provider&&(o.imageConfig={provider:i.imageConfig.provider,model:i.imageConfig.model.trim()},i.imageConfig.apiKey&&(o.imageConfig.apiKey=i.imageConfig.apiKey.trim()),i.imageConfig.baseUrl&&(o.imageConfig.baseUrl=Wt.normalizeBaseURL(i.imageConfig.baseUrl)),i.imageConfig.availableModels&&(o.imageConfig.availableModels=i.imageConfig.availableModels.filter(c=>typeof c=="string"&&c.trim().length>0))),i.samplerSettings&&(o.samplerSettings=i.samplerSettings),o}}class ct extends Error{code;retryable;constructor(i,o,c=!0){super(i),this.name="ModelServiceError",this.code=o,this.retryable=c}}class Sa{static REQUEST_TIMEOUT=1e4;static MAX_RETRIES=3;static async fetchAvailableModels(i){if(!i.apiKey||!i.baseUrl)throw new ct("API key and base URL are required","API_ERROR",!1);if(i.baseUrl.includes("api.anthropic.com"))return[{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet (Latest)",description:"Most intelligent model"},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku",description:"Fastest model"},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Powerful model for complex tasks"},{id:"claude-3-sonnet-20240229",name:"Claude 3 Sonnet",description:"Balanced performance"},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Fast and efficient"}];let o=`${i.baseUrl}/models`;const c={Authorization:`Bearer ${i.apiKey}`,"Content-Type":"application/json"};i.baseUrl.includes("api.openai.com")&&(o="/api/openai/v1/models");try{const d=await this.makeRequest(o,{method:"GET",headers:c,signal:AbortSignal.timeout(this.REQUEST_TIMEOUT)});if(!d.ok)throw await this.handleErrorResponse(d);const f=await d.json();return this.parseModelsResponse(f)}catch(d){if(d instanceof ct)throw d;if(d instanceof TypeError&&d.message.includes("fetch"))throw new ct("Network error: Unable to connect to API endpoint","NETWORK_ERROR");if(d instanceof Error&&d.name==="AbortError")throw new ct("Request timeout: API took too long to respond","NETWORK_ERROR");const f=d instanceof Error?d.message:"Unknown error";throw new ct(`Unexpected error: ${f}`,"API_ERROR")}}static async validateModelAccess(i,o){try{return(await this.fetchAvailableModels(i)).some(d=>d.id===o)}catch{return!1}}static async getModelInfo(i,o){try{return(await this.fetchAvailableModels(i)).find(d=>d.id===o)||null}catch{return null}}static async fetchModelsWithRetry(i,o=this.MAX_RETRIES){let c;for(let d=1;d<=o;d++)try{return await this.fetchAvailableModels(i)}catch(f){const h=f instanceof Error?f.message:"Unknown error";if(c=f instanceof ct?f:new ct(`Attempt ${d} failed: ${h}`,"API_ERROR"),!c.retryable)throw c;if(d===o)break;await this.delay(Math.pow(2,d-1)*1e3)}throw c}static async testConnection(i){try{return await this.fetchAvailableModels(i),{success:!0}}catch(o){return{success:!1,error:o instanceof ct?o.message:"Unknown connection error"}}}static async makeRequest(i,o){try{return await fetch(i,o)}catch(c){throw c instanceof TypeError?new ct("Network error: Check your internet connection and API endpoint, If running local ensure CORS is enabled.","NETWORK_ERROR"):c}}static async handleErrorResponse(i){let o=`HTTP ${i.status}: ${i.statusText}`,c="API_ERROR",d=!0;try{const f=await i.json();f.error?.message&&(o=f.error.message)}catch{}switch(i.status){case 401:c="AUTH_ERROR",d=!1,o="Invalid API key or unauthorized access";break;case 403:c="AUTH_ERROR",d=!1,o="Access forbidden - check your API key permissions";break;case 404:c="API_ERROR",d=!1,o="API endpoint not found - check your base URL";break;case 429:c="API_ERROR",d=!0,o="Rate limit exceeded - please try again later";break;case 500:case 502:case 503:case 504:c="API_ERROR",d=!0,o="Server error - please try again later";break}return new ct(o,c,d)}static parseModelsResponse(i){try{if(!i||typeof i!="object"||!("data"in i)||!Array.isArray(i.data))throw new Error("Invalid response format: expected data array. Are you using /v1 at the end of the url?");return i.data.filter(c=>c&&typeof c=="object"&&c!==null&&"id"in c&&typeof c.id=="string").map(c=>{const d=c;return{id:d.id,name:d.id,description:d.description||void 0}}).sort((c,d)=>c.name.localeCompare(d.name))}catch(o){const c=o instanceof Error?o.message:"Unknown parsing error";throw new ct(`Failed to parse models response: ${c}`,"PARSE_ERROR",!1)}}static delay(i){return new Promise(o=>setTimeout(o,i))}static filterTextModels(i){const o=[/^gpt/i,/^claude/i,/^llama/i,/^mistral/i,/^gemini/i,/text/i,/chat/i,/instruct/i],c=[/dall-e/i,/whisper/i,/tts/i,/embedding/i,/moderation/i];return i.filter(d=>c.some(f=>f.test(d.id))?!1:(o.some(f=>f.test(d.id)),!0))}static filterImageModels(i){const o=[/^dall-e/i,/^midjourney/i,/stable.*diffusion/i,/^imagen/i,/^firefly/i,/flux/i,/playground/i,/^sd-/i,/^sdxl/i],c=[/^dall-e-2$/i,/^dall-e-3$/i,/^stable-diffusion/i,/^midjourney/i,/^flux-/i,/^playground-/i];return i.filter(d=>c.some(f=>f.test(d.id))?!0:o.some(f=>f.test(d.id))?![/gpt/i,/llama/i,/claude/i,/mistral/i,/gemini/i,/chat/i,/instruct/i,/text/i,/70b/i,/13b/i,/7b/i,/\d+b/i].some(h=>h.test(d.id)):!1)}static async fetchAvailableImageModels(i){if(i.imageConfig?.provider==="nano-gpt")return console.log("Nano-GPT provider detected - skipping model fetching (manual entry required)"),[];const o=i.imageConfig?{apiKey:i.imageConfig.apiKey||i.apiKey,baseUrl:i.imageConfig.baseUrl||i.baseUrl,model:i.imageConfig.model,availableModels:i.imageConfig.availableModels}:i,c=await this.fetchAvailableModels(o),d=this.filterImageModels(c);return d.length===0&&console.log("No image models found after filtering. All available models:",c.map(f=>f.id)),d}static async fetchImageModelsWithRetry(i,o=this.MAX_RETRIES){let c;for(let d=1;d<=o;d++)try{return await this.fetchAvailableImageModels(i)}catch(f){const h=f instanceof Error?f.message:"Unknown error";if(c=f instanceof ct?f:new ct(`Attempt ${d} failed: ${h}`,"API_ERROR"),!c.retryable)throw c;if(d===o)break;await this.delay(Math.pow(2,d-1)*1e3)}throw c}static async testImageConnection(i){if(i.imageConfig?.provider==="nano-gpt"){const o=i.imageConfig.apiKey||i.apiKey,c=i.imageConfig.baseUrl||i.baseUrl;return!o||!c?{success:!1,error:"API key and base URL are required for nano-gpt"}:{success:!0}}try{return await this.fetchAvailableImageModels(i),{success:!0}}catch(o){return{success:!1,error:o instanceof ct?o.message:"Unknown connection error"}}}static async fetchAllModelsForImageConfig(i){if(i.imageConfig?.provider==="nano-gpt")return console.log("Nano-GPT provider detected - skipping model fetching (manual entry required)"),[];const o=i.imageConfig?{apiKey:i.imageConfig.apiKey||i.apiKey,baseUrl:i.imageConfig.baseUrl||i.baseUrl,model:i.imageConfig.model,availableModels:i.imageConfig.availableModels}:i;return await this.fetchAvailableModels(o)}}const Ig=({config:x,onConfigSave:i,onClose:o,className:c=""})=>{const[d,f]=M.useState({apiKey:x?.apiKey||"",baseUrl:x?.baseUrl||"https://api.openai.com/v1",model:x?.model||"gpt-3.5-turbo",enableReasoning:x?.enableReasoning??!0,enableImageGeneration:x?.enableImageGeneration??!0,enableImageConfig:!!x?.imageConfig,imageProvider:x?.imageConfig?.provider||"openai",imageApiKey:x?.imageConfig?.apiKey||"",imageBaseUrl:x?.imageConfig?.baseUrl||"",imageModel:x?.imageConfig?.model||"dall-e-3"}),[h,g]=M.useState(x?.availableModels?.map(O=>({id:O,name:O}))||[]),[p,y]=M.useState(x?.imageConfig?.availableModels?.map(O=>({id:O,name:O}))||[]),[S,N]=M.useState({errors:[],warnings:[],isValid:!1}),[A,B]=M.useState({models:!1,testing:!1,saving:!1,imageModels:!1,imageTesting:!1}),[Y,q]=M.useState({tested:!1,success:!1}),[K,le]=M.useState({tested:!1,success:!1});M.useEffect(()=>{const O={apiKey:d.apiKey,baseUrl:d.baseUrl,model:d.model,enableImageGeneration:d.enableImageGeneration};d.enableImageConfig&&(O.imageConfig={provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl||void 0,model:d.imageModel});const D=js.validateConfig(O);N(D)},[d]);const ae=(O,D)=>{if(f(G=>({...G,[O]:D})),(O==="apiKey"||O==="baseUrl")&&(q({tested:!1,success:!1}),g([])),(O==="imageApiKey"||O==="imageBaseUrl"||O==="imageProvider")&&(le({tested:!1,success:!1}),y([]),O==="imageProvider")){if(D==="nano-gpt"){f(G=>({...G,[O]:D,imageModel:"flux-1.1-pro",imageBaseUrl:G.imageBaseUrl||"https://nano-gpt.com"}));return}else if(D==="openai"){f(G=>({...G,[O]:D,imageModel:"dall-e-3",imageBaseUrl:G.imageBaseUrl||"https://api.openai.com/v1"}));return}}O==="enableImageConfig"&&!D&&(le({tested:!1,success:!1}),y([]))},Q=async()=>{if(S.isValid){B(O=>({...O,testing:!0,models:!0})),q({tested:!1,success:!1});try{const O={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[]},D=await Sa.fetchAvailableModels(O),G=Sa.filterTextModels(D);g(G),q({tested:!0,success:!0}),!G.some(ie=>ie.id===d.model)&&G.length>0&&f(ie=>({...ie,model:G[0].id}))}catch(O){const D=O instanceof ct?O.message:"Failed to connect to API";q({tested:!0,success:!1,error:D}),g([])}finally{B(O=>({...O,testing:!1,models:!1}))}}},$=async()=>{if(S.isValid){B(O=>({...O,models:!0}));try{const O={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[]},D=await Sa.fetchModelsWithRetry(O),G=Sa.filterTextModels(D);g(G)}catch(O){console.error("Failed to fetch models:",O)}finally{B(O=>({...O,models:!1}))}}},Ce=async()=>{if(!(!d.enableImageConfig||!S.isValid)){B(O=>({...O,imageTesting:!0,imageModels:!0})),le({tested:!1,success:!1});try{const O={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[],imageConfig:{provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl?Wt.normalizeBaseURL(d.imageBaseUrl):void 0,model:d.imageModel,availableModels:[]}};if(d.imageProvider==="nano-gpt"){const D=await Sa.testImageConnection(O);D.success?(le({tested:!0,success:!0}),y([])):le({tested:!0,success:!1,error:D.error})}else{let D=await Sa.fetchAvailableImageModels(O);D.length===0&&(console.log("No image models found with filtering, fetching all models..."),D=await Sa.fetchAllModelsForImageConfig(O)),y(D),le({tested:!0,success:!0}),!D.some(G=>G.id===d.imageModel)&&D.length>0&&f(G=>({...G,imageModel:D[0].id}))}}catch(O){const D=O instanceof ct?O.message:"Failed to connect to image API";le({tested:!0,success:!1,error:D}),y([])}finally{B(O=>({...O,imageTesting:!1,imageModels:!1}))}}},be=async()=>{if(!(!d.enableImageConfig||!S.isValid)){B(O=>({...O,imageModels:!0}));try{const O={apiKey:d.apiKey,baseUrl:Wt.normalizeBaseURL(d.baseUrl),model:d.model,availableModels:[],imageConfig:{provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl?Wt.normalizeBaseURL(d.imageBaseUrl):void 0,model:d.imageModel,availableModels:[]}};if(d.imageProvider==="nano-gpt"){y([]);return}let D=await Sa.fetchImageModelsWithRetry(O);D.length===0&&(console.log("No image models found with filtering in retry, fetching all models..."),D=await Sa.fetchAllModelsForImageConfig(O)),y(D)}catch(O){console.error("Failed to fetch image models:",O)}finally{B(O=>({...O,imageModels:!1}))}}},X=async()=>{if(S.isValid){B(O=>({...O,saving:!0}));try{const O={apiKey:d.apiKey,baseUrl:d.baseUrl,model:d.model,enableReasoning:d.enableReasoning,enableImageGeneration:d.enableImageGeneration,samplerSettings:x?.samplerSettings};d.enableImageConfig&&(O.imageConfig={provider:d.imageProvider,apiKey:d.imageApiKey||void 0,baseUrl:d.imageBaseUrl||void 0,model:d.imageModel,availableModels:p.map(ie=>ie.id)});const D=js.sanitizeConfig(O),G={apiKey:D.apiKey,baseUrl:D.baseUrl,model:D.model,availableModels:h.map(ie=>ie.id),enableReasoning:d.enableReasoning,enableImageGeneration:D.enableImageGeneration,imageConfig:D.imageConfig,samplerSettings:D.samplerSettings};i(G)}finally{B(O=>({...O,saving:!1}))}}};return r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 sm:p-6 max-w-2xl mx-auto ${c}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"API Configuration"}),o&&r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 text-2xl sm:text-xl font-bold flex-shrink-0 ml-2","aria-label":"Close settings",children:""})]}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apiKey",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key *"}),r.jsx("input",{id:"apiKey",type:"password",value:d.apiKey,onChange:O=>ae("apiKey",O.target.value),placeholder:"sk-...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Your OpenAI-compatible API key. For local LLMs, use any 8+ character string like "12345678". This is stored locally and never sent to our servers.'})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"baseUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Base URL *"}),r.jsx("input",{id:"baseUrl",type:"url",value:d.baseUrl,onChange:O=>ae("baseUrl",O.target.value),placeholder:"https://api.openai.com/v1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The base URL for your OpenAI-compatible API endpoint. For local LLMs with CORS enabled use something like http://127.0.0.1:1234/v1"})]}),r.jsxs("div",{children:[r.jsx("button",{onClick:Q,disabled:!S.isValid||A.testing,className:"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:A.testing?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing Connection..."]}):"Test Connection & Fetch Models"}),Y.tested&&r.jsx("div",{className:`mt-2 p-3 rounded-md ${Y.success?"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:Y.success?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),"Connection successful! Found ",h.length," compatible models."]}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),"Connection failed"]}),Y.error&&r.jsx("p",{className:"text-sm",children:Y.error}),r.jsx("button",{onClick:Q,className:"text-sm underline hover:no-underline mt-1",children:"Try again"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Model *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("select",{id:"model",value:d.model,onChange:O=>ae("model",O.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:h.length===0?r.jsx("option",{value:d.model,children:d.model}):h.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))}),h.length===0&&!A.models&&r.jsx("button",{onClick:$,disabled:!S.isValid,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:"Fetch Models"})]}),A.models&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 dark:border-gray-400"}),"Loading available models..."]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:h.length===0?"Test connection first to load available models":`Choose from ${h.length} available text generation models`})]}),r.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("input",{id:"enableReasoning",type:"checkbox",checked:d.enableReasoning,onChange:O=>ae("enableReasoning",O.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"enableReasoning",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Request AI Reasoning"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Request the AI to show its thinking process and reasoning. When disabled, the AI provides only the final response for faster generation."})]}),r.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("input",{id:"enableImageGeneration",type:"checkbox",checked:d.enableImageGeneration,onChange:O=>ae("enableImageGeneration",O.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"enableImageGeneration",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Enable Image Generation"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Generate AI images for each story scene. Disable this to play without images for faster story generation."})]}),d.enableImageGeneration&&r.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("input",{id:"enableImageConfig",type:"checkbox",checked:d.enableImageConfig,onChange:O=>ae("enableImageConfig",O.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"enableImageConfig",className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Separate Image Generation Configuration"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Configure a separate API endpoint and model for image generation. If disabled, the main configuration will be used for both text and images."}),d.enableImageConfig&&r.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageProvider",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Provider *"}),r.jsxs("select",{id:"imageProvider",value:d.imageProvider,onChange:O=>ae("imageProvider",O.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"openai",children:"OpenAI Compatible (DALL-E, etc.)"}),r.jsx("option",{value:"nano-gpt",children:"Nano-GPT"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the image generation service provider. Different providers use different API formats."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image API Key"}),r.jsx("input",{id:"imageApiKey",type:"password",value:d.imageApiKey,onChange:O=>ae("imageApiKey",O.target.value),placeholder:"Leave empty to use main API key",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Optional: Use a different API key for image generation. Leave empty to use the main API key."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageBaseUrl",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Base URL"}),r.jsx("input",{id:"imageBaseUrl",type:"url",value:d.imageBaseUrl,onChange:O=>ae("imageBaseUrl",O.target.value),placeholder:d.imageProvider==="nano-gpt"?"https://nano-gpt.com":"https://api.openai.com/v1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Optional: Use a different base URL for image generation. Leave empty to use the main base URL.",d.imageProvider==="nano-gpt"&&" For nano-gpt, use: https://nano-gpt.com"]})]}),r.jsxs("div",{children:[r.jsx("button",{onClick:Ce,disabled:!S.isValid||A.imageTesting,className:"bg-purple-600 dark:bg-purple-500 text-white px-4 py-2 rounded-md hover:bg-purple-700 dark:hover:bg-purple-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:A.imageTesting?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Testing Image Connection..."]}):"Test Image Connection & Fetch Models"}),K.tested&&r.jsx("div",{className:`mt-2 p-3 rounded-md ${K.success?"bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800"}`,children:K.success?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),d.imageProvider==="nano-gpt"?"Image connection validated! Enter your model name manually below.":`Image connection successful! Found ${p.length} compatible image models.`]}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),"Image connection failed"]}),K.error&&r.jsx("p",{className:"text-sm",children:K.error}),r.jsx("button",{onClick:Ce,className:"text-sm underline hover:no-underline mt-1",children:"Try again"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"imageModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Model *"}),d.imageProvider==="nano-gpt"?r.jsxs("div",{children:[r.jsx("input",{id:"imageModel",type:"text",value:d.imageModel,onChange:O=>ae("imageModel",O.target.value),placeholder:"Enter model name (e.g., flux-1.1-pro, stable-diffusion-xl)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter the exact model name as required by nano-gpt. Common models: flux-1.1-pro, stable-diffusion-xl, dall-e-3"})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("select",{id:"imageModel",value:d.imageModel,onChange:O=>ae("imageModel",O.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:p.length===0?r.jsx("option",{value:d.imageModel,children:d.imageModel}):p.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))}),p.length===0&&!A.imageModels&&r.jsx("button",{onClick:be,disabled:!S.isValid,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:"Fetch Models"})]}),A.imageModels&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 dark:border-gray-400"}),"Loading available image models..."]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:p.length===0?"Test image connection first to load available models":`Choose from ${p.length} available image generation models`})]})]})]})]}),(S.errors.length>0||S.warnings.length>0)&&r.jsxs("div",{className:"space-y-2",children:[S.errors.map((O,D)=>r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30 p-2 rounded",children:O},`error-${D}`)),S.warnings.map((O,D)=>r.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30 p-2 rounded",children:O},`warning-${D}`))]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{onClick:X,disabled:!S.isValid||A.saving,className:"bg-green-600 dark:bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-700 dark:hover:bg-green-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2",children:A.saving?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Configuration"}),o&&r.jsx("button",{onClick:o,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-2 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"})]})]})]})},Zg=({onGetStarted:x})=>r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 mb-8",children:r.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to AI Adventure"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Experience interactive storytelling powered by artificial intelligence"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 text-left",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Dynamic Stories"}),r.jsx("p",{className:"text-sm text-gray-600",children:"AI creates unique narratives based on your choices"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Visual Scenes"}),r.jsx("p",{className:"text-sm text-gray-600",children:"AI-generated images bring your adventure to life"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Your API Key"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Use your own OpenAI-compatible API for full control"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-100 flex items-center justify-center mt-1",children:r.jsx("svg",{className:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Auto-Save"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your progress is automatically saved as you play"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center mb-3",children:[r.jsx("svg",{className:"h-6 w-6 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Quick Setup Required"})]}),r.jsx("p",{className:"text-blue-800 text-sm",children:"To get started, you'll need to configure your OpenAI-compatible API key. This allows the AI to generate your personalized adventure stories and images."}),r.jsxs("div",{className:"mt-4 text-xs text-blue-700",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Supported services:"})," OpenAI, Azure OpenAI, and other compatible APIs"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Privacy:"})," Your API key is stored securely on your device only"]})]})]}),r.jsxs("button",{onClick:x,className:"inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-lg shadow-sm text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-105",children:[r.jsx("svg",{className:"mr-3 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),"Get Started"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"By continuing, you agree to configure your own AI service credentials"})]})})}),a0=M.createContext(void 0),Jg=({children:x})=>{const[i,o]=M.useState([]),c=M.useCallback(()=>`error-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,[]),d=M.useCallback((A,B,Y,q=!0)=>{const K={id:c(),message:A,type:B,timestamp:new Date,retryAction:Y,dismissible:!0,autoHide:q};return o(le=>[...le,K]),q&&(B==="success"||B==="info"||B==="warning")&&setTimeout(()=>{o(le=>le.filter(ae=>ae.id!==K.id))},5e3),K.id},[c]),f=M.useCallback((A,B)=>d(A,"error",B,!1),[d]),h=M.useCallback(A=>d(A,"warning",void 0,!0),[d]),g=M.useCallback(A=>d(A,"info",void 0,!0),[d]),p=M.useCallback(A=>d(A,"success",void 0,!0),[d]),y=M.useCallback(A=>{o(B=>B.filter(Y=>Y.id!==A))},[]),S=M.useCallback(()=>{o([])},[]),N={errors:i,showError:f,showWarning:h,showInfo:g,showSuccess:p,dismissError:y,clearAllErrors:S};return r.jsx(a0.Provider,{value:N,children:x})},n0=()=>{const x=M.useContext(a0);if(!x)throw new Error("useError must be used within an ErrorProvider");return x},l0=M.createContext(void 0),$g=({children:x})=>{const[i,o]=M.useState(()=>localStorage.getItem("theme")||"light");M.useEffect(()=>{const f=window.document.documentElement;f.classList.remove("light","dark"),f.classList.add(i),localStorage.setItem("theme",i)},[i]);const c=()=>{o(f=>f==="light"?"dark":"light")},d=f=>{o(f)};return r.jsx(l0.Provider,{value:{theme:i,toggleTheme:c,setTheme:d},children:x})},Fg=()=>{const x=M.useContext(l0);if(!x)throw new Error("useTheme must be used within ThemeProvider");return x},Wg=()=>{const{errors:x,dismissError:i}=n0();if(x.length===0)return null;const o=f=>{switch(f){case"error":return r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})});case"warning":return r.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})});case"success":return r.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"info":return r.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},c=f=>{switch(f){case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800"}},d=f=>{switch(f){case"error":return"text-red-600 hover:text-red-800 hover:bg-red-100";case"warning":return"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-100";case"success":return"text-green-600 hover:text-green-800 hover:bg-green-100";case"info":return"text-blue-600 hover:text-blue-800 hover:bg-blue-100"}};return r.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:x.map(f=>r.jsx("div",{className:`rounded-lg border p-4 shadow-lg transition-all duration-300 ${c(f.type)}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:o(f.type)}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:f.message}),f.timestamp&&r.jsx("p",{className:"text-xs opacity-75 mt-1",children:f.timestamp.toLocaleTimeString()})]}),r.jsxs("div",{className:"ml-4 flex-shrink-0 flex space-x-1",children:[f.retryAction&&r.jsxs("button",{onClick:()=>{f.retryAction(),i(f.id)},className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded transition-colors ${d(f.type)}`,title:"Retry operation",children:[r.jsx("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]}),f.dismissible&&r.jsx("button",{onClick:()=>i(f.id),className:`inline-flex items-center p-1 text-xs rounded transition-colors ${d(f.type)}`,title:"Dismiss notification",children:r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},f.id))})},Pg=({message:x="Loading...",size:i="medium",inline:o=!1,className:c=""})=>{const d=()=>{switch(i){case"small":return"h-4 w-4";case"medium":return"h-6 w-6";case"large":return"h-8 w-8"}},f=()=>{switch(i){case"small":return"text-xs";case"medium":return"text-sm";case"large":return"text-base"}};return o?r.jsxs("div",{className:`inline-flex items-center space-x-2 ${c}`,children:[r.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${d()}`}),x&&r.jsx("span",{className:`text-gray-600 ${f()}`,children:x})]}):r.jsxs("div",{className:`flex flex-col items-center justify-center space-y-3 ${c}`,children:[r.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${d()}`}),x&&r.jsx("p",{className:`text-gray-600 ${f()} text-center`,children:x})]})},eh=()=>{const{theme:x,toggleTheme:i}=Fg();return r.jsx("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors","aria-label":`Switch to ${x==="light"?"dark":"light"} mode`,title:`Switch to ${x==="light"?"dark":"light"} mode`,children:x==="light"?r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};class th extends Tg.Component{constructor(i){super(i),this.state={hasError:!1}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,o){console.error("Error caught by boundary:",i,o),this.props.onError?.(i,o)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page to try again."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const ah=()=>r.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:r.jsx(Pg,{message:"Loading your adventure...",size:"large"})}),nh=()=>{const[x,i]=M.useState("welcome"),[o,c]=M.useState(null),[d,f]=M.useState(null),[h,g]=M.useState(!0),[p,y]=M.useState(!1),[S,N]=M.useState(0),[A,B]=M.useState(!1),{showError:Y,showSuccess:q,showWarning:K,clearAllErrors:le}=n0(),ae=M.useCallback(async()=>{try{g(!0),le();const H=ka.loadConfig(),V=At.getGameCount()>0;if(H){const he=js.validateConfig(H);he.isValid?(c(H),i("launcher"),y(!1),he.warnings.length>0&&he.warnings.forEach(v=>K(v))):(console.warn("Invalid existing config found:",he.errors),K("Your saved configuration is invalid and needs to be updated."),y(!0),i("welcome"))}else V?(i("settings"),y(!1),K("Please configure your AI settings to continue playing.")):(y(!0),i("welcome"));const se=At.validateAndRepairStorage();se.isValid||(console.warn("Storage validation issues:",se.errors),se.repairedCount>0&&K(`Repaired ${se.repairedCount} corrupted saved game(s).`),se.errors.forEach(he=>{he.includes("Repaired")||Y(he,()=>ae())}))}catch(H){const V=H instanceof Error?H.message:"Failed to initialize application";Y(V,()=>ae()),console.error("App initialization error:",H)}finally{g(!1)}},[Y,K,le]);M.useEffect(()=>{ae()},[ae]);const Q=H=>{try{const V=js.validateConfig(H);if(!V.isValid){Y(`Configuration validation failed: ${V.errors.join(", ")}`);return}ka.saveConfig(H),c(H),i("launcher"),y(!1),q("AI configuration saved successfully!"),V.warnings.length>0&&V.warnings.forEach(se=>K(se))}catch(V){const se=V instanceof Error?V.message:"Failed to save configuration";Y(se,()=>Q(H)),console.error("Config save error:",V)}},$=()=>{i("settings")},[Ce,be]=M.useState("standard"),[X,O]=M.useState(void 0),[D,G]=M.useState(!1),ie=(H="standard",V)=>{f(null),be(H),O(V),G(!1),B(!1);const se=ka.loadConfig();se&&c(se),i("game")},re=H=>{f(H),G(!1),B(!1);const V=ka.loadConfig();V&&c(V),i("game")},Be=()=>{const H=ka.loadConfig();H&&c(H),i("settings")},Z=()=>{f(null);const H=ka.loadConfig();H&&c(H),x==="game"||x==="settings"?(G(!1),B(!0),i("launcher")):(G(!1),B(!1),i("launcher"),N(V=>V+1))},de=()=>{f(null);const H=ka.loadConfig();H&&c(H),G(!0),B(!1),i("launcher")},C=(H,V)=>{console.error("Global error boundary triggered:",H,V),Y(`Application error: ${H.message}`,()=>window.location.reload())};return h?r.jsx(ah,{}):r.jsx(th,{onError:C,children:r.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col",children:[x!=="welcome"&&r.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[r.jsx("div",{className:"flex items-center min-w-0",children:r.jsxs("button",{onClick:Z,className:"flex items-center space-x-2 text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[r.jsx("div",{className:"flex items-center justify-center h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-blue-100 dark:bg-blue-900 flex-shrink-0",children:r.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),r.jsx("h1",{className:"text-base sm:text-xl font-bold truncate",children:"AI Adventure"})]})}),r.jsxs("nav",{className:"flex items-center space-x-1 sm:space-x-4",children:[r.jsx(eh,{}),x!=="launcher"&&r.jsxs("button",{onClick:Z,className:"inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsxs("svg",{className:"sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Games"})]}),r.jsxs("button",{onClick:Be,className:`inline-flex items-center px-2 sm:px-3 py-1.5 sm:py-2 border shadow-sm text-xs sm:text-sm leading-4 font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${x==="settings"?"border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900 hover:bg-blue-100 dark:hover:bg-blue-800":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[r.jsxs("svg",{className:"sm:mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]})})}),r.jsxs("main",{className:`flex-1 ${x==="welcome"?"":"py-3 sm:py-6"}`,children:[x==="welcome"&&r.jsx(Zg,{onGetStarted:$}),x==="settings"&&r.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 lg:px-8",children:r.jsx(Ig,{config:o,onConfigSave:Q,onClose:p?void 0:()=>i("launcher")})}),x==="launcher"&&r.jsx(Qg,{aiConfig:o,onConfigurationNeeded:Be,onStartNewGame:ie,onResumeGame:re,startWithModeSelection:D,startWithSavedGames:A},S),x==="game"&&r.jsx(qg,{aiConfig:o,onConfigurationNeeded:Be,onBackToLauncher:Z,onNewGame:de,gameToResume:d,gameMode:Ce,customScene:X})]}),x!=="welcome"&&r.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:r.jsx("div",{className:"max-w-7xl mx-auto py-3 sm:py-4 px-2 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[r.jsx("p",{className:"text-center sm:text-left",children:"AI-powered CYOA"}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[o&&r.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300",children:[r.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),"Connected"]}),r.jsxs("span",{className:"truncate max-w-[150px] sm:max-w-none",children:["Model: ",o?.model||"Not configured"]})]})]})})}),r.jsx(Wg,{})]})})};function lh(){return r.jsx($g,{children:r.jsx(Jg,{children:r.jsx(nh,{})})})}zg.createRoot(document.getElementById("root")).render(r.jsx(M.StrictMode,{children:r.jsx(lh,{})}));
